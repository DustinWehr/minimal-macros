/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(k){function d(n){if(a[n])return a[n].exports;var m=a[n]={exports:{},id:n,loaded:!1};k[n].call(m.exports,m,m.exports,d);m.loaded=!0;return m.exports}var a={};d.m=k;d.c=a;d.p="";return d(0)})([function(k,d,a){a(2);a(3);a(334);a(335);a(336);a(338);a(340);a(342);k.exports=a(9)},,function(k,d,a){var n=a(3),m=a(314),f=a(7),h=a(322),l=a(9),g=a(8),b=a(14),c=a(302),e=a(325);window.setTimeout(function(){m.Language.initializeLanguageClass();window.structure_together=window.structure_together||
{};window.structure_together.renderFromTop=function(){f.dlogcat(l.LogTypes.startup,"renderFromTop not yet set by DocController.")};window.syncing_data={widgets:{rtInMemCheckbox:function(){return b.stwidgets.rtInMemCheckbox},loadFileIdTextInput:function(){return b.stwidgets.loadFileIdTextInput}},populateFileList:c.populateFileList};n.STApp.the=new n.STApp;window.structure_together.sapp=n.STApp.the;window.structure_together.googleJsonToSTData=g.googleJsonToSTData;window.structure_together.inEditMode=
function(){return n.STApp.the.userMode!==l.STUserModes.reader};n.STApp.the.start();h.introduce_debugging_globals();c.setupWidgetsAndClickHandlers();window.structure_together.debug.tests&&e.testingSetupAfterDOMLoaded()},300)},function(k,d,a){function n(a){a=a||p.stwidgets.languageSelect.value;var b=structure_together.languageModules[a];if(!b)throw Error("Need to register Language "+a+" in structure_together.languageModules (see initializeGivenOrUIChosenLanguage).\nRemember to add ts file to webpack config.");
b.ensureInitialized();return b.lang}function m(){return"st_doc_"+Math.random().toString()}var f=a(4),h=a(5),l=a(7),g=a(272),b=a(264),c=a(290),e=a(298),p=a(14),t=a(302),u=a(249),v=a(9),y=a(8),r=a(259),x=a(297),A=a(311),z=a(313),C=a(265);d.initializeGivenOrUIChosenLanguage=n;var B={streference:{lang:"structured-text",format:"googlejson",path:"../../misc-non-code/local_json_doc_backups/streference.google.json",filename:"Structure Together Reference"},lh:{lang:"ifpdmock",format:"googlejson",path:"../../misc-non-code/local_json_doc_backups/lh_arg_for_demo_latest.g.json",
filename:"LH demo"},lewis:{lang:"ifpdmock",format:"googlejson",path:"../../misc-non-code/local_json_doc_backups/lewis_dialogue_for_demo2.g.json",filename:"lewis demo 2"},firstgenesis:{lang:"firstgenesis",format:"shortjson",path:"../acc-fg-nogoog/firstgenesis.json",filename:"firstgenesis-demo",userModeStart:v.STUserModes.localauthor,onStartup:function(){$("#add-missing-mutids").hide();$("#reduceConstants").hide();$("[for=reduceConstants]").hide();$("#copy-json-to-clipboard-button").hide();$("#paste-json-from-clipboard-container").hide()}}},
D=function(){function a(){var c=this;this._open_stdocs=new Map;this.refactorings=[];this.tab_level_plugins=new Map;this.nodeFocus=new (function(){function a(a){this.nodeidToNode=a;this.focused_node=this.focused_nodeid=null}Object.defineProperty(a.prototype,"id",{get:function(){return this.focused_nodeid},set:function(a){if(this.focused_nodeid=a){var b=this.nodeidToNode(a);b||l.derr("Failed to get STNode from node id: ",a);this.focused_node=b}else this.focused_node=null},enumerable:!0,configurable:!0});
Object.defineProperty(a.prototype,"node",{get:function(){return this.focused_node},set:function(a){this.focused_node=a;this.focused_nodeid=f.nottriv(a)?a.oid:null},enumerable:!0,configurable:!0});return a}())(function(a){return c.main_display_rstdoc.ogetNodeByPermId(a)});this.callbacks={hookupControllerAfterSTDocWrapperBuilt:function(a,e){e&&e.doc_ops_before_hookup_controller&&e.doc_ops_before_hookup_controller(a);c.nodeFocus.id=null;c.controller_of_main_display_wstdoc&&c.unloadControllerIfPresent();
new g.STController(a,b.AbstractDocView.ROOT_ELEM_ID,c.tab_level_plugins,u.DEFAULT_PLUGINS);c.controller_of_main_display_wstdoc.buildVMAndRender(!0,1);e&&e.doc_ops_after_hookup_controller&&e.doc_ops_after_hookup_controller(a)},whenNewSyncingDocumentReadyForUIEdits:function(a,b,e,g){void 0===g&&(g=!0);l.assert_nt(a,b);l.dlog("This is the SyncingDocument:",a);l.dlog("This is its SyncingModel:",a.getModel());a=c.afterLoadingSyncingDocumentOfSTDoc(a,b);g&&(c.main_display_stdocid=a.stdocid);y.setLanguageId(a.rootmap,
a.stlang.name);a.rootmap.has(h.ReadableSTDoc.TOP_NODE_KEY)||(a.newTop(),a.fillDefaults(a.top,!0));try{a.buildSTDocWrapperRecursivelyFromSTDocData()}catch(I){l.derr("Exception in buildSTDocWrapperRecursivelyFromSTDocData in whenNewSyncingDocumentReadyForUIEdits:",I)}g&&c.callbacks.hookupControllerAfterSTDocWrapperBuilt(a,e)},whenExistingSyncingDocumentReadyForUIEdits:function(a,b,e,g){void 0===g&&(g=!0);var h=y.getLanguageIdFromFileData(a.getModel().getRoot());f.triv(h)&&console.error("No _language_id found in the document data. Will try to use the currently selected language in GUI.");
a=c.afterLoadingSyncingDocumentOfSTDoc(a,b,h);g&&(c.main_display_stdocid=a.stdocid);try{a.buildSTDocWrapperRecursivelyFromSTDocData()}catch(L){console.error("Exception in buildSTDocWrapperRecursivelyFromSTDocData in whenExistingSyncingDocumentReadyForUIEdits:",L)}g&&c.callbacks.hookupControllerAfterSTDocWrapperBuilt(a,e)}};f.setTheOnly(a,this)}Object.defineProperty(a.prototype,"controller_of_main_display_wstdoc",{get:function(){return g.STController.the},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"userMode",{get:function(){return p.stwidgets.userModeInput.getValue()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"last_loaded_wstdoc",{get:function(){return this._open_stdocs.get(this.last_loaded_docid)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"main_display_wstdoc",{get:function(){return this._open_stdocs.get(this.main_display_stdocid)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"main_display_rstdoc",{get:function(){return this._open_stdocs.get(this.main_display_stdocid)},
enumerable:!0,configurable:!0});a.prototype.get_rstdoc=function(a){l.assert_nt(a);return this._open_stdocs.get(a)};a.prototype.get_wstdoc=function(a){l.assert_nt(a);return this._open_stdocs.get(a)};a.prototype.someFileLoaded=function(){return 0<this._open_stdocs.size};a.prototype.controllerLoaded=function(){return null!=this.controller_of_main_display_wstdoc};a.prototype.unloadFile=function(a){this.main_display_stdocid===a&&(this.main_display_stdocid=null);this.removeAllListenersOnActiveDocIfThereIsOne();
this.filesmanager.close_syncing_doc(a);this._open_stdocs.delete(a)};a.prototype.removeAllListenersOnActiveDocIfThereIsOne=function(){if(this.main_display_stdocid){var a=this.main_display_wstdoc.stdocid,b=this.main_display_wstdoc.syncdoc;b?(b.removeAllEventListeners(),(b=b.getModel())?(b.removeAllEventListeners(),(a=b.getRoot())&&a.removeAllEventListeners&&a.removeAllEventListeners()):l.dnote("Didn't call SyncingModel's removeAllEventListeners method for file id "+a+" because syndoc.getModel() was trivial")):
l.dnote("Didn't call SyncingDocument and SyncingModel removeAllEventListeners methods for file id "+a+" because apparently I already removed it from _open_syncing_docs")}};a.prototype.unloadControllerIfPresent=function(){l.dremind("This method is problematic when switching active persistence model, since this.filesmanager will already have been switched.");this.removeAllListenersOnActiveDocIfThereIsOne();this.controller_of_main_display_wstdoc&&this.controller_of_main_display_wstdoc.destroy()};a.prototype.start=
function(){var a=this;this.createTabLevelPlugins();t.widgets_loaded?(l.dlogcat(v.LogTypes.startup,"widgets_loaded is true. calling STApp.loadOrChangePersistenceModel"),this.persistenceModuleLoadOrChange(!0)):(l.dlogcat(v.LogTypes.startup,"widgets_loaded is false. pushing STApp.loadOrChangePersistenceModel onto gui-startup callback stack"),t.afterWidgetsLoaded.push(function(){return a.persistenceModuleLoadOrChange(!0)}));structure_together.demo_mode?this._start_demo(structure_together.url_params.demo):
structure_together.fg_mode&&this._start_fg()};a.prototype.restoreJsonBackupOfAllDocs=function(a){var b=this;C.loadJsonFromLocalFile(a,function(a,c,e){console.log("Got what should be a many-docs json");a.forEach(function(a,c){try{b.loadPersistentSTDocFromJson(a,!1,"googlejson");var e=y.getDocIdFromGoogleJsonObj(a),g=h.getDocTitleFromJsonObj(a);l.assert_nt(e,g);b.storeDocIdDocTitlePair(e,g);b.filesmanager.manualSave(e,!0);console.log("Apparent success loading "+e+", "+g)}catch(M){console.warn("Exception trying to load "+
c+"-th json:",M)}})})};a.prototype._start_fg=function(){var a=this,b=function(){p.stwidgets.userModeInput.setValue(v.STUserModes.localauthor);B.firstgenesis.onStartup();p.stwidgets.languageSelect.value="firstgenesis";n("firstgenesis");p.stwidgets.newFileNameTextInput.setValue("WhitingHierarchy.0");var b=a.appdata.firstIdWithThisFilenameOrNull("WhitingHierarchy.0");null!=b&&"null"!=b&&"undefined"!=b?(console.warn("Id for WhitingHierarchy.0 found. Will try to load it. Id is "+b+"."),p.stwidgets.loadFileIdTextInput.setValue(b),
a.loadPersistentSTDoc(b,!0)):(console.warn("Id for WhitingHierarchy.0 NOT found. Will create a new file from the json file stored at path ../acc-fg-nogoog/WhitingHierarchy.0.json."),C.loadJsonFromLocalFile("../acc-fg-nogoog/WhitingHierarchy.0.json",function(b,c,e){a.loadPersistentSTDocFromJson(b,!0,"shortjson");b=y.getDocIdFromShortJsonObj(b);a.storeDocIdDocTitlePair(b,"WhitingHierarchy.0");a.filesmanager.manualSave(b,!0)}))};t.widgets_loaded?b():t.afterWidgetsLoaded.push(b)};a.prototype._start_demo=
function(a){var b=this,c="string"===typeof a?[a]:a;t.afterWidgetsLoaded.push(function(){var a=B[c[0]];if(a.onStartup)a.onStartup();p.stwidgets.userModeInput.setValue(a.userModeStart||v.STUserModes.reader);b.persistenceModuleLoadOrChange(!1,v.PersistTypes.Local);a=a.lang;p.stwidgets.languageSelect.value=a;n(a);c.forEach(function(a,c){var e=B[a];e.dependencies&&console.warn("Need to put the referred-to file in the URL params... except even then it's broken apparently");var g=e.filename,f=!1,h=b.appdata.firstIdWithThisFilenameOrNull(g);
structure_together.demo_load_prev?null!=h&&"null"!=h&&"undefined"!=h&&(console.warn("id for "+a+" NOT found. will create new local storage entry from json file."),f=!0):(console.warn("structure_together.demo_load_prev is false, so won't try to load previous saved version (if any)\nTODO: delete old versions."),f=!0);f?C.loadJsonFromLocalFile(e.path,function(a,f,h){console.log("Got the json");"shortjson"===e.format?(b.loadPersistentSTDocFromJson(a,0===c,"shortjson"),a=y.getDocIdFromShortJsonObj(a)):
(b.loadPersistentSTDocFromJson(a,0===c,"googlejson"),a=y.getDocIdFromGoogleJsonObj(a));l.assert_nt(a);b.storeDocIdDocTitlePair(a,g);b.filesmanager.manualSave(a,!0)}):(console.warn("document found in local storage from previous run of this demo for demo key "+a+". file id is: ",h),b.loadPersistentSTDoc(h,0===c))});1<c.length&&(console.warn("Multiple demo keys",c),f.polluntil(200,500,function(){return null!=b.controller_of_main_display_wstdoc},function(){b.controller_of_main_display_wstdoc.reload()},
"first reload for multi-doc demos"))})};a.prototype.persistenceModuleLoadOrChange=function(b,g){l.dwarncat(v.LogTypes.important_event,"entering persistenceModuleLoadOrChange(force="+b+", persistType="+g+")");g?p.stwidgets.modelImplemSelect.value!==g&&(l.dwarncat(v.LogTypes.important_event,"GUI form for persistType not set or not set to persistenceModuleLoadOrChange param value, so setting it to "+g),p.stwidgets.modelImplemSelect.value=g):(g=p.stwidgets.modelImplemSelect.value)?l.dwarncat(v.LogTypes.important_event,
"persistType = "+g+" taken from GUI form"):(g=v.PersistTypes.Local,l.dwarncat(v.LogTypes.important_event,"No persistType arg to persistenceModuleLoadOrChange and no value in GUI form, so setting to "+g+" by default"));if(!b){var h=!1;switch(g){case v.PersistTypes.Local:h=this.persist_type_for_Shared_and_Private===g&&this.appdata&&this.appdata===this.appdata_local&&this.filesmanager&&this.filesmanager===this.filesmanager_local&&this.appdata.isLoaded();break;case v.PersistTypes.RT:h=this.persist_type_for_Shared_and_Private===
g&&this.appdata&&this.appdata===this.appdata_rt&&this.filesmanager&&this.filesmanager===this.filesmanager_rt&&this.appdata.isLoaded()}if(h){l.dlog("Skipping persistenceModuleLoadOrChange because force === false, appropriate things already loaded, and <STApp>.appdata <STApp>.filesmanager appropriately set.");return}}this.unloadControllerIfPresent();this.persist_type_for_Shared_and_Private=g;var d;structure_together.autoload&&(structure_together.demo_mode||this.someFileLoaded()?l.dnote("Won't autoload because in demo mode or some file id already loaded"):
d=function(){var b=p.stwidgets.loadFileIdTextInput.getValue();f.strtriv(b)?l.dnote("Can't autoload because stwidgets.loadFileIdTextInput.getValue() is trivial"):a.the.loadPersistentSTDoc(b,!0)});switch(g){case v.PersistTypes.RT:if(!window.gapi){alert("WARNING: gapi is not defined, so setting persistence model to "+v.PersistTypes.Local+" and recalling <STApp>.persistenceModuleLoadOrChange");this.persistenceModuleLoadOrChange(b,v.PersistTypes.Local);break}this.appdata=this.appdata_rt=this.appdata_rt||
new A.RealtimeAppData;this.filesmanager=this.filesmanager_rt=this.filesmanager_rt||new e.RealtimeFilesManager(this.appdata_rt);this.appdata_rt.loadAppData(d);$(".google-realtime-specific-forms").show();break;case v.PersistTypes.Local:this.appdata=this.appdata_local=this.appdata_local||new z.LocalAppData,this.filesmanager=this.filesmanager_local=this.filesmanager_local||new c.LocalFilesManager(this.appdata_local),this.appdata_local.loadAppData(d),$(".google-realtime-specific-forms").hide()}};a.prototype.afterLoadingSyncingDocumentOfSTDoc=
function(a,b,c){l.assert_nt(a,b);window.syndoc=a;this.filesmanager.record_syncing_doc_is_open(b,a);this.ensureHas_storage_and_version_indep_doc_id(a.getModel().getRoot(),b);this.last_loaded_docid=b;c=n(c);l.dlogcat("load-file-progress","Language is "+c.name);var e=this.appdata.getPersistentPrivateState(b),g=this._open_stdocs.get(b);g?l.dwarn("WritableSTDoc for "+b+" already created. Not creating another one to prevent memory leak (though maybe should to reset errors)."):g=new h.WritableSTDoc(c,a,
b,e,this.appdata.appDataDoc);l.dwarn("Adding STDoc to map of open STDocs:",b,g);this._open_stdocs.set(b,g);p.stwidgets.loadFileIdTextInput.setValue(b);return g};a.prototype.newPersistentSTDoc=function(a){var b=this;l.assert_nt(this.filesmanager);a.hookup_controler&&this.controllerLoaded()&&(l.dwarn("Controller already loaded. Will try to unload."),this.unloadControllerIfPresent());var c=a.filename||p.stwidgets.newFileNameTextInput.getValue();this.filesmanager.newPersistentSyncingDocument(c,function(c,
e){return b.callbacks.whenNewSyncingDocumentReadyForUIEdits(c,e,a,a.hookup_controler)},a.initialJson,m)};a.prototype.loadPersistentSTDoc=function(a,b){var c=this;void 0===b&&(b=!0);l.assert_nt(this.filesmanager);b&&this.controllerLoaded()&&(l.dwarn("Controller already loaded. Will try to unload."),this.unloadControllerIfPresent());f.triv(a)&&(a=p.stwidgets.loadFileIdTextInput.getValue());this._open_stdocs.has(a)?(l.dwarn("STDoc with id "+a+" already loaded. Skipping to whenExistingSyncingDocumentReadyForUIEdits."),
this.callbacks.whenExistingSyncingDocumentReadyForUIEdits(this.filesmanager.get_open_syncing_doc(a),a,null,b)):this.filesmanager.loadPersistentSyncingDocument(a,function(a,e){return c.callbacks.whenExistingSyncingDocumentReadyForUIEdits(a,e,null,b)})};a.prototype.loadPersistentSTDocFromJsonOnFilesystem=function(){var a=this,b=document.getElementById("filesystem_json_file_input").files[0],c=new FileReader;c.onload=function(b){b=JSON.parse(b.target.result);l.dnote("Json file loaded and parsed. Stored in window._json.");
window._json=b;l.dlog(b);a.loadPersistentSTDocFromJson(b,!0,"googlejson")};c.readAsText(b)};a.prototype.loadPersistentSTDocFromJson=function(a,b,c,e){var g=this;void 0===b&&(b=!0);l.assert_nt(this.filesmanager,c);var f="googlejson"===c?y.getDocIdFromGoogleJsonObj(a):y.getDocIdFromShortJsonObj(a);l.dassert(!f||!e);f&&(e=f);e||(e=m());b&&this.controllerLoaded()&&(l.dwarn("Controller already loaded. Will try to unload."),this.unloadControllerIfPresent());try{l.dwarn("Trying to load from json"),this.last_loaded_docid=
e,this.filesmanager.loadPersistentSyncingDocumentFromJson(e,a,c,function(a,c){return g.callbacks.whenExistingSyncingDocumentReadyForUIEdits(a,c,null,b)})}catch(L){throw console.error("Exception calling FilesManager.loadPersistentSyncingDocumentFromJson, BUT not clearing STApp.last_loaded_docid ",L),L;}};a.prototype.createTabLevelPlugins=function(){var a=this;r.TAB_LEVEL_PLUGIN_CLASSES.forEach(function(b,c){var e=r.plugin_switches.get(c+"Checkbox");l.assert_nt(e);e.enabled()&&(l.dlogcat(v.LogTypes.plugin_notice,
"Creating tab-level Plugin object for "+c+" from STApp."),a.tab_level_plugins.set(c,new b(e)))})};a.prototype.applyRefactoringsToAllDocsKnownToFilesManager=function(a){var b=this;void 0===a&&(a=!0);this.refactorings.forEach(function(c){c.applyToAll(b.filesmanager,b.appdata,a)})};a.prototype.applyRefactoringsToLastLoadedSyncingDocument=function(a){var b=this;void 0===a&&(a=!0);this.refactorings.forEach(function(c){c.apply(b.last_loaded_wstdoc.syncdoc,a)})};a.prototype.ensureHas_storage_and_version_indep_doc_id=
function(a,b){l.assert_nt(a);a.has(v.SystDocPropNames.storage_and_version_indep_doc_id)||(b=b||m(),a.set(v.SystDocPropNames.storage_and_version_indep_doc_id,b),l.dwarn("Assigned new storage_and_version_indep_doc_id:",b),l.dlog("The map now:",a),f.nottriv(this.filesmanager.manualSave)&&this.filesmanager.manualSave(b,!0));l.dassert("string"===typeof a.get(v.SystDocPropNames.storage_and_version_indep_doc_id))};a.prototype.storeDocIdDocTitlePair=function(a,b){a=a||this.last_loaded_docid;if(f.triv(b))try{b=
this._open_stdocs.get(a).getTitle()}catch(H){l.derr("Error trying to get STDoc title for STDoc id "+a);return}l.dwarn("THIS METHOD MIGHT BE OBSOLETE");try{l.dlog("storing doc title "+b+" with fileid "+a),this.appdata.addFileId(a,b),this.appdata.saveAppData()}catch(H){throw console.error("Error trying to retrieve current fileid or doc title"),H;}};return a}();d.STApp=D;d.newStorageDependentSTDocId=m;d.saveLastLoadedSTDocDataToLocal=function(a){l.assert_nt(a);x.setLocalStorageFromSTDocDataNOW(a,D.the.last_loaded_wstdoc.rootmap);
var b=new z.LocalAppData;b.loadAppData();b.addFileId(a,D.the.last_loaded_wstdoc.getTitle());b.saveAppData();b.loadAppData()}},function(k,d){function a(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];N.has(a)||(N.add(a),console.warn("%cRemind once: "+a,window.CONSOLE_REMIND_STYLE,b))}function n(a,c){for(var e=[],f=2;f<arguments.length;f++)e[f-2]=arguments[f];if(!a){g(e)?console.error.apply(console,e):0<b(e)&&console.error(e);if(c)throw Error("Failed assertion %test%\n"+c+"\n");throw Error("Failed assertion %test%\n");
}}function m(a,b){void 0===b&&(b=!1);var c=b?"[ ":"[\n",e;for(e in a)c+=(b?"":"\t")+l(a[e],b)+","+(b?" ":"\n");return c+(b?" ]":"]")}function f(a,b){void 0===b&&(b=!1);var c=b?"{ ":"{\n";a.forEach(function(a){c+=(b?"":"\t")+l(a,b)+","+(b?" ":"\n")});return c+=b?" }":"}"}function h(a,b){void 0===b&&(b=!1);var c=b?"{ ":"{\n",e;for(e in a)c+=(b?"":"\t")+e+": "+l(a[e],b)+","+(b?" ":"\n");return c+(b?" ]":"]")}function l(a,b){void 0===b&&(b=!1);return a instanceof Set?f(a,b):a instanceof Array?m(a,b):
"object"===typeof a?h(a,b):a.toString()}function g(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return 1===b.apply(void 0,a)&&a[0]instanceof Array}function b(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=0;x.apply(void 0,[function(){c+=1}].concat(a));return c}function c(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];if(!a){c&&console.error(c);if(b){if("string"===typeof b)throw Error("Failed assertion: "+b);console.error(b);throw Error("Failed assertion (see prev line for non-string message)");
}throw Error("Failed assertion (no message provided)");}}function e(a,b){b.forEach(function(b){C(a,b)||a.push(b)})}function p(a){if(a instanceof Array){for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=a[c];return b}if("object"===typeof a){var e={};Object.getOwnPropertyNames(a).forEach(function(b){e[b]=a[b]});return e}return a}function t(a,b){if(a instanceof Array)a.forEach(b);else if(a instanceof Set)a.forEach(b);else for(n(D(a,"next"));;){var c=a.next();if(c.done)break;b(c.value)}}function u(a){var b=
Array(a.size),c=0;a.forEach(function(a,e){b[c]=e;c++});return b}function v(a){return null===a||void 0===a}function y(a,b){if(a&&0!==a.length)for(var c=0;c<a.length;c++)b(a[c])}function r(a,b,c){a=a.slice();var e=[];if(c)for(var g=0;g<a.length;)if(a[g]==b[g])g+=1;else{for(c=g+1;a[g]!=b[c]&&c<b.length;)c+=1;e.push([g,c+1]);z(a,g,c+1);if(e.length>a.length)return null}else for(g=a.length-1;0<=g;)if(a[g]==b[g])--g;else{for(c=g-1;a[g]!=b[c]&&0<=c;)--c;e.push([g,c]);z(a,g,c);if(e.length>a.length)return null}return e}
function x(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];for(c=0;c<b.length;c++)a(b[c],c)}function A(a){if("name"in a)return a.name;var b=S.exec(a.toString());if(b)a=b[1];else if(a.name)a=a.name;else throw console.error("Failed trying to extract name of function with regex. Function: ",a),Error("Failed trying to extract name of function with regex.");return a}function z(a,b,c){c!=b&&(c<b?a.splice(c,0,a.splice(b,1)[0]):a.splice(c-1,0,a.splice(b,1)[0]))}function C(a,b){return-1!=a.indexOf(b)}
function B(a,b){for(var c=0;c<a.length&&!1!==b(a[c],c);c++);}function D(a,b){if(null===a||void 0===a)throw Error("First arg to objhas should not be null or undefined.");return b in a}function G(a,b){var c=null,e;for(e=0;e<a.length;e++)if(b(a[e])){if(null!==c)throw Error("findUniqueOrError(arr,pred) found multiple element of arr that satisfy pred.");c=e}if(null===c)throw Error("findUniqueOrError(arr,pred) found no element of arr that satisfies pred.");return c}function E(a,b){var c=[];a&&y(a.childNodes,
function(e){var g=e.nodeType;if(3==g)b&&!b(e,a)||c.push([e,a]);else if(1==g||9==g||11==g)c=c.concat(E(e,b))});return c}function F(a,b){var c=[];a&&y(a.childNodes,function(e){if(!b||b(e,a)){var g=e.nodeType;if(3==g)c.push([e,a]);else if(1==g||9==g||11==g)c=c.concat(F(e,b))}});return c}function H(a,b,c,e){void 0===e&&(e=!0);return a.replace(new RegExp(e?_.escapeRegExp(b):b,"g"),c)}function J(a,b,c,e){void 0===e&&(e=!0);b=e?_.escapeRegExp(b):b;return a.replace(new RegExp("\\b"+b+"\\b","g"),c)}function K(a,
b,c){c.prependLocalStoragePrefix&&(a="structure_together.local.file."+a);var e=localStorage.getItem(a);"string"!==typeof e?console.warn("Ignoring non-string stored in localStorage at key "+a):(b.forEach(function(a){a instanceof Array?e=c.notOnlyWords?H(e,a[0],a[1],!c.notsafe):J(e,a[0],a[1],!c.notsafe):console.error("WARNING!")}),localStorage.setItem(a,e))}var I=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),L=new Set;d.warnonce=function(a,b){L.has(a)||(L.add(a),b?console.warn(a,b):console.warn(a))};var N=new Set;d.remindonce=a;window.remindonce=a;var O=new Map;d.throttled=function(a,b,c,e){void 0===e&&(e=!1);var g=O.get(a);if(!g&&(g={state:0,last_run_time:window.performance.now()},O.set(a,g),!e)){b();return}0===g.state?(a=window.performance.now()-g.last_run_time,
a>c?(b(),g.state=0,g.last_run_time=window.performance.now()):(g.callback_to_run=b,g.state=1,window.setTimeout(function(){g.callback_to_run();g.state=0;g.last_run_time=window.performance.now()},c-a))):g.callback_to_run=b};d.polluntil=function(a,b,c,e,g){var f=0,h=window.setInterval(function(){f++;c()&&(window.clearInterval(h),g&&console.log('polluntil(..., "'+g+'") exercised after '+f+" tests."),e());f>b&&window.clearInterval(h)},a)};d.dassert=n;k=function(){function a(a){void 0===a&&(a="");this.message=
a;this.name=A(this.constructor)}a.prototype.toString=function(){return this.message?this.name+"("+this.message+")":this.name};return a}();d.DWErrorClass=k;var M=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var c=this,e="";b.forEach(function(a){e+=a.toString()+"\n"});return c=a.call(this,e)||this}I(b,a);return b}(k);d.ShouldntGetHere=M;M=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var c=this,e="";b.forEach(function(a){e+=
"; "+a.toString()});return c=a.call(this,e)||this}I(b,a);return b}(k);d.NotImplemented=M;var Q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}I(b,a);return b}(M);d.NotYetImplemented=Q;var P=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}I(b,a);return b}(M);d.StaticOnly=P;P=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}I(b,a);return b}(M);d.ImplementedInSubclass=P;M=function(a){function b(){return null!==a&&a.apply(this,arguments)||
this}I(b,a);return b}(M);d.ToBeFilledByMixin=M;k=function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var c=this,e="";b.forEach(function(a){e+="; "+a.toString()});return c=a.call(this,e)||this}I(b,a);return b}(k);d.RecoverableInvariantViolation=k;k=function(){function a(a,b){this.name="DWTypeError";this.message="Expected type "+A(b)+" but got some "+typeof a+"."}a.prototype.toString=function(){return this.name+", "+this.message};return a}();d.DWTypeError=k;d.o2s=function(a){return JSON.stringify(a)};
d.prettyJson=function(a){return JSON.stringify(a,null,"\t")};d.prettyArray=m;d.prettySet=f;d.prettyObj=h;d.pretty=l;d.isarray=g;d.count=b;d.production_assert=c;d.mergeSimpleObjectsSecondIntoFirst=function(a,b,c){if("string"!=typeof a||"string"!=typeof b)a instanceof Array&&b instanceof Array?e(a,b):"object"===typeof a&&"object"===typeof b&&Object.getOwnPropertyNames(b).forEach(function(e){if(e in a){if(a[e]!=b[e]&&"0"!=e){var g=null;c&&(g=c(a[e],b[e]));if(null===g)throw void 0==c&&console.error("chooser not given. needed for "+
e+", "+a[e]+", "+b[e]),new Q("TO DO: Objects have different values for property "+e+", and either chooser() not given, or it returned null. The properties: "+g+", "+a[e]+", "+b[e]);a[e]=p(g)}}else a[e]=p(b[e])})};d.mergeListsSecondIntoFirst=e;d.shallow_copy_if_needed=p;d.replaceElementsOfFirstWithElementsOfSecond=function(a,b){var c;if(a.length<b.length){for(c=0;c<a.length;c++)a[c]=b[c];for(c=a.length;c<b.length;c++)a.push(b[c]);return!0}if(a.length>b.length){for(c=0;c<b.length;c++)a[c]=b[c];for(c=
b.length;c<a.length;c++)delete a[c];return!0}var e=!1;for(c=0;c<a.length;c++)e||a[c]===b[c]||(e=!0),a[c]=b[c];return e};d.setTheOnly=function(a,b){c(null==a.the,A(a)+" is a singleton class and you tried to create a second one before removing reference to first.");a.the=b};d.forEach=t;d.iterForEach=function(a,b){for(;;){var c=a.next();if(c.done)break;b(c.value)}};d.iterToArray={plain:function(a){return _.toArray(a)},withFilterAndMap:function(a,b,c){for(var e=[];;){var g=a.next();if(g.done)break;b(g.value)&&
e.push(c(g.value))}return e},withFilter:function(a,b){for(var c=[];;){var e=a.next();if(e.done)break;b(e.value)&&c.push(e.value)}return c},withMap:function(a,b){for(var c=[];;){var e=a.next();if(e.done)break;c.push(b(e.value))}return c}};d.mapToKeysArrayLinearTime=u;d.mapToValsArrayLinearTime=function(a){var b=Array(a.size),c=0;a.forEach(function(a,e){b[c]=a;c++});return b};d.mapToKeysArray={plain:u,withFilterAndMap:function(a,b,c){var e=[];a.forEach(function(a,g){b(g)&&e.push(c(g))});return e},withFilter:function(a,
b){var c=[];a.forEach(function(a,e){b(e)&&c.push(e)});return c},withMap:function(a,b){var c=Array(a.size),e=0;a.forEach(function(a,g){c[e]=b(g);e++});return c}};d.iterSome=function(a,b){for(var c;c=a.next();)if(b(c.value))return!0;return!1};d.iterFreshId=function(a){for(var b=0;;){var c=a.next();if(c.done)break;else c=Number(c.value),!isNaN(c)&&c>b&&(b=c)}return(b+1).toString()};d.triv=v;d.nottriv=function(a){return null!==a&&void 0!==a};d.arrayExtend=function(a,b){b.forEach(function(b){a.push(b)})};
d.arraySubset=function(a,b){for(var c=0;c<a.length;c++)if(!C(b,a[c]))return!1;return!0};d.arrayGroupBy=function(a,b){var c=new Map;a.forEach(function(a){var e=b(a),g=c.get(e);void 0!=g?g.push(a):c.set(e,[a])});return c};d.arraySome=function(a,b){if(!a||0===a.length)return!1;for(var c=0;c<a.length;c++)if(b(a[c]))return!0;return!1};d.nodelistForEach=y;d.calcMoveSequence=r;d.calcBestMoveSequence=function(a,b){var c=r(a,b,!0);a=r(a,b,!1);return c?!a||a.length>c.length?c:a:a};d.makeMixinApplicator=function(a,
b,c){void 0===c&&(c=!1);return function(e){b.push(e);c&&Object.getOwnPropertyNames(a).forEach(function(b){"length"!==b&&"name"!==b&&"arguments"!=b&&"caller"!=b&&"prototype"!=b&&(e[b]=a[b])});Object.getOwnPropertyNames(a.prototype).forEach(function(b){"constructor"!==b&&(e.prototype[b]=a.prototype[b])})}};d.makeMixinInstanceChecker=function(a){return function(b){for(var c=0;c<a.length;c++)if(b instanceof a[c])return!0;return!1}};d.argsFirstAmongRest=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-
1]=arguments[c];for(c=0;c<b.length;c++)if(a===b[c])return!0;return!1};d.argsForEach=x;d.argsForEach2=function(a,b,c){a(b,0);a(c,1)};d.argsForEach3=function(a,b,c,e){a(b,0);a(c,1);a(e,2)};d.argsForEach4=function(a,b,c,e,g){a(b,0);a(c,1);a(e,2);a(g,3)};var S=/function\s+([^\s\(]+)\s*\(/;d.functionName=A;d.arrayDeleteOrErr=function(a,b){c(b<a.length,"Tried to remove "+b+"-th child but there are not that many children.");try{a.splice(b,1)}catch(T){console.error("Exception try to mutate array:",a,"\nSealed?: ",
Object.isSealed(a))}};d.arrayCopyWithDeleteOrErr=function(a,b){c(b<a.length,"Tried to make a copy of the array with "+b+"-th child removed but there are not that many children.");try{var e=_.clone(a);e.splice(b,1);return e}catch(V){throw console.error("Exception try to mutate array:",a,"\nSealed?: ",Object.isSealed(a)),V;}};d.arrayRemove=function(a,b){b=a.indexOf(b);0<=b&&a.splice(b,1)};d.arrayMove=z;d.arrayInsert=function(a,b,c){a.splice(c,0,b)};d.arrayHas=C;d.arrEqualShallow=function(a,b){if(a.length!==
b.length)return!1;B(a,function(a){return C(b,a)?!0:!1});B(b,function(b){return C(a,b)?!0:!1});return!0};d.arrayCopy=function(a){var b=Array(a.length),c;for(c in a)b[c]=a[c];return b};d.arrayForEachEarlyStop=B;d.orElse=function(a,b){return null===a||void 0===a?b:a};d.nullOrUndef=function(a){return null===a||void 0===a};d.objkeys=function(a){return Object.getOwnPropertyNames(a)};d.objvals=function(a){return Object.getOwnPropertyNames(a).map(function(b){return a[b]})};d.objhas=D;d.objhas_soft=function(a,
b){return null!=a&&b in a};d.objextend=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.forEach(function(b){Object.getOwnPropertyNames(b).forEach(function(c){a[c]&&console.error("Target for object merging already has key "+c);a[c]=b[c]})});return a};d.objForEachOwnKey=function(a,b){for(var c in a)b(c)};d.objForEachOwnVal=function(a,b){for(var c in a)b(a[c])};d.objMapValsToArray=function(a,b){var c=[],e;for(e in a)c.push(b(a[e]));return c};d.objNumVals=function(a){return Object.getOwnPropertyNames(a).length};
d.objToArrayOfOwnKeyValPairs=function(a){var b=[],c;for(c in a)b.push([c,a[c]]);return b};d.objToArrayOfOwnKeyPairs=function(a){var b=[],c;for(c in a)b.push([c,c]);return b};d.mapGetOrErr=function(a,b){a=a.get(b);c(!v(a),"Key "+b.toString()+" is missing");return a};d.mapShallowCopy=function(a){var b=new Map;a.forEach(function(a,c){return b.set(c,a)});return b};d.mapSetAndWarnIfExists=function(a,b,c){a.has(b)&&console.error("Assigning to a map key that was not supposed to have a value assigned yet",
b,a.get(b),c);a.set(b,c)};d.mergeImportedModulesInto=function(a,b){for(var c in b){var e=b[c];if(e instanceof Object&&e.__esModule)for(var g in e)"__esModule"!==g&&"default"!==g&&(a[g]=e[g])}};d.mkobj=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c={};a.forEach(function(a){c[a[0]]=a[1]});return c};d.mkobj2=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(var b={},c=a.length,e=0;e<c;e+=2)b[a[e]]=a[e+1];return b};d.mko=function(a,b){var c={};c[a]=b;
return c};d.findUniqueIndOrError=G;d.findUniqueOrError=function(a,b){return a[G(a,b)]};d.mapOfArraysAdd=function(a,b,c){var e=a.get(b);e?e.push(c):a.set(b,[c])};d.mapOfSetsAdd=function(a,b,c){var e=a.get(b);e||(e=new Set,a.set(b,e));e.add(c)};d.objectSpecialStrMapInvert=function(a){if(a){var b={};Object.getOwnPropertyNames(a).forEach(function(c){a[c].forEach(function(a){b[a]=c})});return b}};d.objectSpecialStrMapInvertMulti=function(a){if(a){var b={};Object.getOwnPropertyNames(a).forEach(function(c){a[c].forEach(function(a){b[a]?
("string"===typeof b[a]&&(b[a]=[b[a]]),b[a].push(c)):b[a]=c})});return b}};d.strContains=function(a,b){return-1!==a.indexOf(b)};d.strEndsWith=function(a,b){return a.substr(a.length-b.length)===b};d.strtriv=function(a){return null===a||void 0===a||""===a};d.elementExists=function(a){return null!=document.getElementById(a)};d.setConstructor=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c=new Set;a.forEach(function(a){c.add(a)});return c};d.setUnionUpdate=function(a,b){t(b,
function(b){a.add(b)})};d.putInRange=function(a,b,c){n(b<=c&&0<=b,a+", "+b+", "+c);return v(a)||a<b?b:a>c?c:a};d.getTextNodesIn_with_textnode_filter=E;d.getTextNodesIn_with_subtree_filter=F;window.getTextNodesIn=E;d.ifelse=function(a,b,c){return a?"function"===typeof b?b():b:"function"===typeof c?c():c};d.strReplaceAll=H;d.strReplaceAllWords=J;d.localStorageFindReplace=function(a,b){if(v(a)||v(b.key)&&v(b.allFiles))console.warn("Args: \n\t\tpairs: [string,string][], \n\t\to?:{ \n\t\t\tprependLocalStoragePrefix?: boolean, \n\t\t\tkey?:string, \n\t\t\tallFiles?:boolean, \n\t\t\tnotsafe?: boolean, \n\t\t\tnotOnlyWords?:boolean \n\t\t}");
else if(b.key)K(b.key,a,b);else if(b.allFiles)for(var c in localStorage)K(b.key,a,b);else console.warn("must supply key or allFiles=true")};d.localStorageFindReplaceAtKey=K;d.whileLimit=function(a,b,c){for(;a()&&0<c;)b(),c--;0===c&&console.error("INFINITE LOOP STOPPED BY whileLimit")};d.bareobj=function(){return Object.create(null)}},function(k,d,a){function n(a,b,c){void 0===c&&(c=!1);if("string"===typeof b||"boolean"===typeof b||"number"===typeof b)return b;z.assert_nt(b.type);switch(b.type){case G.SyncingObjectTypes.EditableString:return f(a,
b);case G.SyncingObjectTypes.Map:return h(a,b,c);case G.SyncingObjectTypes.List:return m(a,b)}console.error("Error",b);return null}function m(a,b){for(var c=a.create.list(),e=0;e<b.length;e++)c.push(n(a,b.get(e)));return c}function f(a,b){a=a.create.string();a.setText(b.getText());return a}function h(a,b,c){void 0===c&&(c=!1);var e=a.create.map();b.keys().forEach(function(g){"id"!=g?e.set(g,n(a,b.get(g),c)):z.derr("Can this happen?")});return e}function l(a){switch(typeof a){case "string":return G.FlatPropTypesCoarse.immutstring;
case "boolean":return G.FlatPropTypesCoarse.bool;case "number":return G.FlatPropTypesCoarse.num}throw new TypeError;}function g(a,f,h,d,p){void 0===p&&(p=!1);z.assert_nt(a,f,h);if("string"===typeof h||"boolean"===typeof h||"number"===typeof h)return p&&d!==x.SystPropNames.nodetype?{type:"FlatPropLink",linked_nodeid:f.oid,linkedPropType:l(h),label:d}:h;z.assert_nt(h.type);switch(h.type){case G.SyncingObjectTypes.EditableString:return c(a,f,h,d,p);case G.SyncingObjectTypes.Map:return e(a,f,h,d,p);case G.SyncingObjectTypes.List:return b(a,
f,h,d,p);case "FlatPropLink":var m=f.stdoc.ogetNodeByPermId(h.linked_nodeid);if(m)return z.dassert(null!=d),g(a,m,f.links.getVal(d),d,p)}console.error("Error",h);return null}function b(a,b,c,e,f){void 0===f&&(f=!1);e=a.create.list();if(!(b instanceof v.ParentalNode))return z.dlog("what? there is a bug here.",c,b),null;for(var h=0;h<c.length;h++){var l=b.getChild(h);z.assert_nt(l);e.push(g(a,l,c.get(h),h,f))}return e}function c(a,b,c,e,g){void 0===g&&(g=!1);if(g)return{type:"FlatPropLink",linked_nodeid:b.oid,
linkedPropType:G.FlatPropTypesCoarse.editstring,label:e};a=a.create.string();a.setText(c.getText());return a}function e(a,b,c,e,f){void 0===e&&(e=null);void 0===f&&(f=!1);var h=a.create.map(),l;c.keys().forEach(function(e){"id"!=e?(l=b,c.get(e),b.isParental()&&b.hasChild(e)&&(l=b.getChild(e)),h.set(e,g(a,l,c.get(e),e,f))):z.derr("Can this happen?")});return h}function p(a){return!t(a,function(a){return!a.booleans.hasVal(x.SystPropNames.protected)||!a.booleans.getVal(x.SystPropNames.protected)})}function t(a,
b){if(!1===b(a))return!1;a instanceof v.ParentalNode&&a.forEachChild(function(a){return!1===t(a,b)?{val:!1,contin:!1}:{val:!0,contin:!0}});return!0}var u=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),v=a(6),y=a(4),r=a(13),x=a(9),
A=a(8),z=a(7),C=a(14),B=a(3),D=a(254),G=a(10),E=a(255),F=a(257),H=a(258),J=function(){function a(b,c,e,g,f){var h=this;this.next_temp_node_numid=0;this.utfstate={node_clipboard:null,use_linking_on_paste:!1,filtering_nodes:!1,zoomed_nodeid:null,detachedSyncingObjects:new Set};this.cache={permid2node:new Map,parentOf:new Map,parentDoc:new Map,containingNode:new Map,numid2id:new Map,subtreeHasFlatPropLink:new Set,refsToNode:new Map};this.refManager=new E.RefManager(this);this.traversal={getFilteredRefableInTextNodes:function(a){var b=
[];h.cache.permid2node.forEach(function(c,e){h.stlang.isNodeSubtype(c.nodetype,v.RefableInTextMixin.nodetype_name)&&a(c)&&b.push(c)});return b},getFilteredNodes:function(a){var b=[];h.cache.permid2node.forEach(function(c,e){a(c)&&b.push(c)});return b},forEachDescendant:function(a,b){b instanceof v.ParentalNode&&b.forEachChild(function(b){h.traversal.forNodeAndEachDescendantPreorder(a,b)})},forNodeAndEachDescendantPreorder:function(a,b){a(b);b instanceof v.ParentalNode&&b.forEachChild(function(b){h.traversal.forNodeAndEachDescendantPreorder(a,
b)})},forNodeAndEachDescendantPostorder:function(a,b){b instanceof v.ParentalNode&&b.forEachChild(function(b){h.traversal.forNodeAndEachDescendantPreorder(a,b)});a(b)},forNodeAndEachDescendantPreorderEarlyStop:function(a,b){var c=a(b);if(c&&!c.contin)return c;if(b instanceof v.ParentalNode){var e=!0;return b.forEachChild(function(b){return e&&(b=h.traversal.forNodeAndEachDescendantPreorderEarlyStop(a,b))&&!b.contin?(e=!1,b):null})}return null},forEachNode:function(a){h.cache.permid2node.forEach(function(b,
c){a(b)})},forEachRefableInTextNode:function(a){h.cache.permid2node.forEach(function(b,c){h.stlang.isNodeSubtype(b.nodetype,v.RefableInTextMixin.nodetype_name)&&a(b)})},forEachRefNode:function(a){h.cache.permid2node.forEach(function(b,c){b instanceof v.RefNode&&a(b)})},forEachNodeEarlyStop:function(a){for(var b=h.cache.permid2node.values();;){var c=b.next();if(c.done)break;if((c=a(c.value))&&!c.contin)return c.val}return null},forEachAtSiblingAndAncestorLevels:function(a,b,c){void 0===c&&(c={});if(!c.postorder_exec){var e=
b(a);if(e&&!e.contin)return e}e={r2l:c&&c.r2l};c.previous_siblings_only&&(e.start_exec_after_seeing=a);return a.parentNode&&((e=a.parentNode.forEachChild(b,e))&&!e.contin||(e=h.traversal.forEachAtSiblingAndAncestorLevels(a.parentNode,b,{r2l:c.r2l,postorder_exec:c.postorder_exec}))&&!e.contin)?e:c.postorder_exec?b(a):null}};this.filtering={searchByNodetype:function(a){h.filtering.showTheseNodesOnly(new Set(h.traversal.getFilteredNodes(function(b){return b.hasType(a)})))},searchByNodetypes:function(a){h.filtering.showTheseNodesOnly(new Set(h.traversal.getFilteredNodes(function(b){return a.some(function(a){return b.hasType(a)})})))},
searchForRefs:function(a){y.warnonce("t2pset: ",h.refManager.t2pset.toString());var b=new Set,c=h.refManager.t2pset.get(a);c&&c.forEach(function(a){return b.add(h.ogetNodeByPermId(a))});(a=h.refManager.abs_t2pset.get(a))&&a.forEach(function(a){a=h.ogetNodeByPermId(a);b.add(a.parentNode)});if(0===b.size)return!1;z.dlog("referers: ",b);h.filtering.showTheseNodesOnly_then_rebuild(b);return!0},zoom:function(a){h.utfstate.zoomed_nodeid=a;h.filtering.filterSubtree(a)},unzoom_then_rebuild:function(){h.utfstate.zoomed_nodeid=
null;h.filtering.clearSearch_then_rebuild()},filterSubtree:function(a){a=h.ogetNodeByPermId(a);var b=new Set;b.add(a);a.isParental()&&a.forEachDescendant(function(a){b.add(a)});h.filtering.showTheseNodesOnly_then_rebuild(b)},showTheseNodesOnlyById:function(a){var b=new Set;a.forEach(function(a){(a=h.ogetNodeByPermId(a))&&b.add(a)});h.filtering.showTheseNodesOnly(b)},showTheseNodesOnly_then_rebuild:function(a){h.filtering.showTheseNodesOnly(a);B.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!1,
2)},showTheseNodesOnly:function(a){var b=new Set;a.forEach(function(a){a&&a.forEachAncestor(function(a){b.add(a)})});a.forEach(function(a){return a.expandChildrenUpToRoot()});h.traversal.forEachNode(function(c){a.has(c)?c.utfstate.filter_status=1:b.has(c)?c.utfstate.filter_status=3:c.utfstate.filter_status=2});h.utfstate.filtering_nodes=!0},clearSearch:function(){z.dlog("clearSearch called");var a=!1;h.traversal.forEachNode(function(b){a=a||y.nottriv(b.utfstate.filter_status)||1==b.utfstate.temp_ch_expanded;
delete b.utfstate.filter_status;delete b.utfstate.temp_ch_expanded});h.utfstate.filtering_nodes=!1;return a},clearSearch_then_rebuild:function(){h.filtering.clearSearch()&&B.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!1,2)}};this._slang=b;this._syncdoc=c;this._appdata=f;this.upstate=new D.STDocUnsharedPersistentStateViaAppData(e,g,f);this.stdocid=e;this.temp_STDoc_id=a.next_temp_STDoc_id++}Object.defineProperty(a.prototype,"stlang",{get:function(){return this._slang},enumerable:!0,
configurable:!0});Object.defineProperty(a.prototype,"syncdoc",{get:function(){return this._syncdoc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sharedmodel",{get:function(){var a=this._syncdoc.getModel();a||console.error("STDoc.sharedmodel called but this._syncdoc.getModel() returned null");return a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"rootmap",{get:function(){return this.sharedmodel.getRoot()},enumerable:!0,configurable:!0});a.prototype.canUndo=
function(){return this.sharedmodel.canUndo};a.prototype.canRedo=function(){return this.sharedmodel.canRedo};a.prototype.setUPState=function(a){this.upstate=a};a.prototype.clearCache=function(){z.dlog("entering clearCache");this.cache.permid2node.clear();this.cache.parentOf.clear();this.cache.containingNode.clear();this.cache.numid2id.clear();this.cache.subtreeHasFlatPropLink.clear();this.cache.refsToNode.clear()};a.prototype.getTitle=function(){return this.top.get_title()};a.idFromIdOrNode=function(a){return"string"===
typeof a?a:a.oid};a.prototype.nodeFromIdOrNode=function(a){return"string"===typeof a?this.ogetNodeByPermId(a):a};a.prototype.assignTempNodeNumId=function(a){a.temp_node_numid=this.next_temp_node_numid;this.cache.numid2id.set(a.temp_node_numid,a.oid);this.next_temp_node_numid++};a.prototype.isDetached=function(a){return this.utfstate.detachedSyncingObjects.has(a)};a.prototype.get_language_id=function(){return this.rootmap.get(x.SystDocPropNames.language_id)};a.prototype.ogetNodeByPermId=function(a){z.assert_nt(a);
return this.cache.permid2node.get(a)};a.prototype.ogetNodeByNumId=function(a){z.assert_nt(a);return this.cache.permid2node.get(this.cache.numid2id.get(a))};a.prototype.ogetParentNode=function(a){z.assert_nt(a);var b=this.cache.parentOf.get(a.oid);if(!y.triv(b))return a.stdoc.ogetNodeByPermId(b)};a.prototype.ogetContainingNode=function(a){z.assert_nt(a);a=this.cache.containingNode.get(a.id);return y.triv(a)?null:this.ogetNodeByPermId(a)};a.prototype.ogetSyncingObjectById=function(a){z.assert_nt(a);
return this.sharedmodel.getObject(a)};a.prototype.findPermidRefs=function(a){return this.traversal.getFilteredNodes(function(b){return b instanceof v.RefNode&&b.reffed_nodeid===a})};a.prototype.registerNodeFromSTNodeConstructor=function(a){z.assert_nt(a);z.dassert(null!=a.oid,"Trying to register node that has no permid!");this.cache.permid2node.get(a.oid)&&z.derr("Warning (not error, but do investigated): an STNode.STNode with id "+a.oid+" is already registered. Will repalce it (which shouldn't lose any data).");
this.cache.permid2node.set(a.oid,a)};a.prototype.registerDetachedSyncingObject=function(a){z.assert_nt(a);z.dlogcat(x.LogTypes.entering,"Entering registerSyncingObject for uobj with id "+a.id);this.utfstate.detachedSyncingObjects.add(a)};a.prototype.buildSTNodeWrappersRecursivelyFromSTNodeData=function(a,b){var c=this;void 0===b&&(b=null);z.dlogcat(x.LogTypes.entering,"Entering buildDocWrapperFromSrcData with this node data:",A.prettySTDataShortJson(a));if(!a)return null;z.assert_nt(a);z.dassert(a.has(x.SystPropNames.nodetype));
var e=a.get(x.SystPropNames.nodetype),g;this._slang.isNodeSubtype(e,r.Nodetypes.Top)?(z.dassert(null==b,"parentNode arg should be null"),this.wrapTopData(),g=this.top):(g=this.wrapDisconnectedNodeData(a),b&&this.setParentNode(g,b));var h=!0===a.get(x.SystPropNames.ignore_children);a.keys().forEach(function(b){var f=a.get(b);null==f?z.derr("map for node "+a.id+" has null or undefined for key "+b+". Should delete it!"):y.argsFirstAmongRest(b,x.SystPropNames.nodetype,x.SystPropNames.ch,x.SystPropNames.nch)?
b!==x.SystPropNames.ch||h?b!==x.SystPropNames.nch||h||(c.setContainingNode(f,g),z.dassert(c.stlang.isNodeSubtype(e,r.Nodetypes.Parental),e),f.keys().forEach(function(a){a=f.get(a);c.buildSTNodeWrappersRecursivelyFromSTNodeData(a,g)})):(b=f.asArray(),c.setContainingNode(f,g),z.dassert(c.stlang.isNodeSubtype(e,r.Nodetypes.Parental),e),b.forEach(function(a){c.buildSTNodeWrappersRecursivelyFromSTNodeData(a,g)})):A.isImmutableString(f)||y.argsFirstAmongRest(typeof f,"boolean","number")||(A.isEditableString(f)?
c.setContainingNode(f,g):A.isMap(f)?(c.buildSTNodeWrappersRecursivelyFromSTNodeData(f,g),c.setContainingNode(f,g)):A.isFlatPropLink(f)?c.cache.subtreeHasFlatPropLink.add(g.oid):console.error("Unexpected <key,value> pair <"+b+","+f+">."))});return g};a.prototype.buildSTDocWrapperRecursivelyFromSTDocData=function(){z.dassert(null!=this.rootmap,"this.rootmap is null");z.dwarn("buildSTDocWrapperRecursivelyFromSTDocData");this.clearCache();z.dassert(!this.rootmap.has(x.SystPropNames.nodetype),"Invalid value for STDoc.rootmap. Appears to be data for an STNode, since has .nodetype, whereas it should be data for a ReadableSTDoc:\n"+
A.prettySTDataShortJson(this.rootmap));var b=this.rootmap.get(a.TOP_NODE_KEY);this.buildSTNodeWrappersRecursivelyFromSTNodeData(b,null);z.timerStart("refreshNodeCaches");this.refreshNodeCaches();z.timerEnd("refreshNodeCaches");z.timerStart("refManager.buildall");this.refManager.buildall();z.timerEnd("refManager.buildall")};a.prototype.refreshNodeCaches=function(){this.traversal.forNodeAndEachDescendantPostorder(function(a){return a.refreshCache()},this.top)};a.prototype.toString=function(){var a=
"";this.top.forEachUnnamedChild(function(b){a=b?a+b.toString()+"\n":a+"~~node not found~~\n"});return a};a.prototype.setParentNode=function(a,b){z.assert_nt(a,b);this.cache.parentOf.has(a.oid)&&z.dwarnif(this.cache.parentOf.get(a.oid)===b.oid,"Redundant call to setParentNode (this might be as-intended)");this.cache.parentOf.set(a.oid,b.oid)};a.prototype.setContainingNode=function(a,b){z.assert_nt(a,b);this.cache.containingNode.set(a.id,b.oid);this.utfstate.detachedSyncingObjects.delete(a)};a.prototype.wrapDisconnectedNodeData=
function(a){z.dlogcat(x.LogTypes.entering,"Entering wrapDisconnectedNodeData(...) with data:",a);z.assert_nt(a);var b=a.get(x.SystPropNames.nodetype);z.assert_nt(b);z.dassert(this.stlang.isConcreteNodetype(b),"Can't create a "+b+" node; it is not a concrete nodetype.");var c=this.stlang.nodeClassDispatch(b);c||z.derr("no entry for "+b);return new c(this,a)};a.prototype.wrapTopData=function(){var b=this.rootmap.get(a.TOP_NODE_KEY);z.dassert(null!=b,"doc.rootmap must have data for Top node before calling doc.wrapTopData");
this.top=new this.stlang.toplevel_nodeclass(this,b)};a.prototype.copyNode=function(a,b){void 0===b&&(b=!1);this.utfstate.node_clipboard=a;this.utfstate.use_linking_on_paste=b};a.prototype.subtreeHasLinkDefinitely=function(a){return this.cache.subtreeHasFlatPropLink.has(a)};a.prototype.revert_temp_ch_expanded=function(){z.ddeb("revert_temp_ch_expanded");this.traversal.forEachNode(function(a){return a.utfstate.temp_ch_expanded=!1})};return a}();J.next_temp_STDoc_id=0;J.TOP_NODE_KEY="TOP_NODE";d.ReadableSTDoc=
J;k=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.next_pid_num=0;b.create={string:function(){var a=b.sharedmodel.createString();b.registerDetachedSyncingObject(a);return a},list:function(){var a=b.sharedmodel.createList();b.registerDetachedSyncingObject(a);return a},map:function(){var a=b.sharedmodel.createMap();b.registerDetachedSyncingObject(a);return a}};return b}u(b,a);b.prototype.takeNextNodePid=function(){var a="pid_"+this.next_pid_num.toString();this.next_pid_num+=
1;return a};b.prototype.newTop=function(){this.top=this.newDisconnectedNode(this.stlang.toplevel_nodeclass.nodetype_name);this.rootmap.set(J.TOP_NODE_KEY,this.top.getPseudoReadOnlyData())};b.prototype.appendDetachedNode=function(a,b){z.assert_nt(a);b||(b=this.top);z.weakassert(a.isDetached());b.appendDetachedUnnamedChild(a)};b.prototype.removeSelected=function(){var a=this;this.traversal.forEachNode(function(b){if(b.utfstate.selected){var c=b.parentNode;a.removeNodeAndCleanup(b);z.dwarn("Todo: should not be calling rebuildSubtree here, or actually anywhere in ReadableSTDoc");
B.STApp.the.controller_of_main_display_wstdoc.updateSubtree(c,1,1)}})};b.prototype.removeFocused=function(){if(y.nottriv(B.STApp.the.nodeFocus.id)){var a=this.nodeFromIdOrNode(B.STApp.the.nodeFocus.id),b=a.parentNode;this.removeNodeAndCleanup(a);z.dremindonce("Todo: should not be calling rebuildSubtree here, or actually anywhere in ReadableSTDoc");B.STApp.the.controller_of_main_display_wstdoc.updateSubtree(b,1,1)}else z.dwarn("doc.removeFocused called when doc.utfstate.focused_node_id is trivial")};
b.prototype.removeNodeAndCleanup=function(a,b,c){var e=this;void 0===c&&(c=!0);z.assert_nt(a);var g=this.nodeFromIdOrNode(a);z.assert_nt(g);if(g instanceof v.Top&&null==g.parentNode)return console.error("You can't remove the hidden top node."),!1;a=g.parentNode;if(!a)return console.error("RemoveNode called on a non-Top node that has no parent."),!1;b||(b=a.indexOrKeyOfChild(g));if(p(g))return console.error("Can't delete child "+b+" of node "+a.oid+" because it or some descendant has 'protected' property set to true."),
!1;if(c&&g.hasChildren()){var h=g.numDescendants();if(confirm("Remove node with "+h+" descendants?"))c=!1;else return!1}this.beginCompoundOp("DeleteNode");B.STApp.the.nodeFocus.id&&g.oid===B.STApp.the.nodeFocus.id&&(h=void 0,(h=g.ogetNextSibling())||(h=g.ogetPrevSibling()),h||(h=g.parentNode),B.STApp.the.controller_of_main_display_wstdoc.applyAction({name:"SetFocusedNode",old_nodeid:B.STApp.the.nodeFocus.id,new_nodeid:h.oid}));h=g.getData();this.registerDetachedSyncingObject(h);h.keys().forEach(function(a){a!==
x.SystPropNames.ch&&a!==x.SystPropNames.nch&&g.deleteProp(a)});if(g.isParental())for(g.forEachNamedChild(function(a,b){e.removeNodeAndCleanup(a,b,c)}),h=g.numUnnamedChildren()-1;0<=h;h--)this.removeNodeAndCleanup(g.getChild(h),h,c);this.removeChildNodeDataOnly(a,b);this.endCompoundOp();this.refreshNodeCaches();return!0};b.prototype.removeChildNodeDataOnly=function(a,b){if("number"===typeof b){a=a.lists.getVal(x.SystPropNames.ch);z.dassert(null!=a,"Tried to remove "+b+"-th child but no children were found for this node.");
if(!a)return console.error("Tried to remove "+b+"-th child but no children were found for this node."),!1;if(b>=a.length)return console.error("Tried to remove "+b+"-th child but "+b+" is out of range"),!1;z.dlogcat(x.LogTypes.rt,"rt list.remove");a.remove(b)}else{a=a.maps.getVal(x.SystPropNames.nch);z.dassert(null!=a,"Tried to remove child named "+b+" but no named children were found for this node.");if(!a)return console.error("Tried to remove child named "+b+" but no named children were found for this node."),
!1;if(!a.has(b))return console.error("Tried to remove child named "+b+" but node has no such child."),!1;z.dlogcat(x.LogTypes.rt,"rt map.delete");a.delete(b)}return!0};b.prototype.newDisconnectedNode=function(a,b){z.dlogcat(x.LogTypes.entering,"Entering newDiconnectedNode("+a+",...)");z.assert_nt(a);z.dassert(this.stlang.isConcreteNodetype(a),"Can't create a "+a+" node; it is not a concrete nodetype.");var c=this.stlang.nodeClassDispatch(a);if(b){z.dassert(b.get(x.SystPropNames.nodetype)===a);var e=
new c(this,b)}else try{e=new c(this)}catch(Q){throw console.error("Error trying to create new disconnected "+a+" node from (should be) class: ",c),Q;}z.dlogcat(x.LogTypes.exiting,"Finishing newDisconnectedNode");return e};b.prototype.fillDefaults=function(a,b,c){var e=this;void 0===b&&(b=!1);void 0===c&&(c=!1);z.dlogcat(x.LogTypes.entering,"Entering fillDefaults("+a.oid+")");var g=a.editActionsForFillDefaults(),h=a.getClass();g.forEach(function(g){if("NewFlatProp"===g.name){g=g.label;var f=h.required_flatprops[g];
switch(f){case 6:case 7:a.editableStrings.hasObj(g)||(f=a.getStrDefaultOrElse(g,!1,x.MISSING_DEFAULT_VAL_FOR_REQUIRED_STRING_PROP),a.editableStrings.setVal(g,f));break;case 5:case 3:case 4:a.immutableStrings.hasVal(g)||(f=a.getStrDefaultOrElse(g,!1,x.MISSING_DEFAULT_VAL_FOR_REQUIRED_STRING_PROP),a.immutableStrings.setVal(g,f));break;case 1:a.booleans.hasVal(g)||(f=a.getBoolDefaultOrElse(g,x.MISSING_DEFAULT_VAL_FOR_REQUIRED_BOOL_PROP),a.booleans.setVal(g,f));break;case 2:a.numbers.hasVal(g)||(f=a.getNumDefaultOrElse(g,
x.MISSING_DEFAULT_VAL_FOR_REQUIRED_NUM_PROP),a.numbers.setVal(g,f));break;default:z.derr("Unhandled StringPropType "+f)}}else if(!c)switch(g.name){case "NewNamedNode":e.makeNewNamedChildNodeAndAttach(g.label,g.parent,g.nodetype,b);break;case "NewUnnamedNode":e.makeNewUnnamedChildNodeAndAppend(g.parent,g.nodetype,b);break;case "NewUnnamedNodeStub":e.makeNewUnnamedChildNodeStubAndAppend(g.abstract_nodetype,g.parent);break;case "NewNamedNodeStub":e.makeNewNamedChildNodeStubAndAttach(g.label,g.abstract_nodetype,
g.parent)}})};b.prototype.makeNewNamedChildNodeAndAttach=function(a,b,c,e){void 0===e&&(e=!1);z.assert_nt(b,c,a);z.dassert(!b.hasChild(a),"Parent "+b.oid+" seems to already have a child node named "+a+".");this.beginCompoundOp("NewNamedNode");c=this.newDisconnectedNode(c);try{e&&this.fillDefaults(c,!0),b.setNamedChild(a,c)}catch(Q){console.error("Error trying to do compound op of adding and attaching new named child node.\nNeed to clean up the part that succeeded!",Q),b.hasChild(a)&&b.getChild(a).oid===
c.oid&&this.removeNodeAndCleanup(c,a),this.ogetNodeByPermId(c.oid)&&this.removeNodeAndCleanup(c)}finally{this.endCompoundOp()}return c};b.prototype.makeNewNamedChildNodeStubAndAttach=function(a,b,c){z.dlog("Entering makeNewNamedChildNodeStubAndInsert",arguments);z.assert_nt(a,c,b);var e=this.nodeFromIdOrNode(c);e.expandChildrenUpToRoot();this.upstate.setNewNamedNodestub(a,b,e)};b.prototype.makeNewUnnamedChildNodeAndAppend=function(a,b,c){void 0===c&&(c=!1);z.assert_nt(a,b);z.dassert(b!==r.Nodetypes.NodeStub);
a=this.nodeFromIdOrNode(a);this.beginCompoundOp("NewUnnamedNode");b=this.newDisconnectedNode(b);try{a.appendDetachedUnnamedChild(b),c&&this.fillDefaults(b,!0)}catch(M){console.error("Error trying to do compound op of adding and attaching new unnamed child node\nNeed to clean up the part that succeeded!",M),this.ogetNodeByPermId(b.oid)&&this.removeNodeAndCleanup(b)}finally{this.endCompoundOp()}return b};b.prototype.makeNewUnnamedChildNodeAndInsertAt=function(a,b,c,e){void 0===e&&(e=!1);z.assert_nt(a,
b,c);z.dassert(b!==r.Nodetypes.NodeStub);a=this.nodeFromIdOrNode(a);this.beginCompoundOp("NewUnnamedNode");b=this.newDisconnectedNode(b);try{a.insertDetachedUnnamedChildAt(b,c),e&&this.fillDefaults(b,!0)}catch(Q){console.error("Error trying to do compound op of adding and attaching new unnamed child node\nNeed to clean up the part that succeeded!",Q),a.getChild(c).oid===b.oid?this.removeNodeAndCleanup(b,c):this.ogetNodeByPermId(b.oid)&&this.removeNodeAndCleanup(b)}finally{this.endCompoundOp()}return b};
b.prototype.makeNewUnnamedChildNodeAndPrepend=function(a,b,c){void 0===c&&(c=!1);return this.makeNewUnnamedChildNodeAndInsertAt(a,b,0,c)};b.prototype.makeNewUnnamedChildNodeAndInsertAfter=function(a,b,c,e){void 0===e&&(e=!1);c=c.getIndexOrLabel();return"string"===typeof c?this.makeNewUnnamedChildNodeAndInsertAt(a,b,0,e):this.makeNewUnnamedChildNodeAndInsertAt(a,b,c+1,e)};b.prototype.makeNewUnnamedChildNodeStubAndAppend=function(a,b){if(!C.stwidgets.nodeStubsEnabled.getValue())return null;z.dlogcat(x.LogTypes.entering,
"Entering makeNewUnnamedChildNodeStubAndInsert");z.assert_nt(b,a);b=this.nodeFromIdOrNode(b);b.expandChildrenUpToRoot();this.upstate.appendNewUnnamedNodestub(a,b,b.numUnnamedChildren())};b.prototype.beginCompoundOp=function(a){this.sharedmodel.beginCompoundOperation(a)};b.prototype.endCompoundOp=function(){this.sharedmodel.endCompoundOperation()};b.prototype.undo=function(){this.sharedmodel.canUndo?this.sharedmodel.undo():console.warn("Can't undo; TO DO: button should be disabled")};b.prototype.redo=
function(){this.sharedmodel.canRedo?this.sharedmodel.redo():console.warn("Can't redo; TO DO: button should be disabled")};b.prototype.applyEditAction=function(a){z.timerStart("applyEditActionSwitchWithRefManagerRefresh "+a.name);z.timerStart("applyEditActionSwitch "+a.name);var b,c;switch(a.name){case "SeqIndexChange":this.ogetNodeByPermId(a.nodeid).index=a.value;B.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!1,1);break;case "StringPropChange":c=this.ogetNodeByPermId(a.nodeid);switch(c.nclass.allowed_flatprops[a.label]){case 6:case 7:this.applyEditAction({name:"EditableStringPropChange",
nodeid:a.nodeid,label:a.label,value:a.value});break;case 5:case 4:case 3:this.applyEditAction({name:"ImmutableStringPropChange",nodeid:a.nodeid,label:a.label,value:a.value});break;default:console.error("Node:",c),console.error("label:",a.label),console.error("Invalid StringPropType "+c.nclass.allowed_flatprops[a.label])}break;case "ImmutableStringPropChange":c=this.ogetNodeByPermId(a.nodeid);c.immutableStrings.getVal(a.label)===a.value&&console.warn("ImmutableStringPropChange event but new value is the same as current");
c.immutableStrings.setVal(a.label,a.value);b=B.STApp.the.controller_of_main_display_wstdoc;b.updateHangingSubtree(c,0,0,!1);b.updateNoncontrolledTextInputForms(c,a.label,a.value);break;case "EditableStringPropChange":c=this.ogetNodeByPermId(a.nodeid);c.editableStrings.setVal(a.label,a.value);b=B.STApp.the.controller_of_main_display_wstdoc;b.updateHangingSubtree(c,0,0);b.updateNoncontrolledTextareaForms(c.editableStrings.getObj(a.label),a.value);break;case "NumPropChange":c=this.ogetNodeByPermId(a.nodeid);
c.numbers.setVal(a.label,a.value);B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(c,0,0);break;case "BoolPropChange":z.dassert(A.isBoolean(a.value),"not a boolean: ",a.value);z.dwarn("Handling BoolPropChange action. "+a.value+", "+a.label);c=this.ogetNodeByPermId(a.nodeid);c.booleans.setVal(a.label,a.value);B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(c,0,0);break;case "NewFlatProp":this.addFlatProp(a.node,a.label);a.node.booleans.hasVal(a.label)&&a.node.utfstate.panel_hidden&&
(a.node.utfstate.panel_hidden=!1);B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(a.node,0,0);break;case "NodeStubChoice":z.dlog("Processing ",a);c=this.ogetNodeByPermId(a.parentid);z.assert_nt(c,a.label_or_ind);this.upstate.removeNodeStub(a.parentid,a.label_or_ind);b=B.STApp.the.controller_of_main_display_wstdoc;if(null===a.chosen_nodetype){b.updateSubtree(c,1,1);return}y.warnonce("Should probably create new ActionRequest objects here, instead of calling the STDoc methods directly. Then NodeStubChoice could be a upstate action request.");
"string"===typeof a.label_or_ind?this.makeNewNamedChildNodeAndAttach(a.label_or_ind,c,a.chosen_nodetype,!0):this.makeNewUnnamedChildNodeAndInsertAt(c,a.chosen_nodetype,a.nodes_ind,!0);z.dlog("Trying to update view after nodestub choice...");b.updateHangingSubtree(c,Infinity,Infinity,!0);break;case "CopyNode":this.copyNode(this.ogetNodeByPermId(a.nodeid),a.linking);break;case "PasteNode":b=this.ogetNodeByPermId(a.parent_nodeid);this.pasteNode(b);B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(b,
2,2);break;case "PasteNodeAsNextUnnamedSiblingOf":c=this.ogetNodeByPermId(a.sibling_nodeid);b=c.parentNode;c=b.indexOrKeyOfChild(c);c=b.nextUnnamedChildIndex(c);this.pasteNode(b,c);B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(b,2,2);break;case "PasteNodeAsNamedChild":b=this.ogetNodeByPermId(a.parent_nodeid);this.pasteNode(b,a.label);B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(b,2,2);break;case "NewUnnamedNode":case "NewUnnamedNodeAtIndex":b=this.nodeFromIdOrNode(a.parent);
"NewUnnamedNode"===a.name?a.insert_after?(z.dwarn("a.insert_after",a.insert_after.oid),c=this.makeNewUnnamedChildNodeAndInsertAfter(b,a.nodetype,a.insert_after,!0)):a.first_child&&(c=this.makeNewUnnamedChildNodeAndPrepend(b,a.nodetype,!0)):"NewUnnamedNodeAtIndex"===a.name?c=this.makeNewUnnamedChildNodeAndInsertAt(b,a.nodetype,a.index,!0):z.derr("??????????");c.expandChildrenUpToRoot();B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(b,2,2);break;case "NewNamedNode":b=this.nodeFromIdOrNode(a.parent);
c=this.makeNewNamedChildNodeAndAttach(a.label,b,a.nodetype,!0);c.expandChildrenUpToRoot();B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(b,2,2);break;case "NewParentNode":this.beginCompoundOp("new-parent");b=a.child.parentNode;c=b.indexOrKeyOfChild(a.child);this.removeChildNodeDataOnly(b,c);c="string"===typeof c?this.makeNewNamedChildNodeAndAttach(c,b,a.nodetype,!1):this.makeNewUnnamedChildNodeAndInsertAfter(b,a.nodetype,a.child,!1);c.expandChildrenUpToRoot();c.appendDetachedUnnamedChildren(a.child);
this.fillDefaults(c,!0);this.endCompoundOp();B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(b,2,2);break;case "Unlink":c=this.ogetNodeByPermId(a.nodeid);z.dassert(a.recursive||!y.triv(a.propname));a.recursive?(this.unlinkRecursive(c),B.STApp.the.controller_of_main_display_wstdoc.updateSubtree(c)):a.propname&&(this.unlinkProp(c,a.propname),B.STApp.the.controller_of_main_display_wstdoc.updateNodeShallow(c));break;case "DeleteFlatProp":c=this.ogetNodeByPermId(a.nodeid);c.deleteProp(a.label);
B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(c,0,0);break;case "DeleteNode":(c=a.parent.getChild(a.label_or_index))?(this.removeNodeAndCleanup(c,a.label_or_index),B.STApp.the.controller_of_main_display_wstdoc.updateHangingSubtree(a.parent,2,2)):console.error("Received DeleteNode LocalNodeEditRequest that can't handle:",a);break;case "ConvertNodetype":this.convert_nodedata_CompoundOp(a.node.getData(),this.stlang.getConversion(a.node.nodetype,a.new_nodetype));break;case "MoveFocusedNode":b=
B.STApp.the.nodeFocus.node;z.dlog(a.direction_key);z.dassert(b&&b.isUnnamedChild());var e=b.getIndexOrLabel();z.dassert("number"===typeof e);c=b.parentNode;switch(a.direction_key){case "up":if(0<e){var g=c.getData().get(x.SystPropNames.ch);z.assert_nt(g);B.STApp.the.controller_of_main_display_wstdoc.unnamedChildrenOrderChanged.add(c.oid);g.move(e,e-1)}else(c=F.verticallyPrevNodeAtParentsDepth(b,!0))&&this.moveUnnamedNode(b,c,c.numUnnamedChildren(),!0);break;case "down":e<c.numUnnamedChildren()-1?
(g=c.getData().get(x.SystPropNames.ch),z.assert_nt(g),B.STApp.the.controller_of_main_display_wstdoc.unnamedChildrenOrderChanged.add(c.oid),g.move(e,e+2)):(c=F.verticallyNextNodeAtParentsDepth(b,!0))&&this.moveUnnamedNode(b,c,0,!0);break;case "right":if(0<e&&(c=b.ogetPrevSibling())){this.moveUnnamedNode(b,c,c.numUnnamedChildren(),!0);break}(c=b.ogetNextSibling())&&this.moveUnnamedNode(b,c,0,!0);break;case "left":e=c.parentNode,c=c.getIndexOrLabel(),e&&"number"===typeof c&&this.moveUnnamedNode(b,e,
c+1,!0)}H.ensureNodeInViewport(b);break;default:throw new y.NotYetImplemented;}z.timerEnd("applyEditActionSwitch "+a.name);z.dremindonce("opt - add method to rebuild RefManager stuff for just nodes under a subtree");z.timerStart("refManager update");this.refManager.compute_t2m_m2tset();this.refManager.compute_regex();z.timerEnd("refManager update");z.timerEnd("applyEditActionSwitchWithRefManagerRefresh "+a.name)};b.prototype.moveUnnamedNode=function(a,b,c,e){var g=a.getIndexOrLabel(),h=a.parentNode;
b.ensureHasSyncingListOfUnnamedChildren();var f=b.getData().get(x.SystPropNames.ch),l=h.getData().get(x.SystPropNames.ch);B.STApp.the.controller_of_main_display_wstdoc.unnamedChildrenOrderChanged.add(h.oid);B.STApp.the.controller_of_main_display_wstdoc.unnamedChildrenOrderChanged.add(b.oid);this.setParentNode(a,b);e&&b.expandChildrenUpToRoot();l.moveToList(g,f,c)};b.prototype.convert_nodedata_CompoundOp=function(a,b){this.beginCompoundOp("convert "+b.from+" to "+b.to);z.dassert(a.get(x.SystPropNames.nodetype)===
b.from);a.set(x.SystPropNames.nodetype,b.to);a.keys().forEach(function(c){if(c in b.propname_map){var e=b.propname_map[c];z.dlog("Moving value from "+b.from+"."+c+" to "+b.to+"."+e);a.set(e,a.get(c))}});this.cache.permid2node.delete(A.get_object_id(a));var c=this.newDisconnectedNode(b.to,a);this.cache.permid2node.set(c.oid,c);a.keys().forEach(function(c){c in b.propname_map&&a.delete(c)});this.fillDefaults(c,!1,!0);this.endCompoundOp()};b.prototype.pasteNode=function(a,b){var c=this.utfstate.node_clipboard,
e;this.utfstate.use_linking_on_paste?(z.derr("Why was i not using 'this' here?"),e=this.deepLinkCopyNode(c,b,!0),this.utfstate.use_linking_on_paste=!1):e=this.deepLinkCopyNode(c,b,!1);e=this.buildSTNodeWrappersRecursivelyFromSTNodeData(e,null);c?y.triv(b)||"number"===typeof b?(a.canAddAnotherUnnamedChildOfGivenClass(c.nclass)||console.error("Shouldn't paste node there; "+a.nodetype+" node "+a.oid+" is not supposed to have (another) "+c.nodetype+" child."),y.triv(b)?a.appendDetachedUnnamedChildren(e):
a.insertDetachedUnnamedChildAt(e,b)):a.setNamedChild(b,e):console.warn("Can't paste node; no node in clipboard.")};b.prototype.unlinkRecursive=function(a){var b=this;z.assert_nt(a);a.propkeys.ofLinkProps().forEach(function(c){b.unlinkProp(a,c)});a instanceof v.ParentalNode&&a.forEachChild(function(a){b.unlinkRecursive(a)});this.cache.subtreeHasFlatPropLink.delete(a.oid)};b.prototype.unlinkProp=function(a,b){z.assert_nt(a,b);var c=a.links.getObj(b),e=this.ogetNodeByPermId(c.linked_nodeid).getPropVal(c.label);
switch(c.linkedPropType){case G.FlatPropTypesCoarse.editstring:a.links.deleteObj(b);a.editableStrings.setVal(b,e.getText());break;case G.FlatPropTypesCoarse.immutstring:a.immutableStrings.setVal(b,e);break;case G.FlatPropTypesCoarse.bool:a.booleans.setVal(b,e);break;case G.FlatPropTypesCoarse.num:a.numbers.setVal(b,e)}};b.prototype.deepLinkCopyNode=function(a,b,c){a=e(this,a,a.getPseudoReadOnlyData(),b,c);c&&this.cache.subtreeHasFlatPropLink.add(a.id);return a};b.prototype.addEditableStringProp=function(a,
b){a.utfstate.panel_hidden=!1;a.utfstate.lastAddedStringProp=b;a.editableStrings.setVal(b,a.getStrDefaultOrElse(b,!1,"fill this in"))};b.prototype.addImmutableStringProp=function(a,b){a.utfstate.panel_hidden=!1;a.utfstate.lastAddedStringProp=b;a.immutableStrings.setVal(b,a.getStrDefaultOrElse(b,!1,"fill this in"))};b.prototype.addBooleanProp=function(a,b){a.booleans.setVal(b,a.getBoolDefaultOrElse(b,!1))};b.prototype.addNumberProp=function(a,b){a.utfstate.panel_hidden=!1;a.numbers.setVal(b,a.getNumDefaultOrElse(b,
0))};b.prototype.addFlatProp=function(a,b){var c=a.getFlatPropType(b);if(c)switch(c){case 1:a.wstdoc.addBooleanProp(a,b);break;case 6:case 7:a.wstdoc.addEditableStringProp(a,b);break;case 5:case 4:case 3:a.wstdoc.addImmutableStringProp(a,b);break;case 2:a.wstdoc.addNumberProp(a,b)}else console.error("Nodetype "+a.nodetype+" does not allow any flat prop named "+b+", and so doesn't have the necessary type info.");a.refreshCache()};b.prototype.processEachString=function(a,b){void 0===b&&(b=!1);this.traversal.forEachNode(function(c){c.propkeys.ofEditableStrProps().forEach(function(e){var g=
c.editableStrings.getVal(e),h=a(g);g!==h&&(b?c.editableStrings.setVal(e,h):console.log("Would've replaced:\n"+g+"\n\twith\n"+h))});c.propkeys.ofImmutableStrProps().forEach(function(e){var g=c.immutableStrings.getVal(e),h=a(g);g!==h&&(b?c.immutableStrings.setVal(e,h):console.log("Would've replaced:\n"+g+"\n\twith\n"+h))})})};return b}(J);k.nodetype_name="WritableSTDoc";d.WritableSTDoc=k;d.getDocTitleFromData=function(a){return a.get(J.TOP_NODE_KEY).get(x.SystPropNames.title)};d.getDocTitleFromJsonObj=
function(a){return a.value[J.TOP_NODE_KEY].value[x.SystPropNames.title].json};d.deepCopySTData=n;d.deepCopySyncingList=m;d.deepCopySyncingEditableString=f;d.deepCopySyncingMap=h;d.flatPropDataToFlatPropTypesCoarse=l;d.deepLinkCopyUnderNodeDispatch=g;d.deepLinkCopyListUnderNode=b;d.deepLinkCopyEditableStringUnderNode=c;d.deepLinkCopyMapUnderNode=e;d.someNodeInSubtreeIsProtected=p;d.allInSubtree=t},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),m=a(7),f=a(8),h=a(11),l=a(12),g=a(13),b=a(9),c=a(4),e=a(3);k=a(16);var p=a(253);d.RefTypes={AutoPopup:"AutoPopup",DiscreteNote:"DiscreteNote",Footnote:"Footnote"};a=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}n(e,a);e.prototype.ensureHasSyncingListOfUnnamedChildren=
function(){this.hasProp(b.SystPropNames.ch)||this.createSyncingListOfUnnamedChildren()};e.prototype.createSyncingListOfUnnamedChildren=function(){m.dassert(!this.hasProp(b.SystPropNames.ch));this.lists.setVal(b.SystPropNames.ch,this.wstdoc.create.list())};e.prototype.ensureHasSyncingMapOfNamedChildren=function(){this.hasProp(b.SystPropNames.nch)||this.createSyncingMapOfNamedChildren()};e.prototype.createSyncingMapOfNamedChildren=function(){m.dassert(!this.hasProp(b.SystPropNames.nch));var a=this.wstdoc.create.map();
this.maps.setVal(b.SystPropNames.nch,a)};e.prototype.forEachNamedChild=function(a,c){if(!this.hasProp(b.SystPropNames.nch)||this.childrenIgnored())return null;var e=this.maps.getVal(b.SystPropNames.nch).keys(),g,h;c&&c.r2l?(g=e.length-1,h=c=-1):(g=0,c=e.length,h=1);for(;g!=c;g+=h){var f=e[g],l=this.getChild(f);if(null!=l){if(f=a(l,f))return f}else m.dwarn("null named child node of "+this.oid+" at label "+f+". Skipping!")}return null};e.prototype.getNamedChildrenKeys=function(){var a=this.maps.getVal(b.SystPropNames.nch);
return!a||this.childrenIgnored()?[]:a.keys()};e.prototype.getChild=function(a){if(this.childrenIgnored())return null;if("number"===typeof a){var e=this.lists.getVal(b.SystPropNames.ch);if(null==e)return null;if(a>=e.length)return m.dwarn("getChild(i) called on out-of-range i === "+a+" for node "+this.oid),null;var g=e.get(a);m.dassert(null!=g);if(null==g)return console.error("null entry in node's .ch SyncingList. WILL DELETE IT."),e.remove(a),null;a=f.get_object_id(g);m.weakassert(!c.triv(a));e=this.stdoc.ogetNodeByPermId(a);
m.weakassert(!c.triv(e),"stdoc.ogetNodeByPermId( "+a+" ) returned null or undefined. Had this nodedata: ",g);if(e)return e;m.dwarn("Found STNodeData object with no corresponding STNode: ",g);g.has(b.SystPropNames.abstract_nodetype)&&m.derr("Problem is that loading a doc with an existing NodeStub is not supported...");return null}g=this.maps.getVal(b.SystPropNames.nch);if(null==g||!g.has(a))return null;g=g.get(a);m.dassert(null!=g);if(!g)return console.error("null entry in node's .nch SyncingMap"),
null;g=this.stdoc.ogetNodeByPermId(f.get_object_id(g));return g?g:(m.timerEnd("ParentalNode.getChild"),m.dwarn("getChild seems to have found a non-node, possibly null or an old node stub"),null)};e.prototype.getFirstNamedChild=function(){var a=this.maps.getVal(b.SystPropNames.nch);if(null==a||this.childrenIgnored())return null;var c=a.keys();if(0===c.length)return null;a=a.get(c[0]);return this.stdoc.ogetNodeByPermId(f.get_object_id(a))};e.prototype.attachDetachedNodeAsChildCommon=function(a){m.assert_nt(a);
this.ensureHasSyncingListOfUnnamedChildren();this.stdoc.setParentNode(a,this)};e.prototype.prependDetachedUnnamedChild=function(a){this.attachDetachedNodeAsChildCommon(a);this.lists.getVal(b.SystPropNames.ch).insert(0,a.getPseudoReadOnlyData())};e.prototype.insertDetachedUnnamedChildAt=function(a,c){m.dassert(0<=c);this.attachDetachedNodeAsChildCommon(a);this.lists.getVal(b.SystPropNames.ch).insert(c,a.getData())};e.prototype.appendDetachedUnnamedChild=function(a){this.attachDetachedNodeAsChildCommon(a);
this.lists.getVal(b.SystPropNames.ch).push(a.getPseudoReadOnlyData())};e.prototype.setNamedChild=function(a,c){this.ensureHasSyncingMapOfNamedChildren();m.dassert(!this.hasProp(a),"Node "+c.oid+" already has a named child "+a+".");m.dassert(this.permitsNamedChild(a),"Ontology for language says nodetype "+this.nodetype+" does not permit named child "+a+".");m.dassert(this.permitsNamedChild(a,c.nodetype),"Ontology for language says nodetype "+this.nodetype+" does not permit named child "+a+" of nodetype "+
c.nodetype+".");var e=this.maps.getVal(b.SystPropNames.nch);m.dassert(null!=e);e.set(a,c.getPseudoReadOnlyData());this.stdoc.setParentNode(c,this)};e.prototype.indexOfKeyOfNamedChild=function(a){if(!this.hasProp(b.SystPropNames.nch))return null;var c=null;this.forEachNamedChild(function(b,e){b===a&&(c=e)});return c?this.maps.getVal(b.SystPropNames.nch).keys().indexOf(c):null};e.prototype.numUnnamedChildren=function(){if(this.childrenIgnored())return 0;var a=this.lists.getVal(b.SystPropNames.ch);return a?
a.length:0};e.prototype.numNamedChildren=function(){if(this.childrenIgnored())return 0;var a=this.maps.getVal(b.SystPropNames.nch);return a?a.size:0};e.prototype.permitsNamedChild=function(a,b){return b?this.stdoc.stlang.isNodeSubtype(b,this.nclass.allowed_nch[a]):this.nclass.allowed_nch.hasOwnProperty(a)};return e}(l.STNode);a.nodetype_name=g.Nodetypes.Parental;a.abstract=!0;a.allowed_ch=[g.Nodetypes.Node];a.allowed_flatprops=c.mko(b.SystPropNames.ch_collapsed_init,1);a.default_bool_prop_vals=c.mkobj([b.SystPropNames.ch_collapsed_init,
!0]);d.ParentalNodeMinimal=a;a=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}n(e,a);e.prototype.nodetypesOfUnnamedChildren=function(){var a=this.numUnnamedChildren(),b=Array(a);this.forEachUnnamedChild(function(e,g){c.triv(e)?console.warn("<ParentalNode>.forEachUnnamedChild included a trivial child."):g<a&&(b[g]=e.nodetype)});return b};e.prototype.nodetypeCntsOfUnnamedChildren=function(){var a=new Map;this.forEachUnnamedChild(function(b){a.has(b.nodetype)?a.set(b.nodetype,
a.get(b.nodetype)+1):a.set(b.nodetype,1)});return a};e.prototype.forEachChild=function(a,b){if(this.childrenIgnored())return{val:null,contin:!1};if(b&&b.start_exec_after_seeing){var c=!1;return this.forEachChild(function(e,g){if(c){if((e=a(e))&&!e.contin)return e}else e.oid===b.start_exec_after_seeing.oid&&(c=!0);return null},{r2l:b.r2l})}if(b&&b.r2l){var e=this.forEachUnnamedChild(a,{r2l:!0});return e&&!e.contin?e:this.forEachNamedChild(a,{r2l:!0})}return(e=this.forEachNamedChild(a,{r2l:!1}))&&!e.contin?
e:this.forEachUnnamedChild(a,{r2l:!1})};e.prototype.forEachUnnamedChild=function(a,b){if(this.childrenIgnored())return{val:null,contin:!1};var c=this.numUnnamedChildren(),e;b&&b.r2l?(e=c-1,b=c=-1):(e=0,b=1);for(;e!=c;e+=b){var g=a(this.getChild(e),e);if(g)return g}return null};e.prototype.forEachInSubtree=function(a,b){void 0===b&&(b=Infinity);a(this);0<b&&this.forEachChild(function(c){c.forEachInSubtree(a,b-1)})};e.prototype.forEachDescendant=function(a,b){void 0===b&&(b=Infinity);0<b&&this.forEachChild(function(c){c.forEachInSubtree(a,
b-1)})};e.prototype.getFirstChild=function(){if(this.childrenIgnored())return null;var a=this.getFirstNamedChild();return a?a:0<this.numUnnamedChildren()?this.getChild(0):null};e.prototype.getLastChild=function(){return this.childrenIgnored()?null:0<this.numUnnamedChildren()?this.getChild(this.numUnnamedChildren()-1):this.lastNamedChild()};e.prototype.hasChild=function(a){m.assert_nt(a);return this.childrenIgnored()?!1:null!=this.getChild(a)};e.prototype.appendDetachedUnnamedChildren=function(){for(var a=
this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b.forEach(function(b){a.appendDetachedUnnamedChild(b)})};e.prototype.indexOfUnnamedChild=function(a){var b=null;this.forEachUnnamedChild(function(c,e){c===a&&(b=e)});return b};e.prototype.insertDetachedUnnamedChildAfterGivenChild=function(a,c){this.attachDetachedNodeAsChildCommon(a);this.lists.getVal(b.SystPropNames.ch);c=this.indexOfUnnamedChild(c);this.insertDetachedUnnamedChildAt(a,c+1)};e.prototype.keyOfNamedChild=function(a){var b=null;this.forEachNamedChild(function(c,
e){c.oid===a.oid&&(b=e)});return b};e.prototype.indexOrKeyOfChild=function(a){var b=this.indexOfUnnamedChild(a);return c.triv(b)?this.keyOfNamedChild(a):b};e.prototype.nextNamedChild=function(a){if(!this.hasChild(a))return console.error("see nextNamedChild"),null;var b=this.getNamedChildrenKeys();a=b.indexOf(a);return a<b.length-1?this.getChild(b[a+1]):null};e.prototype.prevNamedChild=function(a){m.assert_nt(a);if(!this.hasChild(a))return console.error("see prevNamedChild"),null;var b=this.getNamedChildrenKeys();
a=b.indexOf(a);return 0<a?this.getChild(b[a-1]):null};e.prototype.lastNamedChild=function(){if(this.childrenIgnored())return null;var a=this.getNamedChildrenKeys();return 0<a.length?this.getChild(a[a.length-1]):null};e.prototype.nextUnnamedChild=function(a){return"number"===typeof a?a<this.numUnnamedChildren()-1?this.getChild(a+1):null:this.getChild(0)};e.prototype.nextUnnamedChildIndex=function(a){return"number"===typeof a?(a+=1,a>this.numUnnamedChildren()?this.numUnnamedChildren():a):0};e.prototype.permitsUnnamed=
function(){var a=this.nclass.allowed_ch;m.dassert(null!=a,"allowed_ch missing for Parental nodetype "+this.nodetype+".");return 0<a.length};e.prototype.permitsNamed=function(){var a=this.nclass.allowed_nch;m.dassert(null!=a,"allowed_nch missing for Parental STNodeClass "+this.nodetype+".");return 0<Object.getOwnPropertyNames(a).length};e.prototype.subtypeCounts=function(a){var b=this;a||(a=this.nclass.allowed_ch);var c=this.nodetypesOfUnnamedChildren(),e=new Map;a.forEach(function(a){e.set(a,0)});
a.forEach(function(a){c.forEach(function(c){b.stdoc.stlang.isNodeSubtype(c,a)&&e.set(a,e.get(a)+1)})});return e};e.prototype.canAddAnotherUnnamedChildOfGivenClass=function(a,b){var e=this;if(!a)return!1;b||(b=this.nodetypesOfUnnamedChildren());var g=!0,g=this.nclass.allowed_ch.some(function(b){return e.stlang.isNodeSubtype(a.nodetype_name,b)});c.objkeys(this.nclass.max_ch).forEach(function(b){if(e.stlang.isNodeSubtype(a.nodetype_name,b)){var c=e.nclass.max_ch[b],h;h="number"===typeof c?c:c(e);e.forEachUnnamedChild(function(a){a&&
e.stlang.isNodeSubtype(a.nodetype,b)&&h--});0>h&&console.error("This node has too many children of nodetype "+b+":",e);0>=h&&(g=!1)}});return g};e.prototype.nodeclassesThatCanBeAddedAsUnnamedChildren=function(){var a=this,b=new Set,c=this.nodetypesOfUnnamedChildren();this.stdoc.stlang.allowed_concr_ch_full.get(this.nclass).forEach(function(e){var g=e.nodetype_name;a.canAddAnotherUnnamedChildOfGivenClass(e,c)&&(m.dassert(a.stdoc.stlang.isConcreteNodetype(g)),b.add(e))});return b};e.prototype.numChildren=
function(){return this.numUnnamedChildren()+this.numNamedChildren()};e.prototype.numDescendants=function(){var a=0;this.forEachDescendant(function(b){a++});return a};e.prototype.editActionsForFillDefaults=function(){var b=a.prototype.editActionsForFillDefaults.call(this),c=this.stdoc.stlang,e=c.nodeClassDispatch(this.nodetype),g=e.min_ch,h=e.required_nch,e=this.subtypeCounts(e.allowed_ch),f;for(f in g)if(c.isConcreteNodetype(f))for(var l=e.get(f);l<g[f];l++)b.push({name:"NewUnnamedNode",nodetype:f,
parent:this,insert_after:null,first_child:!0});else for(l=e.get(f);l<g[f];l++)b.push({name:"NewUnnamedNodeStub",abstract_nodetype:f,parent:this,index:0});for(var d in h)this.hasChild(d)||(f=h[d],c.isConcreteNodetype(f)?b.push({name:"NewNamedNode",nodetype:f,parent:this,label:d}):b.push({name:"NewNamedNodeStub",abstract_nodetype:f,parent:this,label:d}));return b};e.prototype.getMinCh=function(a){a=this.nclass.min_ch[a];return"number"===typeof a?a:a(this)};return e}(a);a.nodetype_name=g.Nodetypes.Parental;
a.abstract=!0;a.allowed_ch=[g.Nodetypes.Node];a.allowed_flatprops=c.mkobj([b.SystPropNames.ch_collapsed_init,1],[b.SystPropNames.ignore_children,1]);a.default_bool_prop_vals=c.mkobj([b.SystPropNames.ch_collapsed_init,!0],[b.SystPropNames.ignore_children,!0]);d.ParentalNode=a;var t=function(a){function b(b,c){return a.call(this,b,c)||this}n(b,a);Object.defineProperty(b.prototype,"index",{get:function(){return c.triv(this.utfstate.index_in_seq)?0:this.utfstate.index_in_seq},set:function(a){this.utfstate.index_in_seq=
0>a?0:Math.min(a,this.maxIndex);this.showAndHideChildrenUFState()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"showing_all_in_seq",{get:function(){return!!this.utfstate.showing_all_in_seq},set:function(a){(this.utfstate.showing_all_in_seq=a)?this.forEachUnnamedChild(function(a,b){a.utfstate.hidden=!1}):this.showAndHideChildrenUFState()},enumerable:!0,configurable:!0});b.prototype.showAndHideChildrenUFState=function(){var a=this;this.utfstate.index_in_seq||(this.utfstate.index_in_seq=
0);this.forEachUnnamedChild(function(b,c){b.utfstate.hidden=a.utfstate.index_in_seq===c?!1:!0})};Object.defineProperty(b.prototype,"maxIndex",{get:function(){return Math.max(this.numUnnamedChildren()-1,0)},enumerable:!0,configurable:!0});return b}(a);t.nodetype_name=g.Nodetypes.Seq;t.abstract=!0;t.reader_mode_expandable=!0;d.Seq=t;t=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.get_title=function(){return this.immutableStrings.getVal(b.SystPropNames.title)};
c.prototype.set_title=function(a){this.immutableStrings.setVal(b.SystPropNames.title,a)};c.prototype.isVisible_recursive_up=function(){return!0};c.prototype.isVisible_ignore_parent=function(){return!0};c.prototype.highlight_first_ref_occurrence_only=function(){return this.booleans.getVal(b.SystPropNames.highlight_first_ref_occurrence_only)};c.prototype.content_editable_enabled=function(){return this.booleans.getVal(b.SystPropNames.content_editable_enabled)};Object.defineProperty(c.prototype,"assist_trigger",
{get:function(){return this.immutableStrings.getVal(b.SystPropNames.assist_trigger)},enumerable:!0,configurable:!0});return c}(a);t.nodetype_name=g.Nodetypes.Top;t.abstract=!0;t.inlining_class=p.TopNodeInliningComponent;t.reader_mode_expandable=!0;t.allowed_ch=[g.Nodetypes.Node];t.required_flatprops=c.mkobj([b.SystPropNames.title,4],[b.SystPropNames.assist_trigger,3],[b.SystPropNames.highlight_first_ref_occurrence_only,1],[b.SystPropNames.content_editable_enabled,1],[b.SystPropNames.bottom_newnode_buttons_enabled,
1],[b.SystPropNames.require_mutid_delimiters_by_default,1]);t.allowed_flatprops=c.shallow_copy_if_needed(t.required_flatprops);t.default_str_prop_vals_at_init=c.mkobj([b.SystPropNames.title,"title of this document"]);t.default_str_prop_vals_when_empty=c.mkobj([b.SystPropNames.assist_trigger,"$"]);t.default_bool_prop_vals=c.mkobj([b.SystPropNames.highlight_first_ref_occurrence_only,!0],[b.SystPropNames.content_editable_enabled,!0],[b.SystPropNames.bottom_newnode_buttons_enabled,!0],[b.SystPropNames.require_mutid_delimiters_by_default,
!0]);d.Top=t;(function(a){a.nodetype_name=g.Nodetypes.ValueAssignableNodeMixin;a.abstract=!0;a.flatprop_change_listeners=c.mko(b.SystPropNames.assigned_val,function(a){m.derr("TODO change listener for ValueAssignableNodeMixin")});a.allowed_flatprops=c.mkobj([b.SystPropNames.assigned_val,2],[b.SystPropNames.init_val,2]);a.allowed_ch=["STNode"];a.upstate=[b.SystPropNames.assigned_val];var e=[],h=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}n(e,a);e.prototype.get_initval=function(){return this.numbers.getVal(b.SystPropNames.init_val)};
e.prototype.get_assignedval=function(){var a;this.upstate?a=this.upstate.getAssignedVal(this.oid):m.dwarn("in get_assignedval, node "+this.oid+"'s upstate is absent");return!this.upstate||c.triv(a)?this.hasProp(b.SystPropNames.init_val)?this.numbers.getVal(b.SystPropNames.init_val):null:a};e.prototype.set_assignedval=function(a){this.upstate?this.upstate.setAssignedVal(this.oid,a):m.derr("in set_assignedval, node "+this.oid+"'s upstate is absent")};return e}(l.STNode);a.ClassForUseInExtends=h;a.applyMixin=
c.makeMixinApplicator(h,e);a.isValueAssignableNode=c.makeMixinInstanceChecker(e)})(d.ValueAssignableNodeMixin||(d.ValueAssignableNodeMixin={}));var u;(function(a){a.TEMPLATE_PARAM_RE=/(?:@@|#)(\d+)/;a.nodetype_name=g.Nodetypes.RefableInTextMixin;a.inliningvm_props=[b.SystPropNames.html_name,b.SystPropNames.html_template];a.abstract=!0;a.DEFAULT_MUTID="";a.DEFAULT_DISPLAY_SYMB_ONLY="";a.flatprop_change_listeners=c.mkobj([b.SystPropNames.mutid,function(a){a.stdoc.refManager.buildall()}],[b.SystPropNames.html_name,
function(a,c){var e=a.immutableStrings.getVal(b.SystPropNames.mutid),g=a.immutableStrings.getVal(b.SystPropNames.html_name);m.ddeb("html_name change lister, with this event: ");m.dlog(c);var h=!1;""===e&&(h=!0,a.immutableStrings.setVal(b.SystPropNames.mutid,g));null!=c.oldValue&&e===c.oldValue&&(h=!0);h&&a.wstdoc.applyEditAction({name:"ImmutableStringPropChange",nodeid:a.oid,label:b.SystPropNames.mutid,value:g})}]);a.allowed_ch=["STNode"];a.allowed_flatprops=c.mkobj([b.SystPropNames.mutid,3],[b.SystPropNames.html_name,
4],[b.SystPropNames.html_template,3],[b.SystPropNames.prose_name,4],[b.SystPropNames.local_html_name,4]);a.default_str_prop_vals_when_empty=c.mkobj([b.SystPropNames.html_name,a.DEFAULT_DISPLAY_SYMB_ONLY],[b.SystPropNames.local_html_name,function(a){return a.get_html_name()}],[b.SystPropNames.html_template,""]);a.default_str_prop_vals_at_init=c.mkobj([b.SystPropNames.mutid,function(b){return b.get_html_name()||a.DEFAULT_MUTID}]);a.upstate=[b.SystPropNames.local_html_name];var e=[],f=function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}n(c,a);c.prototype.get_mutid=function(){return this.immutableStrings.getVal(b.SystPropNames.mutid)};c.prototype.set_mutid=function(a){a?this.immutableStrings.setVal(b.SystPropNames.mutid,a):m.derr("tried to set mutid of "+this.oid+" to "+a)};c.prototype.get_html_name=function(){return this.get_local_html_name()||this.immutableStrings.getVal(b.SystPropNames.html_name)};c.prototype.set_html_name=function(a){this.immutableStrings.setVal(b.SystPropNames.html_name,a)};
c.prototype.get_local_html_name=function(){return this.upstate.local_html_name.get(this.oid)};c.prototype.set_local_html_name=function(a){this.stdoc.upstate.local_html_name.set(this.oid,a)};c.prototype.get_html_template=function(){return this.immutableStrings.getVal(b.SystPropNames.html_template)};c.prototype.set_html_template=function(a){this.immutableStrings.setVal(b.SystPropNames.html_template,a)};c.prototype.get_resolved_html_name=function(a){return h.resolveDisplayOfRefableInTextNode(this.stdoc.refManager.mutid_regex,
this,a)};c.prototype.get_prose_name=function(){return this.immutableStrings.getVal(b.SystPropNames.prose_name)};c.prototype.set_prose_name=function(a){this.immutableStrings.setVal(b.SystPropNames.prose_name,a)};return c}(l.STNode);a.ClassForUseInExtends=f;a.applyMixin=c.makeMixinApplicator(f,e);a.isRefableInText=c.makeMixinInstanceChecker(e)})(u=d.RefableInTextMixin||(d.RefableInTextMixin={}));t=function(a){function b(b,c){return a.call(this,b,c)||this}n(b,a);return b}(a);t.nodetype_name=g.Nodetypes.ParentalRefableInText;
t.abstract=!0;d.ParentalRefableInText=t;u.applyMixin(t);p=function(a){function b(b,c){return a.call(this,b,c)||this}n(b,a);return b}(l.STNode);p.nodetype_name=g.Nodetypes.LeafRefableInText;p.abstract=!0;p.allowed_ch=[];p.allowed_nch={};d.LeafRefableInText=p;u.applyMixin(p);var v=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);Object.defineProperty(c.prototype,"reffed_nodeid",{get:function(){return this.immutableStrings.getVal(b.SystPropNames.id_ref)},set:function(a){this.immutableStrings.setVal(b.SystPropNames.id_ref,
a)},enumerable:!0,configurable:!0});c.prototype.ogetReferredToNode=function(){if(this.reffed_nodeid){var a=this.wstdoc.ogetNodeByPermId(this.reffed_nodeid);return a?a:null}return null};c.optionsByNodetype=function(a){return function(b){return b.wstdoc.traversal.getFilteredRefableInTextNodes(function(b){return b.hasType(a)}).map(function(a){var b=a.html_name;b||(b=a.get_html_name());return[b,a.oid]})}};c.prototype.referredToNodetype=function(){return this.nclass.REFERRED_TO_NODETYPE};return c}(u.ClassForUseInExtends);
v.nodetype_name=g.Nodetypes.Ref;v.abstract=!0;v.inliningvm_props=[b.SystPropNames.id_ref];v.hide_in_user_modes=[b.STUserModes.reader];v.required_flatprops=c.mkobj([b.SystPropNames.id_ref,5]);v.allowed_flatprops=c.mkobj([b.SystPropNames.hidden,1]);v.default_str_prop_vals_at_init=c.mkobj([b.SystPropNames.id_ref,function(a){if(a.nclass.possible_values[b.SystPropNames.id_ref]){var c=a.nclass.possible_values[b.SystPropNames.id_ref];a="function"===typeof c?c(a):c}else a=v.optionsByNodetype(a.referredToNodetype())(a);
return 0<a.length?a[0][1]:""}]);v.default_bool_prop_vals=c.mkobj([b.SystPropNames.hidden,!0]);d.RefNode=v;var y=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);Object.defineProperty(c.prototype,"reffed_nodeid",{get:function(){return this.immutableStrings.getVal(b.SystPropNames.id_ref)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"reffed_docid",{get:function(){var a=this.immutableStrings.getVal(b.SystPropNames.doc_ref);if(!e.STApp.the.filesmanager.get_open_syncing_doc(a)){var c=
this.immutableStrings.getVal(b.SystPropNames.doc_title);if(c&&(c=e.STApp.the.appdata.firstIdWithThisFilenameOrNull(c),e.STApp.the.filesmanager.get_open_syncing_doc(c)))return c}return a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"reffed_stdoc",{get:function(){var a=this.reffed_docid;return a?e.STApp.the.get_wstdoc(a):(m.dwarn("no docid"),null)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"linked_node",{get:function(){var a=this.reffed_stdoc;if(!a)return null;
var b=this.reffed_nodeid;return b?a.ogetNodeByPermId(b):(m.dwarn("couldn't find linked node"),null)},enumerable:!0,configurable:!0});c.optionsByNodetype=function(a){return function(b){b=b.reffed_stdoc;if(!b)return m.dwarn("no stdoc"),[];b=b.traversal.getFilteredRefableInTextNodes(function(b){return b.hasType(a)});m.dlog(b.length);return b.map(function(a){var b=a.html_name;b||(b=a.get_html_name());return[b,a.oid]})}};return c}(a);y.nodetype_name=g.Nodetypes.Import;y.abstract=!0;y.required_flatprops=
c.mkobj([b.SystPropNames.doc_ref,5],[b.SystPropNames.id_ref,5]);y.allowed_flatprops=c.mkobj([b.SystPropNames.hidden,1]);y.default_str_prop_vals_at_init=c.mkobj([b.SystPropNames.doc_ref,function(a){return a.stdoc.stdocid}],[b.SystPropNames.id_ref,v.default_str_prop_vals_at_init[b.SystPropNames.id_ref]]);y.possible_values=c.mkobj([b.SystPropNames.doc_ref,function(a){return e.STApp.the.filesmanager.get_open_syncing_doc_title_id_pairs()}]);y.flatprop_change_listeners=c.mkobj(["_id_ref",function(a){m.dremindonce("ImportNode should try to merge changes, rather than replace. Either that or make the created nodes read-only");
console.warn("_id_ref changed to "+a.linked_node.oid);var b=a.wstdoc;b.copyNode(a.linked_node);a.hasChild(0)&&b.removeNodeAndCleanup(a.getChild(0));b.pasteNode(a)}]);d.ImportNode=y;u=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.referredToNodetype=function(){return this.immutableStrings.getVal(b.SystPropNames.ref_nodetype)};return c}(y);u.nodetype_name=g.Nodetypes.ImportUntyped;u.abstract=!1;u.hide_in_user_modes=[];u.required_flatprops=c.mkobj([b.SystPropNames.ref_nodetype,
5]);u.default_str_prop_vals_at_init=c.mkobj([b.SystPropNames.ref_nodetype,g.Nodetypes.FreeForm]);u.possible_values=c.mkobj([b.SystPropNames.id_ref,function(a){var b=a.referredToNodetype();return b?y.optionsByNodetype(b)(a):[]}],[b.SystPropNames.ref_nodetype,function(a){a=a.stdoc.stlang.getSubtypes(g.Nodetypes.RefableInTextMixin);var b=Array(a.size),c=0;a.forEach(function(a){b[c]=[a,a];c++});return b}]);d.ImportNodeUntyped=u;var r=function(a){function c(){return null!==a&&a.apply(this,arguments)||
this}n(c,a);Object.defineProperty(c.prototype,"display_as_defn",{set:function(a){this.booleans.setVal(b.SystPropNames.display_as_defn,a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"prose",{get:function(){return this.editableStrings.getVal(b.SystPropNames.text)},set:function(a){this.editableStrings.setVal(b.SystPropNames.text,a)},enumerable:!0,configurable:!0});return c}(t);r.nodetype_name=g.Nodetypes.FreeForm;r.abstract=!1;r.inlining_class=k.FreeFormInliningComponent;r.inliningvm_props=
[b.SystPropNames.text,b.SystPropNames.display_as_defn,b.SystPropNames.level];r.reader_mode_expandable=!0;r.init_collapsed=!1;r.allowed_ch=[g.Nodetypes.Node];r.required_flatprops=c.mkobj([b.SystPropNames.text,7],[b.SystPropNames.text_formatting_lang,5]);r.possible_values=c.mkobj([b.SystPropNames.text_formatting_lang,function(){return[["minimal html","wordlevel_html_etc"],["safe html","safe_html"]]}]);r.allowed_flatprops=c.mkobj([b.SystPropNames.display_as_defn,1],[b.SystPropNames.level,2],[b.SystPropNames.demphasize,
1],[b.SystPropNames.defn_prefix,4],[b.SystPropNames.continued,1],[b.SystPropNames.strikeout_text,1]);r.default_str_prop_vals_at_init=c.mkobj([b.SystPropNames.text,""]);r.default_str_prop_vals_when_empty=c.mkobj([b.SystPropNames.text,""],[b.SystPropNames.text_formatting_lang,"wordlevel_html_etc"]);r.default_bool_prop_vals=c.mkobj([b.SystPropNames.display_as_defn,!0],[b.SystPropNames.demphasize,!0],[b.SystPropNames.continued,!0],[b.SystPropNames.strikeout_text,!0]);r.default_num_prop_vals=c.mkobj([b.SystPropNames.level,
3]);d.FreeForm=r;k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(a);k.nodetype_name=g.Nodetypes.Group;k.abstract=!0;k.allowed_flatprops=c.mkobj([b.SystPropNames.text,7]);d.GroupNode=k;k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(p);k.nodetype_name=g.Nodetypes.CollapsibleInlineNote;k.abstract=!1;k.reader_mode_expandable=!0;k.allowed_ch=[];k.allowed_nch={};k.allowed_flatprops=c.mkobj([b.SystPropNames.text,7]);d.CollapsibleInlineNote=
k;k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(l.STNode);k.nodetype_name=g.Nodetypes.SectionBreak;k.abstract=!1;k.allowed_ch=[];k.allowed_nch={};d.SectionBreak=k;k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(a);k.nodetype_name=g.Nodetypes.Concatenate;k.abstract=!1;k.inliningvm_props=[b.SystPropNames.ch];k.allowed_ch=[g.Nodetypes.Node];k.allowed_nch={};k.min_ch=c.mko(g.Nodetypes.Node,2);d.Concatenate=k;k=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}n(b,a);return b}(l.STNode);k.nodetype_name=g.Nodetypes.Numbering;k.hide_in_user_modes=[b.STUserModes.reader];d.Numbering=k;a=function(a){function e(){return null!==a&&a.apply(this,arguments)||this}n(e,a);Object.defineProperty(e.prototype,"reffed_nodeid",{get:function(){return this.immutableStrings.getVal(b.SystPropNames.id_ref)},set:function(a){this.immutableStrings.setVal(b.SystPropNames.id_ref,a)},enumerable:!0,configurable:!0});e.prototype.ogetReferredToNode=function(){if(this.reffed_nodeid){var a=
this.wstdoc.ogetNodeByPermId(this.reffed_nodeid);return a?a:null}return null};e.prototype.referredToNodetype=function(){throw new c.ImplementedInSubclass("referredToNodetype");};e.prototype.RefNodeToString=function(a){void 0===a&&(a="");a=this.toString(a);var c=this.ogetReferredToNode();return c?c.hasProp(b.SystPropNames.html_name)?a+" ("+c.immutableStrings.getVal(b.SystPropNames.html_name)+")":a:a+" ("+b.BROKEN_REF_DISPLAY+")"};return e}(a);a.nodetype_name=g.Nodetypes.Link;a.abstract=!0;a.required_flatprops=
c.mkobj([b.SystPropNames.id_ref,5]);a.default_str_prop_vals_when_empty=c.mkobj([b.SystPropNames.id_ref,""]);a.default_str_prop_vals_at_init=c.mkobj([b.SystPropNames.id_ref,function(a){a=v.optionsByNodetype(a.nclass.REFERRED_TO_NODETYPE)(a);return 0<a.length?a[0][1]:""}]);a.hide_in_user_modes=[];d.Link=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(l.STNode);a.nodetype_name=g.Nodetypes.MathParse;a.abstract=!1;a.required_flatprops=c.mkobj([b.SystPropNames.math_syntax,
6]);a.default_str_prop_vals_when_empty=c.mkobj([b.SystPropNames.math_syntax,""]);a.flatprop_change_listeners=c.mkobj([b.SystPropNames.math_syntax,function(a){var c=a.editableStrings.getVal(b.SystPropNames.math_syntax);c&&0!==c.length&&(m.ddeb("MathParse flatprop_change_listener",c),c=structure_together.mathtextToSTNodeSubtree(c,a.wstdoc),a.parentNode.appendDetachedUnnamedChildren(c))}]);d.MathParse=a;d.mk_newProse_builder=function(a){return function(b,c){var e=new r(a);e.prose=b;a.appendDetachedNode(e,
c);return e}}},function(k,d,a){var n=a(4);window.argsForEach=n.argsForEach;window.isarray=n.isarray;window.count=n.count;window.CONSOLE_WARN_STYLE="background: black; color: yellow; fontsize:medium;";window.CONSOLE_NOTICE_STYLE="background: black; color: white;";window.CONSOLE_DEBUG_STYLE="background: black; color: white; fontsize:large;";window.CONSOLE_TODO_STYLE="background: white; color: green;";window.CONSOLE_REMIND_STYLE="background: white; color: purple;";d.devthrow=function(a){throw a;};d.weakassert=
function(a,f){for(var h=[],l=2;l<arguments.length;l++)h[l-2]=arguments[l];window.structure_together.assertions_enabled&&!a&&(console.error(h),f?console.error("Failed assertion %test%\n"+f+"\n"):console.error("Failed assertion %test%\n"))};d.dassert=function(a,f){for(var h=[],l=2;l<arguments.length;l++)h[l-2]=arguments[l];if(window.structure_together.assertions_enabled&&!a){console.error(h);if(f)throw Error("Failed assertion %test%\n"+f+"\n");throw Error("Failed assertion %test%\n");}};d.dlog=function(){for(var a=
[],f=0;f<arguments.length;f++)a[f]=arguments[f];console.log(a)};d.dwarn=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];console.warn(a)};d.derr=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];console.error(a)};d.ddeb=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];console.warn("%c"+a,window.CONSOLE_DEBUG_STYLE,f)};d.dremind=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];console.warn("%c"+a,window.CONSOLE_REMIND_STYLE,
f)};d.dremindonce=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];window.remindonce(a,f)};d.dtodo=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];console.warn("%c"+a,window.CONSOLE_TODO_STYLE,f)};d.dnote=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];console.warn("%c"+a,window.CONSOLE_NOTICE_STYLE,f)};d.dlogcat=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];window.structure_together.logging.logTypeActive(a)&&
console.log(f)};d.dwarncat=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];window.structure_together.logging.logTypeActive(a)&&console.warn(f)};d.derrcat=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];window.structure_together.logging.logTypeActive(a)&&console.error(f)};d.dlogif=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];a&&console.log(f)};d.dwarnif=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];
a&&console.warn(f)};d.derrif=function(a){for(var f=[],h=1;h<arguments.length;h++)f[h-1]=arguments[h];a&&console.error(f)};d.assert_nt=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];window.structure_together.assertions_enabled&&n.argsForEach(function(a,f){if(null===a||void 0===a)throw Error("Element "+f.toString()+" of (%exprs%) should not be null or undefined.");},a)};d.timerStart=function(a){window.structure_together.logging.logTypeActive("timer")&&window.std.timer.start(a)};
d.timerEnd=function(a){if(window.structure_together.logging.logTypeActive("timer")){var f=Math.floor(window.std.timer.end(a));f>=window.std.timer.min_to_display&&console.log("%c"+a+": "+f+"ms","color:blue;")}}},function(k,d,a){function n(a){return null!=a&&"object"===typeof a&&"FlatPropLink"===a.type}function m(a,b){a.keys().forEach(function(c){b(c,a.get(c))})}function f(a,b,c,e,g){void 0===c&&(c=null);g&&g.uotype?a.type===g.uotype&&b(a,c,e):g&&g.nodesonly?a.type===x.SyncingObjectTypes.Map&&a.has(y.SystPropNames.nodetype)&&
b(a,c,e):b(a,c);switch(a.type){case x.SyncingObjectTypes.List:a.asArray().forEach(function(c,e){f(c,b,a,e,g)});break;case x.SyncingObjectTypes.Map:m(a,function(c,e){h(e)&&f(e,b,a,c,g)});break;case x.SyncingObjectTypes.EditableString:break;case "FlatPropLink":break;default:throw new r.NotYetImplemented("SyncingObject type "+a.type+" unhandled");}}function h(a){return a&&"object"===typeof a&&null!=a.type}function l(a){return a&&"object"===typeof a&&a.type===x.SyncingObjectTypes.Map}function g(a){return"string"===
typeof a}function b(a){return a&&"object"===typeof a&&a.type===x.SyncingObjectTypes.EditableString}function c(a){return a&&"object"===typeof a&&a.type===x.SyncingObjectTypes.List}function e(a,b,c,g){v.dassert(!c||r.nottriv(g));if(r.objhas(b,"json"))return b.json;try{var h=[b.id,b.type,b.value],f=h[0],l=h[1],d=h[2];v.dassert("root"!==f);var p=null;switch(l){case "Map":p=a.createMap(null,c?f:null);r.objForEachOwnKey(d,function(b){p.set(b,e(a,d[b],c,g))});break;case "List":p=a.createList(null,c?f:null);
d.forEach(function(b){p.push(e(a,b,c,g))});break;case "EditableString":p=a.createString(d,c?f:null);break;default:return v.dassert(!1,"shouldn't get here..."),null}c&&p.id!==f&&g&&(v.dlog("id changed from "+f+" to "+p.id+". storing renaming."),g.set(f,p.id));return p}catch(J){return console.error("Error trying to import this json: ",b),console.error("The error:",J),null}}function p(a,b){v.assert_nt(a,b);v.dassert("string"!==typeof b);var c=a.createMap(null,null);v.dassert(y.SystPropNames.nodetype in
b);r.objForEachOwnKey(b,function(e){var g=b[e];if("_ch"===e){var h=a.createList(null);c.set(e,h);g.forEach(function(b){h.push(p(a,b))})}else v.dassert("string"===typeof g||"boolean"===typeof g),"_text"===e?c.set(e,a.createString(g)):c.set(e,g)});return c}function t(a){if(g(a)||"boolean"===typeof a||"number"===typeof a)return{json:a};if(l(a)){var e={};a.keys().forEach(function(b){e[b]=t(a.get(b))});return{id:a.id,type:"Map",value:e}}if(b(a))return{id:a.id,type:"EditableString",value:a.getText()};if(c(a)){var h=
[];a.asArray().forEach(function(a,b){h[b]=t(a)});return{id:a.id,type:"List",value:h}}n(a);return{json:a}}function u(a){if(b(a))return a.getText();if(l(a)){var e=r.bareobj();e.id=a.id;a.keys().forEach(function(b){e[b]=u(a.get(b))});return e}if(g(a))return a;if(c(a)){var h=[];a.asArray().forEach(function(a,b){h[b]=u(a)});return h}}var v=a(7),y=a(9),r=a(4),x=a(10);d.isFlatPropLink=n;d.forEachInUMap=m;d.forEachSyncingObject=f;d.get_object_id=function(a){return a.id};d.isSyncingObject=h;d.isMap=l;d.isImmutableString=
g;d.isBoolean=function(a){return!0===a||!1===a};d.isNumber=function(a){return"number"===typeof a};d.isEditableString=b;d.isList=c;d.googleDocJsonToSTData=function(a,b,c){var g=b.value,h=a.getRoot(),l;c&&(l=new Map);r.objForEachOwnKey(g,function(b){h.set(b,e(a,g[b],c,l))});l&&0<l.size&&(v.dnote("Will do reference remappings for "+l.size+" distinct permids"),f(h,function(a){if(a.has(y.SystPropNames.id_ref)){var b=a.get(y.SystPropNames.id_ref);l.has(b)&&a.set(y.SystPropNames.id_ref,l.get(b))}},null,
null,{nodesonly:!0}))};d.googleJsonToSTData=e;d.shortJsonForFirstGenesisToSTDocData=function(a,b){window.thejson=b;var c=a.getRoot();c.set(y.SystDocPropNames.storage_and_version_indep_doc_id,b[y.SystDocPropNames.storage_and_version_indep_doc_id]);c.set(y.SystDocPropNames.language_id,b[y.SystDocPropNames.language_id]);c.set("TOP_NODE",p(a,b.TOP_NODE))};d.sDataToGoogleJson=t;d.sDataToShorterJsonForPrinting=u;d.prettySTDataShortJson=function(a){return r.prettyJson(u(a))};d.prettySTDataGoogleJson=function(a){return r.prettyJson(t(a))};
d.getLanguageIdFromFileData=function(a){try{return a.get(y.SystDocPropNames.language_id)}catch(z){return null}};d.getLanguageIdFromShortJsonObj=function(a){return a[y.SystDocPropNames.language_id]};d.setLanguageId=function(a,b){a.set(y.SystDocPropNames.language_id,b)};d.setDocId=function(a,b){a.set(y.SystDocPropNames.storage_and_version_indep_doc_id,b)};d.getDocIdFromSTDocData=function(a){return a.get(y.SystDocPropNames.storage_and_version_indep_doc_id)};d.getDocIdFromGoogleJsonObj=function(a){return a.value[y.SystDocPropNames.storage_and_version_indep_doc_id].json};
d.getDocIdFromShortJsonObj=function(a){return a[y.SystDocPropNames.storage_and_version_indep_doc_id]}},function(k,d,a){k=a(4);d.MISSING_DEFAULT_VAL_FOR_REQUIRED_STRING_PROP="WARNING: missing_default_val_for_required_stringprop";d.MISSING_DEFAULT_VAL_FOR_REQUIRED_BOOL_PROP=!1;d.MISSING_DEFAULT_VAL_FOR_REQUIRED_NUM_PROP=-1;d.DEFAULT_FILEID="0BzKTGZrxy40NcEFqdVR2ZjZxRG8";d.INDENT="\t";d.BROKEN_REF_DISPLAY="~broken-ref~";d.ERROR_DISPLAY="<error>";d.LOCAL_STORAGE_PREFIX="structure_together.";d.ROUND_PRECISION=
3;d.DELAY_FOR_QUEUE_SETSTATE=200;d.DELAY_FOR_AFTER_FIRST_RENDER_CALLBACKS=1E3;d.MIN_TIME_BETWEEN_LOCAL_STORAGE_WRITES=1E3;d.LogTypes={could_be_worrisome:"could_be_worrisome",deal_with_eventually:"deal_with_eventually",timer:"timer",important_event:"important_event",nts:"nts",links:"links",ontology:"ontology",lib_load:"lib_load",langinit:"langinit",jqueryevent:"jqueryevent",plugin_notice:"plugin_notice",entering:"entering",exiting:"exiting",modelevent:"modelevent",rt:"rt",localModel_events:"localModel_events",
rootmap_event:"rootmap_event",save_event:"save_event",input_event:"input_event",ioevent:"ioevent",quasipure:"quasipure",marknodeovhover:"marknodeovhover",react:"react",reactopt:"reactopt",undo:"undo",qtip:"qtip",conversion:"conversion",startup:"startup",load_file_progress:"load-file-progress",appdata:"appdata",inline_editing:"inline_editing",post_build_change_annotator:"post_build_change_annotator",post_build_change_annotator_verbose:"post_build_change_annotator_verbose",post_build_change_annotator_summary:"post_build_change_annotator_summary",
vmbuild_and_react_perf_stats:"vmbuild_and_react_perf_stats"};window.structure_together.LogTypes=d.LogTypes;d.LogColors={Lime:"#00FF00"};d.LanguageModules={propifps:"propositional IFPs",ifp:"interpreted formal proofs",ifpdmock:"ifpdmock",structuredText:"structured-text",langmaking:"langmaking",regexlang:"regexlang",napl:"napl",firstgenesis:"firstgenesis",racket:"racket"};d.PersistTypes={RT:"RealtimeAPI",Local:"Local"};d.SystPropNames={id_ref:"_id_ref",doc_ref:"_docid_ref",doc_title:"_doctitle_ref",
ref_nodetype:"_ref_nodetype",nodetype:"_nodetype",ch:"_ch",nch:"_nch",mutid:"_mutid",html_name:"_html_name",html_template:"_html_template",prose_name:"_prose_name",text:"_text",math_syntax:"_math_syntax",html:"_html",title:"_title",text_formatting_lang:"_text_format",level:"_level",index:"_index",local_html_name:"_local_html_name",special_inlining:"_special_inlining",display_as_defn:"_display_as_defn",defn_prefix:"_defn_prefix",ch_collapsed_init:"_ch_collapsed_init",hidden:"_hidden",ignore_children:"_ignore_children",
init_val:"init_val",assigned_val:"_assigned_val",emphasize:"_emphasize",demphasize:"_demphasize",continued:"_continued",strikeout_text:"_strikeout_text",protected:"_protected",abstract_nodetype:"_abstract_nodetype",highlight_first_ref_occurrence_only:"_highlight_first_ref_occurrence_only",assist_trigger:"_assist_trigger",content_editable_enabled:"_content_editable_enabled",bottom_newnode_buttons_enabled:"_bottom_newnode_buttons_enabled",require_mutid_delimiters_by_default:"_default_require_mutid_delim"};
a=d.SystPropNames;d.SystPropNamesForDisplay=k.mkobj2(a.id_ref,"Referenced node id",a.doc_ref,"Referenced doc id",a.doc_title,"Doc title",a.ref_nodetype,"Referenced node type",a.nodetype,"Node type",a.mutid,"Id for in-text references",a.html_name,"Display name",a.html_template,"Display template",a.prose_name,"In-text Display name",a.text,"Text",a.html,"Text",a.title,"_title",a.text_formatting_lang,"Text formatting language",a.level,"Heading level",a.index,"Sequence index",a.local_html_name,"Custom display name (not shared)",
a.special_inlining,"Special inlining",a.display_as_defn,"Display as definition",a.defn_prefix,"Prefix for definition",a.ch_collapsed_init,"Children collapsed on first load",a.hidden,"Hide",a.ignore_children,"Ignore children",a.init_val,"Initial value",a.assigned_val,"Computed value",a.protected,"Protect node from edits",a.emphasize,"Emphasize",a.demphasize,"Demphasize",a.abstract_nodetype,"Abstract node type",a.highlight_first_ref_occurrence_only,"Only highlight the first occurrence of a reference in any text field",
a.assist_trigger,"Content assist trigger",a.content_editable_enabled,"Inline text editing (HTML's contentEditable)",a.bottom_newnode_buttons_enabled,"Buttons on bottom of screen for adding new nodes",a.require_mutid_delimiters_by_default,"Require {} delimiters for in-text reference, by default");d.SystDocPropNames={language_id:"_language_id",storage_and_version_indep_doc_id:"_storage_and_version_indep_doc_id",simple_version:"_simple_version"};d.STUserModes={localauthor:"localauthor",reader:"reader",
dev:"dev"};d.TEST_DOC_GEN_IDS={factoring:"factoring",basicoutline:"basic outline"}},function(k,d){d.SyncingObjectTypes={EditableString:"EditableString",Map:"Map",List:"List"};d.FlatPropTypesCoarse={editstring:"editstring",immutstring:"immutstring",bool:"boolean",num:"number"};d.EventType={OBJECT_CHANGED:"object_changed",VALUES_SET:"values_set",VALUES_ADDED:"values_added",VALUES_REMOVED:"values_removed",VALUE_CHANGED:"value_changed",TEXT_INSERTED:"text_inserted",TEXT_DELETED:"text_deleted",COLLABORATOR_JOINED:"collaborator_joined",
COLLABORATOR_LEFT:"collaborator_left",REFERENCE_SHIFTED:"reference_shifted",DOCUMENT_SAVE_STATE_CHANGED:"document_save_state_changed",UNDO_REDO_STATE_CHANGED:"undo_redo_state_changed",ATTRIBUTE_CHANGED:"attribute_changed"}},function(k,d,a){function n(a,f){switch(f){case 1:return a.get_html_name();case 0:return a.get_prose_name()||a.get_html_name()}throw Error("should not be possible unless there's an uncaught type error");}function m(a,f,g,b,c,e){a.lastIndex=c;var h=a.exec(b);if(!h||5<e)return 0===
c?b:b.substring(c);c=b.substring(c,h.index);var l=a.lastIndex,d=f.stdoc.refManager.ogetRefableInTextNodeByMutid(f,h[1]);d?(h=n(d,g),c+=m(a,d,g,h,0,e+1)):c+=h[0];l<b.length&&(c+=m(a,f,g,b,l,e+1));return c}var f=a(4);d.pickRawDisplay=n;d.resolveDisplayOfRefableInTextNode=function(a,l,g){var b=n(l,g);return f.triv(b)?(f.warnonce("fix this eventually (remove the calls): arg to resolveDisplayHelper is trivial."),null):m(a,l,g,b,0,0)};d.resolveDisplayHelper=m;d.TEMPLATE_APP_REGEXP=/(\w+)((?:\([^()]+\))+)/;
d.tryParseTemplateApp=function(a){var h=a.match(d.TEMPLATE_APP_REGEXP);return h&&3===h.length?(console.log(h[1],h[2]),a=h[1],h=h[2],h=h.substring(1,h.length-1).split(")("),[a,h]):null}},function(k,d,a){var n=a(5),m=a(6),f=a(4),h=a(7),l=a(13),g=a(9),b=a(8),c=a(14),e=a(3),p=a(15);k=function(){function a(a,c,e){var l=this;this.stdoc=a;this.utfstate={panel_hidden:!0,props_being_edited_by_this_user:new Map,lastAddedStringProp:null,selected:!1,hidden:!1,temp_ch_expanded:null};this.cache={privateAndSharedPropKeys:null};
this.editableStrings={getObj:function(a,c){c=l.getPropVal(a,c);h.weakassert(f.triv(c)||b.isEditableString(c),"prop name "+a+" of node "+l.oid+" exists, but its value is of the wrong type (not an editable string): ",c);return c},hasObj:function(a){return(a=l.pdata_readview.get(a))&&b.isEditableString(a)},getVal:function(a,b){var c=l.editableStrings.getObj(a,b);return f.nottriv(c)?c.getText?c.getText():(console.error("Error node "+l.oid+" key "+a),c):b&&void 0!==b.if_none?b.if_none:null},setVal:function(a,
b){h.assert_nt(a);if(!l.pdata_readview.has(a)){var c=l.wstdoc.create.string();h.dlogcat(g.LogTypes.rt,"rt map.set(-,editable string)");l.setPropVal(a,c);l.stdoc.setContainingNode(c,l)}""===b&&(b=l.getStrDefaultAlwaysOrElse(a,!1,""),""===b&&h.dlog("EditableString prop set to empty string, and the prop has no default-always val (or it's the empty string), so will set prop to empty string."));h.dlogcat(g.LogTypes.rt,"rt estring.setText");l.pdata_readview.get(a).setText(b)},getPropertyName:function(a){var b=
null;l.propkeys.ofEditableStrProps().forEach(function(c){f.triv(b)&&l.editableStrings.getObj(c).id===a.id&&(b=c)});return b}};this.immutableStrings={getVal:function(a,c){c=l.getPropVal(a,c);h.weakassert(f.triv(c)||b.isImmutableString(c),"prop name "+a+" of node "+l.oid+" exists, but its value is of the wrong type (not an immutable string): ",c);return c},hasVal:function(a){h.assert_nt(a);return b.isImmutableString(l.pdata_readview.get(a))},setVal:function(a,b){h.derrif(f.triv(b),"accessor is "+a+
". should probably just fail gracefully rather than. e.g. show error and return.");h.weakassert(f.nottriv(a)&&f.nottriv(b),"See SNode.immutableString.setVal");h.dassert(f.objhas(l.nclass.allowed_flatprops,a),a+" is not a key of "+l.nclass.nodetype_name+".allowed_flatprops");h.dlogcat(g.LogTypes.rt,"rt map.set(-,string)");if(a===g.SystPropNames.mutid&&l.pdata_readview.has(g.SystPropNames.mutid)){var c=l.pdata_readview.get(g.SystPropNames.mutid);c!==b&&l.wstdoc.refManager.findReplaceMutid(l.oid,c,b)}p.inEditMode()?
l.setPropVal(a,b):a===g.SystPropNames.html_name?l.setPropVal(g.SystPropNames.local_html_name,b):h.derr("edit rejected")}};this.booleans={getVal:function(a,c){c=l.getPropVal(a,c);h.weakassert(f.triv(c)||b.isBoolean(c),"prop name "+a+" of node "+l.oid+" exists, but its value is of the wrong type (not a boolean): ",c);return c},hasVal:function(a){h.assert_nt(a);return b.isBoolean(l.pdata_readview.get(a))},setVal:function(a,b){h.assert_nt(a,b);h.dassert(1===l.nclass.allowed_flatprops[a],a+" is not a key of "+
l.nclass.nodetype_name+".allowed_flatprops or is not registered as a boolean prop");h.dlogcat(g.LogTypes.rt,"rt map.set(-,string)");l.setPropVal(a,b)}};this.numbers={getVal:function(a,c){c=l.getPropVal(a,c);h.weakassert(f.triv(c)||b.isNumber(c),"prop name "+a+" of node "+l.oid+" exists, but its value is of the wrong type (not a number): ",c);return c},hasVal:function(a){h.assert_nt(a);return b.isNumber(l.pdata_readview.get(a))},setVal:function(a,b){h.assert_nt(a,b);h.dassert(2===l.nclass.allowed_flatprops[a],
a+" is not a key of "+l.nclass.nodetype_name+".allowed_flatprops or is not registered as a number prop");h.dlogcat(g.LogTypes.rt,"rt map.set(-,string)");l.setPropVal(a,b)}};this.lists={getVal:function(a,c){c=l.getPropVal(a,c);h.weakassert(f.triv(c)||b.isList(c),"prop name "+a+" of node "+l.oid+" exists, but its value is of the wrong type (not a SyncingList): ",c);return c},setVal:function(a,b){l.stdoc.setContainingNode(b,l);h.dlogcat(g.LogTypes.rt,"rt node.lists.setVal()");l.setPropVal(a,b)}};this.maps=
{getVal:function(a,c){c=l.getPropVal(a,c);h.weakassert(f.triv(c)||b.isMap(c),"prop name "+a+" of node "+l.oid+" exists, but its value is of the wrong type (not a SyncingMap): ",c);return c},setVal:function(a,b){l.stdoc.setContainingNode(b,l);h.dlogcat(g.LogTypes.rt,"rt node.maps.setVal()");l.setPropVal(a,b)}};this.links={getVal:function(a){h.assert_nt(a);if(l.pdata_readview.has(a))try{var c=l.pdata_readview.get(a);h.weakassert(b.isFlatPropLink(c),"prop name "+a+" of node "+l.oid+" exists, but its value is of the wrong type (not a FlatPropLink): ",
c);return l.stdoc.ogetNodeByPermId(c.linked_nodeid).pdata.get(a)}catch(z){return console.error("Error in links.getVal:",z),null}else return null},getObj:function(a){h.assert_nt(a);if(l.pdata_readview.has(a))try{var c=l.pdata_readview.get(a);h.weakassert(b.isFlatPropLink(c),"prop name "+a+" of node "+l.oid+" exists, but its value is of the wrong type (not a FlatPropLink): ",c);return c}catch(z){return console.error("Error in links.getObj:",z),null}else return null},hasObj:function(a){h.assert_nt(a);
return b.isFlatPropLink(l.pdata_readview.get(a))},setObj:function(a,b){h.assert_nt(a,b);l.setPropVal(a,b)},deleteObj:function(a){h.assert_nt(a);b.isFlatPropLink(l.pdata_readview.get(a))?(l.pdata.delete(a),l.refreshCache()):h.dwarn("Requested delete of a FlatPropLink at label "+a+", but found something else there, so doing nothing:",l.pdata_readview.get(a))}};this.propkeys={ofEditableStrProps:function(){var a=[];h.dlogcat(g.LogTypes.rt,"rt map.keys()");l.privateAndSharedPropKeys().forEach(function(c){var e=
l.getPropVal(c);f.triv(e)?h.dwarn("null or undefined prop value for prop key "+c+" with nodetype "+l.nodetype+", nodeid "+l.oid):b.isEditableString(e)?a.push(c):b.isFlatPropLink(e)&&(e=l.links.getVal(c),b.isEditableString(e)&&a.push(c))});return a},ofBooleanProps:function(){var a=[];l.privateAndSharedPropKeys().forEach(function(c){var e=l.getPropVal(c);f.triv(e)?h.dwarn("null or undefined prop value for prop key "+c+" with nodetype "+l.nodetype+", nodeid "+l.oid):b.isBoolean(e)?a.push(c):b.isFlatPropLink(e)&&
(e=l.links.getVal(c),b.isBoolean(e)&&a.push(c))});return a},ofNumProps:function(){var a=[];l.privateAndSharedPropKeys().forEach(function(c){var e=l.getPropVal(c);f.triv(e)?h.dwarn("null or undefined prop value for prop key "+c+" with nodetype "+l.nodetype+", nodeid "+l.oid):b.isNumber(e)?a.push(c):b.isFlatPropLink(e)&&(e=l.links.getVal(c),b.isNumber(e)&&a.push(c))});return a},ofImmutableStrProps:function(){var a=[];l.privateAndSharedPropKeys().forEach(function(c){var e=l.getPropVal(c);f.triv(e)?h.dwarn("null or undefined prop value for prop key "+
c+" with nodetype "+l.nodetype+", nodeid "+l.oid):b.isImmutableString(e)?a.push(c):b.isFlatPropLink(e)&&(e=l.links.getVal(c),b.isImmutableString(e)&&a.push(c))});return a},ofMapProps:function(){var a=[];l.privateAndSharedPropKeys().forEach(function(c){var e=l.getPropVal(c);f.triv(e)?h.dwarn("null or undefined prop value for prop key "+c+" with nodetype "+l.nodetype+", nodeid "+l.oid):b.isMap(e)&&a.push(c)});return a},ofListProps:function(){var a=[];l.privateAndSharedPropKeys().forEach(function(c){var e=
l.getPropVal(c);f.triv(e)?h.dwarn("null or undefined prop value for prop key "+c+" with nodetype "+l.nodetype+", nodeid "+l.oid):b.isList(e)&&a.push(c)});return a},ofLinkProps:function(){var a=[];l.privateAndSharedPropKeys().forEach(function(c){var e=l.getPropVal(c);f.triv(e)?h.dwarn("null or undefined prop value for prop key "+c+" with nodetype "+l.nodetype+", nodeid "+l.oid):b.isFlatPropLink(e)&&a.push(c)});return a}};h.dassert(null!=a);this.stlang=a.stlang;c?(this.pdata=c,h.dassert(this.pdata_readview.has(g.SystPropNames.nodetype))):
(this.pdata=this.wstdoc.create.map(),this.setPropVal(g.SystPropNames.nodetype,Object.getPrototypeOf(this).constructor.nodetype_name));structure_together.dev_mode&&(f.warnonce("dev_mode enabled so introducing uID var for each node"),window["u"+this.oid]=this);a.assignTempNodeNumId(this);this.nclass=this.stdoc.stlang.nodeClassDispatch(this.nodetype);this.stdoc.upstate.expanded.has(this.oid)?(a=this.stdoc.upstate.expanded.get(this.oid),this.children_collapsed===a&&(this.children_collapsed=!a)):this.booleans.hasVal(g.SystPropNames.ch_collapsed_init)?
this.children_collapsed!==this.booleans.getVal(g.SystPropNames.ch_collapsed_init)&&(this.children_collapsed=this.booleans.getVal(g.SystPropNames.ch_collapsed_init)):!1===this.nclass.init_collapsed&&this.children_collapsed&&(this.children_collapsed=!1);!1===this.nclass.init_panel_hidden&&(this.utfstate.panel_hidden=!1);this.stdoc.registerNodeFromSTNodeConstructor(this)}Object.defineProperty(a.prototype,"pdata_readview",{get:function(){return this.pdata},enumerable:!0,configurable:!0});a.prototype.isParental=
function(){return this.hasType(l.Nodetypes.Parental)};a.prototype.isParentalLike=function(){return this.isParental()||this instanceof m.ImportNode};Object.defineProperty(a.prototype,"children_collapsed",{get:function(){return this.stdoc.upstate.expanded.has(this.oid)?!this.stdoc.upstate.expanded.get(this.oid):!0},set:function(a){this.stdoc.upstate.expanded.set(this.oid,!a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"upstate",{get:function(){return this.stdoc.upstate},enumerable:!0,
configurable:!0});a.prototype.privateAndSharedPropKeys=function(){this.cache.privateAndSharedPropKeys||this.refreshCache();return this.cache.privateAndSharedPropKeys};Object.defineProperty(a.prototype,"wstdoc",{get:function(){h.dassert(this.stdoc instanceof n.WritableSTDoc);return this.stdoc},enumerable:!0,configurable:!0});a.prototype.refreshCache=function(){var a=this,b=this.getClass().cache_updaters;b&&f.objForEachOwnVal(b,function(b){b(a)})};Object.defineProperty(a.prototype,"parentNode",{get:function(){return this.stdoc.ogetParentNode(this)},
enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"nodetype",{get:function(){var a=this.pdata_readview.get(g.SystPropNames.nodetype);a||(a=Object.getPrototypeOf(this).constructor.nodetype_name,this.setPropVal(g.SystPropNames.nodetype,a));return a},enumerable:!0,configurable:!0});a.prototype.hasType=function(a){return"string"===typeof a?this.stlang.isNodeSubtype(this.nodetype,a):this.stlang.isNodeSubtype(this.nodetype,a.nodetype_name)};Object.defineProperty(a.prototype,"oid",{get:function(){return b.get_object_id(this.pdata)},
enumerable:!0,configurable:!0});a.prototype.childrenIgnored=function(){return!0===this.booleans.getVal(g.SystPropNames.ignore_children)};a.prototype.hasChildren=function(){if(this.childrenIgnored())return!1;var a=this.pdata_readview.get(g.SystPropNames.ch);return a&&0<a.length?!0:(a=this.pdata_readview.get(g.SystPropNames.nch))&&0<a.size?!0:!1};a.prototype.hasProp=function(a){return this.pdata_readview.has(a)};a.prototype.deleteProp=function(a){this.isPrivateState(a)?this.upstate.deleteDispatch(this,
a):this.pdata.delete(a);this.refreshCache()};a.prototype.getStrPropVal=function(a){a=this.getPropVal(a);return b.isEditableString(a)?a.getText():a};a.prototype.setExistingStrPropVal=function(a,c){var e=this.getPropVal(a);h.assert_nt(e);b.isEditableString(e)?this.editableStrings.setVal(a,c):this.immutableStrings.setVal(a,c)};a.prototype.getPropVal=function(a,c){h.assert_nt(a);if(this.isPrivateState(a))return this.upstate.getDispatch(this,a);h.dassert(void 0==c||!c.must||void 0===c.if_none);if(this.pdata_readview.has(a))return c=
this.pdata_readview.get(a),b.isFlatPropLink(c)?this.links.getVal(a):c;if(c&&c.must)throw h.derr("Problem node and data: ",this,this.pdata_readview.toString(),this.pdata_readview.keys()),Error("Required (or should be since you used o.must==true) property "+a+" for "+this.nodetype+" missing!");return c&&void 0!==c.if_none?c.if_none:null};a.prototype.setPropVal=function(a,b){var c;c=this.hasProp(a);this.isPrivateState(a)?this.upstate.setDispatch(this,a,b):this.pdata.set(a,b);c&&this.refreshCache()};
a.prototype.expandChildrenUpToRoot=function(){!0===this.children_collapsed&&(this.children_collapsed=!1);this.parentNode?this.parentNode.expandChildrenUpToRoot():h.derrif(!(this instanceof m.Top),"No .parentNode currently: ",this)};a.prototype.expandChildrenTempUpToRoot=function(){this.utfstate.temp_ch_expanded=!0;this.parentNode?this.parentNode.expandChildrenTempUpToRoot():h.derrif(!(this instanceof m.Top),"No .parentNode currently: ",this)};a.prototype.ogetNextSibling=function(){if(!this.parentNode)return null;
var a=this.parentNode.indexOfUnnamedChild(this);if(f.nottriv(a)&&0<=a)return a<this.parentNode.numUnnamedChildren()-1?this.parentNode.getChild(a+1):null;a=this.parentNode.keyOfNamedChild(this);return(a=this.parentNode.nextNamedChild(a))?a:0<this.parentNode.numUnnamedChildren()?this.parentNode.getChild(0):null};a.prototype.ogetPrevSibling=function(){if(!this.parentNode)return null;var a=this.parentNode.indexOfUnnamedChild(this);if(f.nottriv(a)&&0<=a)return 0<a?this.parentNode.getChild(a-1):this.parentNode.lastNamedChild();
a=this.parentNode.keyOfNamedChild(this);h.assert_nt(a);return(a=this.parentNode.prevNamedChild(a))?a:null};a.prototype.forEachInPathToRootEarlyStop=function(a){for(var b=this,c;;){b=this.stdoc.ogetParentNode(b);if(!b)break;c=a(b);if(!1===c)break}};a.prototype.inPathToRoot=function(a){var b=!1;this.forEachInPathToRootEarlyStop(function(c){return c.equals(a)?(b=!0,!1):!0});return b};a.prototype.equals=function(a){return this.oid===a.oid&&this.stdoc.stdocid===a.stdoc.stdocid};a.prototype.forEachInPathToRoot=
function(a){a(this);this.forEachAncestor(a)};a.prototype.forEachAncestor=function(a){for(var b=this.parentNode;b;)a(b),b=this.stdoc.ogetParentNode(b)};a.prototype.forEachInSubtree=function(a,b){a(this)};a.prototype.toString=function(a){var b=this;void 0===a&&(a="");var c=a+this.nodetype+(" ["+this.oid+"]"),e=a+g.INDENT;this.propkeys.ofBooleanProps().forEach(function(a){c+="\n"+e+a+": "+b.booleans.getVal(a)});this.propkeys.ofNumProps().forEach(function(a){c+="\n"+e+a+": "+b.numbers.getVal(a)});this.propkeys.ofImmutableStrProps().forEach(function(a){a!=
g.SystPropNames.nodetype&&"id"!=a&&(c+="\n"+e+a+": "+b.immutableStrings.getVal(a))});this.propkeys.ofEditableStrProps().forEach(function(a){c+="\n"+e+a+": "+b.editableStrings.getVal(a)});for(var h in this.utfstate)c+="\n"+e+"~"+h+": "+f.pretty(this.utfstate[h],!0);this.isParental()&&(this.forEachNamedChild(function(a,b){c+="\n"+e+b+":";c+="\n"+a.toString(e+g.INDENT)}),this.forEachUnnamedChild(function(a){c+="\n"+a.toString(e)}));return c};a.prototype.computeScopes=function(a){return null};a.prototype.editActionsForFillDefaults=
function(){var a=this.stdoc.stlang.nodeClassDispatch(this.nodetype),b=a.required_flatprops,c=[],e;for(e in b)this.hasProp(e)||(h.dassert(e!==g.SystPropNames.nodetype),h.dassert(!f.triv(b[e]),l.nodeclassName(a)+".required_flatprops["+e+"] is null-like"),c.push({name:"NewFlatProp",node:this,label:e}));return c};a.prototype.isPrivateState=function(a){return a!==g.SystPropNames.nodetype&&0<=this.nclass.upstate.indexOf(a)};a.prototype.isDetached=function(){return this.stdoc.isDetached(this.pdata)};a.prototype.isNamedChild=
function(){return this.parentNode&&null!=this.parentNode.keyOfNamedChild(this)};a.prototype.isUnnamedChild=function(){return this.parentNode&&null!=this.parentNode.indexOfUnnamedChild(this)};a.prototype.isVisible_recursive_up=function(){return(!this.parentNode.children_collapsed||this.parentNode.utfstate.temp_ch_expanded)&&this.isVisibleIfParentIsAndParentsChildrenExpanded()&&this.parentNode.isVisible_recursive_up()};a.prototype.isVisibleIfParentIsAndParentsChildrenExpanded=function(){var a=this.booleans.getVal(g.SystPropNames.hidden,
{if_none:!1}),b=this.utfstate.hidden||2===this.utfstate.filter_status,h=this.nclass.hide_in_user_modes&&f.arrayHas(this.nclass.hide_in_user_modes,e.STApp.the.userMode),l=c.stwidgets.showHiddenCheckbox.getValue()||e.STApp.the.userMode===g.STUserModes.dev;return!a&&!b&&!h||l};a.prototype.depth=function(){return this.parentNode?1+this.parentNode.depth():0};a.prototype.printShortJson=function(){console.log(b.sDataToShorterJsonForPrinting(this.pdata))};a.prototype.printGoogleJson=function(){console.log(b.sDataToGoogleJson(this.pdata))};
a.prototype.getIndexOrLabel=function(){var a=this.parentNode;return a?a.indexOrKeyOfChild(this):null};a.prototype.getData=function(){return this.pdata};a.prototype.getPseudoReadOnlyData=function(){return this.pdata};a.prototype.getClass=function(){return this.nclass};a.prototype.getNumDefaultOrElse=function(a,b){var c=this.getClass();return f.objhas(c.default_num_prop_vals,a)?(a=c.default_num_prop_vals[a],"number"===typeof a?a:a(this)):b};a.prototype.getBoolDefaultOrElse=function(a,b){var c=this.getClass();
return f.objhas(c.default_bool_prop_vals,a)?c.default_bool_prop_vals[a]:b};a.prototype.getStrDefaultOrElse=function(a,b,c){var e=this.getClass();h.dlogcat(g.LogTypes.entering,"Entering getStrDefaultOrElse(<"+this.oid+" :: some "+this.nodetype+">, "+a+", builtin=="+b+")");if(e.default_str_prop_vals_at_init&&f.nottriv(e.default_str_prop_vals_at_init[a]))a=e.default_str_prop_vals_at_init[a];else if(e.default_str_prop_vals_when_empty&&f.nottriv(e.default_str_prop_vals_when_empty[a]))a=e.default_str_prop_vals_when_empty[a];
else return c;return"string"===typeof a?a:a(this)};a.prototype.getFlatPropType=function(a){return this.getClass().allowed_flatprops[a]};a.prototype.getStrDefaultAlwaysOrElse=function(a,b,c){(b=this.getClass())||h.dlog(this,this.nodetype);if("default_str_prop_vals_when_empty"in b&&a in b.default_str_prop_vals_when_empty)a=b.default_str_prop_vals_when_empty[a];else return c;return"string"===typeof a?a:a(this)};a.prototype.allowedEditActions=function(){var a=this,b=this.getClass(),c=b.allowed_flatprops,
e=b.allowed_nch,d=[],p;for(p in c)this.hasProp(p)||(h.dassert(p!==g.SystPropNames.nodetype),h.dassert(!f.triv(c[p]),l.nodeclassName(b)+".required_flatprops["+p+"] is null-like. It should not be."),d.push({name:"NewFlatProp",node:this,label:p}));this.stlang.nonabstract_node_class_dispatch.forEach(function(b,c){a.stlang.isNodeSubtype(c,l.Nodetypes.Parental)&&d.push({name:"NewParentNode",nodetype:c,child:a})});if(this.isParental()){var m=this;m.nodeclassesThatCanBeAddedAsUnnamedChildren().forEach(function(a){d.push({name:"NewUnnamedNode",
nodetype:a.nodetype_name,parent:m,insert_after:null,first_child:!0})});for(var t in e)m.hasChild(t)||(b=e[t],this.stdoc.stlang.isConcreteNodetype(b)?d.push({name:"NewNamedNode",nodetype:b,parent:m,label:t}):(c=this.stdoc.stlang.getSubtypes(b),h.dassert(!f.triv(c),"Set of subtypes of "+b+" should be empty set, not null."),c.forEach(function(b){a.stdoc.stlang.isConcreteNodetype(b)&&d.push({name:"NewNamedNode",nodetype:b,parent:m,label:t})})))}var n=this.parentNode;null!=n&&(h.dassert(this.stdoc.stlang.isNodeSubtype(n.nodetype,
l.Nodetypes.Parental)),n.nodeclassesThatCanBeAddedAsUnnamedChildren().forEach(function(b){d.push({name:"NewUnnamedNode",nodetype:b.nodetype_name,parent:n,insert_after:a,first_child:!0})}));(e=this.stlang.getConversions(this.nodetype))&&0<e.size?e.forEach(function(b,c){d.push({name:"ConvertNodetype",node:a,new_nodetype:c})}):h.dlogcat(g.LogTypes.conversion,"no conversions available");return d};return a}();k.nodetype_name="STNode";k.abstract=!0;k.allowed_ch=["STNode"];k.required_flatprops=f.mkobj([g.SystPropNames.nodetype,
5]);k.allowed_flatprops=f.mkobj([g.SystPropNames.hidden,1],[g.SystPropNames.protected,1],[g.SystPropNames.emphasize,1]);k.default_bool_prop_vals=f.mkobj([g.SystPropNames.hidden,!0],[g.SystPropNames.protected,!0],[g.SystPropNames.emphasize,!0]);k.cache_updaters=[function(a){a.cache.privateAndSharedPropKeys=f.arrayCopy(a.pdata_readview.keys());var b=a.upstate.keys(a.oid);b&&b.forEach(function(b){h.dassert(-1===a.cache.privateAndSharedPropKeys.indexOf(b));a.cache.privateAndSharedPropKeys.push(b)})}];
d.STNode=k},function(k,d,a){var n=a(7);d.Nodetypes={Top:"Top",Node:"STNode",Parental:"ParentalNode",LeafRefableInText:"LeafRefableInText",ParentalRefableInText:"ParentalRefableInText",Ref:"RefNode",Import:"ImportNode",ImportUntyped:"ImportNodeUntyped",External:"External",ParentalRefNode:"ParentalRefNode",FreeForm:"FreeForm",Group:"GroupNode",CollapsibleInlineNote:"CollapsibleInlineNote",NodeStub:"NodeStub",SectionBreak:"SectionBreak",Concatenate:"Concatenate",Seq:"Seq",Numbering:"Numbering",Link:"Link",
RefableInTextMixin:"RefableInTextMixin",ValueAssignableNodeMixin:"ValueAssignableNodeMixin",MathParse:"MathParse"};d.ScopeTypes={IntroChildrenOnly:"IntroChildrenOnly",IntroChildrenSiblings:"IntroChildrenSiblings",ClaimedChildrenOnly:"ClaimedChildrenOnly",Global:"Global"};d.nodeclassName=function(a){a.nodetype_name||n.derr(a);n.dassert(null!=a.nodetype_name);return a.nodetype_name}},function(k,d){d.stwidgets={}},function(k,d,a){var n=a(14);d.inEditMode=function(){return structure_together.inEditMode()};
d.contentEditableEnabled=function(){return structure_together.sapp.main_display_wstdoc.top.content_editable_enabled()&&n.stwidgets.inlineEditing.getValue()}},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),
m=a(17);k=a(18);var f=a(9),h=a(248),l=a(252);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=null;if(null!=this.props._level)switch(this.props._level){case 1:a="h1";break;case 2:a="h2";break;case 3:a="h3";break;case 4:a="h4"}if(this.props._display_as_defn&&this.props._html_name)return this.renderAsDefinition(a);var b="";this.props._strikeout_text&&(b=" strikeout");return h.rspan({key:this.props.nodeid+".inlining",className:"node_inlining "+
this.props.nodeid+"-inlining"+b},m.contentEditableInlineEditing(this.props._text,this.props.nodeid,f.SystPropNames.text,this.props.stdocid,!0,a))};b.prototype.renderAsDefinition=function(a){var b=[],c=this.props._defn_prefix;c&&b.push(h.rspan({key:"defn-prefix",style:{marginRight:".5em"}},m.contentEditableInlineEditing(c,this.props.nodeid,f.SystPropNames.defn_prefix,this.props.stdocid,!0,a)));b.push(h.rspan({key:"symbol-intro",className:"symbol-intro"},m.contentEditableInlineEditing(this.props._html_name,
this.props.nodeid,f.SystPropNames.html_name,this.props.stdocid,!0,a)));0<l.richStringLength(this.props._text)&&b.push(" - ");a=m.contentEditableInlineEditing(this.props._text,this.props.nodeid,f.SystPropNames.text,this.props.stdocid,!1,a);b.push(a);return h.rspan({key:this.props.nodeid+"defn-inlining"},b)};return b}(k.PureReactComponent);d.FreeFormInliningComponent=a},function(k,d,a){function n(a){return function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;c.element_type=a;return c}
f(c,b);return c}(v)}function m(a,h,f,l,d,p){b.dassert("string"!==typeof a);p&&e.DOM[p]||(p="span");u.inEditMode()||f!==c.SystPropNames.html_name||(b.warnonce("Not in edit mode so hooking contenteditable component up to _local_html_name instead of _html_name"),f=c.SystPropNames.local_html_name);if(b.triv(a))return g.dwarn("Trivial value for prop "+f+".  arg to contentEditableInliningEditing is trivial"),e.DOM[p]({key:h+f+"ce"},"???");if(a.element_type)return e.createElement(v,a);y.has(p)||g.derr(p);
return e.createElement(y.get(p),a)}var f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}();k=a(18);var h=a(248),l=a(190),g=a(7),b=a(4),c=a(9),e=a(19),p=a(46),t=a(189),u=a(15),v=function(a){function d(){return null!==a&&a.apply(this,
arguments)||this}f(d,a);d.prototype.saveAndReturnProcessedContents=function(a){var b=a.html();a.data("st-processed-inner-html",b);return b};d.prototype.restoreProcessedContents=function(a){var b=a.data("st-processed-inner-html");a.html(b)};d.prototype.getSavedProcessedContents=function(a){return a.data("st-processed-inner-html")};d.prototype.renderUnchecked=function(){var a=this;g.dlogcat(c.LogTypes.react,"ContentEditableComponent.render() for node "+this.props.nodeid);var f;f=this.props.element_type&&
e.DOM[this.props.element_type]?e.DOM[this.props.element_type]:this.element_type?e.DOM[this.element_type]:h.rdiv;var d=this.props.label,p={className:"st-content-editable",key:"inline-editing"+this.props.nodeid+d};if(u.inEditMode()||d===c.SystPropNames.local_html_name)p.contentEditable=!0,p.onBlur=function(c){g.assert_nt(a.props.nodeid);var e=c.target;b.getTextNodesIn_with_textnode_filter(e).forEach(function(a){if($(a[1]).hasClass("atwhowrapper")){var b=$(a[1]).text();$(a[1]).replaceWith(b);g.dwarn("atwho wrapper removed!")}});
e=e.innerHTML;e="wordlevel_html_etc"===a.props._text_format?l.stripHtmlForLineBreaksAndSpaces(e):t.sanitizeHtmlST(e);e===a.props.value?a.restoreProcessedContents($(c.target)):-1===e.indexOf("simple-inline-ref")&&(a.restoreProcessedContents($(c.target)),a.sendToDocMsgBox({name:"StringPropChange",nodeid:a.props.nodeid,label:d,value:e}));c.stopPropagation();c.preventDefault()},p.onFocus=function(b){var c=$(b.target),e=c.data("st-caret-pos");u.contentEditableEnabled()?(a.saveAndReturnProcessedContents(c),
b=_.trim(a.props.value," "),"wordlevel_html_etc"===a.props._text_format&&(b=l.insertHtmlForLineBreaksAndSpaces(b)),c.html(b),a.attachAtJsAutocomplete(c),window.setTimeout(function(){try{void 0!=e&&c.caret(e)}catch(H){g.dwarn("Failed to set caret pos",H)}})):c.blur()},p.onClick=function(a){u.contentEditableEnabled()&&(a.preventDefault(),a.stopPropagation())};var m;m="wordlevel_html_etc"===this.props._text_format?l.insertHtmlForLineBreaksAndSpaces(this.props.value):t.sanitizeHtmlST(this.props.value);
p.dangerouslySetInnerHTML={__html:m};return f(p,null)};d.prototype.componentDidUpdate=function(a,b){this.stlang.refManagerDisabled||this.insertRefs(this.props.label===c.SystPropNames.html_template||this.props.label===c.SystPropNames.html_name)};d.prototype.componentDidMount=function(){this.stlang.refManagerDisabled||this.insertRefs(this.props.label===c.SystPropNames.html_template||this.props.label===c.SystPropNames.html_name);var a=$(p.findDOMNode(this));a.on("keydown",function(b){try{if(0<a.text().length){var c=
a.caret();a.data("st-caret-pos",c)}}catch(B){g.dwarn(B)}return!0})};d.prototype.attachAtJsAutocomplete=function(a){var e=this.wstdoc.refManager.t2m;b.warnonce("this.wstdoc.refManager.t2m: ",this.wstdoc.refManager.t2m.toString());var h=[],f=0;e.forEach(function(a,b){h.push(a);f=Math.max(a.length+2,f)});a.atwho({at:this.wstdoc.top.assist_trigger||"$",data:h,limit:h.length,maxLen:f,startWithSpace:!1,callbacks:{afterMatchFailed:function(a,b){g.dwarn("afterMatchFailed");return!1}},insertTpl:!0===this.wstdoc.top.booleans.getVal(c.SystPropNames.require_mutid_delimiters_by_default)?
"{${name}}":"${name}"})};return d}(k.PureReactComponent);d.ContentEditableComponent=v;var y=new Map;"span div h1 h2 h3 h4".split(" ").forEach(function(a){y.set(a,n(a))});d.maybeAppendEditableText=function(a,c,e,g,f,l){b.strtriv(c)||(l&&f.push(h.rspan({key:"prefix-"+a},l)),f.push(h.rspan({key:e+"."+a},m(c,e,a,g))))};d.contentEditableInlineEditing=m},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,
b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function e(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)}}(),m=a(7),f=a(4),h=a(9);k=a(19);var l=a(46),g=a(188),b=a(248),c=a(250),e=a(3),p=a(251);d.stContextValidationMap={changedset:k.PropTypes.object,refreshtype:k.PropTypes.number,stdocid:k.PropTypes.string};a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);Object.defineProperty(d.prototype,"controller",
{get:function(){return e.STApp.the.controller_of_main_display_wstdoc},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"_stdocid",{get:function(){return this.props.stdocid||this.context.stdocid},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"wstdoc",{get:function(){var a=this._stdocid,b;(b=a?e.STApp.the.get_wstdoc(a):e.STApp.the.main_display_wstdoc)||m.derr("STReactComponent.wstdoc is triv. stdocid is "+a+". coarse_vmtype is "+this.props.coarse_vmtype);return b},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rstdoc",{get:function(){return this.wstdoc},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"stlang",{get:function(){return this.wstdoc.stlang},enumerable:!0,configurable:!0});d.prototype.render_node_inlining_with_display_template=function(a,c,e){f.warnonce(" render_node_inlining_with_display_template called");return f.triv(a)||f.triv(c)?(m.dwarncat(h.LogTypes.deal_with_eventually,"one of the args to render_node_inlining_with_display_template is trivial."),
b.rerror("one of the args to render_node_inlining_with_display_template is trivial")):p.inliningFromTemplate(a.html_template_of_ref,c,e,this.props.nodeid,this._stdocid)};d.prototype.sendToDocMsgBox=function(a){this.wstdoc.applyEditAction(a)};d.prototype.addDefaultInliningProps=function(a){void 0===a&&(a={});var b=this.props.nodeid+"-inlining";a.className=a.className?a.className+(" "+b):b;a.key||(a.key=this.props.nodeid+"-inlining");return a};d.prototype.shoudComponentUpdateForPartial=function(a,b){if(!this.controller)return m.derr("This should not happen!!!!"),
!1;f.dassert(this.controller.partial_render_update_scheduled(),"Inside shoudComponentUpdateForPartial but this.controller.partial_render_update_scheduled() returned false.");a=this.controller.render_update_params;a.targetNodeId===this.props.nodeid?a=!0:a.ancestors.has(this.props.nodeid)?a=!0:a.descendants.has(this.props.nodeid)?(m.dlogcat(h.LogTypes.reactopt,"SCU: descendants case returning true for partial update of VM for "+this.props.nodeid+"."+this.props.coarse_vmtype+"."),a=!0):a=!1;return a};
d.prototype.shouldComponentUpdate=function(a,b,e){if(a.hidden&&this.props.hidden)return!1;2===e.refreshtype?a=this.shoudComponentUpdateForPartial(a,b):1===e.refreshtype?(a=null==e.changedset?!1:e.changedset.has(this.props))||m.dlogcat(h.LogTypes.reactopt,"SCU: changedset is null or VM for "+this.props.nodeid+"."+this.props.coarse_vmtype+" is not in changedset."):(f.dassert(0===e.refreshtype),a=!0);a&&(c.inc_scu_true_cnt(),c.inc_inlining_render_cnt());return a};d.prototype.insertRefs=function(a){var b=
this;void 0===a&&(a=!1);f.dassert(!this.stlang.refManagerDisabled);var c=l.findDOMNode(this),c=f.getTextNodesIn_with_subtree_filter(c);m.assert_nt(this.props.nodeid);c.forEach(function(c){g.insertRefsIntoDOMTextNode(c[0],b.wstdoc.refManager.mutid_regex,b.wstdoc,b.props.nodeid,a)})};d.prototype.render=function(){try{return this.renderUnchecked()}catch(v){return m.derr(v),console.error(v),b.rerror("Exception trying to render a CoarseVMType "+this.props.coarse_vmtype+" belonging to node "+this.props.nodeid)}};
return d}(k.Component);a.contextTypes=d.stContextValidationMap;d.STReactComponent=a;k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){throw new f.NotYetImplemented;};return b}(a);k.contextTypes=a.contextTypes;d.PureReactComponent=k},function(k,d,a){k.exports=a(20)},function(k,d,a){d=a(21);var n=a(22),m=a(35),f=a(38),h=a(39),l=a(41),g=a(26),b=a(42),c=a(44),e=a(45);a(28);k.exports={Children:{map:n.map,forEach:n.forEach,count:n.count,
toArray:n.toArray,only:e},Component:m,PureComponent:f,createElement:g.createElement,cloneElement:g.cloneElement,isValidElement:g.isValidElement,PropTypes:b,createClass:h.createClass,createFactory:g.createFactory,createMixin:function(a){return a},DOM:l,version:c,__spread:d}},function(k,d){var a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;k.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;
for(var f={},a=0;10>a;a++)f["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(f).map(function(a){return f[a]}).join(""))return!1;var h={};"abcdefghijklmnopqrst".split("").forEach(function(a){h[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},h)).join("")?!1:!0}catch(l){return!1}}()?Object.assign:function(d,f){var h,l;if(null===d||void 0===d)throw new TypeError("Object.assign cannot be called with null or undefined");l=Object(d);for(var g,b=1;b<arguments.length;b++){h=
Object(arguments[b]);for(var c in h)a.call(h,c)&&(l[c]=h[c]);if(Object.getOwnPropertySymbols){g=Object.getOwnPropertySymbols(h);for(var e=0;e<g.length;e++)n.call(h,g[e])&&(l[g[e]]=h[g[e]])}}return l}},function(k,d,a){function n(a,b){this.func=a;this.context=b;this.count=0}function m(a,b,c){a.func.call(a.context,b,a.count++)}function f(a,b,c,e){this.result=a;this.keyPrefix=b;this.func=c;this.context=e;this.count=0}function h(a,e,g){var h=a.result,f=a.keyPrefix;a=a.func.call(a.context,e,a.count++);
Array.isArray(a)?l(a,h,g,c.thatReturnsArgument):null!=a&&(b.isValidElement(a)&&(a=b.cloneAndReplaceKey(a,f+(!a.key||e&&e.key===a.key?"":(""+a.key).replace(t,"$&/")+"/")+g)),h.push(a))}function l(a,b,c,g,l){var d="";null!=c&&(d=(""+c).replace(t,"$&/")+"/");b=f.getPooled(b,d,g,l);e(a,h,b);f.release(b)}function g(a,b,c){return null}d=a(23);var b=a(26),c=a(29),e=a(32);a=d.twoArgumentPooler;var p=d.fourArgumentPooler,t=/\/+/g;n.prototype.destructor=function(){this.context=this.func=null;this.count=0};
d.addPoolingTo(n,a);f.prototype.destructor=function(){this.context=this.func=this.keyPrefix=this.result=null;this.count=0};d.addPoolingTo(f,p);k.exports={forEach:function(a,b,c){if(null==a)return a;b=n.getPooled(b,c);e(a,m,b);n.release(b)},map:function(a,b,c){if(null==a)return a;var e=[];l(a,e,null,b,c);return e},mapIntoWithKeyPrefixInternal:l,count:function(a,b){return e(a,g,null)},toArray:function(a){var b=[];l(a,b,null,c.thatReturnsArgument);return b}}},function(k,d,a){var n=a(24);a(25);var m=
function(a){if(this.instancePool.length){var h=this.instancePool.pop();this.call(h,a);return h}return new this(a)},f=function(a){a instanceof this?void 0:n("25");a.destructor();this.instancePool.length<this.poolSize&&this.instancePool.push(a)};k.exports={addPoolingTo:function(a,l){a.instancePool=[];a.getPooled=l||m;a.poolSize||(a.poolSize=10);a.release=f;return a},oneArgumentPooler:m,twoArgumentPooler:function(a,f){if(this.instancePool.length){var g=this.instancePool.pop();this.call(g,a,f);return g}return new this(a,
f)},threeArgumentPooler:function(a,f,g){if(this.instancePool.length){var b=this.instancePool.pop();this.call(b,a,f,g);return b}return new this(a,f,g)},fourArgumentPooler:function(a,f,g,b){if(this.instancePool.length){var c=this.instancePool.pop();this.call(c,a,f,g,b);return c}return new this(a,f,g,b)},fiveArgumentPooler:function(a,f,g,b,c){if(this.instancePool.length){var e=this.instancePool.pop();this.call(e,a,f,g,b,c);return e}return new this(a,f,g,b,c)}}},function(k,d){k.exports=function(a){for(var d=
arguments.length-1,m="Minified React error #"+a+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+a,f=0;f<d;f++)m+="&args[]="+encodeURIComponent(arguments[f+1]);d=Error(m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");d.name="Invariant Violation";d.framesToPop=1;throw d;}},function(k,d,a){k.exports=function(a,d,f,h,l,g,b,c){if(!a){if(void 0===d)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");
else{var e=[f,h,l,g,b,c],p=0;a=Error(d.replace(/%s/g,function(){return e[p++]}));a.name="Invariant Violation"}a.framesToPop=1;throw a;}}},function(k,d,a){var n=a(21),m=a(27);a(28);a(30);var f=Object.prototype.hasOwnProperty,h=a(31),l={key:!0,ref:!0,__self:!0,__source:!0},g=function(a,c,e,g,f,l,d){return{$$typeof:h,type:a,key:c,ref:e,props:d,_owner:l}};g.createElement=function(a,c,e){var b,h={},d=null,n=null,k=null,r=null;if(null!=c)for(b in void 0!==c.ref&&(n=c.ref),void 0!==c.key&&(d=""+c.key),k=
void 0===c.__self?null:c.__self,r=void 0===c.__source?null:c.__source,c)f.call(c,b)&&!l.hasOwnProperty(b)&&(h[b]=c[b]);var x=arguments.length-2;if(1===x)h.children=e;else if(1<x){for(var A=Array(x),z=0;z<x;z++)A[z]=arguments[z+2];h.children=A}if(a&&a.defaultProps)for(b in x=a.defaultProps,x)void 0===h[b]&&(h[b]=x[b]);return g(a,d,n,k,r,m.current,h)};g.createFactory=function(a){var b=g.createElement.bind(null,a);b.type=a;return b};g.cloneAndReplaceKey=function(a,c){return g(a.type,c,a.ref,a._self,
a._source,a._owner,a.props)};g.cloneElement=function(a,c,e){var b,h=n({},a.props),d=a.key,k=a.ref,y=a._self,r=a._source,x=a._owner;if(null!=c){void 0!==c.ref&&(k=c.ref,x=m.current);void 0!==c.key&&(d=""+c.key);var A;a.type&&a.type.defaultProps&&(A=a.type.defaultProps);for(b in c)f.call(c,b)&&!l.hasOwnProperty(b)&&(h[b]=void 0===c[b]&&void 0!==A?A[b]:c[b])}b=arguments.length-2;if(1===b)h.children=e;else if(1<b){A=Array(b);for(var z=0;z<b;z++)A[z]=arguments[z+2];h.children=A}return g(a.type,d,k,y,r,
x,h)};g.isValidElement=function(a){return"object"===typeof a&&null!==a&&a.$$typeof===h};k.exports=g},function(k,d){k.exports={current:null}},function(k,d,a){d=a(29);k.exports=d},function(k,d){function a(a){return function(){return a}}d=function(){};d.thatReturns=a;d.thatReturnsFalse=a(!1);d.thatReturnsTrue=a(!0);d.thatReturnsNull=a(null);d.thatReturnsThis=function(){return this};d.thatReturnsArgument=function(a){return a};k.exports=d},function(k,d,a){k.exports=!1},function(k,d){d="function"===typeof Symbol&&
Symbol["for"]&&Symbol["for"]("react.element")||60103;k.exports=d},function(k,d,a){function n(a,c){return a&&"object"===typeof a&&null!=a.key?g.escape(a.key):c.toString(36)}function m(a,c,e,d){var b=typeof a;if("undefined"===b||"boolean"===b)a=null;if(null===a||"string"===b||"number"===b||"object"===b&&a.$$typeof===h)return e(d,a,""===c?"."+n(a,0):c),1;var p,k,y=0;c=""===c?".":c+":";if(Array.isArray(a))for(b=0;b<a.length;b++)p=a[b],k=c+n(p,b),y+=m(p,k,e,d);else if(p=l(a))if(b=p.call(a),p!==a.entries)for(a=
0;!(p=b.next()).done;)p=p.value,k=c+n(p,a++),y+=m(p,k,e,d);else for(;!(p=b.next()).done;){if(a=p.value)p=a[1],k=c+g.escape(a[0])+":"+n(p,0),y+=m(p,k,e,d)}else"object"===b&&(e=String(a),f("31","[object Object]"===e?"object with keys {"+Object.keys(a).join(", ")+"}":e,""));return y}var f=a(24);a(27);var h=a(31),l=a(33);a(25);var g=a(34);a(28);k.exports=function(a,c,e){return null==a?0:m(a,"",c,e)}},function(k,d){var a="function"===typeof Symbol&&Symbol.iterator;k.exports=function(d){d=d&&(a&&d[a]||
d["@@iterator"]);if("function"===typeof d)return d}},function(k,d){k.exports={escape:function(a){var d={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return d[a]})},unescape:function(a){var d={"=0":"=","=2":":"};return(""+("."===a[0]&&"$"===a[1]?a.substring(2):a.substring(1))).replace(/(=0|=2)/g,function(a){return d[a]})}}},function(k,d,a){function n(a,g,b){this.props=a;this.context=g;this.refs=h;this.updater=b||f}var m=a(24),f=a(36);a(30);var h=a(37);a(25);a(28);n.prototype.isReactComponent=
{};n.prototype.setState=function(a,g){"object"!==typeof a&&"function"!==typeof a&&null!=a?m("85"):void 0;this.updater.enqueueSetState(this,a);g&&this.updater.enqueueCallback(this,g,"setState")};n.prototype.forceUpdate=function(a){this.updater.enqueueForceUpdate(this);a&&this.updater.enqueueCallback(this,a,"forceUpdate")};k.exports=n},function(k,d,a){a(28);k.exports={isMounted:function(a){return!1},enqueueCallback:function(a,d){},enqueueForceUpdate:function(a){},enqueueReplaceState:function(a,d){},
enqueueSetState:function(a,d){}}},function(k,d,a){k.exports={}},function(k,d,a){function n(a,b,c){this.props=a;this.context=b;this.refs=l;this.updater=c||h}function m(){}d=a(21);var f=a(35),h=a(36),l=a(37);m.prototype=f.prototype;n.prototype=new m;n.prototype.constructor=n;d(n.prototype,f.prototype);n.prototype.isPureReactComponent=!0;k.exports=n},function(k,d,a){function n(a,c){if(c){"function"===typeof c?l("75"):void 0;b.isValidElement(c)?l("76"):void 0;var e=a.prototype,g=e.__reactAutoBindPairs;
c.hasOwnProperty("mixins")&&u.mixins(a,c.mixins);for(var d in c)if(c.hasOwnProperty(d)&&"mixins"!==d){var p=c[d],m=e.hasOwnProperty(d),n=m,k=d,x=t.hasOwnProperty(k)?t[k]:null;v.hasOwnProperty(k)&&("OVERRIDE_BASE"!==x?l("73",k):void 0);n&&("DEFINE_MANY"!==x&&"DEFINE_MANY_MERGED"!==x?l("74",k):void 0);if(u.hasOwnProperty(d))u[d](a,p);else n=t.hasOwnProperty(d),"function"!==typeof p||n||m||!1===c.autobind?m?(m=t[d],!n||"DEFINE_MANY_MERGED"!==m&&"DEFINE_MANY"!==m?l("77",m,d):void 0,"DEFINE_MANY_MERGED"===
m?e[d]=f(e[d],p):"DEFINE_MANY"===m&&(e[d]=h(e[d],p))):e[d]=p:(g.push(d,p),e[d]=p)}}}function m(a,b){a&&b&&"object"===typeof a&&"object"===typeof b?void 0:l("80");for(var c in b)b.hasOwnProperty(c)&&(void 0!==a[c]?l("81",c):void 0,a[c]=b[c]);return a}function f(a,b){return function(){var c=a.apply(this,arguments),e=b.apply(this,arguments);if(null==c)return e;if(null==e)return c;var g={};m(g,c);m(g,e);return g}}function h(a,b){return function(){a.apply(this,arguments);b.apply(this,arguments)}}var l=
a(24),g=a(21);d=a(35);var b=a(26);a(40);var c=a(36),e=a(37);a(25);a(28);var p=[],t={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",
componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},u={displayName:function(a,b){a.displayName=b},mixins:function(a,b){if(b)for(var c=0;c<b.length;c++)n(a,b[c])},childContextTypes:function(a,b){a.childContextTypes=g({},a.childContextTypes,b)},contextTypes:function(a,b){a.contextTypes=g({},a.contextTypes,b)},getDefaultProps:function(a,b){a.getDefaultProps=a.getDefaultProps?f(a.getDefaultProps,b):b},propTypes:function(a,b){a.propTypes=g({},a.propTypes,
b)},statics:function(a,b){if(b)for(var c in b){var e=b[c];b.hasOwnProperty(c)&&(c in u?l("78",c):void 0,c in a?l("79",c):void 0,a[c]=e)}},autobind:function(){}},v={replaceState:function(a,b){this.updater.enqueueReplaceState(this,a);b&&this.updater.enqueueCallback(this,b,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},y=function(){};g(y.prototype,d.prototype,v);k.exports={createClass:function(a){var b=function(a,g,f){if(this.__reactAutoBindPairs.length)for(var h=this.__reactAutoBindPairs,
d=0;d<h.length;d+=2){var p=h[d],m=h[d+1].bind(this);this[p]=m}this.props=a;this.context=g;this.refs=e;this.updater=f||c;this.state=null;a=this.getInitialState?this.getInitialState():null;"object"!==typeof a||Array.isArray(a)?l("82",b.displayName||"ReactCompositeComponent"):void 0;this.state=a};b.prototype=new y;b.prototype.constructor=b;b.prototype.__reactAutoBindPairs=[];p.forEach(n.bind(null,b));n(b,a);b.getDefaultProps&&(b.defaultProps=b.getDefaultProps());b.prototype.render?void 0:l("83");for(var g in t)b.prototype[g]||
(b.prototype[g]=null);return b},injection:{injectMixin:function(a){p.push(a)}}}},function(k,d,a){k.exports={}},function(k,d,a){d=a(26).createFactory;d={a:d("a"),abbr:d("abbr"),address:d("address"),area:d("area"),article:d("article"),aside:d("aside"),audio:d("audio"),b:d("b"),base:d("base"),bdi:d("bdi"),bdo:d("bdo"),big:d("big"),blockquote:d("blockquote"),body:d("body"),br:d("br"),button:d("button"),canvas:d("canvas"),caption:d("caption"),cite:d("cite"),code:d("code"),col:d("col"),colgroup:d("colgroup"),
data:d("data"),datalist:d("datalist"),dd:d("dd"),del:d("del"),details:d("details"),dfn:d("dfn"),dialog:d("dialog"),div:d("div"),dl:d("dl"),dt:d("dt"),em:d("em"),embed:d("embed"),fieldset:d("fieldset"),figcaption:d("figcaption"),figure:d("figure"),footer:d("footer"),form:d("form"),h1:d("h1"),h2:d("h2"),h3:d("h3"),h4:d("h4"),h5:d("h5"),h6:d("h6"),head:d("head"),header:d("header"),hgroup:d("hgroup"),hr:d("hr"),html:d("html"),i:d("i"),iframe:d("iframe"),img:d("img"),input:d("input"),ins:d("ins"),kbd:d("kbd"),
keygen:d("keygen"),label:d("label"),legend:d("legend"),li:d("li"),link:d("link"),main:d("main"),map:d("map"),mark:d("mark"),menu:d("menu"),menuitem:d("menuitem"),meta:d("meta"),meter:d("meter"),nav:d("nav"),noscript:d("noscript"),object:d("object"),ol:d("ol"),optgroup:d("optgroup"),option:d("option"),output:d("output"),p:d("p"),param:d("param"),picture:d("picture"),pre:d("pre"),progress:d("progress"),q:d("q"),rp:d("rp"),rt:d("rt"),ruby:d("ruby"),s:d("s"),samp:d("samp"),script:d("script"),section:d("section"),
select:d("select"),small:d("small"),source:d("source"),span:d("span"),strong:d("strong"),style:d("style"),sub:d("sub"),summary:d("summary"),sup:d("sup"),table:d("table"),tbody:d("tbody"),td:d("td"),textarea:d("textarea"),tfoot:d("tfoot"),th:d("th"),thead:d("thead"),time:d("time"),title:d("title"),tr:d("tr"),track:d("track"),u:d("u"),ul:d("ul"),"var":d("var"),video:d("video"),wbr:d("wbr"),circle:d("circle"),clipPath:d("clipPath"),defs:d("defs"),ellipse:d("ellipse"),g:d("g"),image:d("image"),line:d("line"),
linearGradient:d("linearGradient"),mask:d("mask"),path:d("path"),pattern:d("pattern"),polygon:d("polygon"),polyline:d("polyline"),radialGradient:d("radialGradient"),rect:d("rect"),stop:d("stop"),svg:d("svg"),text:d("text"),tspan:d("tspan")};k.exports=d},function(k,d,a){function n(a){this.message=a;this.stack=""}function m(a){function c(c,e,g,f,h,l,d){f=f||"<<anonymous>>";l=l||g;return null==e[g]?(h=b[h],c?null===e[g]?new n("The "+h+" `"+l+"` is marked as required "+("in `"+f+"`, but its value is `null`.")):
new n("The "+h+" `"+l+"` is marked as required in "+("`"+f+"`, but its value is `undefined`.")):null):a(e,g,f,h,l)}var e=c.bind(null,!1);e.isRequired=c.bind(null,!0);return e}function f(a){return m(function(c,e,g,f,h,d){c=c[e];if(l(c)!==a){f=b[f];a:{e=l(c);if("object"===e)if(c instanceof Date){c="date";break a}else if(c instanceof RegExp){c="regexp";break a}c=e}return new n("Invalid "+f+" `"+h+"` of type "+("`"+c+"` supplied to `"+g+"`, expected ")+("`"+a+"`."))}return null})}function h(a){switch(typeof a){case "number":case "string":case "undefined":return!0;
case "boolean":return!a;case "object":if(Array.isArray(a))return a.every(h);if(null===a||g.isValidElement(a))return!0;var b=p(a);if(b){var c=b.call(a);if(b!==a.entries)for(;!(a=c.next()).done;){if(!h(a.value))return!1}else for(;!(a=c.next()).done;)if((a=a.value)&&!h(a[1]))return!1}else return!1;return!0;default:return!1}}function l(a){var b=typeof a;return Array.isArray(a)?"array":a instanceof RegExp?"object":"symbol"===b||"Symbol"===a["@@toStringTag"]||"function"===typeof Symbol&&a instanceof Symbol?
"symbol":b}var g=a(26),b=a(40),c=a(43),e=a(29),p=a(33);a(28);d={array:f("array"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:m(e.thatReturns(null)),arrayOf:function(a){return m(function(e,g,f,h,d){if("function"!==typeof a)return new n("Property `"+d+"` of component `"+f+"` has invalid PropType notation inside arrayOf.");e=e[g];if(!Array.isArray(e))return h=b[h],e=l(e),new n("Invalid "+h+" `"+d+"` of type "+("`"+e+"` supplied to `"+
f+"`, expected an array."));for(g=0;g<e.length;g++){var p=a(e,g,f,h,d+"["+g+"]",c);if(p instanceof Error)return p}return null})},element:function(){return m(function(a,c,e,f,h){a=a[c];return g.isValidElement(a)?null:(f=b[f],a=l(a),new n("Invalid "+f+" `"+h+"` of type "+("`"+a+"` supplied to `"+e+"`, expected a single ReactElement.")))})}(),instanceOf:function(a){return m(function(c,e,g,f,h){if(!(c[e]instanceof a)){f=b[f];var l=a.name||"<<anonymous>>";c=c[e];c=c.constructor&&c.constructor.name?c.constructor.name:
"<<anonymous>>";return new n("Invalid "+f+" `"+h+"` of type "+("`"+c+"` supplied to `"+g+"`, expected ")+("instance of `"+l+"`."))}return null})},node:function(){return m(function(a,c,e,g,f){return h(a[c])?null:new n("Invalid "+b[g]+" `"+f+"` supplied to "+("`"+e+"`, expected a ReactNode."))})}(),objectOf:function(a){return m(function(e,g,f,h,d){if("function"!==typeof a)return new n("Property `"+d+"` of component `"+f+"` has invalid PropType notation inside objectOf.");e=e[g];g=l(e);if("object"!==
g)return new n("Invalid "+b[h]+" `"+d+"` of type "+("`"+g+"` supplied to `"+f+"`, expected an object."));for(var p in e)if(e.hasOwnProperty(p)&&(g=a(e,p,f,h,d+"."+p,c),g instanceof Error))return g;return null})},oneOf:function(a){return Array.isArray(a)?m(function(c,e,g,f,h){c=c[e];for(e=0;e<a.length;e++){var l;l=a[e];l=c===l?0!==c||1/c===1/l:c!==c&&l!==l;if(l)return null}f=b[f];e=JSON.stringify(a);return new n("Invalid "+f+" `"+h+"` of value `"+c+"` "+("supplied to `"+g+"`, expected one of "+e+"."))}):
(void 0,e.thatReturnsNull)},oneOfType:function(a){return Array.isArray(a)?m(function(e,g,f,h,l){for(var d=0;d<a.length;d++)if(null==(0,a[d])(e,g,f,h,l,c))return null;return new n("Invalid "+b[h]+" `"+l+"` supplied to "+("`"+f+"`."))}):(void 0,e.thatReturnsNull)},shape:function(a){return m(function(e,g,f,h,d){e=e[g];g=l(e);if("object"!==g)return new n("Invalid "+b[h]+" `"+d+"` of type `"+g+"` "+("supplied to `"+f+"`, expected `object`."));for(var p in a)if(g=a[p])if(g=g(e,p,f,h,d+"."+p,c))return g;
return null})}};n.prototype=Error.prototype;k.exports=d},function(k,d){k.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(k,d){k.exports="15.4.1"},function(k,d,a){var n=a(24),m=a(26);a(25);k.exports=function(a){m.isValidElement(a)?void 0:n("143");return a}},function(k,d,a){k.exports=a(47)},function(k,d,a){var n=a(48),m=a(53);d=a(179);var f=a(76),h=a(73),l=a(184),g=a(185),b=a(186),c=a(187);a(61);m.inject();a={findDOMNode:g,render:d.render,unmountComponentAtNode:d.unmountComponentAtNode,
version:l,unstable_batchedUpdates:h.batchedUpdates,unstable_renderSubtreeIntoContainer:c};"undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:n.getClosestInstanceFromNode,getNodeFromInstance:function(a){a._renderedComponent&&(a=b(a));return a?n.getNodeFromInstance(a):null}},Mount:d,Reconciler:f});k.exports=a},function(k,d,a){function n(a){for(var b;b=a._renderedComponent;)a=
b;return a}function m(a,b){a=n(a);a._hostNode=b;b[e]=a}function f(a,e){if(!(a._flags&c.hasCachedChildNodes)){var g=a._renderedChildren;e=e.firstChild;var f;a:for(f in g)if(g.hasOwnProperty(f)){var h=g[f],d=n(h)._domID;if(0!==d){for(;null!==e;e=e.nextSibling)if(1===e.nodeType&&e.getAttribute(b)===String(d)||8===e.nodeType&&e.nodeValue===" react-text: "+d+" "||8===e.nodeType&&e.nodeValue===" react-empty: "+d+" "){m(h,e);continue a}l("32",d)}}a._flags|=c.hasCachedChildNodes}}function h(a){if(a[e])return a[e];
for(var b=[];!a[e];)if(b.push(a),a.parentNode)a=a.parentNode;else return null;for(var c,g;a&&(g=a[e]);a=b.pop())c=g,b.length&&f(g,a);return c}var l=a(49);d=a(50);var g=a(52);a(51);var b=d.ID_ATTRIBUTE_NAME,c=g,e="__reactInternalInstance$"+Math.random().toString(36).slice(2);k.exports={getClosestInstanceFromNode:h,getInstanceFromNode:function(a){var b=h(a);return null!=b&&b._hostNode===a?b:null},getNodeFromInstance:function(a){void 0===a._hostNode?l("33"):void 0;if(a._hostNode)return a._hostNode;for(var b=
[];!a._hostNode;)b.push(a),a._hostParent?void 0:l("34"),a=a._hostParent;for(;b.length;a=b.pop())f(a,a._hostNode);return a._hostNode},precacheChildNodes:f,precacheNode:m,uncacheNode:function(a){var b=a._hostNode;b&&(delete b[e],a._hostNode=null)}}},function(k,d){k.exports=function(a){for(var d=arguments.length-1,m="Minified React error #"+a+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+a,f=0;f<d;f++)m+="&args[]="+encodeURIComponent(arguments[f+1]);d=Error(m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");
d.name="Invariant Violation";d.framesToPop=1;throw d;}},function(k,d,a){function n(a,g){return(a&g)===g}var m=a(49);a(51);var f={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(a){var g=f,b=a.Properties||{},c=a.DOMAttributeNamespaces||{},e=a.DOMAttributeNames||{},l=a.DOMPropertyNames||{},d=a.DOMMutationMethods||{};a.isCustomAttribute&&h._isCustomAttributeFunctions.push(a.isCustomAttribute);for(var k in b){h.properties.hasOwnProperty(k)?
m("48",k):void 0;a=k.toLowerCase();var v=b[k];a={attributeName:a,attributeNamespace:null,propertyName:k,mutationMethod:null,mustUseProperty:n(v,g.MUST_USE_PROPERTY),hasBooleanValue:n(v,g.HAS_BOOLEAN_VALUE),hasNumericValue:n(v,g.HAS_NUMERIC_VALUE),hasPositiveNumericValue:n(v,g.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:n(v,g.HAS_OVERLOADED_BOOLEAN_VALUE)};1>=a.hasBooleanValue+a.hasNumericValue+a.hasOverloadedBooleanValue?void 0:m("50",k);e.hasOwnProperty(k)&&(a.attributeName=e[k]);c.hasOwnProperty(k)&&
(a.attributeNamespace=c[k]);l.hasOwnProperty(k)&&(a.propertyName=l[k]);d.hasOwnProperty(k)&&(a.mutationMethod=d[k]);h.properties[k]=a}}},h={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ATTRIBUTE_NAME_CHAR:":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",
properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(a){for(var g=0;g<h._isCustomAttributeFunctions.length;g++)if((0,h._isCustomAttributeFunctions[g])(a))return!0;return!1},injection:f};k.exports=h},function(k,d,a){k.exports=function(a,d,f,h,l,g,b,c){if(!a){if(void 0===d)a=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var e=[f,h,l,g,b,c],p=0;a=Error(d.replace(/%s/g,
function(){return e[p++]}));a.name="Invariant Violation"}a.framesToPop=1;throw a;}}},function(k,d){k.exports={hasCachedChildNodes:1}},function(k,d,a){var n=a(54),m=a(55),f=a(72),h=a(84),l=a(85),g=a(90),b=a(91),c=a(104),e=a(48),p=a(150),t=a(151),u=a(152),v=a(153),y=a(154),r=a(157),x=a(158),A=a(166),z=a(167),C=a(168),B=!1;k.exports={inject:function(){B||(B=!0,r.EventEmitter.injectReactEventListener(y),r.EventPluginHub.injectEventPluginOrder(h),r.EventPluginUtils.injectComponentTree(e),r.EventPluginUtils.injectTreeTraversal(t),
r.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:C,EnterLeaveEventPlugin:l,ChangeEventPlugin:f,SelectEventPlugin:z,BeforeInputEventPlugin:m}),r.HostComponent.injectGenericComponentClass(c),r.HostComponent.injectTextComponentClass(u),r.DOMProperty.injectDOMPropertyConfig(n),r.DOMProperty.injectDOMPropertyConfig(g),r.DOMProperty.injectDOMPropertyConfig(A),r.EmptyComponent.injectEmptyComponentFactory(function(a){return new p(a)}),r.Updates.injectReconcileTransaction(x),r.Updates.injectBatchingStrategy(v),
r.Component.injectEnvironment(b))}}},function(k,d){k.exports={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,
"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}}},function(k,d,a){function n(){var a=
window.opera;return"object"===typeof a&&"function"===typeof a.version&&12>=parseInt(a.version(),10)}function m(a,b){switch(a){case "topKeyUp":return-1!==p.indexOf(b.keyCode);case "topKeyDown":return 229!==b.keyCode;case "topKeyPress":case "topMouseDown":case "topBlur":return!0;default:return!1}}function f(a){a=a.detail;return"object"===typeof a&&"data"in a?a.data:null}function h(a,b){switch(a){case "topCompositionEnd":return f(b);case "topKeyPress":if(32!==b.which)return null;x=!0;return y;case "topTextInput":return a=
b.data,a===y&&x?null:a;default:return null}}function l(a,c){if(A)return"topCompositionEnd"===a||!t&&m(a,c)?(a=A.getData(),b.release(A),A=null,a):null;switch(a){case "topPaste":return null;case "topKeyPress":return c.which&&(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey)?String.fromCharCode(c.which):null;case "topCompositionEnd":return v?null:c.data;default:return null}}var g=a(56);d=a(65);var b=a(66),c=a(69),e=a(71),p=[9,13,27,32],t=d.canUseDOM&&"CompositionEvent"in window;a=null;d.canUseDOM&&
"documentMode"in document&&(a=document.documentMode);var u=d.canUseDOM&&"TextEvent"in window&&!a&&!n(),v=d.canUseDOM&&(!t||a&&8<a&&11>=a),y=String.fromCharCode(32),r={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},
compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},x=!1,A=null;k.exports={eventTypes:r,extractEvents:function(a,d,p,n){var k;var x;
if(t)b:{switch(a){case "topCompositionStart":x=r.compositionStart;break b;case "topCompositionEnd":x=r.compositionEnd;break b;case "topCompositionUpdate":x=r.compositionUpdate;break b}x=void 0}else A?m(a,p)&&(x=r.compositionEnd):"topKeyDown"===a&&229===p.keyCode&&(x=r.compositionStart);x?(v&&(A||x!==r.compositionStart?x===r.compositionEnd&&A&&(k=A.getData()):A=b.getPooled(n)),x=c.getPooled(x,d,p,n),k?x.data=k:(k=f(p),null!==k&&(x.data=k)),g.accumulateTwoPhaseDispatches(x),k=x):k=null;(a=u?h(a,p):
l(a,p))?(d=e.getPooled(r.beforeInput,d,p,n),d.data=a,g.accumulateTwoPhaseDispatches(d)):d=null;return[k,d]}}},function(k,d,a){function n(a,c,g){if(c=e(a,g.dispatchConfig.phasedRegistrationNames[c]))g._dispatchListeners=b(g._dispatchListeners,c),g._dispatchInstances=b(g._dispatchInstances,a)}function m(a){a&&a.dispatchConfig.phasedRegistrationNames&&g.traverseTwoPhase(a._targetInst,n,a)}function f(a){if(a&&a.dispatchConfig.phasedRegistrationNames){var b=a._targetInst,b=b?g.getParentInstance(b):null;
g.traverseTwoPhase(b,n,a)}}function h(a,c,g){g&&g.dispatchConfig.registrationName&&(c=e(a,g.dispatchConfig.registrationName))&&(g._dispatchListeners=b(g._dispatchListeners,c),g._dispatchInstances=b(g._dispatchInstances,a))}function l(a){a&&a.dispatchConfig.registrationName&&h(a._targetInst,null,a)}d=a(57);var g=a(59),b=a(63),c=a(64);a(61);var e=d.getListener;k.exports={accumulateTwoPhaseDispatches:function(a){c(a,m)},accumulateTwoPhaseDispatchesSkipTarget:function(a){c(a,f)},accumulateDirectDispatches:function(a){c(a,
l)},accumulateEnterLeaveDispatches:function(a,b,c,e){g.traverseEnterLeave(c,e,h,a,b)}}},function(k,d,a){var n=a(49),m=a(58),f=a(59),h=a(60),l=a(63),g=a(64);a(51);var b={},c=null,e=function(a,b){a&&(f.executeDispatchesInOrder(a,b),a.isPersistent()||a.constructor.release(a))},p=function(a){return e(a,!0)},t=function(a){return e(a,!1)};k.exports={injection:{injectEventPluginOrder:m.injectEventPluginOrder,injectEventPluginsByName:m.injectEventPluginsByName},putListener:function(a,c,e){"function"!==typeof e?
n("94",c,typeof e):void 0;var g="."+a._rootNodeID;(b[c]||(b[c]={}))[g]=e;(g=m.registrationNameModules[c])&&g.didPutListener&&g.didPutListener(a,c,e)},getListener:function(a,c){var e=b[c];a:switch(c){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":(c=!a._currentElement.props.disabled)||(c=a._currentElement.type,c=!("button"===c||"input"===
c||"select"===c||"textarea"===c));c=!c;break a;default:c=!1}if(c)return null;a="."+a._rootNodeID;return e&&e[a]},deleteListener:function(a,c){var e=m.registrationNameModules[c];e&&e.willDeleteListener&&e.willDeleteListener(a,c);(c=b[c])&&delete c["."+a._rootNodeID]},deleteAllListeners:function(a){var c="."+a._rootNodeID,e;for(e in b)if(b.hasOwnProperty(e)&&b[e][c]){var g=m.registrationNameModules[e];g&&g.willDeleteListener&&g.willDeleteListener(a,e);delete b[e][c]}},extractEvents:function(a,b,c,e){for(var g,
f=m.plugins,h=0;h<f.length;h++){var d=f[h];d&&(d=d.extractEvents(a,b,c,e))&&(g=l(g,d))}return g},enqueueEvents:function(a){a&&(c=l(c,a))},processEventQueue:function(a){var b=c;c=null;a?g(b,p):g(b,t);c?n("95"):void 0;h.rethrowCaughtError()},__purge:function(){b={}},__getListenerBank:function(){return b}}},function(k,d,a){function n(){if(h)for(var a in l){var c=l[a],e=h.indexOf(a);-1<e?void 0:f("96",a);if(!g.plugins[e]){c.extractEvents?void 0:f("97",a);g.plugins[e]=c;var e=c.eventTypes,d;for(d in e){var n;
var k=e[d];n=c;var v=d;g.eventNameDispatchConfigs.hasOwnProperty(v)?f("99",v):void 0;g.eventNameDispatchConfigs[v]=k;var y=k.phasedRegistrationNames;if(y){k=void 0;for(k in y)y.hasOwnProperty(k)&&m(y[k],n,v);n=!0}else k.registrationName?(m(k.registrationName,n,v),n=!0):n=!1;n?void 0:f("98",d,a)}}}}function m(a,c,e){g.registrationNameModules[a]?f("100",a):void 0;g.registrationNameModules[a]=c;g.registrationNameDependencies[a]=c.eventTypes[e].dependencies}var f=a(49);a(51);var h=null,l={},g={plugins:[],
eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(a){h?f("101"):void 0;h=Array.prototype.slice.call(a);n()},injectEventPluginsByName:function(a){var b=!1,e;for(e in a)if(a.hasOwnProperty(e)){var g=a[e];l.hasOwnProperty(e)&&l[e]===g||(l[e]?f("102",e):void 0,l[e]=g,b=!0)}b&&n()},getPluginModuleForEvent:function(a){a=a.dispatchConfig;if(a.registrationName)return g.registrationNameModules[a.registrationName]||
null;if(void 0!==a.phasedRegistrationNames){a=a.phasedRegistrationNames;for(var b in a)if(a.hasOwnProperty(b)){var e=g.registrationNameModules[a[b]];if(e)return e}}return null},_resetEventPlugins:function(){h=null;for(var a in l)l.hasOwnProperty(a)&&delete l[a];g.plugins.length=0;a=g.eventNameDispatchConfigs;for(var c in a)a.hasOwnProperty(c)&&delete a[c];c=g.registrationNameModules;for(var e in c)c.hasOwnProperty(e)&&delete c[e]}};k.exports=g},function(k,d,a){function n(a,c,e,h){var b=a.type||"unknown-event";
a.currentTarget=g.getNodeFromInstance(h);c?f.invokeGuardedCallbackWithCatch(b,e,a):f.invokeGuardedCallback(b,e,a);a.currentTarget=null}var m=a(49),f=a(60);a(51);a(61);var h,l,g={isEndish:function(a){return"topMouseUp"===a||"topTouchEnd"===a||"topTouchCancel"===a},isMoveish:function(a){return"topMouseMove"===a||"topTouchMove"===a},isStartish:function(a){return"topMouseDown"===a||"topTouchStart"===a},executeDirectDispatch:function(a){var b=a._dispatchListeners,e=a._dispatchInstances;Array.isArray(b)?
m("103"):void 0;a.currentTarget=b?g.getNodeFromInstance(e):null;b=b?b(a):null;a.currentTarget=null;a._dispatchListeners=null;a._dispatchInstances=null;return b},executeDispatchesInOrder:function(a,c){var b=a._dispatchListeners,g=a._dispatchInstances;if(Array.isArray(b))for(var f=0;f<b.length&&!a.isPropagationStopped();f++)n(a,c,b[f],g[f]);else b&&n(a,c,b,g);a._dispatchListeners=null;a._dispatchInstances=null},executeDispatchesInOrderStopAtTrue:function(a){var b;a:{b=a._dispatchListeners;var e=a._dispatchInstances;
if(Array.isArray(b))for(var g=0;g<b.length&&!a.isPropagationStopped();g++){if(b[g](a,e[g])){b=e[g];break a}}else if(b&&b(a,e)){b=e;break a}b=null}a._dispatchInstances=null;a._dispatchListeners=null;return b},hasDispatches:function(a){return!!a._dispatchListeners},getInstanceFromNode:function(a){return h.getInstanceFromNode(a)},getNodeFromInstance:function(a){return h.getNodeFromInstance(a)},isAncestor:function(a,c){return l.isAncestor(a,c)},getLowestCommonAncestor:function(a,c){return l.getLowestCommonAncestor(a,
c)},getParentInstance:function(a){return l.getParentInstance(a)},traverseTwoPhase:function(a,c,e){return l.traverseTwoPhase(a,c,e)},traverseEnterLeave:function(a,c,e,g,f){return l.traverseEnterLeave(a,c,e,g,f)},injection:{injectComponentTree:function(a){h=a},injectTreeTraversal:function(a){l=a}}};k.exports=g},function(k,d,a){function n(a,h,d){try{h(d)}catch(g){null===m&&(m=g)}}var m=null;k.exports={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(m){var a=
m;m=null;throw a;}}}},function(k,d,a){d=a(62);k.exports=d},function(k,d){function a(a){return function(){return a}}d=function(){};d.thatReturns=a;d.thatReturnsFalse=a(!1);d.thatReturnsTrue=a(!0);d.thatReturnsNull=a(null);d.thatReturnsThis=function(){return this};d.thatReturnsArgument=function(a){return a};k.exports=d},function(k,d,a){var n=a(49);a(51);k.exports=function(a,f){null==f?n("30"):void 0;if(null==a)return f;if(Array.isArray(a)){if(Array.isArray(f))return a.push.apply(a,f),a;a.push(f);return a}return Array.isArray(f)?
[a].concat(f):[a,f]}},function(k,d){k.exports=function(a,d,m){Array.isArray(a)?a.forEach(d,m):a&&d.call(m,a)}},function(k,d){d=!("undefined"===typeof window||!window.document||!window.document.createElement);k.exports={canUseDOM:d,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:d&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:d&&!!window.screen,isInWorker:!d}},function(k,d,a){function n(a){this._root=a;this._startText=this.getText();this._fallbackText=null}d=a(21);
var m=a(67),f=a(68);d(n.prototype,{destructor:function(){this._fallbackText=this._startText=this._root=null},getText:function(){return"value"in this._root?this._root.value:this._root[f()]},getData:function(){if(this._fallbackText)return this._fallbackText;var a,f=this._startText,g=f.length,b,c=this.getText(),e=c.length;for(a=0;a<g&&f[a]===c[a];a++);var d=g-a;for(b=1;b<=d&&f[g-b]===c[e-b];b++);return this._fallbackText=c.slice(a,1<b?1-b:void 0)}});m.addPoolingTo(n);k.exports=n},function(k,d,a){var n=
a(49);a(51);var m=function(a){if(this.instancePool.length){var f=this.instancePool.pop();this.call(f,a);return f}return new this(a)},f=function(a){a instanceof this?void 0:n("25");a.destructor();this.instancePool.length<this.poolSize&&this.instancePool.push(a)};k.exports={addPoolingTo:function(a,d){a.instancePool=[];a.getPooled=d||m;a.poolSize||(a.poolSize=10);a.release=f;return a},oneArgumentPooler:m,twoArgumentPooler:function(a,f){if(this.instancePool.length){var g=this.instancePool.pop();this.call(g,
a,f);return g}return new this(a,f)},threeArgumentPooler:function(a,f,g){if(this.instancePool.length){var b=this.instancePool.pop();this.call(b,a,f,g);return b}return new this(a,f,g)},fourArgumentPooler:function(a,f,g,b){if(this.instancePool.length){var c=this.instancePool.pop();this.call(c,a,f,g,b);return c}return new this(a,f,g,b)},fiveArgumentPooler:function(a,f,g,b,c){if(this.instancePool.length){var e=this.instancePool.pop();this.call(e,a,f,g,b,c);return e}return new this(a,f,g,b,c)}}},function(k,
d,a){var n=a(65),m=null;k.exports=function(){!m&&n.canUseDOM&&(m="textContent"in document.documentElement?"textContent":"innerText");return m}},function(k,d,a){function n(a,h,d,g){return m.call(this,a,h,d,g)}var m=a(70);m.augmentClass(n,{data:null});k.exports=n},function(k,d,a){function n(a,b,c,e){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var g in a)a.hasOwnProperty(g)&&((b=a[g])?this[g]=b(c):"target"===g?this.target=e:this[g]=c[g]);this.isDefaultPrevented=
(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?h.thatReturnsTrue:h.thatReturnsFalse;this.isPropagationStopped=h.thatReturnsFalse;return this}var m=a(21),f=a(67),h=a(62);a(61);var l="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" ");d={type:null,target:null,currentTarget:h.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:null,
isTrusted:null};m(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=h.thatReturnsTrue)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=h.thatReturnsTrue)},persist:function(){this.isPersistent=h.thatReturnsTrue},isPersistent:h.thatReturnsFalse,
destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;for(a=0;a<l.length;a++)this[l[a]]=null}});n.Interface=d;n.augmentClass=function(a,b){var c=function(){};c.prototype=this.prototype;c=new c;m(c,a.prototype);a.prototype=c;a.prototype.constructor=a;a.Interface=m({},this.Interface,b);a.augmentClass=this.augmentClass;f.addPoolingTo(a,f.fourArgumentPooler)};f.addPoolingTo(n,f.fourArgumentPooler);k.exports=n},function(k,d,a){function n(a,h,d,g){return m.call(this,a,h,d,g)}
var m=a(70);m.augmentClass(n,{data:null});k.exports=n},function(k,d,a){function n(a){a=x.getPooled(B.change,G,a,A(a));v.accumulateTwoPhaseDispatches(a);r.batchedUpdates(m,a)}function m(a){u.enqueueEvents(a);u.processEventQueue(!1)}function f(){D&&(D.detachEvent("onchange",n),G=D=null)}function h(a,b){if("topChange"===a)return b}function l(a,b,c){"topFocus"===a?(f(),D=b,G=c,D.attachEvent("onchange",n)):"topBlur"===a&&f()}function g(){D&&(delete D.value,D.detachEvent?D.detachEvent("onpropertychange",
b):D.removeEventListener("propertychange",b,!1),F=E=G=D=null)}function b(a){if("value"===a.propertyName){var b=a.srcElement.value;b!==E&&(E=b,n(a))}}function c(a,b){if("topInput"===a)return b}function e(a,c,e){"topFocus"===a?(g(),D=c,G=e,E=c.value,F=Object.getOwnPropertyDescriptor(c.constructor.prototype,"value"),Object.defineProperty(D,"value",K),D.attachEvent?D.attachEvent("onpropertychange",b):D.addEventListener("propertychange",b,!1)):"topBlur"===a&&g()}function p(a,b){if(("topSelectionChange"===
a||"topKeyUp"===a||"topKeyDown"===a)&&D&&D.value!==E)return E=D.value,G}function t(a,b){if("topClick"===a)return b}var u=a(57),v=a(56);d=a(65);var y=a(48),r=a(73),x=a(70),A=a(81),z=a(82),C=a(83),B={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},D=null,G=null,E=null,F=null,H=!1;d.canUseDOM&&(H=z("change")&&(!document.documentMode||8<document.documentMode));
var J=!1;d.canUseDOM&&(J=z("input")&&(!document.documentMode||11<document.documentMode));var K={get:function(){return F.get.call(this)},set:function(a){E=""+a;F.set.call(this,a)}};k.exports={eventTypes:B,extractEvents:function(a,b,g,f){var d=b?y.getNodeFromInstance(b):window,m,n,k=d.nodeName&&d.nodeName.toLowerCase();"select"===k||"input"===k&&"file"===d.type?H?m=h:n=l:C(d)?J?m=c:(m=p,n=e):!d.nodeName||"input"!==d.nodeName.toLowerCase()||"checkbox"!==d.type&&"radio"!==d.type||(m=t);if(m&&(m=m(a,b)))return a=
x.getPooled(B.change,m,g,f),a.type="change",v.accumulateTwoPhaseDispatches(a),a;n&&n(a,d,b)}}},function(k,d,a){function n(){C.ReactReconcileTransaction&&x?void 0:g("123")}function m(){this.reinitializeTransaction();this.dirtyComponentsLength=null;this.callbackQueue=b.getPooled();this.reconcileTransaction=C.ReactReconcileTransaction.getPooled(!0)}function f(a,b){return a._mountOrder-b._mountOrder}function h(a){var b=a.dirtyComponentsLength;b!==u.length?g("124",b,u.length):void 0;u.sort(f);v++;for(var c=
0;c<b;c++){var h=u[c],d=h._pendingCallbacks;h._pendingCallbacks=null;var l;e.logTopLevelRenders&&(l=h,h._currentElement.type.isReactTopLevelWrapper&&(l=h._renderedComponent),l="React update: "+l.getName(),console.time(l));p.performUpdateIfNecessary(h,a.reconcileTransaction,v);l&&console.timeEnd(l);if(d)for(var m=0;m<d.length;m++)a.callbackQueue.enqueue(d[m],h.getPublicInstance())}}function l(a){n();x.isBatchingUpdates?(u.push(a),null==a._updateBatchNumber&&(a._updateBatchNumber=v+1)):x.batchedUpdates(l,
a)}var g=a(49);d=a(21);var b=a(74),c=a(67),e=a(75),p=a(76),t=a(80);a(51);var u=[],v=0,y=b.getPooled(),r=!1,x=null,A=[{initialize:function(){this.dirtyComponentsLength=u.length},close:function(){this.dirtyComponentsLength!==u.length?(u.splice(0,this.dirtyComponentsLength),z()):u.length=0}},{initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}}];d(m.prototype,t,{getTransactionWrappers:function(){return A},destructor:function(){this.dirtyComponentsLength=
null;b.release(this.callbackQueue);this.callbackQueue=null;C.ReactReconcileTransaction.release(this.reconcileTransaction);this.reconcileTransaction=null},perform:function(a,b,c){return t.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,a,b,c)}});c.addPoolingTo(m);var z=function(){for(;u.length||r;){if(u.length){var a=m.getPooled();a.perform(h,null,a);m.release(a)}r&&(r=!1,a=y,y=b.getPooled(),a.notifyAll(),b.release(a))}},C={ReactReconcileTransaction:null,batchedUpdates:function(a,
b,c,e,g,f){n();return x.batchedUpdates(a,b,c,e,g,f)},enqueueUpdate:l,flushBatchedUpdates:z,injection:{injectReconcileTransaction:function(a){a?void 0:g("126");C.ReactReconcileTransaction=a},injectBatchingStrategy:function(a){a?void 0:g("127");"function"!==typeof a.batchedUpdates?g("128"):void 0;"boolean"!==typeof a.isBatchingUpdates?g("129"):void 0;x=a}},asap:function(a,b){x.isBatchingUpdates?void 0:g("125");y.enqueue(a,b);r=!0}};k.exports=C},function(k,d,a){var n=a(49);d=a(67);a(51);a=function(){function a(f){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this._contexts=this._callbacks=null;this._arg=f}a.prototype.enqueue=function(a,h){this._callbacks=this._callbacks||[];this._callbacks.push(a);this._contexts=this._contexts||[];this._contexts.push(h)};a.prototype.notifyAll=function(){var a=this._callbacks,h=this._contexts,d=this._arg;if(a&&h){a.length!==h.length?n("24"):void 0;this._contexts=this._callbacks=null;for(var g=0;g<a.length;g++)a[g].call(h[g],d);a.length=0;h.length=0}};a.prototype.checkpoint=
function(){return this._callbacks?this._callbacks.length:0};a.prototype.rollback=function(a){this._callbacks&&this._contexts&&(this._callbacks.length=a,this._contexts.length=a)};a.prototype.reset=function(){this._contexts=this._callbacks=null};a.prototype.destructor=function(){this.reset()};return a}();k.exports=d.addPoolingTo(a)},function(k,d){k.exports={logTopLevelRenders:!1}},function(k,d,a){function n(){m.attachRefs(this,this._currentElement)}var m=a(77);a(79);a(61);k.exports={mountComponent:function(a,
h,d,g,b,c){d=a.mountComponent(h,d,g,b,c);a._currentElement&&null!=a._currentElement.ref&&h.getReactMountReady().enqueue(n,a);return d},getHostNode:function(a){return a.getHostNode()},unmountComponent:function(a,h){m.detachRefs(a,a._currentElement);a.unmountComponent(h)},receiveComponent:function(a,h,d,g){var b=a._currentElement;if(h!==b||g!==a._context){var c=m.shouldUpdateRefs(b,h);c&&m.detachRefs(a,b);a.receiveComponent(h,d,g);c&&a._currentElement&&null!=a._currentElement.ref&&d.getReactMountReady().enqueue(n,
a)}},performUpdateIfNecessary:function(a,h,d){a._updateBatchNumber!==d?void 0:a.performUpdateIfNecessary(h)}}},function(k,d,a){var n=a(78);k.exports={attachRefs:function(a,f){if(null!==f&&"object"===typeof f){var h=f.ref;null!=h&&(f=f._owner,"function"===typeof h?h(a.getPublicInstance()):n.addComponentAsRefTo(a,h,f))}},shouldUpdateRefs:function(a,f){var h=null,d=null;null!==a&&"object"===typeof a&&(h=a.ref,d=a._owner);var g=a=null;null!==f&&"object"===typeof f&&(a=f.ref,g=f._owner);return h!==a||
"string"===typeof a&&g!==d},detachRefs:function(a,f){if(null!==f&&"object"===typeof f){var h=f.ref;null!=h&&(f=f._owner,"function"===typeof h?h(null):n.removeComponentAsRefFrom(a,h,f))}}}},function(k,d,a){function n(a){return!(!a||"function"!==typeof a.attachRef||"function"!==typeof a.detachRef)}var m=a(49);a(51);k.exports={addComponentAsRefTo:function(a,h,d){n(d)?void 0:m("119");d.attachRef(h,a)},removeComponentAsRefFrom:function(a,h,d){n(d)?void 0:m("120");var g=d.getPublicInstance();g&&g.refs[h]===
a.getPublicInstance()&&d.detachRef(h)}}},function(k,d,a){k.exports={debugTool:null}},function(k,d,a){var n=a(49);a(51);var m={};k.exports={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers();this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[];this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(a,h,d,g,b,c,e,p){this.isInTransaction()?n("27"):
void 0;var f,l;try{f=this._isInTransaction=!0,this.initializeAll(0),l=a.call(h,d,g,b,c,e,p),f=!1}finally{try{if(f)try{this.closeAll(0)}catch(v){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return l},initializeAll:function(a){for(var f=this.transactionWrappers;a<f.length;a++){var d=f[a];try{this.wrapperInitData[a]=m,this.wrapperInitData[a]=d.initialize?d.initialize.call(this):null}finally{if(this.wrapperInitData[a]===m)try{this.initializeAll(a+1)}catch(g){}}}},closeAll:function(a){this.isInTransaction()?
void 0:n("28");for(var f=this.transactionWrappers;a<f.length;a++){var d=f[a],g=this.wrapperInitData[a],b;try{b=!0,g!==m&&d.close&&d.close.call(this,g),b=!1}finally{if(b)try{this.closeAll(a+1)}catch(c){}}}this.wrapperInitData.length=0}}},function(k,d){k.exports=function(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:a}},function(k,d,a){var n=a(65),m;n.canUseDOM&&(m=document.implementation&&document.implementation.hasFeature&&
!0!==document.implementation.hasFeature("",""));k.exports=function(a,h){if(!n.canUseDOM||h&&!("addEventListener"in document))return!1;h="on"+a;var f=h in document;f||(f=document.createElement("div"),f.setAttribute(h,"return;"),f="function"===typeof f[h]);!f&&m&&"wheel"===a&&(f=document.implementation.hasFeature("Events.wheel","3.0"));return f}},function(k,d){var a={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,
week:!0};k.exports=function(d){var m=d&&d.nodeName&&d.nodeName.toLowerCase();return"input"===m?!!a[d.type]:"textarea"===m?!0:!1}},function(k,d){k.exports="ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")},function(k,d,a){var n=a(56),m=a(48),f=a(86),h={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut",
"topMouseOver"]}};k.exports={eventTypes:h,extractEvents:function(a,g,b,c){if("topMouseOver"===a&&(b.relatedTarget||b.fromElement)||"topMouseOut"!==a&&"topMouseOver"!==a)return null;var e;e=c.window===c?c:(e=c.ownerDocument)?e.defaultView||e.parentWindow:window;"topMouseOut"===a?(a=g,g=(g=b.relatedTarget||b.toElement)?m.getClosestInstanceFromNode(g):null):a=null;if(a===g)return null;var d=null==a?e:m.getNodeFromInstance(a);e=null==g?e:m.getNodeFromInstance(g);var l=f.getPooled(h.mouseLeave,a,b,c);
l.type="mouseleave";l.target=d;l.relatedTarget=e;b=f.getPooled(h.mouseEnter,g,b,c);b.type="mouseenter";b.target=e;b.relatedTarget=d;n.accumulateEnterLeaveDispatches(l,b,a,g);return[l,b]}}},function(k,d,a){function n(a,f,g,b){return m.call(this,a,f,g,b)}var m=a(87),f=a(88);d={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a(89),button:function(a){var f=a.button;return"which"in a?f:2===f?2:4===f?1:0},buttons:null,relatedTarget:function(a){return a.relatedTarget||
(a.fromElement===a.srcElement?a.toElement:a.fromElement)},pageX:function(a){return"pageX"in a?a.pageX:a.clientX+f.currentScrollLeft},pageY:function(a){return"pageY"in a?a.pageY:a.clientY+f.currentScrollTop}};m.augmentClass(n,d);k.exports=n},function(k,d,a){function n(a,f,g,b){return m.call(this,a,f,g,b)}var m=a(70),f=a(81);m.augmentClass(n,{view:function(a){if(a.view)return a.view;a=f(a);return a.window===a?a:(a=a.ownerDocument)?a.defaultView||a.parentWindow:window},detail:function(a){return a.detail||
0}});k.exports=n},function(k,d){var a={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(d){a.currentScrollLeft=d.x;a.currentScrollTop=d.y}};k.exports=a},function(k,d){function a(a){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(a):(a=n[a])?!!f[a]:!1}var n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};k.exports=function(d){return a}},function(k,d,a){d=a(50);a=d.injection.MUST_USE_PROPERTY;var n=d.injection.HAS_BOOLEAN_VALUE,m=d.injection.HAS_NUMERIC_VALUE,
f=d.injection.HAS_POSITIVE_NUMERIC_VALUE,h=d.injection.HAS_OVERLOADED_BOOLEAN_VALUE;d={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+d.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:n,allowTransparency:0,alt:0,as:0,async:n,autoComplete:0,autoPlay:n,capture:n,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:a|n,cite:0,classID:0,className:0,cols:f,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:n,
coords:0,crossOrigin:0,data:0,dateTime:0,"default":n,defer:n,dir:0,disabled:n,download:h,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:n,formTarget:0,frameBorder:0,headers:0,height:0,hidden:n,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:n,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:a|n,
muted:a|n,name:0,nonce:0,noValidate:n,open:n,optimum:0,pattern:0,placeholder:0,playsInline:n,poster:0,preload:0,profile:0,radioGroup:0,readOnly:n,referrerPolicy:0,rel:0,required:n,reversed:n,role:0,rows:f,rowSpan:m,sandbox:0,scope:0,scoped:n,scrolling:0,seamless:n,selected:a|n,shape:0,size:f,sizes:0,span:f,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:m,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,
resource:0,"typeof":0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:n,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};k.exports=d},function(k,d,a){d=a(92);a={processChildrenUpdates:a(103).dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:d.dangerouslyReplaceNodeWithMarkup};k.exports=a},function(k,d,a){function n(a,
b){Array.isArray(b)&&(b=b[1]);return b?b.nextSibling:a.firstChild}function m(a,b,g){for(;;){var c=b.nextSibling;if(c===g)break;else a.removeChild(c)}}var f=a(93);d=a(99);a(48);a(79);var h=a(96),l=a(95),g=a(97),b=h(function(a,b,g){a.insertBefore(b,g)});k.exports={dangerouslyReplaceNodeWithMarkup:d.dangerouslyReplaceNodeWithMarkup,replaceDelimitedText:function(a,e,f){var c=a.parentNode,h=a.nextSibling;h===e?f&&b(c,document.createTextNode(f),h):f?(g(h,f),m(c,h,e)):m(c,a,e)},processUpdates:function(a,
e){for(var c=0;c<e.length;c++){var h=e[c];switch(h.type){case "INSERT_MARKUP":var d=n(a,h.afterNode);f.insertTreeBefore(a,h.content,d);break;case "MOVE_EXISTING":var k=a,d=h.fromNode,y=n(a,h.afterNode);if(Array.isArray(d))for(h=k,k=d[1],d=d[0];;){var r=d.nextSibling;b(h,d,y);if(d===k)break;d=r}else b(k,d,y);break;case "SET_MARKUP":l(a,h.content);break;case "TEXT_CONTENT":g(a,h.content);break;case "REMOVE_NODE":d=a,h=h.fromNode,Array.isArray(h)&&(k=h[1],h=h[0],m(d,h,k),d.removeChild(k)),d.removeChild(h)}}}}},
function(k,d,a){function n(a){if(b){var e=a.node,f=a.children;if(f.length)for(a=0;a<f.length;a++)c(e,f[a],null);else null!=a.html?l(e,a.html):null!=a.text&&g(e,a.text)}}function m(){return this.node.nodeName}function f(a){return{node:a,children:[],html:null,text:null,toString:m}}var h=a(94),l=a(95);d=a(96);var g=a(97),b="undefined"!==typeof document&&"number"===typeof document.documentMode||"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),
c=d(function(a,b,c){11===b.node.nodeType||1===b.node.nodeType&&"object"===b.node.nodeName.toLowerCase()&&(null==b.node.namespaceURI||b.node.namespaceURI===h.html)?(n(b),a.insertBefore(b.node,c)):(a.insertBefore(b.node,c),n(b))});f.insertTreeBefore=c;f.replaceChildWithTree=function(a,b){a.parentNode.replaceChild(b.node,a);n(b)};f.queueChild=function(a,c){b?a.children.push(c):a.node.appendChild(c.node)};f.queueHTML=function(a,c){b?a.html=c:l(a.node,c)};f.queueText=function(a,c){b?a.text=c:g(a.node,
c)};k.exports=f},function(k,d){k.exports={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"}},function(k,d,a){d=a(65);var n=a(94),m=/^[ \r\n\t\f]/,f=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,h;a=a(96)(function(a,g){if(a.namespaceURI!==n.svg||"innerHTML"in a)a.innerHTML=g;else for(h=h||document.createElement("div"),h.innerHTML="<svg>"+g+"</svg>",g=h.firstChild;g.firstChild;)a.appendChild(g.firstChild)});d.canUseDOM&&(d=document.createElement("div"),
d.innerHTML=" ",""===d.innerHTML&&(a=function(a,g){a.parentNode&&a.parentNode.replaceChild(a,a);m.test(g)||"<"===g[0]&&f.test(g)?(a.innerHTML=String.fromCharCode(65279)+g,g=a.firstChild,1===g.data.length?a.removeChild(g):g.deleteData(0,1)):a.innerHTML=g}),d=null);k.exports=a},function(k,d){k.exports=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(d,m,f,h){MSApp.execUnsafeLocalFunction(function(){return a(d,m,f,h)})}:a}},function(k,d,a){d=a(65);var n=a(98),m=a(95);
a=function(a,h){if(h){var f=a.firstChild;if(f&&f===a.lastChild&&3===f.nodeType){f.nodeValue=h;return}}a.textContent=h};d.canUseDOM&&("textContent"in document.documentElement||(a=function(a,h){3===a.nodeType?a.nodeValue=h:m(a,n(h))}));k.exports=a},function(k,d){var a=/["'&<>]/;k.exports=function(d){if("boolean"===typeof d||"number"===typeof d)return""+d;d=""+d;var m=a.exec(d);if(m){var f="",h,l=0;for(h=m.index;h<d.length;h++){switch(d.charCodeAt(h)){case 34:m="&quot;";break;case 38:m="&amp;";break;
case 39:m="&#x27;";break;case 60:m="&lt;";break;case 62:m="&gt;";break;default:continue}l!==h&&(f+=d.substring(l,h));l=h+1;f+=m}d=l!==h?f+d.substring(l,h):f}return d}},function(k,d,a){var n=a(49),m=a(93),f=a(65),h=a(100),l=a(62);a(51);k.exports={dangerouslyReplaceNodeWithMarkup:function(a,b){f.canUseDOM?void 0:n("56");b?void 0:n("57");"HTML"===a.nodeName?n("58"):void 0;"string"===typeof b?(b=h(b,l)[0],a.parentNode.replaceChild(b,a)):m.replaceChildWithTree(a,b)}}},function(k,d,a){d=a(65);var n=a(101),
m=a(102),f=a(51),h=d.canUseDOM?document.createElement("div"):null,l=/^\s*<(\w+)/;k.exports=function(a,b){var c=h;h?void 0:f(!1);var e;if(e=(e=(e=a.match(l))&&e[1].toLowerCase())&&m(e))for(c.innerHTML=e[1]+a+e[2],a=e[0];a--;)c=c.lastChild;else c.innerHTML=a;a=c.getElementsByTagName("script");a.length&&(b?void 0:f(!1),n(a).forEach(b));for(b=Array.from(c.childNodes);c.lastChild;)c.removeChild(c.lastChild);return b}},function(k,d,a){var n=a(51);k.exports=function(a){if(!a||"object"!=typeof a&&"function"!=
typeof a||!("length"in a)||"setInterval"in a||"number"==typeof a.nodeType||!(Array.isArray(a)||"callee"in a||"item"in a))return[a];if(Array.isArray(a))return a.slice();var f;a:{var h=a.length;Array.isArray(a)||"object"!==typeof a&&"function"!==typeof a?n(!1):void 0;"number"!==typeof h?n(!1):void 0;0===h||h-1 in a?void 0:n(!1);"function"===typeof a.callee?n(!1):void 0;if(a.hasOwnProperty)try{f=Array.prototype.slice.call(a);break a}catch(g){}f=Array(h);for(var d=0;d<h;d++)f[d]=a[d]}return f}},function(k,
d,a){d=a(65);var n=a(51),m=d.canUseDOM?document.createElement("div"):null,f={};a=[1,'<select multiple="true">',"</select>"];d=[1,"<table>","</table>"];var h=[3,"<table><tbody><tr>","</tr></tbody></table>"],l=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],g={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:a,
option:a,caption:d,colgroup:d,tbody:d,tfoot:d,thead:d,td:h,th:h};"circle clipPath defs ellipse g image line linearGradient mask path pattern polygon polyline radialGradient rect stop text tspan".split(" ").forEach(function(a){g[a]=l;f[a]=!0});k.exports=function(a){m?void 0:n(!1);g.hasOwnProperty(a)||(a="*");f.hasOwnProperty(a)||(m.innerHTML="*"===a?"<link />":"<"+a+"></"+a+">",f[a]=!m.firstChild);return f[a]?g[a]:null}},function(k,d,a){var n=a(92),m=a(48);k.exports={dangerouslyProcessChildrenUpdates:function(a,
h){a=m.getNodeFromInstance(a);n.processUpdates(a,h)}}},function(k,d,a){function n(a,b){if(b)if(V[a._tag]&&(null!=b.children||null!=b.dangerouslySetInnerHTML?t("137",a._tag,a._currentElement._owner?" Check the render method of "+a._currentElement._owner.getName()+".":""):void 0),null!=b.dangerouslySetInnerHTML&&(null!=b.children?t("60"):void 0,"object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML?void 0:t("61")),null!=b.style&&"object"!==typeof b.style){a:{if(a&&(a=a._currentElement._owner||
null)&&(a=a.getName())){a=" This DOM node was rendered by `"+a+"`.";break a}a=""}t("62",a)}else void 0}function m(a,b,c,e){if(!(e instanceof I)){var g=a._hostContainerInfo;M(b,g._node&&11===g._node.nodeType?g._node:g._ownerDocument);e.getReactMountReady().enqueue(f,{inst:a,registrationName:b,listener:c})}}function f(){C.putListener(this.inst,this.registrationName,this.listener)}function h(){E.postMountWrapper(this)}function l(){J.postMountWrapper(this)}function g(){F.postMountWrapper(this)}function b(){this._rootNodeID?
void 0:t("63");var a=O(this);a?void 0:t("64");switch(this._tag){case "iframe":case "object":this._wrapperState.listeners=[B.trapBubbledEvent("topLoad","load",a)];break;case "video":case "audio":this._wrapperState.listeners=[];for(var b in R)R.hasOwnProperty(b)&&this._wrapperState.listeners.push(B.trapBubbledEvent(b,R[b],a));break;case "source":this._wrapperState.listeners=[B.trapBubbledEvent("topError","error",a)];break;case "img":this._wrapperState.listeners=[B.trapBubbledEvent("topError","error",
a),B.trapBubbledEvent("topLoad","load",a)];break;case "form":this._wrapperState.listeners=[B.trapBubbledEvent("topReset","reset",a),B.trapBubbledEvent("topSubmit","submit",a)];break;case "input":case "select":case "textarea":this._wrapperState.listeners=[B.trapBubbledEvent("topInvalid","invalid",a)]}}function c(){H.postUpdateWrapper(this)}function e(a,b){return 0<=a.indexOf("-")||null!=b.is}function p(a){var b=a.type;Y.call(X,b)||(W.test(b)?void 0:t("65",b),X[b]=!0);this._currentElement=a;this._tag=
b.toLowerCase();this._hostParent=this._hostNode=this._previousStyleCopy=this._previousStyle=this._renderedChildren=this._namespaceURI=null;this._domID=this._rootNodeID=0;this._topLevelWrapper=this._wrapperState=this._hostContainerInfo=null;this._flags=0}var t=a(49),u=a(21),v=a(105),y=a(107),r=a(93),x=a(94),A=a(50),z=a(115),C=a(57);d=a(58);var B=a(117),D=a(52),G=a(48),E=a(120),F=a(123),H=a(124),J=a(125);a(79);var K=a(126),I=a(146);a(62);var L=a(98);a(51);a(82);a(135);a(149);a(61);var N=C.deleteListener,
O=G.getNodeFromInstance,M=B.listenTo,Q=d.registrationNameModules,P={string:!0,number:!0},S={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},R={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",
topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},U={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},T={listing:!0,pre:!0,textarea:!0},V=u({menuitem:!0},U),W=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,X={},Y={}.hasOwnProperty,ba=1;p.displayName="ReactDOMComponent";p.Mixin={mountComponent:function(a,
c,e,f){this._rootNodeID=ba++;this._domID=e._idCounter++;this._hostParent=c;this._hostContainerInfo=e;var d=this._currentElement.props;switch(this._tag){case "audio":case "form":case "iframe":case "img":case "link":case "object":case "source":case "video":this._wrapperState={listeners:null};a.getReactMountReady().enqueue(b,this);break;case "input":E.mountWrapper(this,d,c);d=E.getHostProps(this,d);a.getReactMountReady().enqueue(b,this);break;case "option":F.mountWrapper(this,d,c);d=F.getHostProps(this,
d);break;case "select":H.mountWrapper(this,d,c);d=H.getHostProps(this,d);a.getReactMountReady().enqueue(b,this);break;case "textarea":J.mountWrapper(this,d,c),d=J.getHostProps(this,d),a.getReactMountReady().enqueue(b,this)}n(this,d);var p,m;null!=c?(p=c._namespaceURI,m=c._tag):e._tag&&(p=e._namespaceURI,m=e._tag);if(null==p||p===x.svg&&"foreignobject"===m)p=x.html;p===x.html&&("svg"===this._tag?p=x.svg:"math"===this._tag&&(p=x.mathml));this._namespaceURI=p;a.useCreateElement?(c=e._ownerDocument,p===
x.html?"script"===this._tag?(p=c.createElement("div"),c=this._currentElement.type,p.innerHTML="<"+c+"></"+c+">",p=p.removeChild(p.firstChild)):p=d.is?c.createElement(this._currentElement.type,d.is):c.createElement(this._currentElement.type):p=c.createElementNS(p,this._currentElement.type),G.precacheNode(this,p),this._flags|=D.hasCachedChildNodes,this._hostParent||z.setAttributeForRoot(p),this._updateDOMProperties(null,d,a),p=r(p),this._createInitialChildren(a,d,f,p),f=p):(p=this._createOpenTagMarkupAndPutListeners(a,
d),f=this._createContentMarkup(a,d,f),f=!f&&U[this._tag]?p+"/>":p+">"+f+"</"+this._currentElement.type+">");switch(this._tag){case "input":a.getReactMountReady().enqueue(h,this);d.autoFocus&&a.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case "textarea":a.getReactMountReady().enqueue(l,this);d.autoFocus&&a.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case "select":d.autoFocus&&a.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case "button":d.autoFocus&&
a.getReactMountReady().enqueue(v.focusDOMComponent,this);break;case "option":a.getReactMountReady().enqueue(g,this)}return f},_createOpenTagMarkupAndPutListeners:function(a,b){var c="<"+this._currentElement.type,g;for(g in b)if(b.hasOwnProperty(g)){var f=b[g];if(null!=f)if(Q.hasOwnProperty(g))f&&m(this,g,f,a);else{"style"===g&&(f&&(f=this._previousStyleCopy=u({},b.style)),f=y.createMarkupForStyles(f,this));var d=null;null!=this._tag&&e(this._tag,b)?S.hasOwnProperty(g)||(d=z.createMarkupForCustomAttribute(g,
f)):d=z.createMarkupForProperty(g,f);d&&(c+=" "+d)}}if(a.renderToStaticMarkup)return c;this._hostParent||(c+=" "+z.createMarkupForRoot());return c+=" "+z.createMarkupForID(this._domID)},_createContentMarkup:function(a,b,c){var e="",g=b.dangerouslySetInnerHTML;null!=g?null!=g.__html&&(e=g.__html):(g=P[typeof b.children]?b.children:null,b=null!=g?null:b.children,null!=g?e=L(g):null!=b&&(e=this.mountChildren(b,a,c).join("")));return T[this._tag]&&"\n"===e.charAt(0)?"\n"+e:e},_createInitialChildren:function(a,
b,c,e){var g=b.dangerouslySetInnerHTML;if(null!=g)null!=g.__html&&r.queueHTML(e,g.__html);else if(g=P[typeof b.children]?b.children:null,b=null!=g?null:b.children,null!=g)r.queueText(e,g);else if(null!=b)for(a=this.mountChildren(b,a,c),c=0;c<a.length;c++)r.queueChild(e,a[c])},receiveComponent:function(a,b,c){var e=this._currentElement;this._currentElement=a;this.updateComponent(b,e,a,c)},updateComponent:function(a,b,e,g){b=b.props;e=this._currentElement.props;switch(this._tag){case "input":b=E.getHostProps(this,
b);e=E.getHostProps(this,e);break;case "option":b=F.getHostProps(this,b);e=F.getHostProps(this,e);break;case "select":b=H.getHostProps(this,b);e=H.getHostProps(this,e);break;case "textarea":b=J.getHostProps(this,b),e=J.getHostProps(this,e)}n(this,e);this._updateDOMProperties(b,e,a);this._updateDOMChildren(b,e,a,g);switch(this._tag){case "input":E.updateWrapper(this);break;case "textarea":J.updateWrapper(this);break;case "select":a.getReactMountReady().enqueue(c,this)}},_updateDOMProperties:function(a,
b,c){var g,f,d;for(g in a)if(!b.hasOwnProperty(g)&&a.hasOwnProperty(g)&&null!=a[g])if("style"===g){var h=this._previousStyleCopy;for(f in h)h.hasOwnProperty(f)&&(d=d||{},d[f]="");this._previousStyleCopy=null}else Q.hasOwnProperty(g)?a[g]&&N(this,g):e(this._tag,a)?S.hasOwnProperty(g)||z.deleteValueForAttribute(O(this),g):(A.properties[g]||A.isCustomAttribute(g))&&z.deleteValueForProperty(O(this),g);for(g in b){var h=b[g],l="style"===g?this._previousStyleCopy:null!=a?a[g]:void 0;if(b.hasOwnProperty(g)&&
h!==l&&(null!=h||null!=l))if("style"===g)if(h?h=this._previousStyleCopy=u({},h):this._previousStyleCopy=null,l){for(f in l)!l.hasOwnProperty(f)||h&&h.hasOwnProperty(f)||(d=d||{},d[f]="");for(f in h)h.hasOwnProperty(f)&&l[f]!==h[f]&&(d=d||{},d[f]=h[f])}else d=h;else if(Q.hasOwnProperty(g))h?m(this,g,h,c):l&&N(this,g);else if(e(this._tag,b))S.hasOwnProperty(g)||z.setValueForAttribute(O(this),g,h);else if(A.properties[g]||A.isCustomAttribute(g))l=O(this),null!=h?z.setValueForProperty(l,g,h):z.deleteValueForProperty(l,
g)}d&&y.setValueForStyles(O(this),d,this)},_updateDOMChildren:function(a,b,c,e){var g=P[typeof a.children]?a.children:null,f=P[typeof b.children]?b.children:null,d=a.dangerouslySetInnerHTML&&a.dangerouslySetInnerHTML.__html,h=b.dangerouslySetInnerHTML&&b.dangerouslySetInnerHTML.__html;b=null!=f?null:b.children;var l=null!=g||null!=d,p=null!=f||null!=h;null!=(null!=g?null:a.children)&&null==b?this.updateChildren(null,c,e):l&&!p&&this.updateTextContent("");null!=f?g!==f&&this.updateTextContent(""+f):
null!=h?d!==h&&this.updateMarkup(""+h):null!=b&&this.updateChildren(b,c,e)},getHostNode:function(){return O(this)},unmountComponent:function(a){switch(this._tag){case "audio":case "form":case "iframe":case "img":case "link":case "object":case "source":case "video":var b=this._wrapperState.listeners;if(b)for(var c=0;c<b.length;c++)b[c].remove();break;case "html":case "head":case "body":t("66",this._tag)}this.unmountChildren(a);G.uncacheNode(this);C.deleteAllListeners(this);this._domID=this._rootNodeID=
0;this._wrapperState=null},getPublicInstance:function(){return O(this)}};u(p.prototype,p.Mixin,K.Mixin);k.exports=p},function(k,d,a){var n=a(48),m=a(106);k.exports={focusDOMComponent:function(){m(n.getNodeFromInstance(this))}}},function(k,d){k.exports=function(a){try{a.focus()}catch(n){}}},function(k,d,a){var n=a(108);d=a(65);a(79);a(109);var m=a(111),f=a(112),h=a(114);a(61);var l=h(function(a){return f(a)}),g=!1,b="cssFloat";if(d.canUseDOM){a=document.createElement("div").style;try{a.font=""}catch(c){g=
!0}void 0===document.documentElement.style.cssFloat&&(b="styleFloat")}k.exports={createMarkupForStyles:function(a,b){var c="",e;for(e in a)if(a.hasOwnProperty(e)){var g=a[e];null!=g&&(c+=l(e)+":",c+=m(e,g,b)+";")}return c||null},setValueForStyles:function(a,e,f){a=a.style;for(var c in e)if(e.hasOwnProperty(c)){var d=m(c,e[c],f);if("float"===c||"cssFloat"===c)c=b;if(d)a[c]=d;else if(d=g&&n.shorthandPropertyExpansions[c])for(var h in d)a[h]="";else a[c]=""}}}},function(k,d){var a={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n=["Webkit","ms","Moz","O"];
Object.keys(a).forEach(function(d){n.forEach(function(f){f=f+d.charAt(0).toUpperCase()+d.substring(1);a[f]=a[d]})});k.exports={isUnitlessNumber:a,shorthandPropertyExpansions:{background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},
borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}}}},function(k,d,a){var n=a(110),m=/^-ms-/;k.exports=function(a){return n(a.replace(m,"ms-"))}},function(k,d){var a=/-(.)/g;k.exports=function(d){return d.replace(a,
function(a,f){return f.toUpperCase()})}},function(k,d,a){d=a(108);a(61);var n=d.isUnitlessNumber;k.exports=function(a,f,d){if(null==f||"boolean"===typeof f||""===f)return"";if(isNaN(f)||0===f||n.hasOwnProperty(a)&&n[a])return""+f;"string"===typeof f&&(f=f.trim());return f+"px"}},function(k,d,a){var n=a(113),m=/^ms-/;k.exports=function(a){return n(a).replace(m,"-ms-")}},function(k,d){var a=/([A-Z])/g;k.exports=function(d){return d.replace(a,"-$1").toLowerCase()}},function(k,d){k.exports=function(a){var d=
{};return function(m){d.hasOwnProperty(m)||(d[m]=a.call(this,m));return d[m]}}},function(k,d,a){function n(a){if(b.hasOwnProperty(a))return!0;if(g.hasOwnProperty(a))return!1;if(l.test(a))return b[a]=!0;g[a]=!0;void 0;return!1}function m(a,b){return null==b||a.hasBooleanValue&&!b||a.hasNumericValue&&isNaN(b)||a.hasPositiveNumericValue&&1>b||a.hasOverloadedBooleanValue&&!1===b}var f=a(50);a(48);a(79);var h=a(116);a(61);var l=new RegExp("^["+f.ATTRIBUTE_NAME_START_CHAR+"]["+f.ATTRIBUTE_NAME_CHAR+"]*$"),
g={},b={},c={createMarkupForID:function(a){return f.ID_ATTRIBUTE_NAME+"="+h(a)},setAttributeForID:function(a,b){a.setAttribute(f.ID_ATTRIBUTE_NAME,b)},createMarkupForRoot:function(){return f.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(a){a.setAttribute(f.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(a,b){var c=f.properties.hasOwnProperty(a)?f.properties[a]:null;if(c){if(m(c,b))return"";a=c.attributeName;return c.hasBooleanValue||c.hasOverloadedBooleanValue&&!0===b?a+'=""':
a+"="+h(b)}return f.isCustomAttribute(a)?null==b?"":a+"="+h(b):null},createMarkupForCustomAttribute:function(a,b){return n(a)&&null!=b?a+"="+h(b):""},setValueForProperty:function(a,b,g){var e=f.properties.hasOwnProperty(b)?f.properties[b]:null;if(e){var d=e.mutationMethod;d?d(a,g):m(e,g)?this.deleteValueForProperty(a,b):e.mustUseProperty?a[e.propertyName]=g:(b=e.attributeName,(d=e.attributeNamespace)?a.setAttributeNS(d,b,""+g):e.hasBooleanValue||e.hasOverloadedBooleanValue&&!0===g?a.setAttribute(b,
""):a.setAttribute(b,""+g))}else f.isCustomAttribute(b)&&c.setValueForAttribute(a,b,g)},setValueForAttribute:function(a,b,c){n(b)&&(null==c?a.removeAttribute(b):a.setAttribute(b,""+c))},deleteValueForAttribute:function(a,b){a.removeAttribute(b)},deleteValueForProperty:function(a,b){var c=f.properties.hasOwnProperty(b)?f.properties[b]:null;c?(b=c.mutationMethod)?b(a,void 0):c.mustUseProperty?a[c.propertyName]=c.hasBooleanValue?!1:"":a.removeAttribute(c.attributeName):f.isCustomAttribute(b)&&a.removeAttribute(b)}};
k.exports=c},function(k,d,a){var n=a(98);k.exports=function(a){return'"'+n(a)+'"'}},function(k,d,a){d=a(21);var n=a(58),m=a(118),f=a(88),h=a(119),l=a(82),g,b={},c=!1,e=0,p={topAbort:"abort",topAnimationEnd:h("animationend")||"animationend",topAnimationIteration:h("animationiteration")||"animationiteration",topAnimationStart:h("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",
topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",
topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",
topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:h("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},t="_reactListenersID"+String(Math.random()).slice(2),u=d({},m,{ReactEventListener:null,injection:{injectReactEventListener:function(a){a.setHandleTopLevel(u.handleTopLevel);u.ReactEventListener=a}},setEnabled:function(a){u.ReactEventListener&&
u.ReactEventListener.setEnabled(a)},isEnabled:function(){return!(!u.ReactEventListener||!u.ReactEventListener.isEnabled())},listenTo:function(a,c){var g;Object.prototype.hasOwnProperty.call(c,t)||(c[t]=e++,b[c[t]]={});g=b[c[t]];a=n.registrationNameDependencies[a];for(var f=0;f<a.length;f++){var d=a[f];g.hasOwnProperty(d)&&g[d]||("topWheel"===d?l("wheel")?u.ReactEventListener.trapBubbledEvent("topWheel","wheel",c):l("mousewheel")?u.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",c):u.ReactEventListener.trapBubbledEvent("topWheel",
"DOMMouseScroll",c):"topScroll"===d?l("scroll",!0)?u.ReactEventListener.trapCapturedEvent("topScroll","scroll",c):u.ReactEventListener.trapBubbledEvent("topScroll","scroll",u.ReactEventListener.WINDOW_HANDLE):"topFocus"===d||"topBlur"===d?(l("focus",!0)?(u.ReactEventListener.trapCapturedEvent("topFocus","focus",c),u.ReactEventListener.trapCapturedEvent("topBlur","blur",c)):l("focusin")&&(u.ReactEventListener.trapBubbledEvent("topFocus","focusin",c),u.ReactEventListener.trapBubbledEvent("topBlur",
"focusout",c)),g.topBlur=!0,g.topFocus=!0):p.hasOwnProperty(d)&&u.ReactEventListener.trapBubbledEvent(d,p[d],c),g[d]=!0)}},trapBubbledEvent:function(a,b,c){return u.ReactEventListener.trapBubbledEvent(a,b,c)},trapCapturedEvent:function(a,b,c){return u.ReactEventListener.trapCapturedEvent(a,b,c)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var a=document.createEvent("MouseEvent");return null!=a&&"pageX"in a},ensureScrollValueMonitoring:function(){void 0===g&&(g=u.supportsEventPageXY());
g||c||(u.ReactEventListener.monitorScrollValue(f.refreshScrollValues),c=!0)}});k.exports=u},function(k,d,a){var n=a(57);k.exports={handleTopLevel:function(a,f,d,l){a=n.extractEvents(a,f,d,l);n.enqueueEvents(a);n.processEventQueue(!1)}}},function(k,d,a){function n(a,g){var b={};b[a.toLowerCase()]=g.toLowerCase();b["Webkit"+a]="webkit"+g;b["Moz"+a]="moz"+g;b["ms"+a]="MS"+g;b["O"+a]="o"+g.toLowerCase();return b}d=a(65);var m={animationend:n("Animation","AnimationEnd"),animationiteration:n("Animation",
"AnimationIteration"),animationstart:n("Animation","AnimationStart"),transitionend:n("Transition","TransitionEnd")},f={},h={};d.canUseDOM&&(h=document.createElement("div").style,"AnimationEvent"in window||(delete m.animationend.animation,delete m.animationiteration.animation,delete m.animationstart.animation),"TransitionEvent"in window||delete m.transitionend.transition);k.exports=function(a){if(f[a])return f[a];if(!m[a])return a;var g=m[a],b;for(b in g)if(g.hasOwnProperty(b)&&b in h)return f[a]=
g[b];return""}},function(k,d,a){function n(){this._rootNodeID&&e.updateWrapper(this)}function m(a){var e=this._currentElement.props;a=g.executeOnChange(e,a);c.asap(n,this);var d=e.name;if("radio"===e.type&&null!=d){for(var h=e=b.getNodeFromInstance(this);h.parentNode;)h=h.parentNode;d=h.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]');for(h=0;h<d.length;h++){var l=d[h];l!==e&&l.form===e.form&&((l=b.getInstanceFromNode(l))?void 0:f("90"),c.asap(n,l))}}return a}var f=a(49),h=a(21),
l=a(115),g=a(121),b=a(48),c=a(73);a(51);a(61);var e={getHostProps:function(a,b){var c=g.getValue(b),e=g.getChecked(b);return h({type:void 0,step:void 0,min:void 0,max:void 0},b,{defaultChecked:void 0,defaultValue:void 0,value:null!=c?c:a._wrapperState.initialValue,checked:null!=e?e:a._wrapperState.initialChecked,onChange:a._wrapperState.onChange})},mountWrapper:function(a,b){var c=b.defaultValue;a._wrapperState={initialChecked:null!=b.checked?b.checked:b.defaultChecked,initialValue:null!=b.value?
b.value:c,listeners:null,onChange:m.bind(a)}},updateWrapper:function(a){var c=a._currentElement.props,e=c.checked;null!=e&&l.setValueForProperty(b.getNodeFromInstance(a),"checked",e||!1);a=b.getNodeFromInstance(a);e=g.getValue(c);null!=e?(c=""+e,c!==a.value&&(a.value=c)):(null==c.value&&null!=c.defaultValue&&(a.defaultValue=""+c.defaultValue),null==c.checked&&null!=c.defaultChecked&&(a.defaultChecked=!!c.defaultChecked))},postMountWrapper:function(a){var c=a._currentElement.props;a=b.getNodeFromInstance(a);
switch(c.type){case "submit":case "reset":break;case "color":case "date":case "datetime":case "datetime-local":case "month":case "time":case "week":a.value="";a.value=a.defaultValue;break;default:a.value=a.value}c=a.name;""!==c&&(a.name="");a.defaultChecked=!a.defaultChecked;a.defaultChecked=!a.defaultChecked;""!==c&&(a.name=c)}};k.exports=e},function(k,d,a){function n(a){null!=a.checkedLink&&null!=a.valueLink?h("87"):void 0}function m(a){n(a);null!=a.value||null!=a.onChange?h("88"):void 0}function f(a){n(a);
null!=a.checked||null!=a.onChange?h("89"):void 0}var h=a(49);d=a(20);var l=a(122);a(51);a(61);var g={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},b={value:function(a,b,c){return!a[b]||g[a.type]||a.onChange||a.readOnly||a.disabled?null:Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(a,b,
c){return!a[b]||a.onChange||a.readOnly||a.disabled?null:Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:d.PropTypes.func},c={};k.exports={checkPropTypes:function(a,g,f){for(var e in b){if(b.hasOwnProperty(e))var d=b[e](g,e,a,"prop",null,l);d instanceof Error&&!(d.message in c)&&(c[d.message]=!0,f&&f.getName(),void 0)}},
getValue:function(a){return a.valueLink?(m(a),a.valueLink.value):a.value},getChecked:function(a){return a.checkedLink?(f(a),a.checkedLink.value):a.checked},executeOnChange:function(a,b){if(a.valueLink)return m(a),a.valueLink.requestChange(b.target.value);if(a.checkedLink)return f(a),a.checkedLink.requestChange(b.target.checked);if(a.onChange)return a.onChange.call(void 0,b)}}},function(k,d){k.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(k,d,a){function n(a){var b="";f.Children.forEach(a,
function(a){null!=a&&("string"===typeof a||"number"===typeof a?b+=a:g||(g=!0,void 0))});return b}var m=a(21),f=a(20),h=a(48),l=a(124);a(61);var g=!1;k.exports={mountWrapper:function(a,c,e){var b=null;null!=e&&("optgroup"===e._tag&&(e=e._hostParent),null!=e&&"select"===e._tag&&(b=l.getSelectValueContext(e)));e=null;if(null!=b)if(c=null!=c.value?c.value+"":n(c.children),e=!1,Array.isArray(b))for(var g=0;g<b.length;g++){if(""+b[g]===c){e=!0;break}}else e=""+b===c;a._wrapperState={selected:e}},postMountWrapper:function(a){var b=
a._currentElement.props;null!=b.value&&h.getNodeFromInstance(a).setAttribute("value",b.value)},getHostProps:function(a,c){var b=m({selected:void 0,children:void 0},c);null!=a._wrapperState.selected&&(b.selected=a._wrapperState.selected);if(a=n(c.children))b.children=a;return b}}},function(k,d,a){function n(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var a=this._currentElement.props,b=l.getValue(a);null!=b&&m(this,!!a.multiple,b)}}function m(a,b,c){var e;
a=g.getNodeFromInstance(a).options;if(b){b={};for(e=0;e<c.length;e++)b[""+c[e]]=!0;for(e=0;e<a.length;e++)c=b.hasOwnProperty(a[e].value),a[e].selected!==c&&(a[e].selected=c)}else{b=""+c;for(e=0;e<a.length;e++)if(a[e].value===b){a[e].selected=!0;return}a.length&&(a[0].selected=!0)}}function f(a){a=l.executeOnChange(this._currentElement.props,a);this._rootNodeID&&(this._wrapperState.pendingUpdate=!0);b.asap(n,this);return a}var h=a(21),l=a(121),g=a(48),b=a(73);a(61);var c=!1;k.exports={getHostProps:function(a,
b){return h({},b,{onChange:a._wrapperState.onChange,value:void 0})},mountWrapper:function(a,b){var e=l.getValue(b);a._wrapperState={pendingUpdate:!1,initialValue:null!=e?e:b.defaultValue,listeners:null,onChange:f.bind(a),wasMultiple:!!b.multiple};void 0===b.value||void 0===b.defaultValue||c||(void 0,c=!0)},getSelectValueContext:function(a){return a._wrapperState.initialValue},postUpdateWrapper:function(a){var b=a._currentElement.props;a._wrapperState.initialValue=void 0;var c=a._wrapperState.wasMultiple;
a._wrapperState.wasMultiple=!!b.multiple;var e=l.getValue(b);null!=e?(a._wrapperState.pendingUpdate=!1,m(a,!!b.multiple,e)):c!==!!b.multiple&&(null!=b.defaultValue?m(a,!!b.multiple,b.defaultValue):m(a,!!b.multiple,b.multiple?[]:""))}}},function(k,d,a){function n(){this._rootNodeID&&c.updateWrapper(this)}function m(a){a=l.executeOnChange(this._currentElement.props,a);b.asap(n,this);return a}var f=a(49),h=a(21),l=a(121),g=a(48),b=a(73);a(51);a(61);var c={getHostProps:function(a,b){null!=b.dangerouslySetInnerHTML?
f("91"):void 0;return h({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue,onChange:a._wrapperState.onChange})},mountWrapper:function(a,b){var c=l.getValue(b),e=c;null==c&&(c=b.defaultValue,b=b.children,null!=b&&(null!=c?f("92"):void 0,Array.isArray(b)&&(1>=b.length?void 0:f("93"),b=b[0]),c=""+b),null==c&&(c=""),e=c);a._wrapperState={initialValue:""+e,listeners:null,onChange:m.bind(a)}},updateWrapper:function(a){var b=a._currentElement.props;a=g.getNodeFromInstance(a);
var c=l.getValue(b);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&(a.defaultValue=c));null!=b.defaultValue&&(a.defaultValue=b.defaultValue)},postMountWrapper:function(a){a=g.getNodeFromInstance(a);a.value=a.textContent}};k.exports=c},function(k,d,a){function n(a,c){c&&(a=a||[],a.push(c));return a}var m=a(49),f=a(127);a(128);a(79);a(27);var h=a(76),l=a(129);a(62);var g=a(145);a(51);k.exports={Mixin:{_reconcilerInstantiateChildren:function(a,c,e){return l.instantiateChildren(a,c,e)},
_reconcilerUpdateChildren:function(a,c,e,f,d,h){c=g(c,0);l.updateChildren(a,c,e,f,d,this,this._hostContainerInfo,h,0);return c},mountChildren:function(a,c,e){this._renderedChildren=a=this._reconcilerInstantiateChildren(a,c,e);var b=[],g=0,f;for(f in a)if(a.hasOwnProperty(f)){var d=a[f],l=h.mountComponent(d,c,this,this._hostContainerInfo,e,0);d._mountIndex=g++;b.push(l)}return b},updateTextContent:function(a){var b=this._renderedChildren;l.unmountChildren(b,!1);for(var e in b)b.hasOwnProperty(e)&&
m("118");f.processChildrenUpdates(this,[{type:"TEXT_CONTENT",content:a,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}])},updateMarkup:function(a){var b=this._renderedChildren;l.unmountChildren(b,!1);for(var e in b)b.hasOwnProperty(e)&&m("118");f.processChildrenUpdates(this,[{type:"SET_MARKUP",content:a,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}])},updateChildren:function(a,c,e){this._updateChildren(a,c,e)},_updateChildren:function(a,c,e){var b=this._renderedChildren,g={},
d=[];if((a=this._reconcilerUpdateChildren(b,a,d,g,c,e))||b){var l=null,m,k=0,x=0,A=0,z=null;for(m in a)if(a.hasOwnProperty(m)){var C=b&&b[m],B=a[m];C===B?(l=n(l,this.moveChild(C,z,k,x)),x=Math.max(C._mountIndex,x),C._mountIndex=k):(C&&(x=Math.max(C._mountIndex,x)),l=n(l,this._mountChildAtIndex(B,d[A],z,k,c,e)),A++);k++;z=h.getHostNode(B)}for(m in g)g.hasOwnProperty(m)&&(l=n(l,this._unmountChild(b[m],g[m])));l&&f.processChildrenUpdates(this,l);this._renderedChildren=a}},unmountChildren:function(a){l.unmountChildren(this._renderedChildren,
a);this._renderedChildren=null},moveChild:function(a,c,e,g){if(a._mountIndex<g)return{type:"MOVE_EXISTING",content:null,fromIndex:a._mountIndex,fromNode:h.getHostNode(a),toIndex:e,afterNode:c}},createChild:function(a,c,e){return{type:"INSERT_MARKUP",content:e,fromIndex:null,fromNode:null,toIndex:a._mountIndex,afterNode:c}},removeChild:function(a,c){return{type:"REMOVE_NODE",content:null,fromIndex:a._mountIndex,fromNode:c,toIndex:null,afterNode:null}},_mountChildAtIndex:function(a,c,e,g,f,d){a._mountIndex=
g;return this.createChild(a,e,c)},_unmountChild:function(a,c){c=this.removeChild(a,c);a._mountIndex=null;return c}}}},function(k,d,a){var n=a(49);a(51);var m=!1,f={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(a){m?n("104"):void 0;f.replaceNodeWithMarkup=a.replaceNodeWithMarkup;f.processChildrenUpdates=a.processChildrenUpdates;m=!0}}};k.exports=f},function(k,d){k.exports={remove:function(a){a._reactInternalInstance=void 0},get:function(a){return a._reactInternalInstance},
has:function(a){return void 0!==a._reactInternalInstance},set:function(a,d){a._reactInternalInstance=d}}},function(k,d,a){(function(d){function m(a,c,e,g){g=void 0===a[e];null!=c&&g&&(a[e]=h(c,!0))}var f=a(76),h=a(131);a(140);var l=a(136),g=a(141);a(61);k.exports={instantiateChildren:function(a,c,e,f){if(null==a)return null;c={};g(a,m,c);return c},updateChildren:function(a,c,e,g,d,m,n,k,r){if(c||a){var b,p;for(b in c)if(c.hasOwnProperty(b)){var t=(p=a&&a[b])&&p._currentElement,u=c[b];null!=p&&l(t,
u)?(f.receiveComponent(p,u,d,k),c[b]=p):(p&&(g[b]=f.getHostNode(p),f.unmountComponent(p,!1)),p=h(u,!0),c[b]=p,p=f.mountComponent(p,d,m,n,k,r),e.push(p))}for(b in a)!a.hasOwnProperty(b)||c&&c.hasOwnProperty(b)||(p=a[b],g[b]=f.getHostNode(p),f.unmountComponent(p,!1))}},unmountChildren:function(a,c){for(var b in a)a.hasOwnProperty(b)&&f.unmountComponent(a[b],c)}}}).call(d,a(130))},function(k,d){function a(){l=!1;g.length?h=g.concat(h):b=-1;h.length&&n()}function n(){if(!l){var c=setTimeout(a);l=!0;for(var e=
h.length;e;){g=h;for(h=[];++b<e;)g&&g[b].run();b=-1;e=h.length}g=null;l=!1;clearTimeout(c)}}function m(a,b){this.fun=a;this.array=b}function f(){}k=k.exports={};var h=[],l=!1,g,b=-1;k.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];h.push(new m(a,b));1!==h.length||l||setTimeout(n,0)};m.prototype.run=function(){this.fun.apply(null,this.array)};k.title="browser";k.browser=!0;k.env={};k.argv=[];k.version="";k.versions=
{};k.on=f;k.addListener=f;k.once=f;k.off=f;k.removeListener=f;k.removeAllListeners=f;k.emit=f;k.binding=function(a){throw Error("process.binding is not supported");};k.cwd=function(){return"/"};k.chdir=function(a){throw Error("process.chdir is not supported");};k.umask=function(){return 0}},function(k,d,a){function n(a,c){var b;if(null===a||!1===a)b=h.create(n);else if("object"===typeof a){if(!a||"function"!==typeof a.type&&"string"!==typeof a.type){c=null==a.type?a.type:typeof a.type;a:{if(b=a._owner)if(b=
b.getName()){b=" Check the render method of `"+b+"`.";break a}b=""}m("130",c,b)}else void 0;"string"===typeof a.type?b=l.createInternalComponent(a):(c=a.type,"function"===typeof c&&"undefined"!==typeof c.prototype&&"function"===typeof c.prototype.mountComponent&&"function"===typeof c.prototype.receiveComponent?(b=new a.type(a),b.getHostNode||(b.getHostNode=b.getNativeNode)):b=new g(a))}else"string"===typeof a||"number"===typeof a?b=l.createInstanceForText(a):m("131",typeof a);b._mountIndex=0;b._mountImage=
null;return b}var m=a(49);d=a(21);var f=a(132),h=a(137),l=a(138);a(139);a(51);a(61);var g=function(a){this.construct(a)};d(g.prototype,f,{_instantiateReactComponent:n});k.exports=n},function(k,d,a){function n(a){}var m=a(49),f=a(21),h=a(20),l=a(127),g=a(27),b=a(60),c=a(128);a(79);var e=a(133),p=a(76),t=a(134);a(51);var u=a(135),v=a(136);a(61);n.prototype.render=function(){var a=c.get(this)._currentElement.type;return a(this.props,this.context,this.updater)};var y=1;k.exports={construct:function(a){this._currentElement=
a;this._rootNodeID=0;this._pendingStateQueue=this._pendingElement=this._updateBatchNumber=this._hostContainerInfo=this._hostParent=this._instance=this._compositeType=null;this._pendingForceUpdate=this._pendingReplaceState=!1;this._context=this._renderedComponent=this._renderedNodeType=null;this._mountOrder=0;this._pendingCallbacks=this._topLevelWrapper=null;this._calledComponentWillUnmount=!1},mountComponent:function(a,b,e,g){this._context=g;this._mountOrder=y++;this._hostParent=b;this._hostContainerInfo=
e;var d=this._currentElement.props,f=this._processContext(g),l=this._currentElement.type,p=a.getUpdateQueue(),k=!(!l.prototype||!l.prototype.isReactComponent),x=this._constructComponent(k,d,f,p),z;k||null!=x&&null!=x.render?this._compositeType=l.prototype&&l.prototype.isPureReactComponent?1:0:(z=x,null===x||!1===x||h.isValidElement(x)?void 0:m("105",l.displayName||l.name||"Component"),x=new n(l),this._compositeType=2);x.props=d;x.context=f;x.refs=t;x.updater=p;this._instance=x;c.set(x,this);d=x.state;
void 0===d&&(x.state=d=null);"object"!==typeof d||Array.isArray(d)?m("106",this.getName()||"ReactCompositeComponent"):void 0;this._pendingStateQueue=null;this._pendingForceUpdate=this._pendingReplaceState=!1;b=x.unstable_handleError?this.performInitialMountWithErrorHandling(z,b,e,a,g):this.performInitialMount(z,b,e,a,g);x.componentDidMount&&a.getReactMountReady().enqueue(x.componentDidMount,x);return b},_constructComponent:function(a,b,c,e){return this._constructComponentWithoutOwner(a,b,c,e)},_constructComponentWithoutOwner:function(a,
b,c,e){var g=this._currentElement.type;return a?new g(b,c,e):g(b,c,e)},performInitialMountWithErrorHandling:function(a,b,c,e,g){var d,f=e.checkpoint();try{d=this.performInitialMount(a,b,c,e,g)}catch(G){e.rollback(f),this._instance.unstable_handleError(G),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),f=e.checkpoint(),this._renderedComponent.unmountComponent(!0),e.rollback(f),d=this.performInitialMount(a,b,c,e,g)}return d},performInitialMount:function(a,
b,c,g,d){var f=this._instance;f.componentWillMount&&(f.componentWillMount(),this._pendingStateQueue&&(f.state=this._processPendingState(f.props,f.context)));void 0===a&&(a=this._renderValidatedComponent());this._renderedNodeType=f=e.getType(a);this._renderedComponent=a=this._instantiateReactComponent(a,f!==e.EMPTY);return p.mountComponent(a,g,b,c,this._processChildContext(d),0)},getHostNode:function(){return p.getHostNode(this._renderedComponent)},unmountComponent:function(a){if(this._renderedComponent){var e=
this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,a){var g=this.getName()+".componentWillUnmount()";b.invokeGuardedCallback(g,e.componentWillUnmount.bind(e))}else e.componentWillUnmount();this._renderedComponent&&(p.unmountComponent(this._renderedComponent,a),this._instance=this._renderedComponent=this._renderedNodeType=null);this._pendingStateQueue=null;this._pendingForceUpdate=this._pendingReplaceState=!1;this._context=this._pendingElement=
this._pendingCallbacks=null;this._rootNodeID=0;this._topLevelWrapper=null;c.remove(e)}},_maskContext:function(a){var b=this._currentElement.type.contextTypes;if(!b)return t;var c={},e;for(e in b)c[e]=a[e];return c},_processContext:function(a){return this._maskContext(a)},_processChildContext:function(a){var b=this._currentElement.type,c=this._instance,e;c.getChildContext&&(e=c.getChildContext());if(e){"object"!==typeof b.childContextTypes?m("107",this.getName()||"ReactCompositeComponent"):void 0;
for(var g in e)g in b.childContextTypes?void 0:m("108",this.getName()||"ReactCompositeComponent",g);return f({},a,e)}return a},_checkContextTypes:function(a,b,c){},receiveComponent:function(a,b,c){var e=this._currentElement,g=this._context;this._pendingElement=null;this.updateComponent(b,e,a,g,c)},performUpdateIfNecessary:function(a){null!=this._pendingElement?p.receiveComponent(this,this._pendingElement,a,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(a,
this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(a,b,c,e,g){e=this._instance;null==e?m("136",this.getName()||"ReactCompositeComponent"):void 0;var f=!1,d;this._context===g?d=e.context:(d=this._processContext(g),f=!0);var h=b.props,l=c.props;b!==c&&(f=!0);f&&e.componentWillReceiveProps&&e.componentWillReceiveProps(l,d);b=this._processPendingState(l,d);f=!0;this._pendingForceUpdate||(e.shouldComponentUpdate?f=e.shouldComponentUpdate(l,
b,d):1===this._compositeType&&(f=!u(h,l)||!u(e.state,b)));this._updateBatchNumber=null;f?(this._pendingForceUpdate=!1,this._performComponentUpdate(c,l,b,d,a,g)):(this._currentElement=c,this._context=g,e.props=l,e.state=b,e.context=d)},_processPendingState:function(a,b){var c=this._instance,e=this._pendingStateQueue,g=this._pendingReplaceState;this._pendingReplaceState=!1;this._pendingStateQueue=null;if(!e)return c.state;if(g&&1===e.length)return e[0];for(var d=f({},g?e[0]:c.state),g=g?1:0;g<e.length;g++){var h=
e[g];f(d,"function"===typeof h?h.call(c,d,a,b):h)}return d},_performComponentUpdate:function(a,b,c,e,g,d){var f=this._instance,h=!!f.componentDidUpdate,l,m,n;h&&(l=f.props,m=f.state,n=f.context);f.componentWillUpdate&&f.componentWillUpdate(b,c,e);this._currentElement=a;this._context=d;f.props=b;f.state=c;f.context=e;this._updateRenderedComponent(g,d);h&&g.getReactMountReady().enqueue(f.componentDidUpdate.bind(f,l,m,n),f)},_updateRenderedComponent:function(a,b){var c=this._renderedComponent,g=c._currentElement,
f=this._renderValidatedComponent();if(v(g,f))p.receiveComponent(c,f,a,this._processChildContext(b));else{g=p.getHostNode(c);p.unmountComponent(c,!1);var d=e.getType(f);this._renderedNodeType=d;this._renderedComponent=f=this._instantiateReactComponent(f,d!==e.EMPTY);a=p.mountComponent(f,a,this._hostParent,this._hostContainerInfo,this._processChildContext(b),0);this._replaceNodeWithMarkup(g,a,c)}},_replaceNodeWithMarkup:function(a,b,c){l.replaceNodeWithMarkup(a,b,c)},_renderValidatedComponentWithoutOwnerOrContext:function(){return this._instance.render()},
_renderValidatedComponent:function(){var a;if(2!==this._compositeType){g.current=this;try{a=this._renderValidatedComponentWithoutOwnerOrContext()}finally{g.current=null}}else a=this._renderValidatedComponentWithoutOwnerOrContext();null===a||!1===a||h.isValidElement(a)?void 0:m("109",this.getName()||"ReactCompositeComponent");return a},attachRef:function(a,b){var c=this.getPublicInstance();null==c?m("110"):void 0;b=b.getPublicInstance();(c.refs===t?c.refs={}:c.refs)[a]=b},detachRef:function(a){delete this.getPublicInstance().refs[a]},
getName:function(){var a=this._currentElement.type,b=this._instance&&this._instance.constructor;return a.displayName||b&&b.displayName||a.name||b&&b.name||null},getPublicInstance:function(){return 2===this._compositeType?null:this._instance},_instantiateReactComponent:null}},function(k,d,a){var n=a(49),m=a(20);a(51);var f={HOST:0,COMPOSITE:1,EMPTY:2,getType:function(a){if(null===a||!1===a)return f.EMPTY;if(m.isValidElement(a))return"function"===typeof a.type?f.COMPOSITE:f.HOST;n("26",a)}};k.exports=
f},function(k,d,a){k.exports={}},function(k,d){function a(a,f){return a===f?0!==a||0!==f||1/a===1/f:a!==a&&f!==f}var n=Object.prototype.hasOwnProperty;k.exports=function(d,f){if(a(d,f))return!0;if("object"!==typeof d||null===d||"object"!==typeof f||null===f)return!1;var h=Object.keys(d),l=Object.keys(f);if(h.length!==l.length)return!1;for(l=0;l<h.length;l++)if(!n.call(f,h[l])||!a(d[h[l]],f[h[l]]))return!1;return!0}},function(k,d){k.exports=function(a,d){var m=null===a||!1===a,f=null===d||!1===d;if(m||
f)return m===f;m=typeof a;f=typeof d;return"string"===m||"number"===m?"string"===f||"number"===f:"object"===f&&a.type===d.type&&a.key===d.key}},function(k,d){var a;k.exports={create:function(d){return a(d)},injection:{injectEmptyComponentFactory:function(d){a=d}}}},function(k,d,a){var n=a(49),m=a(21);a(51);var f=null,h={},l=null;k.exports={createInternalComponent:function(a){f?void 0:n("111",a.type);return new f(a)},createInstanceForText:function(a){return new l(a)},isTextComponent:function(a){return a instanceof
l},injection:{injectGenericComponentClass:function(a){f=a},injectTextComponentClass:function(a){l=a},injectComponentClasses:function(a){m(h,a)}}}},function(k,d){var a=1;k.exports=function(){return a++}},function(k,d){k.exports={escape:function(a){var d={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return d[a]})},unescape:function(a){var d={"=0":"=","=2":":"};return(""+("."===a[0]&&"$"===a[1]?a.substring(2):a.substring(1))).replace(/(=0|=2)/g,function(a){return d[a]})}}},function(k,
d,a){function n(a,c){return a&&"object"===typeof a&&null!=a.key?g.escape(a.key):c.toString(36)}function m(a,c,e,d){var b=typeof a;if("undefined"===b||"boolean"===b)a=null;if(null===a||"string"===b||"number"===b||"object"===b&&a.$$typeof===h)return e(d,a,""===c?"."+n(a,0):c),1;var p,k,y=0;c=""===c?".":c+":";if(Array.isArray(a))for(b=0;b<a.length;b++)p=a[b],k=c+n(p,b),y+=m(p,k,e,d);else if(p=l(a))if(b=p.call(a),p!==a.entries)for(a=0;!(p=b.next()).done;)p=p.value,k=c+n(p,a++),y+=m(p,k,e,d);else for(;!(p=
b.next()).done;){if(a=p.value)p=a[1],k=c+g.escape(a[0])+":"+n(p,0),y+=m(p,k,e,d)}else"object"===b&&(e=String(a),f("31","[object Object]"===e?"object with keys {"+Object.keys(a).join(", ")+"}":e,""));return y}var f=a(49);a(27);var h=a(142),l=a(143);a(51);var g=a(140);a(61);k.exports=function(a,c,e){return null==a?0:m(a,"",c,e)}},function(k,d){d="function"===typeof Symbol&&Symbol["for"]&&Symbol["for"]("react.element")||60103;k.exports=d},function(k,d){var a="function"===typeof Symbol&&Symbol.iterator;
k.exports=function(d){d=d&&(a&&d[a]||d["@@iterator"]);if("function"===typeof d)return d}},function(k,d,a){function n(a){var b=Function.prototype.toString,c=RegExp("^"+b.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var e=b.call(a);return c.test(e)}catch(E){return!1}}function m(a){var b=c(a);b&&(b=b.childIDs,e(a),b.forEach(m))}function f(a,b,c){return"\n    in "+(a||"Unknown")+(b?" (at "+
b.fileName.replace(/^.*[\\\/]/,"")+":"+b.lineNumber+")":c?" (created by "+c+")":"")}function h(a){return null==a?"#empty":"string"===typeof a||"number"===typeof a?"#text":"string"===typeof a.type?a.type:a.type.displayName||a.type.name||"Unknown"}var l=a(24),g=a(27);a(25);a(28);var b,c,e,p,t;if("function"===typeof Array.from&&"function"===typeof Map&&n(Map)&&null!=Map.prototype&&"function"===typeof Map.prototype.keys&&n(Map.prototype.keys)&&"function"===typeof Set&&n(Set)&&null!=Set.prototype&&"function"===
typeof Set.prototype.keys&&n(Set.prototype.keys)){var u=new Map,v=new Set;b=function(a,b){u.set(a,b)};c=function(a){return u.get(a)};e=function(a){u["delete"](a)};d=function(){return Array.from(u.keys())};p=function(a){v.add(a)};t=function(a){v["delete"](a)};a=function(){return Array.from(v.keys())}}else{var y={},r={},x=function(a){return parseInt(a.substr(1),10)};b=function(a,b){y["."+a]=b};c=function(a){return y["."+a]};e=function(a){delete y["."+a]};d=function(){return Object.keys(y).map(x)};p=
function(a){r["."+a]=!0};t=function(a){delete r["."+a]};a=function(){return Object.keys(r).map(x)}}var A=[],z={onSetChildren:function(a,b){var e=c(a);e?void 0:l("144");e.childIDs=b;for(e=0;e<b.length;e++){var g=b[e],d=c(g);d?void 0:l("140");null==d.childIDs&&"object"===typeof d.element&&null!=d.element?l("141"):void 0;d.isMounted?void 0:l("71");null==d.parentID&&(d.parentID=a);d.parentID!==a?l("142",g,d.parentID,a):void 0}},onBeforeMountComponent:function(a,c,e){b(a,{element:c,parentID:e,text:null,
childIDs:[],isMounted:!1,updateCount:0})},onBeforeUpdateComponent:function(a,b){(a=c(a))&&a.isMounted&&(a.element=b)},onMountComponent:function(a){var b=c(a);b?void 0:l("144");b.isMounted=!0;0===b.parentID&&p(a)},onUpdateComponent:function(a){(a=c(a))&&a.isMounted&&a.updateCount++},onUnmountComponent:function(a){var b=c(a);b&&(b.isMounted=!1,0===b.parentID&&t(a));A.push(a)},purgeUnmountedComponents:function(){if(!z._preventPurging){for(var a=0;a<A.length;a++)m(A[a]);A.length=0}},isMounted:function(a){return(a=
c(a))?a.isMounted:!1},getCurrentStackAddendum:function(a){var b="";if(a)var c=h(a),e=a._owner,b=b+f(c,a._source,e&&e.getName());a=g.current;return b+=z.getStackAddendumByID(a&&a._debugID)},getStackAddendumByID:function(a){for(var b="";a;){var c,e=a;c=z.getDisplayName(e);var g=z.getElement(e),e=z.getOwnerID(e),d=void 0;e&&(d=z.getDisplayName(e));void 0;c=f(c,g&&g._source,d);b+=c;a=z.getParentID(a)}return b},getChildIDs:function(a){return(a=c(a))?a.childIDs:[]},getDisplayName:function(a){return(a=z.getElement(a))?
h(a):null},getElement:function(a){return(a=c(a))?a.element:null},getOwnerID:function(a){return(a=z.getElement(a))&&a._owner?a._owner._debugID:null},getParentID:function(a){return(a=c(a))?a.parentID:null},getSource:function(a){a=(a=c(a))?a.element:null;return null!=a?a._source:null},getText:function(a){a=z.getElement(a);return"string"===typeof a?a:"number"===typeof a?""+a:null},getUpdateCount:function(a){return(a=c(a))?a.updateCount:0},getRootIDs:a,getRegisteredIDs:d};k.exports=z},function(k,d,a){(function(d){function m(a,
d,g,b){a&&"object"===typeof a&&void 0===a[g]&&null!=d&&(a[g]=d)}a(140);var f=a(141);a(61);k.exports=function(a,d){if(null==a)return a;d={};f(a,m,d);return d}}).call(d,a(130))},function(k,d,a){function n(a){this.reinitializeTransaction();this.renderToStaticMarkup=a;this.useCreateElement=!1;this.updateQueue=new h(this)}d=a(21);var m=a(67),f=a(80);a(79);var h=a(147),l=[],g={enqueue:function(){}};d(n.prototype,f,{getTransactionWrappers:function(){return l},getReactMountReady:function(){return g},getUpdateQueue:function(){return this.updateQueue},
destructor:function(){},checkpoint:function(){},rollback:function(){}});m.addPoolingTo(n);k.exports=n},function(k,d,a){var n=a(148);a(61);d=function(){function a(d){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.transaction=d}a.prototype.isMounted=function(a){return!1};a.prototype.enqueueCallback=function(a,d,l){this.transaction.isInTransaction()&&n.enqueueCallback(a,d,l)};a.prototype.enqueueForceUpdate=function(a){this.transaction.isInTransaction()&&n.enqueueForceUpdate(a)};
a.prototype.enqueueReplaceState=function(a,d){this.transaction.isInTransaction()&&n.enqueueReplaceState(a,d)};a.prototype.enqueueSetState=function(a,d){this.transaction.isInTransaction()&&n.enqueueSetState(a,d)};return a}();k.exports=d},function(k,d,a){function n(a,b){return(a=f.get(a))?a:null}var m=a(49);a(27);var f=a(128);a(79);var h=a(73);a(51);a(61);var l={isMounted:function(a){return(a=f.get(a))?!!a._renderedComponent:!1},enqueueCallback:function(a,b,c){l.validateCallback(b,c);a=n(a);if(!a)return null;
a._pendingCallbacks?a._pendingCallbacks.push(b):a._pendingCallbacks=[b];h.enqueueUpdate(a)},enqueueCallbackInternal:function(a,b){a._pendingCallbacks?a._pendingCallbacks.push(b):a._pendingCallbacks=[b];h.enqueueUpdate(a)},enqueueForceUpdate:function(a){if(a=n(a,"forceUpdate"))a._pendingForceUpdate=!0,h.enqueueUpdate(a)},enqueueReplaceState:function(a,b){if(a=n(a,"replaceState"))a._pendingStateQueue=[b],a._pendingReplaceState=!0,h.enqueueUpdate(a)},enqueueSetState:function(a,b){if(a=n(a,"setState"))(a._pendingStateQueue||
(a._pendingStateQueue=[])).push(b),h.enqueueUpdate(a)},enqueueElementInternal:function(a,b,c){a._pendingElement=b;a._context=c;h.enqueueUpdate(a)},validateCallback:function(a,b){if(a&&"function"!==typeof a){var c=typeof a;"object"!==c?a=c:(c=a.constructor&&a.constructor.name||c,a=Object.keys(a),a=0<a.length&&20>a.length?c+" (keys: "+a.join(", ")+")":c);m("122",b,a)}else void 0}};k.exports=l},function(k,d,a){a(21);d=a(62);a(61);k.exports=d},function(k,d,a){d=a(21);var n=a(93),m=a(48);a=function(a){this._hostContainerInfo=
this._hostParent=this._hostNode=this._currentElement=null;this._domID=0};d(a.prototype,{mountComponent:function(a,d,l,g){this._domID=l._idCounter++;this._hostParent=d;this._hostContainerInfo=l;d=" react-empty: "+this._domID+" ";return a.useCreateElement?(a=l._ownerDocument.createComment(d),m.precacheNode(this,a),n(a)):a.renderToStaticMarkup?"":"\x3c!--"+d+"--\x3e"},receiveComponent:function(){},getHostNode:function(){return m.getNodeFromInstance(this)},unmountComponent:function(){m.uncacheNode(this)}});
k.exports=a},function(k,d,a){function n(a,d){"_hostNode"in a?void 0:m("33");"_hostNode"in d?void 0:m("33");for(var f=0,g=a;g;g=g._hostParent)f++;for(var g=0,b=d;b;b=b._hostParent)g++;for(;0<f-g;)a=a._hostParent,f--;for(;0<g-f;)d=d._hostParent,g--;for(;f--;){if(a===d)return a;a=a._hostParent;d=d._hostParent}return null}var m=a(49);a(51);k.exports={isAncestor:function(a,d){"_hostNode"in a?void 0:m("35");"_hostNode"in d?void 0:m("35");for(;d;){if(d===a)return!0;d=d._hostParent}return!1},getLowestCommonAncestor:n,
getParentInstance:function(a){"_hostNode"in a?void 0:m("36");return a._hostParent},traverseTwoPhase:function(a,d,l){for(var g=[];a;)g.push(a),a=a._hostParent;for(a=g.length;0<a--;)d(g[a],"captured",l);for(a=0;a<g.length;a++)d(g[a],"bubbled",l)},traverseEnterLeave:function(a,d,l,g,b){for(var c=a&&d?n(a,d):null,e=[];a&&a!==c;)e.push(a),a=a._hostParent;for(a=[];d&&d!==c;)a.push(d),d=d._hostParent;for(d=0;d<e.length;d++)l(e[d],"bubbled",g);for(d=a.length;0<d--;)l(a[d],"captured",b)}}},function(k,d,a){var n=
a(49);d=a(21);var m=a(92),f=a(93),h=a(48),l=a(98);a(51);a(149);a=function(a){this._currentElement=a;this._stringText=""+a;this._hostParent=this._hostNode=null;this._mountIndex=this._domID=0;this._commentNodes=this._closingComment=null};d(a.prototype,{mountComponent:function(a,b,c,e){var g=c._idCounter++;e=" react-text: "+g+" ";this._domID=g;this._hostParent=b;if(a.useCreateElement)return a=c._ownerDocument,e=a.createComment(e),b=a.createComment(" /react-text "),c=f(a.createDocumentFragment()),f.queueChild(c,
f(e)),this._stringText&&f.queueChild(c,f(a.createTextNode(this._stringText))),f.queueChild(c,f(b)),h.precacheNode(this,e),this._closingComment=b,c;b=l(this._stringText);return a.renderToStaticMarkup?b:"\x3c!--"+e+"--\x3e"+b+"\x3c!-- /react-text --\x3e"},receiveComponent:function(a,b){a!==this._currentElement&&(this._currentElement=a,a=""+a,a!==this._stringText&&(this._stringText=a,b=this.getHostNode(),m.replaceDelimitedText(b[0],b[1],a)))},getHostNode:function(){var a=this._commentNodes;if(a)return a;
if(!this._closingComment)for(a=h.getNodeFromInstance(this).nextSibling;;){null==a?n("67",this._domID):void 0;if(8===a.nodeType&&" /react-text "===a.nodeValue){this._closingComment=a;break}a=a.nextSibling}return this._commentNodes=a=[this._hostNode,this._closingComment]},unmountComponent:function(){this._commentNodes=this._closingComment=null;h.uncacheNode(this)}});k.exports=a},function(k,d,a){function n(){this.reinitializeTransaction()}d=a(21);var m=a(73),f=a(80);a=a(62);var h={initialize:a,close:function(){b.isBatchingUpdates=
!1}},l=[{initialize:a,close:m.flushBatchedUpdates.bind(m)},h];d(n.prototype,f,{getTransactionWrappers:function(){return l}});var g=new n,b={isBatchingUpdates:!1,batchedUpdates:function(a,e,d,f,h,l){var c=b.isBatchingUpdates;b.isBatchingUpdates=!0;return c?a(e,d,f,h,l):g.perform(a,null,e,d,f,h,l)}};k.exports=b},function(k,d,a){function n(a,b){this.topLevelType=a;this.nativeEvent=b;this.ancestors=[]}function m(a){var c=e(a.nativeEvent),c=b.getClosestInstanceFromNode(c);do{a.ancestors.push(c);var g;
if(g=c){for(;c._hostParent;)c=c._hostParent;c=b.getNodeFromInstance(c).parentNode;g=b.getClosestInstanceFromNode(c)}c=g}while(c);for(g=0;g<a.ancestors.length;g++)c=a.ancestors[g],t._handleTopLevel(a.topLevelType,c,a.nativeEvent,e(a.nativeEvent))}function f(a){var b=p(window);a(b)}d=a(21);var h=a(155),l=a(65),g=a(67),b=a(48),c=a(73),e=a(81),p=a(156);d(n.prototype,{destructor:function(){this.nativeEvent=this.topLevelType=null;this.ancestors.length=0}});g.addPoolingTo(n,g.twoArgumentPooler);var t={_enabled:!0,
_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(a){t._handleTopLevel=a},setEnabled:function(a){t._enabled=!!a},isEnabled:function(){return t._enabled},trapBubbledEvent:function(a,b,c){return c?h.listen(c,b,t.dispatchEvent.bind(null,a)):null},trapCapturedEvent:function(a,b,c){return c?h.capture(c,b,t.dispatchEvent.bind(null,a)):null},monitorScrollValue:function(a){a=f.bind(null,a);h.listen(window,"scroll",a)},dispatchEvent:function(a,b){if(t._enabled){a=n.getPooled(a,
b);try{c.batchedUpdates(m,a)}finally{n.release(a)}}}};k.exports=t},function(k,d,a){var n=a(62);k.exports={listen:function(a,d,h){if(a.addEventListener)return a.addEventListener(d,h,!1),{remove:function(){a.removeEventListener(d,h,!1)}};if(a.attachEvent)return a.attachEvent("on"+d,h),{remove:function(){a.detachEvent("on"+d,h)}}},capture:function(a,d,h){return a.addEventListener?(a.addEventListener(d,h,!0),{remove:function(){a.removeEventListener(d,h,!0)}}):{remove:n}},registerDefault:function(){}}},
function(k,d){k.exports=function(a){return a===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:a.scrollLeft,y:a.scrollTop}}},function(k,d,a){d=a(50);var n=a(57),m=a(59),f=a(127),h=a(137),l=a(117),g=a(138);a=a(73);k.exports={Component:f.injection,DOMProperty:d.injection,EmptyComponent:h.injection,EventPluginHub:n.injection,EventPluginUtils:m.injection,EventEmitter:l.injection,HostComponent:g.injection,Updates:a.injection}},
function(k,d,a){function n(a){this.reinitializeTransaction();this.renderToStaticMarkup=!1;this.reactMountReady=m.getPooled(null);this.useCreateElement=a}d=a(21);var m=a(74),f=a(67),h=a(117),l=a(159);a(79);var g=a(80),b=a(148),c=[{initialize:l.getSelectionInformation,close:l.restoreSelection},{initialize:function(){var a=h.isEnabled();h.setEnabled(!1);return a},close:function(a){h.setEnabled(a)}},{initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}}];
d(n.prototype,g,{getTransactionWrappers:function(){return c},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return b},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(a){this.reactMountReady.rollback(a)},destructor:function(){m.release(this.reactMountReady);this.reactMountReady=null}});f.addPoolingTo(n);k.exports=n},function(k,d,a){var n=a(160),m=a(162),f=a(106),h=a(165),l={hasSelectionCapabilities:function(a){var b=a&&a.nodeName&&
a.nodeName.toLowerCase();return b&&("input"===b&&"text"===a.type||"textarea"===b||"true"===a.contentEditable)},getSelectionInformation:function(){var a=h();return{focusedElem:a,selectionRange:l.hasSelectionCapabilities(a)?l.getSelection(a):null}},restoreSelection:function(a){var b=h(),c=a.focusedElem;a=a.selectionRange;b!==c&&m(document.documentElement,c)&&(l.hasSelectionCapabilities(c)&&l.setSelection(c,a),f(c))},getSelection:function(a){var b;if("selectionStart"in a)b={start:a.selectionStart,end:a.selectionEnd};
else if(document.selection&&a.nodeName&&"input"===a.nodeName.toLowerCase()){var c=document.selection.createRange();c.parentElement()===a&&(b={start:-c.moveStart("character",-a.value.length),end:-c.moveEnd("character",-a.value.length)})}else b=n.getOffsets(a);return b||{start:0,end:0}},setSelection:function(a,b){var c=b.start,e=b.end;void 0===e&&(e=c);"selectionStart"in a?(a.selectionStart=c,a.selectionEnd=Math.min(e,a.value.length)):document.selection&&a.nodeName&&"input"===a.nodeName.toLowerCase()?
(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",c),a.moveEnd("character",e-c),a.select()):n.setOffsets(a,b)}};k.exports=l},function(k,d,a){function n(a){var b=document.selection.createRange(),e=b.text.length,g=b.duplicate();g.moveToElementText(a);g.setEndPoint("EndToStart",b);a=g.text.length;return{start:a,end:a+e}}function m(a){var b=window.getSelection&&window.getSelection();if(!b||0===b.rangeCount)return null;var e=b.anchorNode,g=b.anchorOffset,d=b.focusNode,f=b.focusOffset,h=b.getRangeAt(0);
try{h.startContainer.nodeType,h.endContainer.nodeType}catch(r){return null}var b=b.anchorNode===b.focusNode&&b.anchorOffset===b.focusOffset?0:h.toString().length,l=h.cloneRange();l.selectNodeContents(a);l.setEnd(h.startContainer,h.startOffset);a=l.startContainer===l.endContainer&&l.startOffset===l.endOffset?0:l.toString().length;h=a+b;b=document.createRange();b.setStart(e,g);b.setEnd(d,f);e=b.collapsed;return{start:e?h:a,end:e?a:h}}function f(a,c){var b=document.selection.createRange().duplicate(),
g;void 0===c.end?c=g=c.start:c.start>c.end?(g=c.end,c=c.start):(g=c.start,c=c.end);b.moveToElementText(a);b.moveStart("character",g);b.setEndPoint("EndToStart",b);b.moveEnd("character",c-g);b.select()}function h(a,c){if(window.getSelection){var b=window.getSelection(),d=a[g()].length,f=Math.min(c.start,d);c=void 0===c.end?f:Math.min(c.end,d);!b.extend&&f>c&&(d=c,c=f,f=d);d=l(a,f);a=l(a,c);if(d&&a){var h=document.createRange();h.setStart(d.node,d.offset);b.removeAllRanges();f>c?(b.addRange(h),b.extend(a.node,
a.offset)):(h.setEnd(a.node,a.offset),b.addRange(h))}}}d=a(65);var l=a(161),g=a(68);a=d.canUseDOM&&"selection"in document&&!("getSelection"in window);k.exports={getOffsets:a?n:m,setOffsets:a?f:h}},function(k,d){function a(a){for(;a&&a.firstChild;)a=a.firstChild;return a}k.exports=function(d,m){var f=a(d);d=0;for(var h;f;){if(3===f.nodeType){h=d+f.textContent.length;if(d<=m&&h>=m)return{node:f,offset:m-d};d=h}a:{for(;f;){if(f.nextSibling){f=f.nextSibling;break a}f=f.parentNode}f=void 0}f=a(f)}}},function(k,
d,a){function n(a,d){return a&&d?a===d?!0:m(a)?!1:m(d)?n(a,d.parentNode):"contains"in a?a.contains(d):a.compareDocumentPosition?!!(a.compareDocumentPosition(d)&16):!1:!1}var m=a(163);k.exports=n},function(k,d,a){var n=a(164);k.exports=function(a){return n(a)&&3==a.nodeType}},function(k,d){k.exports=function(a){return!!(a&&("function"===typeof Node?a instanceof Node:"object"===typeof a&&"number"===typeof a.nodeType&&"string"===typeof a.nodeName))}},function(k,d){k.exports=function(){if("undefined"===
typeof document)return null;try{return document.activeElement||document.body}catch(a){return document.body}}},function(k,d){var a={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,
bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",
dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",
format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering","in":0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",
keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,
origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",
refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",
stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",
textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",
viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",
z:0,zoomAndPan:"zoomAndPan"},n={Properties:{},DOMAttributeNamespaces:{xlinkActuate:"http://www.w3.org/1999/xlink",xlinkArcrole:"http://www.w3.org/1999/xlink",xlinkHref:"http://www.w3.org/1999/xlink",xlinkRole:"http://www.w3.org/1999/xlink",xlinkShow:"http://www.w3.org/1999/xlink",xlinkTitle:"http://www.w3.org/1999/xlink",xlinkType:"http://www.w3.org/1999/xlink",xmlBase:"http://www.w3.org/XML/1998/namespace",xmlLang:"http://www.w3.org/XML/1998/namespace",xmlSpace:"http://www.w3.org/XML/1998/namespace"},
DOMAttributeNames:{}};Object.keys(a).forEach(function(d){n.Properties[d]=0;a[d]&&(n.DOMAttributeNames[d]=a[d])});k.exports=n},function(k,d,a){function n(a,b){if(y||null==t||t!==g())return null;var e;e=t;"selectionStart"in e&&h.hasSelectionCapabilities(e)?e={start:e.selectionStart,end:e.selectionEnd}:window.getSelection?(e=window.getSelection(),e={anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}):document.selection?(e=document.selection.createRange(),
e={parentElement:e.parentElement(),text:e.text,top:e.boundingTop,left:e.boundingLeft}):e=void 0;return v&&c(v,e)?null:(v=e,a=l.getPooled(p.select,u,a,b),a.type="select",a.target=t,m.accumulateTwoPhaseDispatches(a),a)}var m=a(56);d=a(65);var f=a(48),h=a(159),l=a(70),g=a(165),b=a(83),c=a(135),e=d.canUseDOM&&"documentMode"in document&&11>=document.documentMode,p={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},
t=null,u=null,v=null,y=!1,r=!1;k.exports={eventTypes:p,extractEvents:function(a,c,g,d){if(!r)return null;var h=c?f.getNodeFromInstance(c):window;switch(a){case "topFocus":if(b(h)||"true"===h.contentEditable)t=h,u=c,v=null;break;case "topBlur":v=u=t=null;break;case "topMouseDown":y=!0;break;case "topContextMenu":case "topMouseUp":return y=!1,n(g,d);case "topSelectionChange":if(e)break;case "topKeyDown":case "topKeyUp":return n(g,d)}return null},didPutListener:function(a,b,c){"onSelect"===b&&(r=!0)}}},
function(k,d,a){function n(a){return"button"===a||"input"===a||"select"===a||"textarea"===a}var m=a(49),f=a(155),h=a(56),l=a(48),g=a(169),b=a(170),c=a(70),e=a(171),p=a(172),t=a(86),u=a(175),v=a(176),y=a(177),r=a(87),x=a(178),A=a(62),z=a(173);a(51);var C={},B={};"abort animationEnd animationIteration animationStart blur canPlay canPlayThrough click contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(a){var b=
a[0].toUpperCase()+a.slice(1),c="on"+b,b="top"+b,c={phasedRegistrationNames:{bubbled:c,captured:c+"Capture"},dependencies:[b]};C[a]=c;B[b]=c});var D={};k.exports={eventTypes:C,extractEvents:function(a,d,f,l){var n=B[a];if(!n)return null;var k;switch(a){case "topAbort":case "topCanPlay":case "topCanPlayThrough":case "topDurationChange":case "topEmptied":case "topEncrypted":case "topEnded":case "topError":case "topInput":case "topInvalid":case "topLoad":case "topLoadedData":case "topLoadedMetadata":case "topLoadStart":case "topPause":case "topPlay":case "topPlaying":case "topProgress":case "topRateChange":case "topReset":case "topSeeked":case "topSeeking":case "topStalled":case "topSubmit":case "topSuspend":case "topTimeUpdate":case "topVolumeChange":case "topWaiting":k=
c;break;case "topKeyPress":if(0===z(f))return null;case "topKeyDown":case "topKeyUp":k=p;break;case "topBlur":case "topFocus":k=e;break;case "topClick":if(2===f.button)return null;case "topDoubleClick":case "topMouseDown":case "topMouseMove":case "topMouseUp":case "topMouseOut":case "topMouseOver":case "topContextMenu":k=t;break;case "topDrag":case "topDragEnd":case "topDragEnter":case "topDragExit":case "topDragLeave":case "topDragOver":case "topDragStart":case "topDrop":k=u;break;case "topTouchCancel":case "topTouchEnd":case "topTouchMove":case "topTouchStart":k=
v;break;case "topAnimationEnd":case "topAnimationIteration":case "topAnimationStart":k=g;break;case "topTransitionEnd":k=y;break;case "topScroll":k=r;break;case "topWheel":k=x;break;case "topCopy":case "topCut":case "topPaste":k=b}k?void 0:m("86",a);a=k.getPooled(n,d,f,l);h.accumulateTwoPhaseDispatches(a);return a},didPutListener:function(a,b,c){"onClick"!==b||n(a._tag)||(b="."+a._rootNodeID,a=l.getNodeFromInstance(a),D[b]||(D[b]=f.listen(a,"click",A)))},willDeleteListener:function(a,b){"onClick"!==
b||n(a._tag)||(a="."+a._rootNodeID,D[a].remove(),delete D[a])}}},function(k,d,a){function n(a,d,l,g){return m.call(this,a,d,l,g)}var m=a(70);m.augmentClass(n,{animationName:null,elapsedTime:null,pseudoElement:null});k.exports=n},function(k,d,a){function n(a,d,l,g){return m.call(this,a,d,l,g)}var m=a(70);m.augmentClass(n,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}});k.exports=n},function(k,d,a){function n(a,d,l,g){return m.call(this,a,d,l,g)}var m=a(87);
m.augmentClass(n,{relatedTarget:null});k.exports=n},function(k,d,a){function n(a,d,g,b){return m.call(this,a,d,g,b)}var m=a(87),f=a(173);d=a(174);a=a(89);m.augmentClass(n,{key:d,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:a,charCode:function(a){return"keypress"===a.type?f(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===a.type?f(a):"keydown"===a.type||"keyup"===a.type?
a.keyCode:0}});k.exports=n},function(k,d){k.exports=function(a){var d=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===d&&(a=13)):a=d;return 32<=a||13===a?a:0}},function(k,d,a){var n=a(173),m={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},f={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",
27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};k.exports=function(a){if(a.key){var d=m[a.key]||a.key;if("Unidentified"!==d)return d}return"keypress"===a.type?(a=n(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?f[a.keyCode]||
"Unidentified":""}},function(k,d,a){function n(a,d,l,g){return m.call(this,a,d,l,g)}var m=a(86);m.augmentClass(n,{dataTransfer:null});k.exports=n},function(k,d,a){function n(a,d,l,g){return m.call(this,a,d,l,g)}var m=a(87);d={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:a(89)};m.augmentClass(n,d);k.exports=n},function(k,d,a){function n(a,d,l,g){return m.call(this,a,d,l,g)}var m=a(70);m.augmentClass(n,{propertyName:null,elapsedTime:null,
pseudoElement:null});k.exports=n},function(k,d,a){function n(a,d,l,g){return m.call(this,a,d,l,g)}var m=a(86);m.augmentClass(n,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:null,deltaMode:null});k.exports=n},function(k,d,a){function n(a){return a?9===a.nodeType?a.documentElement:a.firstChild:null}function m(a,b,c,e,g){var d;r.logTopLevelRenders&&
(d=a._currentElement.props.child.type,d="React mount: "+("string"===typeof d?d:d.displayName||d.name),console.time(d));g=z.mountComponent(a,c,null,v(a,b),g,0);d&&console.timeEnd(d);a._renderedComponent._topLevelWrapper=a;N._mountImageIntoNode(g,b,a,e,c)}function f(a,b,c,e){var g=B.ReactReconcileTransaction.getPooled(!c&&y.useCreateElement);g.perform(m,null,a,b,g,c,e);B.ReactReconcileTransaction.release(g)}function h(a,b,c){z.unmountComponent(a,c);9===b.nodeType&&(b=b.documentElement);for(;b.lastChild;)b.removeChild(b.lastChild)}
function l(a){if(a=n(a))return a=u.getInstanceFromNode(a),!(!a||!a._hostParent)}function g(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType)}function b(a){return(a=(a=(a=n(a))&&u.getInstanceFromNode(a))&&!a._hostParent?a:null)?a._hostContainerInfo._topLevelWrapper:null}var c=a(49),e=a(93);d=a(50);var p=a(20),t=a(117);a(27);var u=a(48),v=a(180),y=a(181),r=a(75),x=a(128);a(79);var A=a(182),z=a(76),C=a(148),B=a(73),D=a(134),G=a(131);a(51);var E=a(95),F=a(136);a(61);var H=d.ID_ATTRIBUTE_NAME,
J=d.ROOT_ATTRIBUTE_NAME,K={},I=1,L=function(){this.rootID=I++};L.prototype.isReactComponent={};L.prototype.render=function(){return this.props.child};L.isReactTopLevelWrapper=!0;var N={TopLevelWrapper:L,_instancesByReactRootID:K,scrollMonitor:function(a,b){b()},_updateRootComponent:function(a,b,c,e,g){N.scrollMonitor(e,function(){C.enqueueElementInternal(a,b,c);g&&C.enqueueCallbackInternal(a,g)});return a},_renderNewRootComponent:function(a,b,e,d){void 0;g(b)?void 0:c("37");t.ensureScrollValueMonitoring();
a=G(a,!1);B.batchedUpdates(f,a,b,e,d);return K[a._instance.rootID]=a},renderSubtreeIntoContainer:function(a,b,e,g){null!=a&&x.has(a)?void 0:c("38");return N._renderSubtreeIntoContainer(a,b,e,g)},_renderSubtreeIntoContainer:function(a,e,g,d){C.validateCallback(d,"ReactDOM.render");p.isValidElement(e)?void 0:c("39","string"===typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"===typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":
null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"");void 0;var f=p.createElement(L,{child:e});a?(a=x.get(a),a=a._processChildContext(a._context)):a=D;var h=b(g);if(h){if(F(h._currentElement.props.child,e)){var m=h._renderedComponent.getPublicInstance();N._updateRootComponent(h,f,a,g,d&&function(){d.call(m)});return m}N.unmountComponentAtNode(g)}e=(e=n(g))&&!(!e.getAttribute||!e.getAttribute(H));var k=l(g);g=N._renderNewRootComponent(f,g,
e&&!h&&!k,a)._renderedComponent.getPublicInstance();d&&d.call(g);return g},render:function(a,b,c){return N._renderSubtreeIntoContainer(null,a,b,c)},unmountComponentAtNode:function(a){void 0;g(a)?void 0:c("40");var e=b(a);if(!e)return l(a),1===a.nodeType&&a.hasAttribute(J),!1;delete K[e._instance.rootID];B.batchedUpdates(h,e,a,!1);return!0},_mountImageIntoNode:function(a,b,d,f,h){g(b)?void 0:c("41");if(f){var l=n(b);if(A.canReuseMarkup(a,l)){u.precacheNode(d,l);return}var m=l.getAttribute(A.CHECKSUM_ATTR_NAME);
l.removeAttribute(A.CHECKSUM_ATTR_NAME);f=l.outerHTML;l.setAttribute(A.CHECKSUM_ATTR_NAME,m);a:{l=Math.min(a.length,f.length);for(m=0;m<l;m++)if(a.charAt(m)!==f.charAt(m)){l=m;break a}l=a.length===f.length?-1:l}f=" (client) "+a.substring(l-20,l+20)+"\n (server) "+f.substring(l-20,l+20);9===b.nodeType?c("42",f):void 0}9===b.nodeType?c("43"):void 0;if(h.useCreateElement){for(;b.lastChild;)b.removeChild(b.lastChild);e.insertTreeBefore(b,a,null)}else E(b,a),u.precacheNode(d,b.firstChild)}};k.exports=
N},function(k,d,a){a(149);k.exports=function(a,d){return{_topLevelWrapper:a,_idCounter:1,_ownerDocument:d?9===d.nodeType?d:d.ownerDocument:null,_node:d,_tag:d?d.nodeName.toLowerCase():null,_namespaceURI:d?d.namespaceURI:null}}},function(k,d){k.exports={useCreateElement:!0,useFiber:!1}},function(k,d,a){var n=a(183),m=/\/?>/,f=/^<\!\-\-/,h={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(a){var g=n(a);return f.test(a)?a:a.replace(m," "+h.CHECKSUM_ATTR_NAME+'="'+g+'"$&')},canReuseMarkup:function(a,
g){g=(g=g.getAttribute(h.CHECKSUM_ATTR_NAME))&&parseInt(g,10);return n(a)===g}};k.exports=h},function(k,d){k.exports=function(a){for(var d=1,m=0,f=0,h=a.length,l=h&-4;f<l;){for(var g=Math.min(f+4096,l);f<g;f+=4)m+=(d+=a.charCodeAt(f))+(d+=a.charCodeAt(f+1))+(d+=a.charCodeAt(f+2))+(d+=a.charCodeAt(f+3));d%=65521;m%=65521}for(;f<h;f++)m+=d+=a.charCodeAt(f);return d%65521|m%65521<<16}},function(k,d){k.exports="15.4.1"},function(k,d,a){var n=a(49);a(27);var m=a(48),f=a(128),h=a(186);a(51);a(61);k.exports=
function(a){if(null==a)return null;if(1===a.nodeType)return a;var g=f.get(a);if(g)return(g=h(g))?m.getNodeFromInstance(g):null;"function"===typeof a.render?n("44"):n("45",Object.keys(a))}},function(k,d,a){var n=a(133);k.exports=function(a){for(var d;(d=a._renderedNodeType)===n.COMPOSITE;)a=a._renderedComponent;if(d===n.HOST)return a._renderedComponent;if(d===n.EMPTY)return null}},function(k,d,a){d=a(179);k.exports=d.renderSubtreeIntoContainer},function(k,d,a){function n(a,e,d,h,n){f.assert_nt(d);
var k={html_with_resolved_refs:"",resolved_refs:{},has_ref:!1},t="",z,r=0,u;for(e.lastIndex=0;;){z=e.exec(a);if(!z)break;u=e.lastIndex;t+=a.substring(r,z.index);f.dwarnif(2<z.length&&null!=z[2],"Using old in-text templates: "+a,z);var v=z[1],r=void 0,y=d.refManager.ogetRefableInTextNodeByMutid(h,v),E="",F=c.stwidgets.refStyle.value;if(y)r=v;else{var H=v.indexOf(":");0<=H&&(r=v.substring(0,H),E=v.substring(H+1),y=d.refManager.ogetRefableInTextNodeByMutid(h,r));y||l.remindonce("Disabled auto-creation of new definition nodes. see old code in ./not-built")}if(y){z=
g.resolveDisplayOfRefableInTextNode(e,y,0);d.top.highlight_first_ref_occurrence_only()&&k.resolved_refs[r]&&(F=c.stwidgets.subsequentRefStyle.value);if(p.has(E))switch(F=void 0,E){case "children":F=$(b.nodeDomSelector(y.oid));0===F.length?t+="\u2039"+y.oid+"'s DOM rendering missing\u203a":(t+="<ul>\n",F.find("ul .node_inlining").each(function(a,b){t+="<li>"+b.innerHTML+"</li>\n"}),t+="</ul>");break;case "inlining":t+=b.htmlForCopyOfNodeInliningRendering(y,d);break;case "full":t+=b.htmlForCopyOfFullNodeRendering(y,
d);break;case "cloaked":case "camo":F="cloaked"}else t=n?t+z:z?t+m(y,z,F):t+b.htmlForCopyOfNodeInliningRendering(y,d);k.resolved_refs[r]=z;k.has_ref=!0}else t+=a.substring(z.index,u);r=u;e.lastIndex=r}r<a.length&&(t+=a.substring(r,a.length));k.html_with_resolved_refs=t;return k}function m(a,b,c){void 0===c&&(c="");return"<span class='simple-inline-ref "+c+"' data-permid_ref='"+a.oid+"'>"+b+"</span>"}var f=a(7),h=a(9),l=a(4),g=a(11),b=a(189),c=a(14),e=a(248),p=l.setConstructor("children","inlining",
"full","cloaked","camo");d.insertRefsIntoDOMTextNode=function(a,b,c,e,g,d){f.assert_nt(c);f.dlogcat(h.LogTypes.qtip,"Entering insertRefsIntoDOMTextNode. id_of_node_with_ref is "+e);d=a.textContent;l.triv(d)?f.derr("(not actual error) undefined or null passed as first arg to insertRefsIntoDOMTextNode. Some of other args were ",a,e):(b=n(d,b,c,e,g),c="<span>"+b.html_with_resolved_refs+"</span>",b.has_ref&&(b=$(c),$(a).replaceWith(b)))};d.insertRefsIntoHTMLString=n;d.simpleInlineRefHTMLString=m;d.renderUnsanitizedHTMLStringAsRef=
function(a,b,g,d,f){void 0===d&&(d=e.rspan);b={className:"simple-inline-ref "+c.stwidgets.refStyle.value,"data-permid_ref":b};f&&e.reactAttrMerge(b,f);return e.asHtmlNoSanitize_InnerHTML(a,!1,g,b,d)};d.renderSimpleInlineRefWithReact=function(a,b,g){g||(g=b);return e.rspan({className:"simple-inline-ref "+c.stwidgets.refStyle.value,"data-permid_ref":a,key:g},b)}},function(k,d,a){function n(a){return"stnode"+a}function m(a){return"."+a+"-inlining"}function f(a){return a.substr(6)}function h(a){return"#stnode"+
a}var l=a(7),g=a(190),b=a(191),c=a(3),e=a(247),p=a(46);d.childrenToggleTriggerId=function(a){return n(a)+"children-show-hide-trigger"};d.nodeIdToDomId=n;d.nodeIdToInliningClassSelector=m;d.domIdToNodeId=f;d.elementToNodeId=function(a){var b=new Set,c=$(a);try{for(;;){if(b.has(c[0])){l.dwarn("????? why can this happen? Only at the root?");break}else b.add(c[0]);if(c.is(".STNodeView"))return f(c.attr("id"));if(c.is("body"))break;c=c.parent()}}catch(y){console.error("Exception trying to get the STNode closest to element ",
a,y)}return null};d.nodeDomSelector=h;d.saveJsonFileLink=function(a,b){b=new Blob([b],{type:"application/json"});b=URL.createObjectURL(b);var c=document.createElement("a");c.download=a;c.href=b;c.textContent="download";c.onclick=function(){c.remove()};(a=document.getElementById("save-json-backup-container"))&&a.appendChild(c)};d.htmlForCopyOfFullNodeRendering=function(a,b){var e;b=$(h(a.oid)).first();0===b.length?(l.dremindonce("Following code probably needs to be wrapped in a callback. Since React executes asynchronously??"),
c.STApp.the.controller_of_main_display_wstdoc.vmbuilder.nodevm_cache&&c.STApp.the.controller_of_main_display_wstdoc.vmbuilder.nodevm_cache.has(a.oid)?c.STApp.the.controller_of_main_display_wstdoc.vmbuilder.nodevm_cache.get(a.oid):c.STApp.the.controller_of_main_display_wstdoc.vmbuilder.newNodeVM_public(a,null,3,Infinity,!0),$("<span></span>")):(b.find("*").removeAttr("data-reactid"),e=b.html());return e};d.htmlForCopyOfNodeInliningRendering=function(a,b){var g=$(m(a.oid)).first();0===g.length?(l.dremindonce("Following code probably needs to be wrapped in a callback. Since React executes asynchronously??"),
g=c.STApp.the.controller_of_main_display_wstdoc.vmbuilder.newInliningVM(a),a=$("<span></span>"),b=e.makeInliningComponentInstance(b.stdocid,g),p.render(b,a[0]),b=a[0].outerHTML):(g.find("*").removeAttr("data-reactid"),b=g.html());return b};d.sanitizeHtmlST=function(a,c){void 0===c&&(c="safe_html");if(null==a)return"";c=b(a,g.sanitizeHTMLConfigs[c]);0<a.length&&0===c.length&&console.warn("sanitizeHtml made the nonempty string "+a+" empty.");return c};d.contextMenuOpen=function(){return 0<$(".STNodeView.context-menu-active").length};
d.nodestubButtonFocused=function(){return $(document.activeElement).is(".NodeStubOption")}},function(k,d,a){function n(a){a&&(a=a.offset(),h.triv(a)||(a=a.top,h.triv(a)||$("html,body").scrollTop(a-50)))}function m(a,b){a&&(a=a.offset(),h.triv(a)||(a=a.top,h.triv(a)||(a={scrollTop:a-50},null!=b&&(a.duration=b),$("html,body").animate(a,"fast"))))}function f(a){if(!a)return!1;a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&
a.right<=(window.innerWidth||document.documentElement.clientWidth)}var h=a(4),l=a(191);window.sanitizeHtml=l;d.sanitizeHTMLConfigs={safe_html:{allowedTags:l.defaults.allowedTags.concat("sup sub del ins s q small strong u math mrow mi mfrac msubsup msub msup img span".split(" ")),allowedAttributes:h.objextend(l.defaults.allowedAttributes,{"*":["style","type","class"],li:["value"]})},wordlevel_html_etc:{allowedTags:"del ins s q small strong u sup sub math mrow mi mfrac msubsup msub msup img img span h1 h2 h3 h4 h5 h6 blockquote a b i em strike code hr br div pre".split(" "),
allowedAttributes:{"*":"href name target style type class src".split(" ")}}};var g=/\s\s+/g,b=/(?:\r\n)|\n|\r/g;d.insertHtmlForLineBreaksAndSpaces=function(a){a=a.replace(g,"<pre>$&</pre>");return a.replace(b,"<br>")};var c=/(?:<pre>)|(?:<\/pre>)/g;d.stripHtmlForLineBreaksAndSpaces=function(a){a=h.strReplaceAll(a,"<br>","\n");return a.replace(c,"")};d.stripAllHTML=function(a,b){void 0===b&&(b=!0);return b?l(a,{allowedTags:[],allowedAttributes:{}}):a};d.scrollToElementWithId=function(a){n($("#"+a))};
d.scrollToElement=n;d.animateScrollToElementWithId=function(a,b){m($("#"+a),b)};d.animateScrollToElement=m;d.isElementInViewport=f;d.ensureElementInViewport=function(a){a&&!f(a[0])&&h.throttled("focus-autoscroll",function(){return m(a)},100)};d.loadCSS=function(a){var b=document.createElement("link");b.href=a;b.rel="stylesheet";b.type="text/css";document.getElementsByTagName("head")[0].appendChild(b)}},function(k,d,a){function n(a,c){a&&Object.keys(a).forEach(function(b){c(a[b],b)})}function m(a,
c,e){function b(a,b){var c=this;this.tag=a;this.attribs=b||{};this.tagPosition=v.length;this.text="";this.updateParentNodeText=function(){D.length&&(D[D.length-1].text+=c.text)}}function d(a){"string"!==typeof a&&(a+="");return a.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;")}function k(a,b){if(!b)return a;a=a.split(/\s+/);return a.filter(function(a){return-1!==b.indexOf(a)}).join(" ")}var v="";c?(c=h(m.defaults,c),c.parser=c.parser?h(g,c.parser):g):(c=m.defaults,
c.parser=g);var y=c.nonTextTags||["script","style","textarea"],r,x;c.allowedAttributes&&(r={},x={},n(c.allowedAttributes,function(a,b){r[b]=[];var c=[];a.forEach(function(a){0<=a.indexOf("*")?c.push(l(a).replace(/\\\*/g,".*")):r[b].push(a)});x[b]=new RegExp("^("+c.join("|")+")$")}));var A={};n(c.allowedClasses,function(a,b){r&&({}.hasOwnProperty.call(r,b)||(r[b]=[]),r[b].push("class"));A[b]=a});var z={},C;n(c.transformTags,function(a,b){var c;"function"===typeof a?c=a:"string"===typeof a&&(c=m.simpleTransform(a));
"*"===b?C=c:z[b]=c});var B=0,D=[],G={},E={},F=!1,H=0;e=new f.Parser({onopentag:function(a,e){if(F)H++;else{var g=new b(a,e);D.push(g);var f=!1,h=g.text?!0:!1,l;({}).hasOwnProperty.call(z,a)&&(l=z[a](a,e),g.attribs=e=l.attribs,void 0!==l.text&&(g.innerText=l.text),a!==l.tagName&&(g.name=a=l.tagName,E[B]=l.tagName));C&&(l=C(a,e),g.attribs=e=l.attribs,a!==l.tagName&&(g.name=a=l.tagName,E[B]=l.tagName));c.allowedTags&&-1===c.allowedTags.indexOf(a)&&(f=!0,-1!==y.indexOf(a)&&(F=!0,H=1),G[B]=!0);B++;f||
(v+="<"+a,(!r||{}.hasOwnProperty.call(r,a)||r["*"])&&n(e,function(b,e){if(!r||{}.hasOwnProperty.call(r,a)&&-1!==r[a].indexOf(e)||r["*"]&&-1!==r["*"].indexOf(e)||{}.hasOwnProperty.call(x,a)&&x[a].test(e)||x["*"]&&x["*"].test(e)){if("href"===e||"src"===e){var f;f=a;var h;h=b.replace(/[\x00-\x20]+/g,"");h=h.replace(/<\!\-\-.*?\-\-\>/g,"");(h=h.match(/^([a-zA-Z]+)\:/))?(h=h[1].toLowerCase(),f={}.hasOwnProperty.call(c.allowedSchemesByTag,f)?-1===c.allowedSchemesByTag[f].indexOf(h):!c.allowedSchemes||-1===
c.allowedSchemes.indexOf(h)):f=!1;if(f){delete g.attribs[e];return}}if("class"===e&&(b=k(b,A[a]),!b.length)){delete g.attribs[e];return}v+=" "+e;b.length&&(v+='="'+d(b)+'"')}else delete g.attribs[e]}),-1!==c.selfClosing.indexOf(a)?v+=" />":(v+=">",!g.innerText||h||c.textFilter||(v+=g.innerText)))}},ontext:function(a){if(!F){var b=D[D.length-1],e;b&&(e=b.tag,a=void 0!==b.innerText?b.innerText:a);"script"===e||"style"===e?v+=a:(b=d(a),v=c.textFilter?v+c.textFilter(b):v+b);D.length&&(D[D.length-1].text+=
a)}},onclosetag:function(a){if(F){H--;if(H)return;F=!1}var b=D.pop();b&&(F=!1,B--,G[B]?(delete G[B],b.updateParentNodeText()):(E[B]&&(a=E[B],delete E[B]),c.exclusiveFilter&&c.exclusiveFilter(b)?v=v.substr(0,b.tagPosition):(b.updateParentNodeText(),-1===c.selfClosing.indexOf(a)&&(v+="</"+a+">"))))}},c.parser);e.write(a);e.end();return v}var f=a(192),h=a(245),l=a(246);k.exports=m;var g={decodeEntities:!0};m.defaults={allowedTags:"h3 h4 h5 h6 blockquote p a ul ol nl li b i strong em strike code hr br div table thead caption tbody tr th td pre".split(" "),
allowedAttributes:{a:["href","name","target"],img:["src"]},selfClosing:"img br hr area base basefont input link meta".split(" "),allowedSchemes:["http","https","ftp","mailto"],allowedSchemesByTag:{}};m.simpleTransform=function(a,c,e){e=void 0===e?!0:e;c=c||{};return function(b,g){var d;if(e)for(d in c)g[d]=c[d];else g=c;return{tagName:a,attribs:g}}}},function(k,d,a){function n(a,d){delete k.exports[a];return k.exports[a]=d}var m=a(193),f=a(202);k.exports={Parser:m,Tokenizer:a(194),ElementType:a(203),
DomHandler:f,get FeedHandler(){return n("FeedHandler",a(206))},get Stream(){return n("Stream",a(207))},get WritableStream(){return n("WritableStream",a(208))},get ProxyHandler(){return n("ProxyHandler",a(231))},get DomUtils(){return n("DomUtils",a(232))},get CollectingHandler(){return n("CollectingHandler",a(244))},DefaultHandler:f,get RssHandler(){return n("RssHandler",this.FeedHandler)},parseDOM:function(a,d){var g=new f(d);(new m(g,d)).end(a);return g.dom},parseFeed:function(a,d){var g=new k.exports.FeedHandler(d);
(new m(g,d)).end(a);return g.dom},createDomStream:function(a,d,g){a=new f(a,d,g);return new m(a,d)},EVENTS:{attribute:2,cdatastart:0,cdataend:0,text:1,processinginstruction:2,comment:1,commentend:0,closetag:1,opentag:2,opentagname:1,error:1,end:0}}},function(k,d,a){function n(a,b){this._options=b||{};this._cbs=a||{};this._attribvalue=this._attribname=this._tagname="";this._attribs=null;this._stack=[];this.startIndex=0;this.endIndex=null;this._lowerCaseTagNames="lowerCaseTags"in this._options?!!this._options.lowerCaseTags:
!this._options.xmlMode;this._lowerCaseAttributeNames="lowerCaseAttributeNames"in this._options?!!this._options.lowerCaseAttributeNames:!this._options.xmlMode;this._options.Tokenizer&&(m=this._options.Tokenizer);this._tokenizer=new m(this._options,this);if(this._cbs.onparserinit)this._cbs.onparserinit(this)}var m=a(194);d={input:!0,option:!0,optgroup:!0,select:!0,button:!0,datalist:!0,textarea:!0};var f={tr:{tr:!0,th:!0,td:!0},th:{th:!0},td:{thead:!0,th:!0,td:!0},body:{head:!0,link:!0,script:!0},li:{li:!0},
p:{p:!0},h1:{p:!0},h2:{p:!0},h3:{p:!0},h4:{p:!0},h5:{p:!0},h6:{p:!0},select:d,input:d,output:d,button:d,datalist:d,textarea:d,option:{option:!0},optgroup:{optgroup:!0}},h={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,path:!0,circle:!0,ellipse:!0,line:!0,rect:!0,use:!0,stop:!0,polyline:!0,polygon:!0},l=/\s|\//;a(200)(n,a(201).EventEmitter);n.prototype._updatePosition=
function(a){this.startIndex=null===this.endIndex?this._tokenizer._sectionStart<=a?0:this._tokenizer._sectionStart-a:this.endIndex+1;this.endIndex=this._tokenizer.getAbsoluteIndex()};n.prototype.ontext=function(a){this._updatePosition(1);this.endIndex--;if(this._cbs.ontext)this._cbs.ontext(a)};n.prototype.onopentagname=function(a){this._lowerCaseTagNames&&(a=a.toLowerCase());this._tagname=a;if(!this._options.xmlMode&&a in f)for(var b;(b=this._stack[this._stack.length-1])in f[a];this.onclosetag(b));
!this._options.xmlMode&&a in h||this._stack.push(a);if(this._cbs.onopentagname)this._cbs.onopentagname(a);this._cbs.onopentag&&(this._attribs={})};n.prototype.onopentagend=function(){this._updatePosition(1);if(this._attribs){if(this._cbs.onopentag)this._cbs.onopentag(this._tagname,this._attribs);this._attribs=null}if(!this._options.xmlMode&&this._cbs.onclosetag&&this._tagname in h)this._cbs.onclosetag(this._tagname);this._tagname=""};n.prototype.onclosetag=function(a){this._updatePosition(1);this._lowerCaseTagNames&&
(a=a.toLowerCase());if(!this._stack.length||a in h&&!this._options.xmlMode)this._options.xmlMode||"br"!==a&&"p"!==a||(this.onopentagname(a),this._closeCurrentTag());else{var b=this._stack.lastIndexOf(a);if(-1!==b)if(this._cbs.onclosetag)for(b=this._stack.length-b;b--;)this._cbs.onclosetag(this._stack.pop());else this._stack.length=b;else"p"!==a||this._options.xmlMode||(this.onopentagname(a),this._closeCurrentTag())}};n.prototype.onselfclosingtag=function(){if(this._options.xmlMode||this._options.recognizeSelfClosing)this._closeCurrentTag();
else this.onopentagend()};n.prototype._closeCurrentTag=function(){var a=this._tagname;this.onopentagend();if(this._stack[this._stack.length-1]===a){if(this._cbs.onclosetag)this._cbs.onclosetag(a);this._stack.pop()}};n.prototype.onattribname=function(a){this._lowerCaseAttributeNames&&(a=a.toLowerCase());this._attribname=a};n.prototype.onattribdata=function(a){this._attribvalue+=a};n.prototype.onattribend=function(){if(this._cbs.onattribute)this._cbs.onattribute(this._attribname,this._attribvalue);
this._attribs&&!Object.prototype.hasOwnProperty.call(this._attribs,this._attribname)&&(this._attribs[this._attribname]=this._attribvalue);this._attribvalue=this._attribname=""};n.prototype._getInstructionName=function(a){var b=a.search(l);a=0>b?a:a.substr(0,b);this._lowerCaseTagNames&&(a=a.toLowerCase());return a};n.prototype.ondeclaration=function(a){if(this._cbs.onprocessinginstruction){var b=this._getInstructionName(a);this._cbs.onprocessinginstruction("!"+b,"!"+a)}};n.prototype.onprocessinginstruction=
function(a){if(this._cbs.onprocessinginstruction){var b=this._getInstructionName(a);this._cbs.onprocessinginstruction("?"+b,"?"+a)}};n.prototype.oncomment=function(a){this._updatePosition(4);if(this._cbs.oncomment)this._cbs.oncomment(a);if(this._cbs.oncommentend)this._cbs.oncommentend()};n.prototype.oncdata=function(a){this._updatePosition(1);if(this._options.xmlMode||this._options.recognizeCDATA){if(this._cbs.oncdatastart)this._cbs.oncdatastart();if(this._cbs.ontext)this._cbs.ontext(a);if(this._cbs.oncdataend)this._cbs.oncdataend()}else this.oncomment("[CDATA["+
a+"]]")};n.prototype.onerror=function(a){if(this._cbs.onerror)this._cbs.onerror(a)};n.prototype.onend=function(){if(this._cbs.onclosetag)for(var a=this._stack.length;0<a;this._cbs.onclosetag(this._stack[--a]));if(this._cbs.onend)this._cbs.onend()};n.prototype.reset=function(){if(this._cbs.onreset)this._cbs.onreset();this._tokenizer.reset();this._attribname=this._tagname="";this._attribs=null;this._stack=[];if(this._cbs.onparserinit)this._cbs.onparserinit(this)};n.prototype.parseComplete=function(a){this.reset();
this.end(a)};n.prototype.write=function(a){this._tokenizer.write(a)};n.prototype.end=function(a){this._tokenizer.end(a)};n.prototype.pause=function(){this._tokenizer.pause()};n.prototype.resume=function(){this._tokenizer.resume()};n.prototype.parseChunk=n.prototype.write;n.prototype.done=n.prototype.end;k.exports=n},function(k,d,a){function n(a){return" "===a||"\n"===a||"\t"===a||"\f"===a||"\r"===a}function m(a,b,c){var e=a.toLowerCase();return a===e?function(a){a===e?this._state=b:(this._state=c,
this._index--)}:function(d){d===e||d===a?this._state=b:(this._state=c,this._index--)}}function f(a,b){var c=a.toLowerCase();return function(e){e===c||e===a?this._state=b:(this._state=t,this._index--)}}function h(a,b){this._state=e;this._buffer="";this._bufferOffset=this._index=this._sectionStart=0;this._baseState=e;this._special=ca;this._cbs=b;this._running=!0;this._ended=!1;this._xmlMode=!(!a||!a.xmlMode);this._decodeEntities=!(!a||!a.decodeEntities)}k.exports=h;var l=a(195),g=a(197),b=a(198),c=
a(199);k=0;var e=k++,p=k++,t=k++,u=k++,v=k++,y=k++,r=k++,x=k++,A=k++,z=k++,C=k++,B=k++,D=k++,G=k++,E=k++,F=k++,H=k++,J=k++,K=k++,I=k++,L=k++,N=k++,O=k++,M=k++,Q=k++,P=k++,S=k++,R=k++,U=k++,T=k++,V=k++,W=k++,X=k++,Y=k++,ba=k++,ea=k++,ka=k++,la=k++,Z=k++,aa=k++,fa=k++,ga=k++,ma=k++,na=k++,oa=k++,pa=k++,qa=k++,ra=k++,sa=k++,ta=k++,da=k++,ua=k++,ha=k++,ia=k++,ja=k++;k=0;var ca=k++,va=k++,wa=k++;h.prototype._stateText=function(a){if("<"===a){if(this._index>this._sectionStart)this._cbs.ontext(this._getSection());
this._state=p;this._sectionStart=this._index}else if(this._decodeEntities&&this._special===ca&&"&"===a){if(this._index>this._sectionStart)this._cbs.ontext(this._getSection());this._baseState=e;this._state=da;this._sectionStart=this._index}};h.prototype._stateBeforeTagName=function(a){"/"===a?this._state=v:"<"===a?(this._cbs.ontext(this._getSection()),this._sectionStart=this._index):">"===a||this._special!==ca||n(a)?this._state=e:"!"===a?(this._state=E,this._sectionStart=this._index+1):"?"===a?(this._state=
H,this._sectionStart=this._index+1):(this._state=this._xmlMode||"s"!==a&&"S"!==a?t:V,this._sectionStart=this._index)};h.prototype._stateInTagName=function(a){if("/"===a||">"===a||n(a))this._emitToken("onopentagname"),this._state=x,this._index--};h.prototype._stateBeforeCloseingTagName=function(a){n(a)||(">"===a?this._state=e:this._special!==ca?"s"===a||"S"===a?this._state=W:(this._state=e,this._index--):(this._state=y,this._sectionStart=this._index))};h.prototype._stateInCloseingTagName=function(a){if(">"===
a||n(a))this._emitToken("onclosetag"),this._state=r,this._index--};h.prototype._stateAfterCloseingTagName=function(a){">"===a&&(this._state=e,this._sectionStart=this._index+1)};h.prototype._stateBeforeAttributeName=function(a){">"===a?(this._cbs.onopentagend(),this._state=e,this._sectionStart=this._index+1):"/"===a?this._state=u:n(a)||(this._state=A,this._sectionStart=this._index)};h.prototype._stateInSelfClosingTag=function(a){">"===a?(this._cbs.onselfclosingtag(),this._state=e,this._sectionStart=
this._index+1):n(a)||(this._state=x,this._index--)};h.prototype._stateInAttributeName=function(a){if("="===a||"/"===a||">"===a||n(a))this._cbs.onattribname(this._getSection()),this._sectionStart=-1,this._state=z,this._index--};h.prototype._stateAfterAttributeName=function(a){"="===a?this._state=C:"/"===a||">"===a?(this._cbs.onattribend(),this._state=x,this._index--):n(a)||(this._cbs.onattribend(),this._state=A,this._sectionStart=this._index)};h.prototype._stateBeforeAttributeValue=function(a){'"'===
a?(this._state=B,this._sectionStart=this._index+1):"'"===a?(this._state=D,this._sectionStart=this._index+1):n(a)||(this._state=G,this._sectionStart=this._index,this._index--)};h.prototype._stateInAttributeValueDoubleQuotes=function(a){'"'===a?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=x):this._decodeEntities&&"&"===a&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=da,this._sectionStart=this._index)};h.prototype._stateInAttributeValueSingleQuotes=
function(a){"'"===a?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=x):this._decodeEntities&&"&"===a&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=da,this._sectionStart=this._index)};h.prototype._stateInAttributeValueNoQuotes=function(a){n(a)||">"===a?(this._emitToken("onattribdata"),this._cbs.onattribend(),this._state=x,this._index--):this._decodeEntities&&"&"===a&&(this._emitToken("onattribdata"),this._baseState=this._state,this._state=da,this._sectionStart=
this._index)};h.prototype._stateBeforeDeclaration=function(a){this._state="["===a?N:"-"===a?J:F};h.prototype._stateInDeclaration=function(a){">"===a&&(this._cbs.ondeclaration(this._getSection()),this._state=e,this._sectionStart=this._index+1)};h.prototype._stateInProcessingInstruction=function(a){">"===a&&(this._cbs.onprocessinginstruction(this._getSection()),this._state=e,this._sectionStart=this._index+1)};h.prototype._stateBeforeComment=function(a){"-"===a?(this._state=K,this._sectionStart=this._index+
1):this._state=F};h.prototype._stateInComment=function(a){"-"===a&&(this._state=I)};h.prototype._stateAfterComment1=function(a){this._state="-"===a?L:K};h.prototype._stateAfterComment2=function(a){">"===a?(this._cbs.oncomment(this._buffer.substring(this._sectionStart,this._index-2)),this._state=e,this._sectionStart=this._index+1):"-"!==a&&(this._state=K)};h.prototype._stateBeforeCdata1=m("C",O,F);h.prototype._stateBeforeCdata2=m("D",M,F);h.prototype._stateBeforeCdata3=m("A",Q,F);h.prototype._stateBeforeCdata4=
m("T",P,F);h.prototype._stateBeforeCdata5=m("A",S,F);h.prototype._stateBeforeCdata6=function(a){"["===a?(this._state=R,this._sectionStart=this._index+1):(this._state=F,this._index--)};h.prototype._stateInCdata=function(a){"]"===a&&(this._state=U)};h.prototype._stateAfterCdata1=function(a,b){return function(c){c===a&&(this._state=b)}}("]",T);h.prototype._stateAfterCdata2=function(a){">"===a?(this._cbs.oncdata(this._buffer.substring(this._sectionStart,this._index-2)),this._state=e,this._sectionStart=
this._index+1):"]"!==a&&(this._state=R)};h.prototype._stateBeforeSpecial=function(a){"c"===a||"C"===a?this._state=X:"t"===a||"T"===a?this._state=ma:(this._state=t,this._index--)};h.prototype._stateBeforeSpecialEnd=function(a){this._state=this._special!==va||"c"!==a&&"C"!==a?this._special!==wa||"t"!==a&&"T"!==a?e:qa:la};h.prototype._stateBeforeScript1=f("R",Y);h.prototype._stateBeforeScript2=f("I",ba);h.prototype._stateBeforeScript3=f("P",ea);h.prototype._stateBeforeScript4=f("T",ka);h.prototype._stateBeforeScript5=
function(a){if("/"===a||">"===a||n(a))this._special=va;this._state=t;this._index--};h.prototype._stateAfterScript1=m("R",Z,e);h.prototype._stateAfterScript2=m("I",aa,e);h.prototype._stateAfterScript3=m("P",fa,e);h.prototype._stateAfterScript4=m("T",ga,e);h.prototype._stateAfterScript5=function(a){">"===a||n(a)?(this._special=ca,this._state=y,this._sectionStart=this._index-6,this._index--):this._state=e};h.prototype._stateBeforeStyle1=f("Y",na);h.prototype._stateBeforeStyle2=f("L",oa);h.prototype._stateBeforeStyle3=
f("E",pa);h.prototype._stateBeforeStyle4=function(a){if("/"===a||">"===a||n(a))this._special=wa;this._state=t;this._index--};h.prototype._stateAfterStyle1=m("Y",ra,e);h.prototype._stateAfterStyle2=m("L",sa,e);h.prototype._stateAfterStyle3=m("E",ta,e);h.prototype._stateAfterStyle4=function(a){">"===a||n(a)?(this._special=ca,this._state=y,this._sectionStart=this._index-5,this._index--):this._state=e};h.prototype._stateBeforeEntity=m("#",ua,ha);h.prototype._stateBeforeNumericEntity=m("X",ja,ia);h.prototype._parseNamedEntityStrict=
function(){if(this._sectionStart+1<this._index){var a=this._buffer.substring(this._sectionStart+1,this._index),b=this._xmlMode?c:g;b.hasOwnProperty(a)&&(this._emitPartial(b[a]),this._sectionStart=this._index+1)}};h.prototype._parseLegacyEntity=function(){var a=this._sectionStart+1,c=this._index-a;for(6<c&&(c=6);2<=c;){var e=this._buffer.substr(a,c);if(b.hasOwnProperty(e)){this._emitPartial(b[e]);this._sectionStart+=c+1;break}else c--}};h.prototype._stateInNamedEntity=function(a){";"===a?(this._parseNamedEntityStrict(),
this._sectionStart+1<this._index&&!this._xmlMode&&this._parseLegacyEntity(),this._state=this._baseState):("a">a||"z"<a)&&("A">a||"Z"<a)&&("0">a||"9"<a)&&(this._xmlMode||this._sectionStart+1!==this._index&&(this._baseState!==e?"="!==a&&this._parseNamedEntityStrict():this._parseLegacyEntity()),this._state=this._baseState,this._index--)};h.prototype._decodeNumericEntity=function(a,b){a=this._sectionStart+a;a!==this._index?(a=this._buffer.substring(a,this._index),b=parseInt(a,b),this._emitPartial(l(b)),
this._sectionStart=this._index):this._sectionStart--;this._state=this._baseState};h.prototype._stateInNumericEntity=function(a){if(";"===a)this._decodeNumericEntity(2,10),this._sectionStart++;else if("0">a||"9"<a)this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(2,10),this._index--};h.prototype._stateInHexEntity=function(a){";"===a?(this._decodeNumericEntity(3,16),this._sectionStart++):("a">a||"f"<a)&&("A">a||"F"<a)&&("0">a||"9"<a)&&(this._xmlMode?this._state=this._baseState:this._decodeNumericEntity(3,
16),this._index--)};h.prototype._cleanup=function(){if(0>this._sectionStart)this._buffer="",this._bufferOffset+=this._index,this._index=0;else if(this._running){if(this._state===e){if(this._sectionStart!==this._index)this._cbs.ontext(this._buffer.substr(this._sectionStart));this._buffer="";this._bufferOffset+=this._index;this._index=0}else this._sectionStart===this._index?(this._buffer="",this._bufferOffset+=this._index,this._index=0):(this._buffer=this._buffer.substr(this._sectionStart),this._index-=
this._sectionStart,this._bufferOffset+=this._sectionStart);this._sectionStart=0}};h.prototype.write=function(a){if(this._ended)this._cbs.onerror(Error(".write() after done!"));this._buffer+=a;this._parse()};h.prototype._parse=function(){for(;this._index<this._buffer.length&&this._running;){var a=this._buffer.charAt(this._index);if(this._state===e)this._stateText(a);else if(this._state===p)this._stateBeforeTagName(a);else if(this._state===t)this._stateInTagName(a);else if(this._state===v)this._stateBeforeCloseingTagName(a);
else if(this._state===y)this._stateInCloseingTagName(a);else if(this._state===r)this._stateAfterCloseingTagName(a);else if(this._state===u)this._stateInSelfClosingTag(a);else if(this._state===x)this._stateBeforeAttributeName(a);else if(this._state===A)this._stateInAttributeName(a);else if(this._state===z)this._stateAfterAttributeName(a);else if(this._state===C)this._stateBeforeAttributeValue(a);else if(this._state===B)this._stateInAttributeValueDoubleQuotes(a);else if(this._state===D)this._stateInAttributeValueSingleQuotes(a);
else if(this._state===G)this._stateInAttributeValueNoQuotes(a);else if(this._state===E)this._stateBeforeDeclaration(a);else if(this._state===F)this._stateInDeclaration(a);else if(this._state===H)this._stateInProcessingInstruction(a);else if(this._state===J)this._stateBeforeComment(a);else if(this._state===K)this._stateInComment(a);else if(this._state===I)this._stateAfterComment1(a);else if(this._state===L)this._stateAfterComment2(a);else if(this._state===N)this._stateBeforeCdata1(a);else if(this._state===
O)this._stateBeforeCdata2(a);else if(this._state===M)this._stateBeforeCdata3(a);else if(this._state===Q)this._stateBeforeCdata4(a);else if(this._state===P)this._stateBeforeCdata5(a);else if(this._state===S)this._stateBeforeCdata6(a);else if(this._state===R)this._stateInCdata(a);else if(this._state===U)this._stateAfterCdata1(a);else if(this._state===T)this._stateAfterCdata2(a);else if(this._state===V)this._stateBeforeSpecial(a);else if(this._state===W)this._stateBeforeSpecialEnd(a);else if(this._state===
X)this._stateBeforeScript1(a);else if(this._state===Y)this._stateBeforeScript2(a);else if(this._state===ba)this._stateBeforeScript3(a);else if(this._state===ea)this._stateBeforeScript4(a);else if(this._state===ka)this._stateBeforeScript5(a);else if(this._state===la)this._stateAfterScript1(a);else if(this._state===Z)this._stateAfterScript2(a);else if(this._state===aa)this._stateAfterScript3(a);else if(this._state===fa)this._stateAfterScript4(a);else if(this._state===ga)this._stateAfterScript5(a);else if(this._state===
ma)this._stateBeforeStyle1(a);else if(this._state===na)this._stateBeforeStyle2(a);else if(this._state===oa)this._stateBeforeStyle3(a);else if(this._state===pa)this._stateBeforeStyle4(a);else if(this._state===qa)this._stateAfterStyle1(a);else if(this._state===ra)this._stateAfterStyle2(a);else if(this._state===sa)this._stateAfterStyle3(a);else if(this._state===ta)this._stateAfterStyle4(a);else if(this._state===da)this._stateBeforeEntity(a);else if(this._state===ua)this._stateBeforeNumericEntity(a);
else if(this._state===ha)this._stateInNamedEntity(a);else if(this._state===ia)this._stateInNumericEntity(a);else if(this._state===ja)this._stateInHexEntity(a);else this._cbs.onerror(Error("unknown _state"),this._state);this._index++}this._cleanup()};h.prototype.pause=function(){this._running=!1};h.prototype.resume=function(){this._running=!0;this._index<this._buffer.length&&this._parse();this._ended&&this._finish()};h.prototype.end=function(a){if(this._ended)this._cbs.onerror(Error(".end() after done!"));
a&&this.write(a);this._ended=!0;this._running&&this._finish()};h.prototype._finish=function(){this._sectionStart<this._index&&this._handleTrailingData();this._cbs.onend()};h.prototype._handleTrailingData=function(){var a=this._buffer.substr(this._sectionStart);if(this._state===R||this._state===U||this._state===T)this._cbs.oncdata(a);else if(this._state===K||this._state===I||this._state===L)this._cbs.oncomment(a);else if(this._state===ha&&!this._xmlMode)this._parseLegacyEntity(),this._sectionStart<
this._index&&(this._state=this._baseState,this._handleTrailingData());else if(this._state===ia&&!this._xmlMode)this._decodeNumericEntity(2,10),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData());else if(this._state===ja&&!this._xmlMode)this._decodeNumericEntity(3,16),this._sectionStart<this._index&&(this._state=this._baseState,this._handleTrailingData());else if(this._state!==t&&this._state!==x&&this._state!==C&&this._state!==z&&this._state!==A&&this._state!==
D&&this._state!==B&&this._state!==G&&this._state!==y)this._cbs.ontext(a)};h.prototype.reset=function(){h.call(this,{xmlMode:this._xmlMode,decodeEntities:this._decodeEntities},this._cbs)};h.prototype.getAbsoluteIndex=function(){return this._bufferOffset+this._index};h.prototype._getSection=function(){return this._buffer.substring(this._sectionStart,this._index)};h.prototype._emitToken=function(a){this._cbs[a](this._getSection());this._sectionStart=-1};h.prototype._emitPartial=function(a){if(this._baseState!==
e)this._cbs.onattribdata(a);else this._cbs.ontext(a)}},function(k,d,a){var n=a(196);k.exports=function(a){if(55296<=a&&57343>=a||1114111<a)return"\ufffd";a in n&&(a=n[a]);var d="";65535<a&&(a-=65536,d+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023);return d+=String.fromCharCode(a)}},function(k,d){k.exports={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,
153:8482,154:353,155:8250,156:339,158:382,159:376}},function(k,d){k.exports={Aacute:"\u00c1",aacute:"\u00e1",Abreve:"\u0102",abreve:"\u0103",ac:"\u223e",acd:"\u223f",acE:"\u223e\u0333",Acirc:"\u00c2",acirc:"\u00e2",acute:"\u00b4",Acy:"\u0410",acy:"\u0430",AElig:"\u00c6",aelig:"\u00e6",af:"\u2061",Afr:"\ud835\udd04",afr:"\ud835\udd1e",Agrave:"\u00c0",agrave:"\u00e0",alefsym:"\u2135",aleph:"\u2135",Alpha:"\u0391",alpha:"\u03b1",Amacr:"\u0100",amacr:"\u0101",amalg:"\u2a3f",amp:"&",AMP:"&",andand:"\u2a55",
And:"\u2a53",and:"\u2227",andd:"\u2a5c",andslope:"\u2a58",andv:"\u2a5a",ang:"\u2220",ange:"\u29a4",angle:"\u2220",angmsdaa:"\u29a8",angmsdab:"\u29a9",angmsdac:"\u29aa",angmsdad:"\u29ab",angmsdae:"\u29ac",angmsdaf:"\u29ad",angmsdag:"\u29ae",angmsdah:"\u29af",angmsd:"\u2221",angrt:"\u221f",angrtvb:"\u22be",angrtvbd:"\u299d",angsph:"\u2222",angst:"\u00c5",angzarr:"\u237c",Aogon:"\u0104",aogon:"\u0105",Aopf:"\ud835\udd38",aopf:"\ud835\udd52",apacir:"\u2a6f",ap:"\u2248",apE:"\u2a70",ape:"\u224a",apid:"\u224b",
apos:"'",ApplyFunction:"\u2061",approx:"\u2248",approxeq:"\u224a",Aring:"\u00c5",aring:"\u00e5",Ascr:"\ud835\udc9c",ascr:"\ud835\udcb6",Assign:"\u2254",ast:"*",asymp:"\u2248",asympeq:"\u224d",Atilde:"\u00c3",atilde:"\u00e3",Auml:"\u00c4",auml:"\u00e4",awconint:"\u2233",awint:"\u2a11",backcong:"\u224c",backepsilon:"\u03f6",backprime:"\u2035",backsim:"\u223d",backsimeq:"\u22cd",Backslash:"\u2216",Barv:"\u2ae7",barvee:"\u22bd",barwed:"\u2305",Barwed:"\u2306",barwedge:"\u2305",bbrk:"\u23b5",bbrktbrk:"\u23b6",
bcong:"\u224c",Bcy:"\u0411",bcy:"\u0431",bdquo:"\u201e",becaus:"\u2235",because:"\u2235",Because:"\u2235",bemptyv:"\u29b0",bepsi:"\u03f6",bernou:"\u212c",Bernoullis:"\u212c",Beta:"\u0392",beta:"\u03b2",beth:"\u2136",between:"\u226c",Bfr:"\ud835\udd05",bfr:"\ud835\udd1f",bigcap:"\u22c2",bigcirc:"\u25ef",bigcup:"\u22c3",bigodot:"\u2a00",bigoplus:"\u2a01",bigotimes:"\u2a02",bigsqcup:"\u2a06",bigstar:"\u2605",bigtriangledown:"\u25bd",bigtriangleup:"\u25b3",biguplus:"\u2a04",bigvee:"\u22c1",bigwedge:"\u22c0",
bkarow:"\u290d",blacklozenge:"\u29eb",blacksquare:"\u25aa",blacktriangle:"\u25b4",blacktriangledown:"\u25be",blacktriangleleft:"\u25c2",blacktriangleright:"\u25b8",blank:"\u2423",blk12:"\u2592",blk14:"\u2591",blk34:"\u2593",block:"\u2588",bne:"=\u20e5",bnequiv:"\u2261\u20e5",bNot:"\u2aed",bnot:"\u2310",Bopf:"\ud835\udd39",bopf:"\ud835\udd53",bot:"\u22a5",bottom:"\u22a5",bowtie:"\u22c8",boxbox:"\u29c9",boxdl:"\u2510",boxdL:"\u2555",boxDl:"\u2556",boxDL:"\u2557",boxdr:"\u250c",boxdR:"\u2552",boxDr:"\u2553",
boxDR:"\u2554",boxh:"\u2500",boxH:"\u2550",boxhd:"\u252c",boxHd:"\u2564",boxhD:"\u2565",boxHD:"\u2566",boxhu:"\u2534",boxHu:"\u2567",boxhU:"\u2568",boxHU:"\u2569",boxminus:"\u229f",boxplus:"\u229e",boxtimes:"\u22a0",boxul:"\u2518",boxuL:"\u255b",boxUl:"\u255c",boxUL:"\u255d",boxur:"\u2514",boxuR:"\u2558",boxUr:"\u2559",boxUR:"\u255a",boxv:"\u2502",boxV:"\u2551",boxvh:"\u253c",boxvH:"\u256a",boxVh:"\u256b",boxVH:"\u256c",boxvl:"\u2524",boxvL:"\u2561",boxVl:"\u2562",boxVL:"\u2563",boxvr:"\u251c",boxvR:"\u255e",
boxVr:"\u255f",boxVR:"\u2560",bprime:"\u2035",breve:"\u02d8",Breve:"\u02d8",brvbar:"\u00a6",bscr:"\ud835\udcb7",Bscr:"\u212c",bsemi:"\u204f",bsim:"\u223d",bsime:"\u22cd",bsolb:"\u29c5",bsol:"\\",bsolhsub:"\u27c8",bull:"\u2022",bullet:"\u2022",bump:"\u224e",bumpE:"\u2aae",bumpe:"\u224f",Bumpeq:"\u224e",bumpeq:"\u224f",Cacute:"\u0106",cacute:"\u0107",capand:"\u2a44",capbrcup:"\u2a49",capcap:"\u2a4b",cap:"\u2229",Cap:"\u22d2",capcup:"\u2a47",capdot:"\u2a40",CapitalDifferentialD:"\u2145",caps:"\u2229\ufe00",
caret:"\u2041",caron:"\u02c7",Cayleys:"\u212d",ccaps:"\u2a4d",Ccaron:"\u010c",ccaron:"\u010d",Ccedil:"\u00c7",ccedil:"\u00e7",Ccirc:"\u0108",ccirc:"\u0109",Cconint:"\u2230",ccups:"\u2a4c",ccupssm:"\u2a50",Cdot:"\u010a",cdot:"\u010b",cedil:"\u00b8",Cedilla:"\u00b8",cemptyv:"\u29b2",cent:"\u00a2",centerdot:"\u00b7",CenterDot:"\u00b7",cfr:"\ud835\udd20",Cfr:"\u212d",CHcy:"\u0427",chcy:"\u0447",check:"\u2713",checkmark:"\u2713",Chi:"\u03a7",chi:"\u03c7",circ:"\u02c6",circeq:"\u2257",circlearrowleft:"\u21ba",
circlearrowright:"\u21bb",circledast:"\u229b",circledcirc:"\u229a",circleddash:"\u229d",CircleDot:"\u2299",circledR:"\u00ae",circledS:"\u24c8",CircleMinus:"\u2296",CirclePlus:"\u2295",CircleTimes:"\u2297",cir:"\u25cb",cirE:"\u29c3",cire:"\u2257",cirfnint:"\u2a10",cirmid:"\u2aef",cirscir:"\u29c2",ClockwiseContourIntegral:"\u2232",CloseCurlyDoubleQuote:"\u201d",CloseCurlyQuote:"\u2019",clubs:"\u2663",clubsuit:"\u2663",colon:":",Colon:"\u2237",Colone:"\u2a74",colone:"\u2254",coloneq:"\u2254",comma:",",
commat:"@",comp:"\u2201",compfn:"\u2218",complement:"\u2201",complexes:"\u2102",cong:"\u2245",congdot:"\u2a6d",Congruent:"\u2261",conint:"\u222e",Conint:"\u222f",ContourIntegral:"\u222e",copf:"\ud835\udd54",Copf:"\u2102",coprod:"\u2210",Coproduct:"\u2210",copy:"\u00a9",COPY:"\u00a9",copysr:"\u2117",CounterClockwiseContourIntegral:"\u2233",crarr:"\u21b5",cross:"\u2717",Cross:"\u2a2f",Cscr:"\ud835\udc9e",cscr:"\ud835\udcb8",csub:"\u2acf",csube:"\u2ad1",csup:"\u2ad0",csupe:"\u2ad2",ctdot:"\u22ef",cudarrl:"\u2938",
cudarrr:"\u2935",cuepr:"\u22de",cuesc:"\u22df",cularr:"\u21b6",cularrp:"\u293d",cupbrcap:"\u2a48",cupcap:"\u2a46",CupCap:"\u224d",cup:"\u222a",Cup:"\u22d3",cupcup:"\u2a4a",cupdot:"\u228d",cupor:"\u2a45",cups:"\u222a\ufe00",curarr:"\u21b7",curarrm:"\u293c",curlyeqprec:"\u22de",curlyeqsucc:"\u22df",curlyvee:"\u22ce",curlywedge:"\u22cf",curren:"\u00a4",curvearrowleft:"\u21b6",curvearrowright:"\u21b7",cuvee:"\u22ce",cuwed:"\u22cf",cwconint:"\u2232",cwint:"\u2231",cylcty:"\u232d",dagger:"\u2020",Dagger:"\u2021",
daleth:"\u2138",darr:"\u2193",Darr:"\u21a1",dArr:"\u21d3",dash:"\u2010",Dashv:"\u2ae4",dashv:"\u22a3",dbkarow:"\u290f",dblac:"\u02dd",Dcaron:"\u010e",dcaron:"\u010f",Dcy:"\u0414",dcy:"\u0434",ddagger:"\u2021",ddarr:"\u21ca",DD:"\u2145",dd:"\u2146",DDotrahd:"\u2911",ddotseq:"\u2a77",deg:"\u00b0",Del:"\u2207",Delta:"\u0394",delta:"\u03b4",demptyv:"\u29b1",dfisht:"\u297f",Dfr:"\ud835\udd07",dfr:"\ud835\udd21",dHar:"\u2965",dharl:"\u21c3",dharr:"\u21c2",DiacriticalAcute:"\u00b4",DiacriticalDot:"\u02d9",
DiacriticalDoubleAcute:"\u02dd",DiacriticalGrave:"`",DiacriticalTilde:"\u02dc",diam:"\u22c4",diamond:"\u22c4",Diamond:"\u22c4",diamondsuit:"\u2666",diams:"\u2666",die:"\u00a8",DifferentialD:"\u2146",digamma:"\u03dd",disin:"\u22f2",div:"\u00f7",divide:"\u00f7",divideontimes:"\u22c7",divonx:"\u22c7",DJcy:"\u0402",djcy:"\u0452",dlcorn:"\u231e",dlcrop:"\u230d",dollar:"$",Dopf:"\ud835\udd3b",dopf:"\ud835\udd55",Dot:"\u00a8",dot:"\u02d9",DotDot:"\u20dc",doteq:"\u2250",doteqdot:"\u2251",DotEqual:"\u2250",
dotminus:"\u2238",dotplus:"\u2214",dotsquare:"\u22a1",doublebarwedge:"\u2306",DoubleContourIntegral:"\u222f",DoubleDot:"\u00a8",DoubleDownArrow:"\u21d3",DoubleLeftArrow:"\u21d0",DoubleLeftRightArrow:"\u21d4",DoubleLeftTee:"\u2ae4",DoubleLongLeftArrow:"\u27f8",DoubleLongLeftRightArrow:"\u27fa",DoubleLongRightArrow:"\u27f9",DoubleRightArrow:"\u21d2",DoubleRightTee:"\u22a8",DoubleUpArrow:"\u21d1",DoubleUpDownArrow:"\u21d5",DoubleVerticalBar:"\u2225",DownArrowBar:"\u2913",downarrow:"\u2193",DownArrow:"\u2193",
Downarrow:"\u21d3",DownArrowUpArrow:"\u21f5",DownBreve:"\u0311",downdownarrows:"\u21ca",downharpoonleft:"\u21c3",downharpoonright:"\u21c2",DownLeftRightVector:"\u2950",DownLeftTeeVector:"\u295e",DownLeftVectorBar:"\u2956",DownLeftVector:"\u21bd",DownRightTeeVector:"\u295f",DownRightVectorBar:"\u2957",DownRightVector:"\u21c1",DownTeeArrow:"\u21a7",DownTee:"\u22a4",drbkarow:"\u2910",drcorn:"\u231f",drcrop:"\u230c",Dscr:"\ud835\udc9f",dscr:"\ud835\udcb9",DScy:"\u0405",dscy:"\u0455",dsol:"\u29f6",Dstrok:"\u0110",
dstrok:"\u0111",dtdot:"\u22f1",dtri:"\u25bf",dtrif:"\u25be",duarr:"\u21f5",duhar:"\u296f",dwangle:"\u29a6",DZcy:"\u040f",dzcy:"\u045f",dzigrarr:"\u27ff",Eacute:"\u00c9",eacute:"\u00e9",easter:"\u2a6e",Ecaron:"\u011a",ecaron:"\u011b",Ecirc:"\u00ca",ecirc:"\u00ea",ecir:"\u2256",ecolon:"\u2255",Ecy:"\u042d",ecy:"\u044d",eDDot:"\u2a77",Edot:"\u0116",edot:"\u0117",eDot:"\u2251",ee:"\u2147",efDot:"\u2252",Efr:"\ud835\udd08",efr:"\ud835\udd22",eg:"\u2a9a",Egrave:"\u00c8",egrave:"\u00e8",egs:"\u2a96",egsdot:"\u2a98",
el:"\u2a99",Element:"\u2208",elinters:"\u23e7",ell:"\u2113",els:"\u2a95",elsdot:"\u2a97",Emacr:"\u0112",emacr:"\u0113",empty:"\u2205",emptyset:"\u2205",EmptySmallSquare:"\u25fb",emptyv:"\u2205",EmptyVerySmallSquare:"\u25ab",emsp13:"\u2004",emsp14:"\u2005",emsp:"\u2003",ENG:"\u014a",eng:"\u014b",ensp:"\u2002",Eogon:"\u0118",eogon:"\u0119",Eopf:"\ud835\udd3c",eopf:"\ud835\udd56",epar:"\u22d5",eparsl:"\u29e3",eplus:"\u2a71",epsi:"\u03b5",Epsilon:"\u0395",epsilon:"\u03b5",epsiv:"\u03f5",eqcirc:"\u2256",
eqcolon:"\u2255",eqsim:"\u2242",eqslantgtr:"\u2a96",eqslantless:"\u2a95",Equal:"\u2a75",equals:"=",EqualTilde:"\u2242",equest:"\u225f",Equilibrium:"\u21cc",equiv:"\u2261",equivDD:"\u2a78",eqvparsl:"\u29e5",erarr:"\u2971",erDot:"\u2253",escr:"\u212f",Escr:"\u2130",esdot:"\u2250",Esim:"\u2a73",esim:"\u2242",Eta:"\u0397",eta:"\u03b7",ETH:"\u00d0",eth:"\u00f0",Euml:"\u00cb",euml:"\u00eb",euro:"\u20ac",excl:"!",exist:"\u2203",Exists:"\u2203",expectation:"\u2130",exponentiale:"\u2147",ExponentialE:"\u2147",
fallingdotseq:"\u2252",Fcy:"\u0424",fcy:"\u0444",female:"\u2640",ffilig:"\ufb03",fflig:"\ufb00",ffllig:"\ufb04",Ffr:"\ud835\udd09",ffr:"\ud835\udd23",filig:"\ufb01",FilledSmallSquare:"\u25fc",FilledVerySmallSquare:"\u25aa",fjlig:"fj",flat:"\u266d",fllig:"\ufb02",fltns:"\u25b1",fnof:"\u0192",Fopf:"\ud835\udd3d",fopf:"\ud835\udd57",forall:"\u2200",ForAll:"\u2200",fork:"\u22d4",forkv:"\u2ad9",Fouriertrf:"\u2131",fpartint:"\u2a0d",frac12:"\u00bd",frac13:"\u2153",frac14:"\u00bc",frac15:"\u2155",frac16:"\u2159",
frac18:"\u215b",frac23:"\u2154",frac25:"\u2156",frac34:"\u00be",frac35:"\u2157",frac38:"\u215c",frac45:"\u2158",frac56:"\u215a",frac58:"\u215d",frac78:"\u215e",frasl:"\u2044",frown:"\u2322",fscr:"\ud835\udcbb",Fscr:"\u2131",gacute:"\u01f5",Gamma:"\u0393",gamma:"\u03b3",Gammad:"\u03dc",gammad:"\u03dd",gap:"\u2a86",Gbreve:"\u011e",gbreve:"\u011f",Gcedil:"\u0122",Gcirc:"\u011c",gcirc:"\u011d",Gcy:"\u0413",gcy:"\u0433",Gdot:"\u0120",gdot:"\u0121",ge:"\u2265",gE:"\u2267",gEl:"\u2a8c",gel:"\u22db",geq:"\u2265",
geqq:"\u2267",geqslant:"\u2a7e",gescc:"\u2aa9",ges:"\u2a7e",gesdot:"\u2a80",gesdoto:"\u2a82",gesdotol:"\u2a84",gesl:"\u22db\ufe00",gesles:"\u2a94",Gfr:"\ud835\udd0a",gfr:"\ud835\udd24",gg:"\u226b",Gg:"\u22d9",ggg:"\u22d9",gimel:"\u2137",GJcy:"\u0403",gjcy:"\u0453",gla:"\u2aa5",gl:"\u2277",glE:"\u2a92",glj:"\u2aa4",gnap:"\u2a8a",gnapprox:"\u2a8a",gne:"\u2a88",gnE:"\u2269",gneq:"\u2a88",gneqq:"\u2269",gnsim:"\u22e7",Gopf:"\ud835\udd3e",gopf:"\ud835\udd58",grave:"`",GreaterEqual:"\u2265",GreaterEqualLess:"\u22db",
GreaterFullEqual:"\u2267",GreaterGreater:"\u2aa2",GreaterLess:"\u2277",GreaterSlantEqual:"\u2a7e",GreaterTilde:"\u2273",Gscr:"\ud835\udca2",gscr:"\u210a",gsim:"\u2273",gsime:"\u2a8e",gsiml:"\u2a90",gtcc:"\u2aa7",gtcir:"\u2a7a",gt:">",GT:">",Gt:"\u226b",gtdot:"\u22d7",gtlPar:"\u2995",gtquest:"\u2a7c",gtrapprox:"\u2a86",gtrarr:"\u2978",gtrdot:"\u22d7",gtreqless:"\u22db",gtreqqless:"\u2a8c",gtrless:"\u2277",gtrsim:"\u2273",gvertneqq:"\u2269\ufe00",gvnE:"\u2269\ufe00",Hacek:"\u02c7",hairsp:"\u200a",half:"\u00bd",
hamilt:"\u210b",HARDcy:"\u042a",hardcy:"\u044a",harrcir:"\u2948",harr:"\u2194",hArr:"\u21d4",harrw:"\u21ad",Hat:"^",hbar:"\u210f",Hcirc:"\u0124",hcirc:"\u0125",hearts:"\u2665",heartsuit:"\u2665",hellip:"\u2026",hercon:"\u22b9",hfr:"\ud835\udd25",Hfr:"\u210c",HilbertSpace:"\u210b",hksearow:"\u2925",hkswarow:"\u2926",hoarr:"\u21ff",homtht:"\u223b",hookleftarrow:"\u21a9",hookrightarrow:"\u21aa",hopf:"\ud835\udd59",Hopf:"\u210d",horbar:"\u2015",HorizontalLine:"\u2500",hscr:"\ud835\udcbd",Hscr:"\u210b",
hslash:"\u210f",Hstrok:"\u0126",hstrok:"\u0127",HumpDownHump:"\u224e",HumpEqual:"\u224f",hybull:"\u2043",hyphen:"\u2010",Iacute:"\u00cd",iacute:"\u00ed",ic:"\u2063",Icirc:"\u00ce",icirc:"\u00ee",Icy:"\u0418",icy:"\u0438",Idot:"\u0130",IEcy:"\u0415",iecy:"\u0435",iexcl:"\u00a1",iff:"\u21d4",ifr:"\ud835\udd26",Ifr:"\u2111",Igrave:"\u00cc",igrave:"\u00ec",ii:"\u2148",iiiint:"\u2a0c",iiint:"\u222d",iinfin:"\u29dc",iiota:"\u2129",IJlig:"\u0132",ijlig:"\u0133",Imacr:"\u012a",imacr:"\u012b",image:"\u2111",
ImaginaryI:"\u2148",imagline:"\u2110",imagpart:"\u2111",imath:"\u0131",Im:"\u2111",imof:"\u22b7",imped:"\u01b5",Implies:"\u21d2",incare:"\u2105","in":"\u2208",infin:"\u221e",infintie:"\u29dd",inodot:"\u0131",intcal:"\u22ba","int":"\u222b",Int:"\u222c",integers:"\u2124",Integral:"\u222b",intercal:"\u22ba",Intersection:"\u22c2",intlarhk:"\u2a17",intprod:"\u2a3c",InvisibleComma:"\u2063",InvisibleTimes:"\u2062",IOcy:"\u0401",iocy:"\u0451",Iogon:"\u012e",iogon:"\u012f",Iopf:"\ud835\udd40",iopf:"\ud835\udd5a",
Iota:"\u0399",iota:"\u03b9",iprod:"\u2a3c",iquest:"\u00bf",iscr:"\ud835\udcbe",Iscr:"\u2110",isin:"\u2208",isindot:"\u22f5",isinE:"\u22f9",isins:"\u22f4",isinsv:"\u22f3",isinv:"\u2208",it:"\u2062",Itilde:"\u0128",itilde:"\u0129",Iukcy:"\u0406",iukcy:"\u0456",Iuml:"\u00cf",iuml:"\u00ef",Jcirc:"\u0134",jcirc:"\u0135",Jcy:"\u0419",jcy:"\u0439",Jfr:"\ud835\udd0d",jfr:"\ud835\udd27",jmath:"\u0237",Jopf:"\ud835\udd41",jopf:"\ud835\udd5b",Jscr:"\ud835\udca5",jscr:"\ud835\udcbf",Jsercy:"\u0408",jsercy:"\u0458",
Jukcy:"\u0404",jukcy:"\u0454",Kappa:"\u039a",kappa:"\u03ba",kappav:"\u03f0",Kcedil:"\u0136",kcedil:"\u0137",Kcy:"\u041a",kcy:"\u043a",Kfr:"\ud835\udd0e",kfr:"\ud835\udd28",kgreen:"\u0138",KHcy:"\u0425",khcy:"\u0445",KJcy:"\u040c",kjcy:"\u045c",Kopf:"\ud835\udd42",kopf:"\ud835\udd5c",Kscr:"\ud835\udca6",kscr:"\ud835\udcc0",lAarr:"\u21da",Lacute:"\u0139",lacute:"\u013a",laemptyv:"\u29b4",lagran:"\u2112",Lambda:"\u039b",lambda:"\u03bb",lang:"\u27e8",Lang:"\u27ea",langd:"\u2991",langle:"\u27e8",lap:"\u2a85",
Laplacetrf:"\u2112",laquo:"\u00ab",larrb:"\u21e4",larrbfs:"\u291f",larr:"\u2190",Larr:"\u219e",lArr:"\u21d0",larrfs:"\u291d",larrhk:"\u21a9",larrlp:"\u21ab",larrpl:"\u2939",larrsim:"\u2973",larrtl:"\u21a2",latail:"\u2919",lAtail:"\u291b",lat:"\u2aab",late:"\u2aad",lates:"\u2aad\ufe00",lbarr:"\u290c",lBarr:"\u290e",lbbrk:"\u2772",lbrace:"{",lbrack:"[",lbrke:"\u298b",lbrksld:"\u298f",lbrkslu:"\u298d",Lcaron:"\u013d",lcaron:"\u013e",Lcedil:"\u013b",lcedil:"\u013c",lceil:"\u2308",lcub:"{",Lcy:"\u041b",
lcy:"\u043b",ldca:"\u2936",ldquo:"\u201c",ldquor:"\u201e",ldrdhar:"\u2967",ldrushar:"\u294b",ldsh:"\u21b2",le:"\u2264",lE:"\u2266",LeftAngleBracket:"\u27e8",LeftArrowBar:"\u21e4",leftarrow:"\u2190",LeftArrow:"\u2190",Leftarrow:"\u21d0",LeftArrowRightArrow:"\u21c6",leftarrowtail:"\u21a2",LeftCeiling:"\u2308",LeftDoubleBracket:"\u27e6",LeftDownTeeVector:"\u2961",LeftDownVectorBar:"\u2959",LeftDownVector:"\u21c3",LeftFloor:"\u230a",leftharpoondown:"\u21bd",leftharpoonup:"\u21bc",leftleftarrows:"\u21c7",
leftrightarrow:"\u2194",LeftRightArrow:"\u2194",Leftrightarrow:"\u21d4",leftrightarrows:"\u21c6",leftrightharpoons:"\u21cb",leftrightsquigarrow:"\u21ad",LeftRightVector:"\u294e",LeftTeeArrow:"\u21a4",LeftTee:"\u22a3",LeftTeeVector:"\u295a",leftthreetimes:"\u22cb",LeftTriangleBar:"\u29cf",LeftTriangle:"\u22b2",LeftTriangleEqual:"\u22b4",LeftUpDownVector:"\u2951",LeftUpTeeVector:"\u2960",LeftUpVectorBar:"\u2958",LeftUpVector:"\u21bf",LeftVectorBar:"\u2952",LeftVector:"\u21bc",lEg:"\u2a8b",leg:"\u22da",
leq:"\u2264",leqq:"\u2266",leqslant:"\u2a7d",lescc:"\u2aa8",les:"\u2a7d",lesdot:"\u2a7f",lesdoto:"\u2a81",lesdotor:"\u2a83",lesg:"\u22da\ufe00",lesges:"\u2a93",lessapprox:"\u2a85",lessdot:"\u22d6",lesseqgtr:"\u22da",lesseqqgtr:"\u2a8b",LessEqualGreater:"\u22da",LessFullEqual:"\u2266",LessGreater:"\u2276",lessgtr:"\u2276",LessLess:"\u2aa1",lesssim:"\u2272",LessSlantEqual:"\u2a7d",LessTilde:"\u2272",lfisht:"\u297c",lfloor:"\u230a",Lfr:"\ud835\udd0f",lfr:"\ud835\udd29",lg:"\u2276",lgE:"\u2a91",lHar:"\u2962",
lhard:"\u21bd",lharu:"\u21bc",lharul:"\u296a",lhblk:"\u2584",LJcy:"\u0409",ljcy:"\u0459",llarr:"\u21c7",ll:"\u226a",Ll:"\u22d8",llcorner:"\u231e",Lleftarrow:"\u21da",llhard:"\u296b",lltri:"\u25fa",Lmidot:"\u013f",lmidot:"\u0140",lmoustache:"\u23b0",lmoust:"\u23b0",lnap:"\u2a89",lnapprox:"\u2a89",lne:"\u2a87",lnE:"\u2268",lneq:"\u2a87",lneqq:"\u2268",lnsim:"\u22e6",loang:"\u27ec",loarr:"\u21fd",lobrk:"\u27e6",longleftarrow:"\u27f5",LongLeftArrow:"\u27f5",Longleftarrow:"\u27f8",longleftrightarrow:"\u27f7",
LongLeftRightArrow:"\u27f7",Longleftrightarrow:"\u27fa",longmapsto:"\u27fc",longrightarrow:"\u27f6",LongRightArrow:"\u27f6",Longrightarrow:"\u27f9",looparrowleft:"\u21ab",looparrowright:"\u21ac",lopar:"\u2985",Lopf:"\ud835\udd43",lopf:"\ud835\udd5d",loplus:"\u2a2d",lotimes:"\u2a34",lowast:"\u2217",lowbar:"_",LowerLeftArrow:"\u2199",LowerRightArrow:"\u2198",loz:"\u25ca",lozenge:"\u25ca",lozf:"\u29eb",lpar:"(",lparlt:"\u2993",lrarr:"\u21c6",lrcorner:"\u231f",lrhar:"\u21cb",lrhard:"\u296d",lrm:"\u200e",
lrtri:"\u22bf",lsaquo:"\u2039",lscr:"\ud835\udcc1",Lscr:"\u2112",lsh:"\u21b0",Lsh:"\u21b0",lsim:"\u2272",lsime:"\u2a8d",lsimg:"\u2a8f",lsqb:"[",lsquo:"\u2018",lsquor:"\u201a",Lstrok:"\u0141",lstrok:"\u0142",ltcc:"\u2aa6",ltcir:"\u2a79",lt:"<",LT:"<",Lt:"\u226a",ltdot:"\u22d6",lthree:"\u22cb",ltimes:"\u22c9",ltlarr:"\u2976",ltquest:"\u2a7b",ltri:"\u25c3",ltrie:"\u22b4",ltrif:"\u25c2",ltrPar:"\u2996",lurdshar:"\u294a",luruhar:"\u2966",lvertneqq:"\u2268\ufe00",lvnE:"\u2268\ufe00",macr:"\u00af",male:"\u2642",
malt:"\u2720",maltese:"\u2720",Map:"\u2905",map:"\u21a6",mapsto:"\u21a6",mapstodown:"\u21a7",mapstoleft:"\u21a4",mapstoup:"\u21a5",marker:"\u25ae",mcomma:"\u2a29",Mcy:"\u041c",mcy:"\u043c",mdash:"\u2014",mDDot:"\u223a",measuredangle:"\u2221",MediumSpace:"\u205f",Mellintrf:"\u2133",Mfr:"\ud835\udd10",mfr:"\ud835\udd2a",mho:"\u2127",micro:"\u00b5",midast:"*",midcir:"\u2af0",mid:"\u2223",middot:"\u00b7",minusb:"\u229f",minus:"\u2212",minusd:"\u2238",minusdu:"\u2a2a",MinusPlus:"\u2213",mlcp:"\u2adb",
mldr:"\u2026",mnplus:"\u2213",models:"\u22a7",Mopf:"\ud835\udd44",mopf:"\ud835\udd5e",mp:"\u2213",mscr:"\ud835\udcc2",Mscr:"\u2133",mstpos:"\u223e",Mu:"\u039c",mu:"\u03bc",multimap:"\u22b8",mumap:"\u22b8",nabla:"\u2207",Nacute:"\u0143",nacute:"\u0144",nang:"\u2220\u20d2",nap:"\u2249",napE:"\u2a70\u0338",napid:"\u224b\u0338",napos:"\u0149",napprox:"\u2249",natural:"\u266e",naturals:"\u2115",natur:"\u266e",nbsp:"\u00a0",nbump:"\u224e\u0338",nbumpe:"\u224f\u0338",ncap:"\u2a43",Ncaron:"\u0147",ncaron:"\u0148",
Ncedil:"\u0145",ncedil:"\u0146",ncong:"\u2247",ncongdot:"\u2a6d\u0338",ncup:"\u2a42",Ncy:"\u041d",ncy:"\u043d",ndash:"\u2013",nearhk:"\u2924",nearr:"\u2197",neArr:"\u21d7",nearrow:"\u2197",ne:"\u2260",nedot:"\u2250\u0338",NegativeMediumSpace:"\u200b",NegativeThickSpace:"\u200b",NegativeThinSpace:"\u200b",NegativeVeryThinSpace:"\u200b",nequiv:"\u2262",nesear:"\u2928",nesim:"\u2242\u0338",NestedGreaterGreater:"\u226b",NestedLessLess:"\u226a",NewLine:"\n",nexist:"\u2204",nexists:"\u2204",Nfr:"\ud835\udd11",
nfr:"\ud835\udd2b",ngE:"\u2267\u0338",nge:"\u2271",ngeq:"\u2271",ngeqq:"\u2267\u0338",ngeqslant:"\u2a7e\u0338",nges:"\u2a7e\u0338",nGg:"\u22d9\u0338",ngsim:"\u2275",nGt:"\u226b\u20d2",ngt:"\u226f",ngtr:"\u226f",nGtv:"\u226b\u0338",nharr:"\u21ae",nhArr:"\u21ce",nhpar:"\u2af2",ni:"\u220b",nis:"\u22fc",nisd:"\u22fa",niv:"\u220b",NJcy:"\u040a",njcy:"\u045a",nlarr:"\u219a",nlArr:"\u21cd",nldr:"\u2025",nlE:"\u2266\u0338",nle:"\u2270",nleftarrow:"\u219a",nLeftarrow:"\u21cd",nleftrightarrow:"\u21ae",nLeftrightarrow:"\u21ce",
nleq:"\u2270",nleqq:"\u2266\u0338",nleqslant:"\u2a7d\u0338",nles:"\u2a7d\u0338",nless:"\u226e",nLl:"\u22d8\u0338",nlsim:"\u2274",nLt:"\u226a\u20d2",nlt:"\u226e",nltri:"\u22ea",nltrie:"\u22ec",nLtv:"\u226a\u0338",nmid:"\u2224",NoBreak:"\u2060",NonBreakingSpace:"\u00a0",nopf:"\ud835\udd5f",Nopf:"\u2115",Not:"\u2aec",not:"\u00ac",NotCongruent:"\u2262",NotCupCap:"\u226d",NotDoubleVerticalBar:"\u2226",NotElement:"\u2209",NotEqual:"\u2260",NotEqualTilde:"\u2242\u0338",NotExists:"\u2204",NotGreater:"\u226f",
NotGreaterEqual:"\u2271",NotGreaterFullEqual:"\u2267\u0338",NotGreaterGreater:"\u226b\u0338",NotGreaterLess:"\u2279",NotGreaterSlantEqual:"\u2a7e\u0338",NotGreaterTilde:"\u2275",NotHumpDownHump:"\u224e\u0338",NotHumpEqual:"\u224f\u0338",notin:"\u2209",notindot:"\u22f5\u0338",notinE:"\u22f9\u0338",notinva:"\u2209",notinvb:"\u22f7",notinvc:"\u22f6",NotLeftTriangleBar:"\u29cf\u0338",NotLeftTriangle:"\u22ea",NotLeftTriangleEqual:"\u22ec",NotLess:"\u226e",NotLessEqual:"\u2270",NotLessGreater:"\u2278",
NotLessLess:"\u226a\u0338",NotLessSlantEqual:"\u2a7d\u0338",NotLessTilde:"\u2274",NotNestedGreaterGreater:"\u2aa2\u0338",NotNestedLessLess:"\u2aa1\u0338",notni:"\u220c",notniva:"\u220c",notnivb:"\u22fe",notnivc:"\u22fd",NotPrecedes:"\u2280",NotPrecedesEqual:"\u2aaf\u0338",NotPrecedesSlantEqual:"\u22e0",NotReverseElement:"\u220c",NotRightTriangleBar:"\u29d0\u0338",NotRightTriangle:"\u22eb",NotRightTriangleEqual:"\u22ed",NotSquareSubset:"\u228f\u0338",NotSquareSubsetEqual:"\u22e2",NotSquareSuperset:"\u2290\u0338",
NotSquareSupersetEqual:"\u22e3",NotSubset:"\u2282\u20d2",NotSubsetEqual:"\u2288",NotSucceeds:"\u2281",NotSucceedsEqual:"\u2ab0\u0338",NotSucceedsSlantEqual:"\u22e1",NotSucceedsTilde:"\u227f\u0338",NotSuperset:"\u2283\u20d2",NotSupersetEqual:"\u2289",NotTilde:"\u2241",NotTildeEqual:"\u2244",NotTildeFullEqual:"\u2247",NotTildeTilde:"\u2249",NotVerticalBar:"\u2224",nparallel:"\u2226",npar:"\u2226",nparsl:"\u2afd\u20e5",npart:"\u2202\u0338",npolint:"\u2a14",npr:"\u2280",nprcue:"\u22e0",nprec:"\u2280",
npreceq:"\u2aaf\u0338",npre:"\u2aaf\u0338",nrarrc:"\u2933\u0338",nrarr:"\u219b",nrArr:"\u21cf",nrarrw:"\u219d\u0338",nrightarrow:"\u219b",nRightarrow:"\u21cf",nrtri:"\u22eb",nrtrie:"\u22ed",nsc:"\u2281",nsccue:"\u22e1",nsce:"\u2ab0\u0338",Nscr:"\ud835\udca9",nscr:"\ud835\udcc3",nshortmid:"\u2224",nshortparallel:"\u2226",nsim:"\u2241",nsime:"\u2244",nsimeq:"\u2244",nsmid:"\u2224",nspar:"\u2226",nsqsube:"\u22e2",nsqsupe:"\u22e3",nsub:"\u2284",nsubE:"\u2ac5\u0338",nsube:"\u2288",nsubset:"\u2282\u20d2",
nsubseteq:"\u2288",nsubseteqq:"\u2ac5\u0338",nsucc:"\u2281",nsucceq:"\u2ab0\u0338",nsup:"\u2285",nsupE:"\u2ac6\u0338",nsupe:"\u2289",nsupset:"\u2283\u20d2",nsupseteq:"\u2289",nsupseteqq:"\u2ac6\u0338",ntgl:"\u2279",Ntilde:"\u00d1",ntilde:"\u00f1",ntlg:"\u2278",ntriangleleft:"\u22ea",ntrianglelefteq:"\u22ec",ntriangleright:"\u22eb",ntrianglerighteq:"\u22ed",Nu:"\u039d",nu:"\u03bd",num:"#",numero:"\u2116",numsp:"\u2007",nvap:"\u224d\u20d2",nvdash:"\u22ac",nvDash:"\u22ad",nVdash:"\u22ae",nVDash:"\u22af",
nvge:"\u2265\u20d2",nvgt:">\u20d2",nvHarr:"\u2904",nvinfin:"\u29de",nvlArr:"\u2902",nvle:"\u2264\u20d2",nvlt:"<\u20d2",nvltrie:"\u22b4\u20d2",nvrArr:"\u2903",nvrtrie:"\u22b5\u20d2",nvsim:"\u223c\u20d2",nwarhk:"\u2923",nwarr:"\u2196",nwArr:"\u21d6",nwarrow:"\u2196",nwnear:"\u2927",Oacute:"\u00d3",oacute:"\u00f3",oast:"\u229b",Ocirc:"\u00d4",ocirc:"\u00f4",ocir:"\u229a",Ocy:"\u041e",ocy:"\u043e",odash:"\u229d",Odblac:"\u0150",odblac:"\u0151",odiv:"\u2a38",odot:"\u2299",odsold:"\u29bc",OElig:"\u0152",
oelig:"\u0153",ofcir:"\u29bf",Ofr:"\ud835\udd12",ofr:"\ud835\udd2c",ogon:"\u02db",Ograve:"\u00d2",ograve:"\u00f2",ogt:"\u29c1",ohbar:"\u29b5",ohm:"\u03a9",oint:"\u222e",olarr:"\u21ba",olcir:"\u29be",olcross:"\u29bb",oline:"\u203e",olt:"\u29c0",Omacr:"\u014c",omacr:"\u014d",Omega:"\u03a9",omega:"\u03c9",Omicron:"\u039f",omicron:"\u03bf",omid:"\u29b6",ominus:"\u2296",Oopf:"\ud835\udd46",oopf:"\ud835\udd60",opar:"\u29b7",OpenCurlyDoubleQuote:"\u201c",OpenCurlyQuote:"\u2018",operp:"\u29b9",oplus:"\u2295",
orarr:"\u21bb",Or:"\u2a54",or:"\u2228",ord:"\u2a5d",order:"\u2134",orderof:"\u2134",ordf:"\u00aa",ordm:"\u00ba",origof:"\u22b6",oror:"\u2a56",orslope:"\u2a57",orv:"\u2a5b",oS:"\u24c8",Oscr:"\ud835\udcaa",oscr:"\u2134",Oslash:"\u00d8",oslash:"\u00f8",osol:"\u2298",Otilde:"\u00d5",otilde:"\u00f5",otimesas:"\u2a36",Otimes:"\u2a37",otimes:"\u2297",Ouml:"\u00d6",ouml:"\u00f6",ovbar:"\u233d",OverBar:"\u203e",OverBrace:"\u23de",OverBracket:"\u23b4",OverParenthesis:"\u23dc",para:"\u00b6",parallel:"\u2225",
par:"\u2225",parsim:"\u2af3",parsl:"\u2afd",part:"\u2202",PartialD:"\u2202",Pcy:"\u041f",pcy:"\u043f",percnt:"%",period:".",permil:"\u2030",perp:"\u22a5",pertenk:"\u2031",Pfr:"\ud835\udd13",pfr:"\ud835\udd2d",Phi:"\u03a6",phi:"\u03c6",phiv:"\u03d5",phmmat:"\u2133",phone:"\u260e",Pi:"\u03a0",pi:"\u03c0",pitchfork:"\u22d4",piv:"\u03d6",planck:"\u210f",planckh:"\u210e",plankv:"\u210f",plusacir:"\u2a23",plusb:"\u229e",pluscir:"\u2a22",plus:"+",plusdo:"\u2214",plusdu:"\u2a25",pluse:"\u2a72",PlusMinus:"\u00b1",
plusmn:"\u00b1",plussim:"\u2a26",plustwo:"\u2a27",pm:"\u00b1",Poincareplane:"\u210c",pointint:"\u2a15",popf:"\ud835\udd61",Popf:"\u2119",pound:"\u00a3",prap:"\u2ab7",Pr:"\u2abb",pr:"\u227a",prcue:"\u227c",precapprox:"\u2ab7",prec:"\u227a",preccurlyeq:"\u227c",Precedes:"\u227a",PrecedesEqual:"\u2aaf",PrecedesSlantEqual:"\u227c",PrecedesTilde:"\u227e",preceq:"\u2aaf",precnapprox:"\u2ab9",precneqq:"\u2ab5",precnsim:"\u22e8",pre:"\u2aaf",prE:"\u2ab3",precsim:"\u227e",prime:"\u2032",Prime:"\u2033",primes:"\u2119",
prnap:"\u2ab9",prnE:"\u2ab5",prnsim:"\u22e8",prod:"\u220f",Product:"\u220f",profalar:"\u232e",profline:"\u2312",profsurf:"\u2313",prop:"\u221d",Proportional:"\u221d",Proportion:"\u2237",propto:"\u221d",prsim:"\u227e",prurel:"\u22b0",Pscr:"\ud835\udcab",pscr:"\ud835\udcc5",Psi:"\u03a8",psi:"\u03c8",puncsp:"\u2008",Qfr:"\ud835\udd14",qfr:"\ud835\udd2e",qint:"\u2a0c",qopf:"\ud835\udd62",Qopf:"\u211a",qprime:"\u2057",Qscr:"\ud835\udcac",qscr:"\ud835\udcc6",quaternions:"\u210d",quatint:"\u2a16",quest:"?",
questeq:"\u225f",quot:'"',QUOT:'"',rAarr:"\u21db",race:"\u223d\u0331",Racute:"\u0154",racute:"\u0155",radic:"\u221a",raemptyv:"\u29b3",rang:"\u27e9",Rang:"\u27eb",rangd:"\u2992",range:"\u29a5",rangle:"\u27e9",raquo:"\u00bb",rarrap:"\u2975",rarrb:"\u21e5",rarrbfs:"\u2920",rarrc:"\u2933",rarr:"\u2192",Rarr:"\u21a0",rArr:"\u21d2",rarrfs:"\u291e",rarrhk:"\u21aa",rarrlp:"\u21ac",rarrpl:"\u2945",rarrsim:"\u2974",Rarrtl:"\u2916",rarrtl:"\u21a3",rarrw:"\u219d",ratail:"\u291a",rAtail:"\u291c",ratio:"\u2236",
rationals:"\u211a",rbarr:"\u290d",rBarr:"\u290f",RBarr:"\u2910",rbbrk:"\u2773",rbrace:"}",rbrack:"]",rbrke:"\u298c",rbrksld:"\u298e",rbrkslu:"\u2990",Rcaron:"\u0158",rcaron:"\u0159",Rcedil:"\u0156",rcedil:"\u0157",rceil:"\u2309",rcub:"}",Rcy:"\u0420",rcy:"\u0440",rdca:"\u2937",rdldhar:"\u2969",rdquo:"\u201d",rdquor:"\u201d",rdsh:"\u21b3",real:"\u211c",realine:"\u211b",realpart:"\u211c",reals:"\u211d",Re:"\u211c",rect:"\u25ad",reg:"\u00ae",REG:"\u00ae",ReverseElement:"\u220b",ReverseEquilibrium:"\u21cb",
ReverseUpEquilibrium:"\u296f",rfisht:"\u297d",rfloor:"\u230b",rfr:"\ud835\udd2f",Rfr:"\u211c",rHar:"\u2964",rhard:"\u21c1",rharu:"\u21c0",rharul:"\u296c",Rho:"\u03a1",rho:"\u03c1",rhov:"\u03f1",RightAngleBracket:"\u27e9",RightArrowBar:"\u21e5",rightarrow:"\u2192",RightArrow:"\u2192",Rightarrow:"\u21d2",RightArrowLeftArrow:"\u21c4",rightarrowtail:"\u21a3",RightCeiling:"\u2309",RightDoubleBracket:"\u27e7",RightDownTeeVector:"\u295d",RightDownVectorBar:"\u2955",RightDownVector:"\u21c2",RightFloor:"\u230b",
rightharpoondown:"\u21c1",rightharpoonup:"\u21c0",rightleftarrows:"\u21c4",rightleftharpoons:"\u21cc",rightrightarrows:"\u21c9",rightsquigarrow:"\u219d",RightTeeArrow:"\u21a6",RightTee:"\u22a2",RightTeeVector:"\u295b",rightthreetimes:"\u22cc",RightTriangleBar:"\u29d0",RightTriangle:"\u22b3",RightTriangleEqual:"\u22b5",RightUpDownVector:"\u294f",RightUpTeeVector:"\u295c",RightUpVectorBar:"\u2954",RightUpVector:"\u21be",RightVectorBar:"\u2953",RightVector:"\u21c0",ring:"\u02da",risingdotseq:"\u2253",
rlarr:"\u21c4",rlhar:"\u21cc",rlm:"\u200f",rmoustache:"\u23b1",rmoust:"\u23b1",rnmid:"\u2aee",roang:"\u27ed",roarr:"\u21fe",robrk:"\u27e7",ropar:"\u2986",ropf:"\ud835\udd63",Ropf:"\u211d",roplus:"\u2a2e",rotimes:"\u2a35",RoundImplies:"\u2970",rpar:")",rpargt:"\u2994",rppolint:"\u2a12",rrarr:"\u21c9",Rrightarrow:"\u21db",rsaquo:"\u203a",rscr:"\ud835\udcc7",Rscr:"\u211b",rsh:"\u21b1",Rsh:"\u21b1",rsqb:"]",rsquo:"\u2019",rsquor:"\u2019",rthree:"\u22cc",rtimes:"\u22ca",rtri:"\u25b9",rtrie:"\u22b5",rtrif:"\u25b8",
rtriltri:"\u29ce",RuleDelayed:"\u29f4",ruluhar:"\u2968",rx:"\u211e",Sacute:"\u015a",sacute:"\u015b",sbquo:"\u201a",scap:"\u2ab8",Scaron:"\u0160",scaron:"\u0161",Sc:"\u2abc",sc:"\u227b",sccue:"\u227d",sce:"\u2ab0",scE:"\u2ab4",Scedil:"\u015e",scedil:"\u015f",Scirc:"\u015c",scirc:"\u015d",scnap:"\u2aba",scnE:"\u2ab6",scnsim:"\u22e9",scpolint:"\u2a13",scsim:"\u227f",Scy:"\u0421",scy:"\u0441",sdotb:"\u22a1",sdot:"\u22c5",sdote:"\u2a66",searhk:"\u2925",searr:"\u2198",seArr:"\u21d8",searrow:"\u2198",sect:"\u00a7",
semi:";",seswar:"\u2929",setminus:"\u2216",setmn:"\u2216",sext:"\u2736",Sfr:"\ud835\udd16",sfr:"\ud835\udd30",sfrown:"\u2322",sharp:"\u266f",SHCHcy:"\u0429",shchcy:"\u0449",SHcy:"\u0428",shcy:"\u0448",ShortDownArrow:"\u2193",ShortLeftArrow:"\u2190",shortmid:"\u2223",shortparallel:"\u2225",ShortRightArrow:"\u2192",ShortUpArrow:"\u2191",shy:"\u00ad",Sigma:"\u03a3",sigma:"\u03c3",sigmaf:"\u03c2",sigmav:"\u03c2",sim:"\u223c",simdot:"\u2a6a",sime:"\u2243",simeq:"\u2243",simg:"\u2a9e",simgE:"\u2aa0",siml:"\u2a9d",
simlE:"\u2a9f",simne:"\u2246",simplus:"\u2a24",simrarr:"\u2972",slarr:"\u2190",SmallCircle:"\u2218",smallsetminus:"\u2216",smashp:"\u2a33",smeparsl:"\u29e4",smid:"\u2223",smile:"\u2323",smt:"\u2aaa",smte:"\u2aac",smtes:"\u2aac\ufe00",SOFTcy:"\u042c",softcy:"\u044c",solbar:"\u233f",solb:"\u29c4",sol:"/",Sopf:"\ud835\udd4a",sopf:"\ud835\udd64",spades:"\u2660",spadesuit:"\u2660",spar:"\u2225",sqcap:"\u2293",sqcaps:"\u2293\ufe00",sqcup:"\u2294",sqcups:"\u2294\ufe00",Sqrt:"\u221a",sqsub:"\u228f",sqsube:"\u2291",
sqsubset:"\u228f",sqsubseteq:"\u2291",sqsup:"\u2290",sqsupe:"\u2292",sqsupset:"\u2290",sqsupseteq:"\u2292",square:"\u25a1",Square:"\u25a1",SquareIntersection:"\u2293",SquareSubset:"\u228f",SquareSubsetEqual:"\u2291",SquareSuperset:"\u2290",SquareSupersetEqual:"\u2292",SquareUnion:"\u2294",squarf:"\u25aa",squ:"\u25a1",squf:"\u25aa",srarr:"\u2192",Sscr:"\ud835\udcae",sscr:"\ud835\udcc8",ssetmn:"\u2216",ssmile:"\u2323",sstarf:"\u22c6",Star:"\u22c6",star:"\u2606",starf:"\u2605",straightepsilon:"\u03f5",
straightphi:"\u03d5",strns:"\u00af",sub:"\u2282",Sub:"\u22d0",subdot:"\u2abd",subE:"\u2ac5",sube:"\u2286",subedot:"\u2ac3",submult:"\u2ac1",subnE:"\u2acb",subne:"\u228a",subplus:"\u2abf",subrarr:"\u2979",subset:"\u2282",Subset:"\u22d0",subseteq:"\u2286",subseteqq:"\u2ac5",SubsetEqual:"\u2286",subsetneq:"\u228a",subsetneqq:"\u2acb",subsim:"\u2ac7",subsub:"\u2ad5",subsup:"\u2ad3",succapprox:"\u2ab8",succ:"\u227b",succcurlyeq:"\u227d",Succeeds:"\u227b",SucceedsEqual:"\u2ab0",SucceedsSlantEqual:"\u227d",
SucceedsTilde:"\u227f",succeq:"\u2ab0",succnapprox:"\u2aba",succneqq:"\u2ab6",succnsim:"\u22e9",succsim:"\u227f",SuchThat:"\u220b",sum:"\u2211",Sum:"\u2211",sung:"\u266a",sup1:"\u00b9",sup2:"\u00b2",sup3:"\u00b3",sup:"\u2283",Sup:"\u22d1",supdot:"\u2abe",supdsub:"\u2ad8",supE:"\u2ac6",supe:"\u2287",supedot:"\u2ac4",Superset:"\u2283",SupersetEqual:"\u2287",suphsol:"\u27c9",suphsub:"\u2ad7",suplarr:"\u297b",supmult:"\u2ac2",supnE:"\u2acc",supne:"\u228b",supplus:"\u2ac0",supset:"\u2283",Supset:"\u22d1",
supseteq:"\u2287",supseteqq:"\u2ac6",supsetneq:"\u228b",supsetneqq:"\u2acc",supsim:"\u2ac8",supsub:"\u2ad4",supsup:"\u2ad6",swarhk:"\u2926",swarr:"\u2199",swArr:"\u21d9",swarrow:"\u2199",swnwar:"\u292a",szlig:"\u00df",Tab:"\t",target:"\u2316",Tau:"\u03a4",tau:"\u03c4",tbrk:"\u23b4",Tcaron:"\u0164",tcaron:"\u0165",Tcedil:"\u0162",tcedil:"\u0163",Tcy:"\u0422",tcy:"\u0442",tdot:"\u20db",telrec:"\u2315",Tfr:"\ud835\udd17",tfr:"\ud835\udd31",there4:"\u2234",therefore:"\u2234",Therefore:"\u2234",Theta:"\u0398",
theta:"\u03b8",thetasym:"\u03d1",thetav:"\u03d1",thickapprox:"\u2248",thicksim:"\u223c",ThickSpace:"\u205f\u200a",ThinSpace:"\u2009",thinsp:"\u2009",thkap:"\u2248",thksim:"\u223c",THORN:"\u00de",thorn:"\u00fe",tilde:"\u02dc",Tilde:"\u223c",TildeEqual:"\u2243",TildeFullEqual:"\u2245",TildeTilde:"\u2248",timesbar:"\u2a31",timesb:"\u22a0",times:"\u00d7",timesd:"\u2a30",tint:"\u222d",toea:"\u2928",topbot:"\u2336",topcir:"\u2af1",top:"\u22a4",Topf:"\ud835\udd4b",topf:"\ud835\udd65",topfork:"\u2ada",tosa:"\u2929",
tprime:"\u2034",trade:"\u2122",TRADE:"\u2122",triangle:"\u25b5",triangledown:"\u25bf",triangleleft:"\u25c3",trianglelefteq:"\u22b4",triangleq:"\u225c",triangleright:"\u25b9",trianglerighteq:"\u22b5",tridot:"\u25ec",trie:"\u225c",triminus:"\u2a3a",TripleDot:"\u20db",triplus:"\u2a39",trisb:"\u29cd",tritime:"\u2a3b",trpezium:"\u23e2",Tscr:"\ud835\udcaf",tscr:"\ud835\udcc9",TScy:"\u0426",tscy:"\u0446",TSHcy:"\u040b",tshcy:"\u045b",Tstrok:"\u0166",tstrok:"\u0167",twixt:"\u226c",twoheadleftarrow:"\u219e",
twoheadrightarrow:"\u21a0",Uacute:"\u00da",uacute:"\u00fa",uarr:"\u2191",Uarr:"\u219f",uArr:"\u21d1",Uarrocir:"\u2949",Ubrcy:"\u040e",ubrcy:"\u045e",Ubreve:"\u016c",ubreve:"\u016d",Ucirc:"\u00db",ucirc:"\u00fb",Ucy:"\u0423",ucy:"\u0443",udarr:"\u21c5",Udblac:"\u0170",udblac:"\u0171",udhar:"\u296e",ufisht:"\u297e",Ufr:"\ud835\udd18",ufr:"\ud835\udd32",Ugrave:"\u00d9",ugrave:"\u00f9",uHar:"\u2963",uharl:"\u21bf",uharr:"\u21be",uhblk:"\u2580",ulcorn:"\u231c",ulcorner:"\u231c",ulcrop:"\u230f",ultri:"\u25f8",
Umacr:"\u016a",umacr:"\u016b",uml:"\u00a8",UnderBar:"_",UnderBrace:"\u23df",UnderBracket:"\u23b5",UnderParenthesis:"\u23dd",Union:"\u22c3",UnionPlus:"\u228e",Uogon:"\u0172",uogon:"\u0173",Uopf:"\ud835\udd4c",uopf:"\ud835\udd66",UpArrowBar:"\u2912",uparrow:"\u2191",UpArrow:"\u2191",Uparrow:"\u21d1",UpArrowDownArrow:"\u21c5",updownarrow:"\u2195",UpDownArrow:"\u2195",Updownarrow:"\u21d5",UpEquilibrium:"\u296e",upharpoonleft:"\u21bf",upharpoonright:"\u21be",uplus:"\u228e",UpperLeftArrow:"\u2196",UpperRightArrow:"\u2197",
upsi:"\u03c5",Upsi:"\u03d2",upsih:"\u03d2",Upsilon:"\u03a5",upsilon:"\u03c5",UpTeeArrow:"\u21a5",UpTee:"\u22a5",upuparrows:"\u21c8",urcorn:"\u231d",urcorner:"\u231d",urcrop:"\u230e",Uring:"\u016e",uring:"\u016f",urtri:"\u25f9",Uscr:"\ud835\udcb0",uscr:"\ud835\udcca",utdot:"\u22f0",Utilde:"\u0168",utilde:"\u0169",utri:"\u25b5",utrif:"\u25b4",uuarr:"\u21c8",Uuml:"\u00dc",uuml:"\u00fc",uwangle:"\u29a7",vangrt:"\u299c",varepsilon:"\u03f5",varkappa:"\u03f0",varnothing:"\u2205",varphi:"\u03d5",varpi:"\u03d6",
varpropto:"\u221d",varr:"\u2195",vArr:"\u21d5",varrho:"\u03f1",varsigma:"\u03c2",varsubsetneq:"\u228a\ufe00",varsubsetneqq:"\u2acb\ufe00",varsupsetneq:"\u228b\ufe00",varsupsetneqq:"\u2acc\ufe00",vartheta:"\u03d1",vartriangleleft:"\u22b2",vartriangleright:"\u22b3",vBar:"\u2ae8",Vbar:"\u2aeb",vBarv:"\u2ae9",Vcy:"\u0412",vcy:"\u0432",vdash:"\u22a2",vDash:"\u22a8",Vdash:"\u22a9",VDash:"\u22ab",Vdashl:"\u2ae6",veebar:"\u22bb",vee:"\u2228",Vee:"\u22c1",veeeq:"\u225a",vellip:"\u22ee",verbar:"|",Verbar:"\u2016",
vert:"|",Vert:"\u2016",VerticalBar:"\u2223",VerticalLine:"|",VerticalSeparator:"\u2758",VerticalTilde:"\u2240",VeryThinSpace:"\u200a",Vfr:"\ud835\udd19",vfr:"\ud835\udd33",vltri:"\u22b2",vnsub:"\u2282\u20d2",vnsup:"\u2283\u20d2",Vopf:"\ud835\udd4d",vopf:"\ud835\udd67",vprop:"\u221d",vrtri:"\u22b3",Vscr:"\ud835\udcb1",vscr:"\ud835\udccb",vsubnE:"\u2acb\ufe00",vsubne:"\u228a\ufe00",vsupnE:"\u2acc\ufe00",vsupne:"\u228b\ufe00",Vvdash:"\u22aa",vzigzag:"\u299a",Wcirc:"\u0174",wcirc:"\u0175",wedbar:"\u2a5f",
wedge:"\u2227",Wedge:"\u22c0",wedgeq:"\u2259",weierp:"\u2118",Wfr:"\ud835\udd1a",wfr:"\ud835\udd34",Wopf:"\ud835\udd4e",wopf:"\ud835\udd68",wp:"\u2118",wr:"\u2240",wreath:"\u2240",Wscr:"\ud835\udcb2",wscr:"\ud835\udccc",xcap:"\u22c2",xcirc:"\u25ef",xcup:"\u22c3",xdtri:"\u25bd",Xfr:"\ud835\udd1b",xfr:"\ud835\udd35",xharr:"\u27f7",xhArr:"\u27fa",Xi:"\u039e",xi:"\u03be",xlarr:"\u27f5",xlArr:"\u27f8",xmap:"\u27fc",xnis:"\u22fb",xodot:"\u2a00",Xopf:"\ud835\udd4f",xopf:"\ud835\udd69",xoplus:"\u2a01",xotime:"\u2a02",
xrarr:"\u27f6",xrArr:"\u27f9",Xscr:"\ud835\udcb3",xscr:"\ud835\udccd",xsqcup:"\u2a06",xuplus:"\u2a04",xutri:"\u25b3",xvee:"\u22c1",xwedge:"\u22c0",Yacute:"\u00dd",yacute:"\u00fd",YAcy:"\u042f",yacy:"\u044f",Ycirc:"\u0176",ycirc:"\u0177",Ycy:"\u042b",ycy:"\u044b",yen:"\u00a5",Yfr:"\ud835\udd1c",yfr:"\ud835\udd36",YIcy:"\u0407",yicy:"\u0457",Yopf:"\ud835\udd50",yopf:"\ud835\udd6a",Yscr:"\ud835\udcb4",yscr:"\ud835\udcce",YUcy:"\u042e",yucy:"\u044e",yuml:"\u00ff",Yuml:"\u0178",Zacute:"\u0179",zacute:"\u017a",
Zcaron:"\u017d",zcaron:"\u017e",Zcy:"\u0417",zcy:"\u0437",Zdot:"\u017b",zdot:"\u017c",zeetrf:"\u2128",ZeroWidthSpace:"\u200b",Zeta:"\u0396",zeta:"\u03b6",zfr:"\ud835\udd37",Zfr:"\u2128",ZHcy:"\u0416",zhcy:"\u0436",zigrarr:"\u21dd",zopf:"\ud835\udd6b",Zopf:"\u2124",Zscr:"\ud835\udcb5",zscr:"\ud835\udccf",zwj:"\u200d",zwnj:"\u200c"}},function(k,d){k.exports={Aacute:"\u00c1",aacute:"\u00e1",Acirc:"\u00c2",acirc:"\u00e2",acute:"\u00b4",AElig:"\u00c6",aelig:"\u00e6",Agrave:"\u00c0",agrave:"\u00e0",amp:"&",
AMP:"&",Aring:"\u00c5",aring:"\u00e5",Atilde:"\u00c3",atilde:"\u00e3",Auml:"\u00c4",auml:"\u00e4",brvbar:"\u00a6",Ccedil:"\u00c7",ccedil:"\u00e7",cedil:"\u00b8",cent:"\u00a2",copy:"\u00a9",COPY:"\u00a9",curren:"\u00a4",deg:"\u00b0",divide:"\u00f7",Eacute:"\u00c9",eacute:"\u00e9",Ecirc:"\u00ca",ecirc:"\u00ea",Egrave:"\u00c8",egrave:"\u00e8",ETH:"\u00d0",eth:"\u00f0",Euml:"\u00cb",euml:"\u00eb",frac12:"\u00bd",frac14:"\u00bc",frac34:"\u00be",gt:">",GT:">",Iacute:"\u00cd",iacute:"\u00ed",Icirc:"\u00ce",
icirc:"\u00ee",iexcl:"\u00a1",Igrave:"\u00cc",igrave:"\u00ec",iquest:"\u00bf",Iuml:"\u00cf",iuml:"\u00ef",laquo:"\u00ab",lt:"<",LT:"<",macr:"\u00af",micro:"\u00b5",middot:"\u00b7",nbsp:"\u00a0",not:"\u00ac",Ntilde:"\u00d1",ntilde:"\u00f1",Oacute:"\u00d3",oacute:"\u00f3",Ocirc:"\u00d4",ocirc:"\u00f4",Ograve:"\u00d2",ograve:"\u00f2",ordf:"\u00aa",ordm:"\u00ba",Oslash:"\u00d8",oslash:"\u00f8",Otilde:"\u00d5",otilde:"\u00f5",Ouml:"\u00d6",ouml:"\u00f6",para:"\u00b6",plusmn:"\u00b1",pound:"\u00a3",quot:'"',
QUOT:'"',raquo:"\u00bb",reg:"\u00ae",REG:"\u00ae",sect:"\u00a7",shy:"\u00ad",sup1:"\u00b9",sup2:"\u00b2",sup3:"\u00b3",szlig:"\u00df",THORN:"\u00de",thorn:"\u00fe",times:"\u00d7",Uacute:"\u00da",uacute:"\u00fa",Ucirc:"\u00db",ucirc:"\u00fb",Ugrave:"\u00d9",ugrave:"\u00f9",uml:"\u00a8",Uuml:"\u00dc",uuml:"\u00fc",Yacute:"\u00dd",yacute:"\u00fd",yen:"\u00a5",yuml:"\u00ff"}},function(k,d){k.exports={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}},function(k,d){k.exports="function"===typeof Object.create?function(a,
d){a.super_=d;a.prototype=Object.create(d.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,d){a.super_=d;var m=function(){};m.prototype=d.prototype;a.prototype=new m;a.prototype.constructor=a}},function(k,d){function a(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function n(a){return"function"===typeof a}function m(a){return"object"===typeof a&&null!==a}k.exports=a;a.EventEmitter=a;a.prototype._events=void 0;a.prototype._maxListeners=
void 0;a.defaultMaxListeners=10;a.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};a.prototype.emit=function(a){var d,f,g,b;this._events||(this._events={});if("error"===a&&(!this._events.error||m(this._events.error)&&!this._events.error.length)){d=arguments[1];if(d instanceof Error)throw d;f=Error('Uncaught, unspecified "error" event. ('+d+")");f.context=d;throw f;}f=this._events[a];if(void 0===
f)return!1;if(n(f))switch(arguments.length){case 1:f.call(this);break;case 2:f.call(this,arguments[1]);break;case 3:f.call(this,arguments[1],arguments[2]);break;default:d=Array.prototype.slice.call(arguments,1),f.apply(this,d)}else if(m(f))for(d=Array.prototype.slice.call(arguments,1),b=f.slice(),f=b.length,g=0;g<f;g++)b[g].apply(this,d);return!0};a.prototype.addListener=function(d,h){if(!n(h))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&
this.emit("newListener",d,n(h.listener)?h.listener:h);this._events[d]?m(this._events[d])?this._events[d].push(h):this._events[d]=[this._events[d],h]:this._events[d]=h;m(this._events[d])&&!this._events[d].warned&&(h=void 0!==this._maxListeners?this._maxListeners:a.defaultMaxListeners)&&0<h&&this._events[d].length>h&&(this._events[d].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[d].length),
"function"===typeof console.trace&&console.trace());return this};a.prototype.on=a.prototype.addListener;a.prototype.once=function(a,d){function f(){this.removeListener(a,f);g||(g=!0,d.apply(this,arguments))}if(!n(d))throw TypeError("listener must be a function");var g=!1;f.listener=d;this.on(a,f);return this};a.prototype.removeListener=function(a,d){var f,g,b;if(!n(d))throw TypeError("listener must be a function");if(!this._events||!this._events[a])return this;f=this._events[a];b=f.length;g=-1;if(f===
d||n(f.listener)&&f.listener===d)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,d);else if(m(f)){for(;0<b--;)if(f[b]===d||f[b].listener&&f[b].listener===d){g=b;break}if(0>g)return this;1===f.length?(f.length=0,delete this._events[a]):f.splice(g,1);this._events.removeListener&&this.emit("removeListener",a,d)}return this};a.prototype.removeAllListeners=function(a){var d;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events=
{}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(d in this._events)"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events={};return this}d=this._events[a];if(n(d))this.removeListener(a,d);else if(d)for(;d.length;)this.removeListener(a,d[d.length-1]);delete this._events[a];return this};a.prototype.listeners=function(a){return this._events&&this._events[a]?n(this._events[a])?[this._events[a]]:this._events[a].slice():[]};a.prototype.listenerCount=
function(a){if(this._events){a=this._events[a];if(n(a))return 1;if(a)return a.length}return 0};a.listenerCount=function(a,d){return a.listenerCount(d)}},function(k,d,a){function n(a,c,e){"object"===typeof a?(e=c,c=a,a=null):"function"===typeof c&&(e=c,c=g);this._callback=a;this._options=c||g;this._elementCB=e;this.dom=[];this._done=!1;this._tagStack=[];this._parser=this._parser||null}var m=a(203),f=/\s+/g,h=a(204),l=a(205),g={normalizeWhitespace:!1,withStartIndices:!1};n.prototype.onparserinit=function(a){this._parser=
a};n.prototype.onreset=function(){n.call(this,this._callback,this._options,this._elementCB)};n.prototype.onend=function(){this._done||(this._done=!0,this._parser=null,this._handleCallback(null))};n.prototype._handleCallback=n.prototype.onerror=function(a){if("function"===typeof this._callback)this._callback(a,this.dom);else if(a)throw a;};n.prototype.onclosetag=function(){var a=this._tagStack.pop();this._elementCB&&this._elementCB(a)};n.prototype._addDomElement=function(a){var b=this._tagStack[this._tagStack.length-
1],e=b?b.children:this.dom,d=e[e.length-1];a.next=null;this._options.withStartIndices&&(a.startIndex=this._parser.startIndex);this._options.withDomLvl1&&(a.__proto__="tag"===a.type?l:h);d?(a.prev=d,d.next=a):a.prev=null;e.push(a);a.parent=b||null};n.prototype.onopentag=function(a,c){a={type:"script"===a?m.Script:"style"===a?m.Style:m.Tag,name:a,attribs:c,children:[]};this._addDomElement(a);this._tagStack.push(a)};n.prototype.ontext=function(a){var b=this._options.normalizeWhitespace||this._options.ignoreWhitespace,
e;!this._tagStack.length&&this.dom.length&&(e=this.dom[this.dom.length-1]).type===m.Text?e.data=b?(e.data+a).replace(f," "):e.data+a:this._tagStack.length&&(e=this._tagStack[this._tagStack.length-1])&&(e=e.children[e.children.length-1])&&e.type===m.Text?e.data=b?(e.data+a).replace(f," "):e.data+a:(b&&(a=a.replace(f," ")),this._addDomElement({data:a,type:m.Text}))};n.prototype.oncomment=function(a){var b=this._tagStack[this._tagStack.length-1];b&&b.type===m.Comment?b.data+=a:(a={data:a,type:m.Comment},
this._addDomElement(a),this._tagStack.push(a))};n.prototype.oncdatastart=function(){var a={children:[{data:"",type:m.Text}],type:m.CDATA};this._addDomElement(a);this._tagStack.push(a)};n.prototype.oncommentend=n.prototype.oncdataend=function(){this._tagStack.pop()};n.prototype.onprocessinginstruction=function(a,c){this._addDomElement({name:a,data:c,type:m.Directive})};k.exports=n},function(k,d){k.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",
CDATA:"cdata",Doctype:"doctype",isTag:function(a){return"tag"===a.type||"script"===a.type||"style"===a.type}}},function(k,d){var a=k.exports={get firstChild(){var a=this.children;return a&&a[0]||null},get lastChild(){var a=this.children;return a&&a[a.length-1]||null},get nodeType(){return m[this.type]||m.element}},n={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},m={element:1,text:3,cdata:4,comment:8};Object.keys(n).forEach(function(d){var f=
n[d];Object.defineProperty(a,d,{get:function(){return this[f]||null},set:function(a){return this[f]=a}})})},function(k,d,a){d=a(204);var n=k.exports=Object.create(d),m={tagName:"name"};Object.keys(m).forEach(function(a){var d=m[a];Object.defineProperty(n,a,{get:function(){return this[d]||null},set:function(a){return this[d]=a}})})},function(k,d,a){function n(a,c){this.init(a,c)}function m(a,c,e){return l.getText(l.getElementsByTagName(a,c,e,1)).trim()}function f(a,c,e,d,g){(e=m(e,d,g))&&(a[c]=e)}
d=a(192);var h=d.DomHandler,l=d.DomUtils;a(200)(n,h);n.prototype.init=h;var g=function(a){return"rss"===a||"feed"===a||"rdf:RDF"===a};n.prototype.onend=function(){var a={},c=l.getElementsByTagName(g,this.dom,!0,1)[0],e,d;if(c)if("feed"===c.name){d=c.children;a.type="atom";f(a,"id","id",d);f(a,"title","title",d);(e=l.getElementsByTagName("link",d,!0,1)[0])&&(e=e.attribs)&&(e=e.href)&&(a.link=e);f(a,"description","subtitle",d);if(e=m("updated",d))a.updated=new Date(e);f(a,"author","email",d,!0);a.items=
l.getElementsByTagName("entry",d,!0).map(function(a){var b={},c;a=a.children;f(b,"id","id",a);f(b,"title","title",a);(c=l.getElementsByTagName("link",a,!0,1)[0])&&(c=c.attribs)&&(c=c.href)&&(b.link=c);if(c=m("summary",a)||m("content",a))b.description=c;if(c=m("updated",a))b.pubDate=new Date(c);return b})}else{d=l.getElementsByTagName("channel",c.children,!0,1)[0].children;a.type=c.name.substr(0,3);a.id="";f(a,"title","title",d);f(a,"link","link",d);f(a,"description","description",d);if(e=m("lastBuildDate",
d))a.updated=new Date(e);f(a,"author","managingEditor",d,!0);a.items=l.getElementsByTagName("item",c.children,!0).map(function(a){var b={};a=a.children;f(b,"id","guid",a);f(b,"title","title",a);f(b,"link","link",a);f(b,"description","description",a);if(a=m("pubDate",a))b.pubDate=new Date(a);return b})}this.dom=a;h.prototype._handleCallback.call(this,c?null:Error("couldn't find root of feed"))};k.exports=n},function(k,d,a){function n(a){f.call(this,new m(this),a)}function m(a){this.scope=a}k.exports=
n;var f=a(208);a(200)(n,f);n.prototype.readable=!0;var h=a(192).EVENTS;Object.keys(h).forEach(function(a){if(0===h[a])m.prototype["on"+a]=function(){this.scope.emit(a)};else if(1===h[a])m.prototype["on"+a]=function(d){this.scope.emit(a,d)};else if(2===h[a])m.prototype["on"+a]=function(d,b){this.scope.emit(a,d,b)};else throw Error("wrong number of arguments!");})},function(k,d,a){function n(a,b){var c=this._parser=new m(a,b),e=this._decoder=new h;f.call(this,{decodeStrings:!1});this.once("finish",
function(){c.end(e.end())})}k.exports=n;var m=a(193),f=a(209).Writable||a(230).Writable,h=a(223).StringDecoder,l=a(214).Buffer;a(200)(n,f);f.prototype._write=function(a,b,c){a instanceof l&&(a=this._decoder.write(a));this._parser.write(a);c()}},function(k,d,a){function n(){m.call(this)}k.exports=n;var m=a(201).EventEmitter;a(200)(n,m);n.Readable=a(210);n.Writable=a(226);n.Duplex=a(227);n.Transform=a(228);n.PassThrough=a(229);n.Stream=n;n.prototype.pipe=function(a,d){function f(b){a.writable&&!1===
a.write(b)&&n.pause&&n.pause()}function g(){n.readable&&n.resume&&n.resume()}function b(){k||(k=!0,a.end())}function c(){k||(k=!0,"function"===typeof a.destroy&&a.destroy())}function e(a){h();if(0===m.listenerCount(this,"error"))throw a;}function h(){n.removeListener("data",f);a.removeListener("drain",g);n.removeListener("end",b);n.removeListener("close",c);n.removeListener("error",e);a.removeListener("error",e);n.removeListener("end",h);n.removeListener("close",h);a.removeListener("close",h)}var n=
this;n.on("data",f);a.on("drain",g);a._isStdio||d&&!1===d.end||(n.on("end",b),n.on("close",c));var k=!1;n.on("error",e);a.on("error",e);n.on("end",h);n.on("close",h);a.on("close",h);a.emit("pipe",n);return a}},function(k,d,a){var n;a:{try{n=a(209);break a}catch(m){}n=void 0}d=k.exports=a(211);d.Stream=n||d;d.Readable=d;d.Writable=a(221);d.Duplex=a(220);d.Transform=a(224);d.PassThrough=a(225)},function(k,d,a){(function(d){function m(b,c){H=H||a(220);b=b||{};this.objectMode=!!b.objectMode;c instanceof
H&&(this.objectMode=this.objectMode||!!b.readableObjectMode);c=b.highWaterMark;var e=this.objectMode?16:16384;this.highWaterMark=c||0===c?c:e;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=b.defaultEncoding||"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=
null;b.encoding&&(F||(F=a(223).StringDecoder),this.decoder=new F(b.encoding),this.encoding=b.encoding)}function f(b){H=H||a(220);if(!(this instanceof f))return new f(b);this._readableState=new m(b,this);this.readable=!0;b&&"function"===typeof b.read&&(this._read=b.read);B.call(this)}function h(a,b,e,d,f){var h;h=e;var l=null;C.isBuffer(h)||"string"===typeof h||null===h||void 0===h||b.objectMode||(l=new TypeError("Invalid non-string/buffer chunk"));(h=l)?a.emit("error",h):null===e?(b.reading=!1,b.ended||
(b.decoder&&(e=b.decoder.end())&&e.length&&(b.buffer.push(e),b.length+=b.objectMode?1:e.length),b.ended=!0,g(a))):b.objectMode||e&&0<e.length?b.ended&&!f?(e=Error("stream.push() after EOF"),a.emit("error",e)):b.endEmitted&&f?(e=Error("stream.unshift() after end event"),a.emit("error",e)):(!b.decoder||f||d||(e=b.decoder.write(e)),f||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",e),a.read(0)):(b.length+=b.objectMode?1:e.length,f?b.buffer.unshift(e):b.buffer.push(e),b.needReadable&&
g(a)),b.readingMore||(b.readingMore=!0,A(c,a,b))):f||(b.reading=!1);return!b.ended&&(b.needReadable||b.length<b.highWaterMark||0===b.length)}function l(a,b){if(0===b.length&&b.ended)return 0;if(b.objectMode)return 0===a?0:1;if(null===a||isNaN(a))return b.flowing&&b.buffer.length?b.buffer[0].length:b.length;if(0>=a)return 0;if(a>b.highWaterMark){var c=a;8388608<=c?c=8388608:(c--,c|=c>>>1,c|=c>>>2,c|=c>>>4,c|=c>>>8,c|=c>>>16,c++);b.highWaterMark=c}if(a>b.length){if(b.ended)return b.length;b.needReadable=
!0;return 0}return a}function g(a){var c=a._readableState;c.needReadable=!1;c.emittedReadable||(E("emitReadable",c.flowing),c.emittedReadable=!0,c.sync?A(b,a):b(a))}function b(a){E("emit readable");a.emit("readable");u(a)}function c(a,b){for(var c=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(E("maybeReadMore read 0"),a.read(0),c!==b.length);)c=b.length;b.readingMore=!1}function e(a){return function(){var b=a._readableState;E("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;
0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,u(a))}}function n(a){E("readable nexttick read 0");a.read(0)}function t(a,b){b.reading||(E("resume read 0"),a.read(0));b.resumeScheduled=!1;a.emit("resume");u(a);b.flowing&&!b.reading&&a.read(0)}function u(a){var b=a._readableState;E("flow",b.flowing);if(b.flowing){do var c=a.read();while(null!==c&&b.flowing)}}function v(a,b){var c=b.buffer,e=b.length,d=!!b.decoder;b=!!b.objectMode;if(0===c.length)return null;if(0===e)e=null;else if(b)e=
c.shift();else if(!a||a>=e)e=d?c.join(""):1===c.length?c[0]:C.concat(c,e),c.length=0;else if(a<c[0].length)b=c[0],e=b.slice(0,a),c[0]=b.slice(a);else if(a===c[0].length)e=c.shift();else for(var e=d?"":new C(a),g=0,f=0,h=c.length;f<h&&g<a;f++){b=c[0];var l=Math.min(a-g,b.length);d?e+=b.slice(0,l):b.copy(e,g,0,l);l<b.length?c[0]=b.slice(l):c.shift();g+=l}return e}function y(a){var b=a._readableState;if(0<b.length)throw Error("endReadable called on non-empty stream");b.endEmitted||(b.ended=!0,A(r,b,
a))}function r(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function x(a,b){for(var c=0,e=a.length;c<e;c++)b(a[c],c)}k.exports=f;var A=a(212),z=a(213),C=a(214).Buffer;f.ReadableState=m;a(201);var B;try{B=a(209)}catch(J){}finally{B||(B=a(201).EventEmitter)}var C=a(214).Buffer,D=a(218);D.inherits=a(200);var G=a(219),E;E=G&&G.debuglog?G.debuglog("stream"):function(){};var F;D.inherits(f,B);var H;f.prototype.push=function(a,b){var c=this._readableState;c.objectMode||
"string"!==typeof a||(b=b||c.defaultEncoding,b!==c.encoding&&(a=new C(a,b),b=""));return h(this,c,a,b,!1)};f.prototype.unshift=function(a){return h(this,this._readableState,a,"",!0)};f.prototype.isPaused=function(){return!1===this._readableState.flowing};f.prototype.setEncoding=function(b){F||(F=a(223).StringDecoder);this._readableState.decoder=new F(b);this._readableState.encoding=b;return this};f.prototype.read=function(a){E("read",a);var b=this._readableState,c=a;if("number"!==typeof a||0<a)b.emittedReadable=
!1;if(0===a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return E("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?y(this):g(this),null;a=l(a,b);if(0===a&&b.ended)return 0===b.length&&y(this),null;var e=b.needReadable;E("need readable",e);if(0===b.length||b.length-a<b.highWaterMark)e=!0,E("length less than watermark",e);if(b.ended||b.reading)e=!1,E("reading or ended",e);e&&(E("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=
!1);e&&!b.reading&&(a=l(c,b));e=0<a?v(a,b):null;null===e&&(b.needReadable=!0,a=0);b.length-=a;0!==b.length||b.ended||(b.needReadable=!0);c!==a&&b.ended&&0===b.length&&y(this);null!==e&&this.emit("data",e);return e};f.prototype._read=function(a){this.emit("error",Error("not implemented"))};f.prototype.pipe=function(a,b){function c(a){E("onunpipe");a===p&&f()}function g(){E("onend");a.end()}function f(){E("cleanup");a.removeListener("close",m);a.removeListener("finish",n);a.removeListener("drain",t);
a.removeListener("error",l);a.removeListener("unpipe",c);p.removeListener("end",g);p.removeListener("end",f);p.removeListener("data",h);r=!0;!x.awaitDrain||a._writableState&&!a._writableState.needDrain||t()}function h(b){E("ondata");!1===a.write(b)&&(1!==x.pipesCount||x.pipes[0]!==a||1!==p.listenerCount("data")||r||(E("false write response, pause",p._readableState.awaitDrain),p._readableState.awaitDrain++),p.pause())}function l(b){E("onerror",b);k();a.removeListener("error",l);0===a.listeners("error").length&&
a.emit("error",b)}function m(){a.removeListener("finish",n);k()}function n(){E("onfinish");a.removeListener("close",m);k()}function k(){E("unpipe");p.unpipe(a)}var p=this,x=this._readableState;switch(x.pipesCount){case 0:x.pipes=a;break;case 1:x.pipes=[x.pipes,a];break;default:x.pipes.push(a)}x.pipesCount+=1;E("pipe count=%d opts=%j",x.pipesCount,b);b=b&&!1===b.end||a===d.stdout||a===d.stderr?f:g;if(x.endEmitted)A(b);else p.once("end",b);a.on("unpipe",c);var t=e(p);a.on("drain",t);var r=!1;p.on("data",
h);if(a._events&&a._events.error)z(a._events.error)?a._events.error.unshift(l):a._events.error=[l,a._events.error];else a.on("error",l);a.once("close",m);a.once("finish",n);a.emit("pipe",p);x.flowing||(E("pipe resume"),p.resume());return a};f.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this);return this}if(!a){a=b.pipes;var c=b.pipesCount;
b.pipes=null;b.pipesCount=0;b.flowing=!1;for(var e=0;e<c;e++)a[e].emit("unpipe",this);return this}a:{for(var e=b.pipes,c=0,d=e.length;c<d;c++)if(e[c]===a){e=c;break a}e=-1}if(-1===e)return this;b.pipes.splice(e,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this);return this};f.prototype.on=function(a,b){b=B.prototype.on.call(this,a,b);"data"===a&&!1!==this._readableState.flowing&&this.resume();"readable"===a&&this.readable&&(a=this._readableState,a.readableListening||(a.readableListening=
!0,a.emittedReadable=!1,a.needReadable=!0,a.reading?a.length&&g(this,a):A(n,this)));return b};f.prototype.addListener=f.prototype.on;f.prototype.resume=function(){var a=this._readableState;a.flowing||(E("resume"),a.flowing=!0,a.resumeScheduled||(a.resumeScheduled=!0,A(t,this,a)));return this};f.prototype.pause=function(){E("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(E("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};f.prototype.wrap=
function(a){var b=this._readableState,c=!1,e=this;a.on("end",function(){E("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&e.push(a)}e.push(null)});a.on("data",function(d){E("wrapped data");b.decoder&&(d=b.decoder.write(d));b.objectMode&&(null===d||void 0===d)||!(b.objectMode||d&&d.length)||e.push(d)||(c=!0,a.pause())});for(var d in a)void 0===this[d]&&"function"===typeof a[d]&&(this[d]=function(b){return function(){return a[b].apply(a,arguments)}}(d));x(["error","close",
"destroy","pause","resume"],function(b){a.on(b,e.emit.bind(e,b))});e._read=function(b){E("wrapped _read",b);c&&(c=!1,a.resume())};return e};f._fromList=v}).call(d,a(130))},function(k,d,a){(function(a){function d(d){for(var f=Array(arguments.length-1),l=0;l<f.length;)f[l++]=arguments[l];a.nextTick(function(){d.apply(null,f)})}!a.version||0===a.version.indexOf("v0.")||0===a.version.indexOf("v1.")&&0!==a.version.indexOf("v1.8.")?k.exports=d:k.exports=a.nextTick}).call(d,a(130))},function(k,d){k.exports=
Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},function(k,d,a){(function(n){function m(){try{var a=new Uint8Array(1);a.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===a.foo()&&"function"===typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(P){return!1}}function f(a,b){if((h.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<b)throw new RangeError("Invalid typed array length");h.TYPED_ARRAY_SUPPORT?(a=new Uint8Array(b),a.__proto__=
h.prototype):(null===a&&(a=new h(b)),a.length=b);return a}function h(a,c,e){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(a,c,e);if("number"===typeof a){if("string"===typeof c)throw Error("If encoding is specified then the first argument must be a string");return b(this,a)}return l(this,a,c,e)}function l(a,b,d,g){if("number"===typeof b)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&b instanceof ArrayBuffer){b.byteLength;if(0>d||b.byteLength<
d)throw new RangeError("'offset' is out of bounds");if(b.byteLength<d+(g||0))throw new RangeError("'length' is out of bounds");b=void 0===d&&void 0===g?new Uint8Array(b):void 0===g?new Uint8Array(b,d):new Uint8Array(b,d,g);h.TYPED_ARRAY_SUPPORT?(a=b,a.__proto__=h.prototype):a=c(a,b);return a}if("string"===typeof b){g=a;a=d;if("string"!==typeof a||""===a)a="utf8";if(!h.isEncoding(a))throw new TypeError('"encoding" must be a valid string encoding');d=t(b,a)|0;g=f(g,d);b=g.write(b,a);b!==d&&(g=g.slice(0,
b));return g}return e(a,b)}function g(a){if("number"!==typeof a)throw new TypeError('"size" argument must be a number');if(0>a)throw new RangeError('"size" argument must not be negative');}function b(a,b){g(b);a=f(a,0>b?0:k(b)|0);if(!h.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;++c)a[c]=0;return a}function c(a,b){var c=0>b.length?0:k(b.length)|0;a=f(a,c);for(var e=0;e<c;e+=1)a[e]=b[e]&255;return a}function e(a,b){if(h.isBuffer(b)){var e=k(b.length)|0;a=f(a,e);if(0===a.length)return a;b.copy(a,0,0,e);return a}if(b){if("undefined"!==
typeof ArrayBuffer&&b.buffer instanceof ArrayBuffer||"length"in b)return(e="number"!==typeof b.length)||(e=b.length,e=e!==e),e?f(a,0):c(a,b);if("Buffer"===b.type&&N(b.data))return c(a,b.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function k(a){if(a>=(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+
" bytes");return a|0}function t(a,b){if(h.isBuffer(a))return a.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!==typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var e=!1;;)switch(b){case "ascii":case "latin1":case "binary":return c;case "utf8":case "utf-8":case void 0:return H(a).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*c;case "hex":return c>>>1;
case "base64":return I.toByteArray(F(a)).length;default:if(e)return H(a).length;b=(""+b).toLowerCase();e=!0}}function u(a,b,c){var e=!1;if(void 0===b||0>b)b=0;if(b>this.length)return"";if(void 0===c||c>this.length)c=this.length;if(0>=c)return"";c>>>=0;b>>>=0;if(c<=b)return"";for(a||(a="utf8");;)switch(a){case "hex":a=b;b=c;c=this.length;if(!a||0>a)a=0;if(!b||0>b||b>c)b=c;e="";for(c=a;c<b;++c)a=e,e=this[c],e=16>e?"0"+e.toString(16):e.toString(16),e=a+e;return e;case "utf8":case "utf-8":return x(this,
b,c);case "ascii":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]&127);return a;case "latin1":case "binary":a="";for(c=Math.min(this.length,c);b<c;++b)a+=String.fromCharCode(this[b]);return a;case "base64":return b=0===b&&c===this.length?I.fromByteArray(this):I.fromByteArray(this.slice(b,c)),b;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":b=this.slice(b,c);c="";for(a=0;a<b.length;a+=2)c+=String.fromCharCode(b[a]+256*b[a+1]);return c;default:if(e)throw new TypeError("Unknown encoding: "+
a);a=(a+"").toLowerCase();e=!0}}function v(a,b,c){var e=a[b];a[b]=a[c];a[c]=e}function y(a,b,c,e,d){if(0===a.length)return-1;"string"===typeof c?(e=c,c=0):2147483647<c?c=2147483647:-2147483648>c&&(c=-2147483648);c=+c;isNaN(c)&&(c=d?0:a.length-1);0>c&&(c=a.length+c);if(c>=a.length){if(d)return-1;c=a.length-1}else if(0>c)if(d)c=0;else return-1;"string"===typeof b&&(b=h.from(b,e));if(h.isBuffer(b))return 0===b.length?-1:r(a,b,c,e,d);if("number"===typeof b)return b&=255,h.TYPED_ARRAY_SUPPORT&&"function"===
typeof Uint8Array.prototype.indexOf?d?Uint8Array.prototype.indexOf.call(a,b,c):Uint8Array.prototype.lastIndexOf.call(a,b,c):r(a,[b],c,e,d);throw new TypeError("val must be string, number or Buffer");}function r(a,b,c,e,d){function g(a,b){return 1===f?a[b]:a.readUInt16BE(b*f)}var f=1,h=a.length,l=b.length;if(void 0!==e&&(e=String(e).toLowerCase(),"ucs2"===e||"ucs-2"===e||"utf16le"===e||"utf-16le"===e)){if(2>a.length||2>b.length)return-1;f=2;h/=2;l/=2;c/=2}if(d)for(e=-1;c<h;c++)if(g(a,c)===g(b,-1===
e?0:c-e)){if(-1===e&&(e=c),c-e+1===l)return e*f}else-1!==e&&(c-=c-e),e=-1;else for(c+l>h&&(c=h-l);0<=c;c--){h=!0;for(e=0;e<l;e++)if(g(a,c+e)!==g(b,e)){h=!1;break}if(h)return c}return-1}function x(a,b,c){c=Math.min(a.length,c);for(var e=[];b<c;){var d=a[b],g=null,f=239<d?4:223<d?3:191<d?2:1;if(b+f<=c){var h,l,m;switch(f){case 1:128>d&&(g=d);break;case 2:h=a[b+1];128===(h&192)&&(d=(d&31)<<6|h&63,127<d&&(g=d));break;case 3:h=a[b+1];l=a[b+2];128===(h&192)&&128===(l&192)&&(d=(d&15)<<12|(h&63)<<6|l&63,
2047<d&&(55296>d||57343<d)&&(g=d));break;case 4:h=a[b+1],l=a[b+2],m=a[b+3],128===(h&192)&&128===(l&192)&&128===(m&192)&&(d=(d&15)<<18|(h&63)<<12|(l&63)<<6|m&63,65535<d&&1114112>d&&(g=d))}}null===g?(g=65533,f=1):65535<g&&(g-=65536,e.push(g>>>10&1023|55296),g=56320|g&1023);e.push(g);b+=f}a=e.length;if(a<=O)e=String.fromCharCode.apply(String,e);else{c="";for(b=0;b<a;)c+=String.fromCharCode.apply(String,e.slice(b,b+=O));e=c}return e}function A(a,b,c){if(0!==a%1||0>a)throw new RangeError("offset is not uint");
if(a+b>c)throw new RangeError("Trying to access beyond buffer length");}function z(a,b,c,e,d,g){if(!h.isBuffer(a))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>d||b<g)throw new RangeError('"value" argument is out of bounds');if(c+e>a.length)throw new RangeError("Index out of range");}function C(a,b,c,e){0>b&&(b=65535+b+1);for(var d=0,g=Math.min(a.length-c,2);d<g;++d)a[c+d]=(b&255<<8*(e?d:1-d))>>>8*(e?d:1-d)}function B(a,b,c,e){0>b&&(b=4294967295+b+1);for(var d=0,g=Math.min(a.length-
c,4);d<g;++d)a[c+d]=b>>>8*(e?d:3-d)&255}function D(a,b,c,e,d,g){if(c+e>a.length)throw new RangeError("Index out of range");if(0>c)throw new RangeError("Index out of range");}function G(a,b,c,e,d){d||D(a,b,c,4,3.4028234663852886E38,-3.4028234663852886E38);L.write(a,b,c,e,23,4);return c+4}function E(a,b,c,e,d){d||D(a,b,c,8,1.7976931348623157E308,-1.7976931348623157E308);L.write(a,b,c,e,52,8);return c+8}function F(a){a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");a=a.replace(M,"");if(2>a.length)return"";
for(;0!==a.length%4;)a+="=";return a}function H(a,b){b=b||Infinity;for(var c,e=a.length,d=null,g=[],f=0;f<e;++f){c=a.charCodeAt(f);if(55295<c&&57344>c){if(!d){if(56319<c){-1<(b-=3)&&g.push(239,191,189);continue}else if(f+1===e){-1<(b-=3)&&g.push(239,191,189);continue}d=c;continue}if(56320>c){-1<(b-=3)&&g.push(239,191,189);d=c;continue}c=(d-55296<<10|c-56320)+65536}else d&&-1<(b-=3)&&g.push(239,191,189);d=null;if(128>c){if(0>--b)break;g.push(c)}else if(2048>c){if(0>(b-=2))break;g.push(c>>6|192,c&63|
128)}else if(65536>c){if(0>(b-=3))break;g.push(c>>12|224,c>>6&63|128,c&63|128)}else if(1114112>c){if(0>(b-=4))break;g.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return g}function J(a){for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c)&255);return b}function K(a,b,c,e){for(var d=0;d<e&&!(d+c>=b.length||d>=a.length);++d)b[d+c]=a[d];return d}var I=a(215),L=a(216),N=a(217);d.Buffer=h;d.SlowBuffer=function(a){+a!=a&&(a=0);return h.alloc(+a)};d.INSPECT_MAX_BYTES=
50;h.TYPED_ARRAY_SUPPORT=void 0!==n.TYPED_ARRAY_SUPPORT?n.TYPED_ARRAY_SUPPORT:m();d.kMaxLength=h.TYPED_ARRAY_SUPPORT?2147483647:1073741823;h.poolSize=8192;h._augment=function(a){a.__proto__=h.prototype;return a};h.from=function(a,b,c){return l(null,a,b,c)};h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0}));h.alloc=function(a,
b,c){g(a);a=0>=a?f(null,a):void 0!==b?"string"===typeof c?f(null,a).fill(b,c):f(null,a).fill(b):f(null,a);return a};h.allocUnsafe=function(a){return b(null,a)};h.allocUnsafeSlow=function(a){return b(null,a)};h.isBuffer=function(a){return!(null==a||!a._isBuffer)};h.compare=function(a,b){if(!h.isBuffer(a)||!h.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,e=b.length,d=0,g=Math.min(c,e);d<g;++d)if(a[d]!==b[d]){c=a[d];e=b[d];break}return c<e?-1:e<c?1:
0};h.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};h.concat=function(a,b){if(!N(a))throw new TypeError('"list" argument must be an Array of Buffers');if(0===a.length)return h.alloc(0);var c;if(void 0===b)for(c=b=0;c<a.length;++c)b+=a[c].length;b=h.allocUnsafe(b);var e=0;for(c=0;c<a.length;++c){var d=a[c];if(!h.isBuffer(d))throw new TypeError('"list" argument must be an Array of Buffers');
d.copy(b,e);e+=d.length}return b};h.byteLength=t;h.prototype._isBuffer=!0;h.prototype.swap16=function(){var a=this.length;if(0!==a%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var b=0;b<a;b+=2)v(this,b,b+1);return this};h.prototype.swap32=function(){var a=this.length;if(0!==a%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var b=0;b<a;b+=4)v(this,b,b+3),v(this,b+1,b+2);return this};h.prototype.swap64=function(){var a=this.length;if(0!==a%8)throw new RangeError("Buffer size must be a multiple of 64-bits");
for(var b=0;b<a;b+=8)v(this,b,b+7),v(this,b+1,b+6),v(this,b+2,b+5),v(this,b+3,b+4);return this};h.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?x(this,0,a):u.apply(this,arguments)};h.prototype.equals=function(a){if(!h.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===h.compare(this,a)};h.prototype.inspect=function(){var a="",b=d.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>
b&&(a+=" ... "));return"<Buffer "+a+">"};h.prototype.compare=function(a,b,c,e,d){if(!h.isBuffer(a))throw new TypeError("Argument must be a Buffer");void 0===b&&(b=0);void 0===c&&(c=a?a.length:0);void 0===e&&(e=0);void 0===d&&(d=this.length);if(0>b||c>a.length||0>e||d>this.length)throw new RangeError("out of range index");if(e>=d&&b>=c)return 0;if(e>=d)return-1;if(b>=c)return 1;b>>>=0;c>>>=0;e>>>=0;d>>>=0;if(this===a)return 0;var g=d-e,f=c-b,l=Math.min(g,f);e=this.slice(e,d);a=a.slice(b,c);for(b=0;b<
l;++b)if(e[b]!==a[b]){g=e[b];f=a[b];break}return g<f?-1:f<g?1:0};h.prototype.includes=function(a,b,c){return-1!==this.indexOf(a,b,c)};h.prototype.indexOf=function(a,b,c){return y(this,a,b,c,!0)};h.prototype.lastIndexOf=function(a,b,c){return y(this,a,b,c,!1)};h.prototype.write=function(a,b,c,e){if(void 0===b)e="utf8",c=this.length,b=0;else if(void 0===c&&"string"===typeof b)e=b,c=this.length,b=0;else if(isFinite(b))b|=0,isFinite(c)?(c|=0,void 0===e&&(e="utf8")):(e=c,c=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
var d=this.length-b;if(void 0===c||c>d)c=d;if(0<a.length&&(0>c||0>b)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");e||(e="utf8");for(d=!1;;)switch(e){case "hex":a:{b=Number(b)||0;e=this.length-b;c?(c=Number(c),c>e&&(c=e)):c=e;e=a.length;if(0!==e%2)throw new TypeError("Invalid hex string");c>e/2&&(c=e/2);for(e=0;e<c;++e){d=parseInt(a.substr(2*e,2),16);if(isNaN(d)){a=e;break a}this[b+e]=d}a=e}return a;case "utf8":case "utf-8":return K(H(a,this.length-b),this,b,c);case "ascii":return K(J(a),
this,b,c);case "latin1":case "binary":return K(J(a),this,b,c);case "base64":return K(I.toByteArray(F(a)),this,b,c);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=this.length-b;for(var g,f=[],h=0;h<a.length&&!(0>(e-=2));++h)g=a.charCodeAt(h),d=g>>8,g%=256,f.push(g),f.push(d);return K(f,this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+e);e=(""+e).toLowerCase();d=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=
4096;h.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&(b=a);if(h.TYPED_ARRAY_SUPPORT)b=this.subarray(a,b),b.__proto__=h.prototype;else{c=b-a;b=new h(c,void 0);for(var e=0;e<c;++e)b[e]=this[e+a]}return b};h.prototype.readUIntLE=function(a,b,c){a|=0;b|=0;c||A(a,b,this.length);c=this[a];for(var e=1,d=0;++d<b&&(e*=256);)c+=this[a+d]*e;return c};h.prototype.readUIntBE=function(a,b,c){a|=0;b|=0;c||A(a,b,this.length);
c=this[a+--b];for(var e=1;0<b&&(e*=256);)c+=this[a+--b]*e;return c};h.prototype.readUInt8=function(a,b){b||A(a,1,this.length);return this[a]};h.prototype.readUInt16LE=function(a,b){b||A(a,2,this.length);return this[a]|this[a+1]<<8};h.prototype.readUInt16BE=function(a,b){b||A(a,2,this.length);return this[a]<<8|this[a+1]};h.prototype.readUInt32LE=function(a,b){b||A(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};h.prototype.readUInt32BE=function(a,b){b||A(a,4,this.length);
return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};h.prototype.readIntLE=function(a,b,c){a|=0;b|=0;c||A(a,b,this.length);c=this[a];for(var e=1,d=0;++d<b&&(e*=256);)c+=this[a+d]*e;c>=128*e&&(c-=Math.pow(2,8*b));return c};h.prototype.readIntBE=function(a,b,c){a|=0;b|=0;c||A(a,b,this.length);c=b;for(var e=1,d=this[a+--c];0<c&&(e*=256);)d+=this[a+--c]*e;d>=128*e&&(d-=Math.pow(2,8*b));return d};h.prototype.readInt8=function(a,b){b||A(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):
this[a]};h.prototype.readInt16LE=function(a,b){b||A(a,2,this.length);a=this[a]|this[a+1]<<8;return a&32768?a|4294901760:a};h.prototype.readInt16BE=function(a,b){b||A(a,2,this.length);a=this[a+1]|this[a]<<8;return a&32768?a|4294901760:a};h.prototype.readInt32LE=function(a,b){b||A(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};h.prototype.readInt32BE=function(a,b){b||A(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};h.prototype.readFloatLE=function(a,
b){b||A(a,4,this.length);return L.read(this,a,!0,23,4)};h.prototype.readFloatBE=function(a,b){b||A(a,4,this.length);return L.read(this,a,!1,23,4)};h.prototype.readDoubleLE=function(a,b){b||A(a,8,this.length);return L.read(this,a,!0,52,8)};h.prototype.readDoubleBE=function(a,b){b||A(a,8,this.length);return L.read(this,a,!1,52,8)};h.prototype.writeUIntLE=function(a,b,c,e){a=+a;b|=0;c|=0;e||z(this,a,b,c,Math.pow(2,8*c)-1,0);e=1;var d=0;for(this[b]=a&255;++d<c&&(e*=256);)this[b+d]=a/e&255;return b+c};
h.prototype.writeUIntBE=function(a,b,c,e){a=+a;b|=0;c|=0;e||z(this,a,b,c,Math.pow(2,8*c)-1,0);e=c-1;var d=1;for(this[b+e]=a&255;0<=--e&&(d*=256);)this[b+e]=a/d&255;return b+c};h.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||z(this,a,b,1,255,0);h.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};h.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):C(this,a,b,!0);return b+2};h.prototype.writeUInt16BE=function(a,
b,c){a=+a;b|=0;c||z(this,a,b,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):C(this,a,b,!1);return b+2};h.prototype.writeUInt32LE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):B(this,a,b,!0);return b+4};h.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):B(this,a,b,!1);
return b+4};h.prototype.writeIntLE=function(a,b,c,e){a=+a;b|=0;e||(e=Math.pow(2,8*c-1),z(this,a,b,c,e-1,-e));e=0;var d=1,g=0;for(this[b]=a&255;++e<c&&(d*=256);)0>a&&0===g&&0!==this[b+e-1]&&(g=1),this[b+e]=(a/d>>0)-g&255;return b+c};h.prototype.writeIntBE=function(a,b,c,e){a=+a;b|=0;e||(e=Math.pow(2,8*c-1),z(this,a,b,c,e-1,-e));e=c-1;var d=1,g=0;for(this[b+e]=a&255;0<=--e&&(d*=256);)0>a&&0===g&&0!==this[b+e+1]&&(g=1),this[b+e]=(a/d>>0)-g&255;return b+c};h.prototype.writeInt8=function(a,b,c){a=+a;b|=
0;c||z(this,a,b,1,127,-128);h.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};h.prototype.writeInt16LE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):C(this,a,b,!0);return b+2};h.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):C(this,a,b,!1);return b+2};h.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,
4,2147483647,-2147483648);h.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):B(this,a,b,!0);return b+4};h.prototype.writeInt32BE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);h.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):B(this,a,b,!1);return b+4};h.prototype.writeFloatLE=function(a,b,c){return G(this,a,b,!0,c)};h.prototype.writeFloatBE=function(a,b,c){return G(this,a,b,!1,c)};
h.prototype.writeDoubleLE=function(a,b,c){return E(this,a,b,!0,c)};h.prototype.writeDoubleBE=function(a,b,c){return E(this,a,b,!1,c)};h.prototype.copy=function(a,b,c,e){c||(c=0);e||0===e||(e=this.length);b>=a.length&&(b=a.length);b||(b=0);0<e&&e<c&&(e=c);if(e===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&
(e=this.length);a.length-b<e-c&&(e=a.length-b+c);var d=e-c;if(this===a&&c<b&&b<e)for(e=d-1;0<=e;--e)a[e+b]=this[e+c];else if(1E3>d||!h.TYPED_ARRAY_SUPPORT)for(e=0;e<d;++e)a[e+b]=this[e+c];else Uint8Array.prototype.set.call(a,this.subarray(c,c+d),b);return d};h.prototype.fill=function(a,b,c,e){if("string"===typeof a){"string"===typeof b?(e=b,b=0,c=this.length):"string"===typeof c&&(e=c,c=this.length);if(1===a.length){var d=a.charCodeAt(0);256>d&&(a=d)}if(void 0!==e&&"string"!==typeof e)throw new TypeError("encoding must be a string");
if("string"===typeof e&&!h.isEncoding(e))throw new TypeError("Unknown encoding: "+e);}else"number"===typeof a&&(a&=255);if(0>b||this.length<b||this.length<c)throw new RangeError("Out of range index");if(c<=b)return this;b>>>=0;c=void 0===c?this.length:c>>>0;a||(a=0);if("number"===typeof a)for(e=b;e<c;++e)this[e]=a;else for(a=h.isBuffer(a)?a:H((new h(a,e)).toString()),d=a.length,e=0;e<c-b;++e)this[e+b]=a[e%d];return this};var M=/[^+\/0-9A-Za-z-_]/g}).call(d,function(){return this}())},function(k,d){function a(a){var d=
a.length;if(0<d%4)throw Error("Invalid string. Length must be a multiple of 4");return"="===a[d-2]?2:"="===a[d-1]?1:0}function n(a,d,b){for(var c=[],e=d;e<b;e+=3)d=(a[e]<<16)+(a[e+1]<<8)+a[e+2],c.push(m[d>>18&63]+m[d>>12&63]+m[d>>6&63]+m[d&63]);return c.join("")}d.byteLength=function(d){return 3*d.length/4-a(d)};d.toByteArray=function(d){var g,b,c,e,l;g=d.length;e=a(d);l=new h(3*g/4-e);b=0<e?g-4:g;var m=0;for(g=0;g<b;g+=4)c=f[d.charCodeAt(g)]<<18|f[d.charCodeAt(g+1)]<<12|f[d.charCodeAt(g+2)]<<6|f[d.charCodeAt(g+
3)],l[m++]=c>>16&255,l[m++]=c>>8&255,l[m++]=c&255;2===e?(c=f[d.charCodeAt(g)]<<2|f[d.charCodeAt(g+1)]>>4,l[m++]=c&255):1===e&&(c=f[d.charCodeAt(g)]<<10|f[d.charCodeAt(g+1)]<<4|f[d.charCodeAt(g+2)]>>2,l[m++]=c>>8&255,l[m++]=c&255);return l};d.fromByteArray=function(a){for(var d=a.length,b=d%3,c="",e=[],f=0,h=d-b;f<h;f+=16383)e.push(n(a,f,f+16383>h?h:f+16383));1===b?(a=a[d-1],c+=m[a>>2],c+=m[a<<4&63],c+="=="):2===b&&(a=(a[d-2]<<8)+a[d-1],c+=m[a>>10],c+=m[a>>4&63],c+=m[a<<2&63],c+="=");e.push(c);return e.join("")};
var m=[],f=[],h="undefined"!==typeof Uint8Array?Uint8Array:Array;for(k=0;64>k;++k)m[k]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k],f["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(k)]=k;f[45]=62;f[95]=63},function(k,d){d.read=function(a,d,m,f,h){var l;l=8*h-f-1;var g=(1<<l)-1,b=g>>1,c=-7;h=m?h-1:0;var e=m?-1:1,n=a[d+h];h+=e;m=n&(1<<-c)-1;n>>=-c;for(c+=l;0<c;m=256*m+a[d+h],h+=e,c-=8);l=m&(1<<-c)-1;m>>=-c;for(c+=f;0<c;l=256*l+a[d+h],h+=e,c-=8);
if(0===m)m=1-b;else{if(m===g)return l?NaN:Infinity*(n?-1:1);l+=Math.pow(2,f);m-=b}return(n?-1:1)*l*Math.pow(2,m-f)};d.write=function(a,d,m,f,h,l){var g,b=8*l-h-1,c=(1<<b)-1,e=c>>1,k=23===h?Math.pow(2,-24)-Math.pow(2,-77):0;l=f?0:l-1;var n=f?1:-1,u=0>d||0===d&&0>1/d?1:0;d=Math.abs(d);isNaN(d)||Infinity===d?(d=isNaN(d)?1:0,f=c):(f=Math.floor(Math.log(d)/Math.LN2),1>d*(g=Math.pow(2,-f))&&(f--,g*=2),d=1<=f+e?d+k/g:d+k*Math.pow(2,1-e),2<=d*g&&(f++,g/=2),f+e>=c?(d=0,f=c):1<=f+e?(d=(d*g-1)*Math.pow(2,h),
f+=e):(d=d*Math.pow(2,e-1)*Math.pow(2,h),f=0));for(;8<=h;a[m+l]=d&255,l+=n,d/=256,h-=8);f=f<<h|d;for(b+=h;0<b;a[m+l]=f&255,l+=n,f/=256,b-=8);a[m+l-n]|=128*u}},function(k,d){var a={}.toString;k.exports=Array.isArray||function(d){return"[object Array]"==a.call(d)}},function(k,d,a){(function(a){d.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===Object.prototype.toString.call(a)};d.isBoolean=function(a){return"boolean"===typeof a};d.isNull=function(a){return null===a};d.isNullOrUndefined=
function(a){return null==a};d.isNumber=function(a){return"number"===typeof a};d.isString=function(a){return"string"===typeof a};d.isSymbol=function(a){return"symbol"===typeof a};d.isUndefined=function(a){return void 0===a};d.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};d.isObject=function(a){return"object"===typeof a&&null!==a};d.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)};d.isError=function(a){return"[object Error]"===Object.prototype.toString.call(a)||
a instanceof Error};d.isFunction=function(a){return"function"===typeof a};d.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===typeof a||"undefined"===typeof a};d.isBuffer=a.isBuffer}).call(d,a(214).Buffer)},function(k,d){},function(k,d,a){function n(a){if(!(this instanceof n))return new n(a);l.call(this,a);g.call(this,a);a&&!1===a.readable&&(this.readable=!1);a&&!1===a.writable&&(this.writable=!1);this.allowHalfOpen=!0;a&&!1===a.allowHalfOpen&&
(this.allowHalfOpen=!1);this.once("end",m)}function m(){this.allowHalfOpen||this._writableState.ended||h(f,this)}function f(a){a.end()}d=Object.keys||function(a){var b=[],e;for(e in a)b.push(e);return b};k.exports=n;var h=a(212);k=a(218);k.inherits=a(200);var l=a(211),g=a(221);k.inherits(n,l);a=d(g.prototype);for(k=0;k<a.length;k++)d=a[k],n.prototype[d]||(n.prototype[d]=g.prototype[d])},function(k,d,a){function n(){}function m(a,b,c){this.chunk=a;this.encoding=b;this.callback=c;this.next=null}function f(e,
d){y=y||a(220);e=e||{};this.objectMode=!!e.objectMode;d instanceof y&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var f=e.highWaterMark,h=this.objectMode?16:16384;this.highWaterMark=f||0===f?f:h;this.highWaterMark=~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==e.decodeStrings;this.defaultEncoding=e.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=!1;this.onwrite=function(a){var e=
d._writableState,f=e.sync,h=e.writecb;e.writing=!1;e.writecb=null;e.length-=e.writelen;e.writelen=0;a?(--e.pendingcb,f?p(h,a):h(a),d._writableState.errorEmitted=!0,d.emit("error",a)):((a=c(e))||e.corked||e.bufferProcessing||!e.bufferedRequest||b(d,e),f?p(g,d,e,a,h):g(d,e,a,h))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1}function h(b){y=y||a(220);if(!(this instanceof h||this instanceof y))return new h(b);
this._writableState=new f(b,this);this.writable=!0;b&&("function"===typeof b.write&&(this._write=b.write),"function"===typeof b.writev&&(this._writev=b.writev));v.call(this)}function l(a,b,c,e,d,g,f){b.writelen=e;b.writecb=f;b.writing=!0;b.sync=!0;c?a._writev(d,b.onwrite):a._write(d,g,b.onwrite);b.sync=!1}function g(a,b,c,d){!c&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;d();e(a,b)}function b(a,b){b.bufferProcessing=!0;var c=b.bufferedRequest;if(a._writev&&c&&c.next){for(var e=
[],d=[];c;)d.push(c.callback),e.push(c),c=c.next;b.pendingcb++;b.lastBufferedRequest=null;l(a,b,!0,b.length,e,"",function(a){for(var c=0;c<d.length;c++)b.pendingcb--,d[c](a)})}else{for(;c&&(e=c.chunk,l(a,b,!1,b.objectMode?1:e.length,e,c.encoding,c.callback),c=c.next,!b.writing););null===c&&(b.lastBufferedRequest=null)}b.bufferedRequest=c;b.bufferProcessing=!1}function c(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function e(a,b){var e=c(b);e&&(0===b.pendingcb?
(b.prefinished||(b.prefinished=!0,a.emit("prefinish")),b.finished=!0,a.emit("finish")):b.prefinished||(b.prefinished=!0,a.emit("prefinish")));return e}k.exports=h;var p=a(212),t=a(214).Buffer;h.WritableState=f;k=a(218);k.inherits=a(200);var u={deprecate:a(222)},v;try{v=a(209)}catch(r){}finally{v||(v=a(201).EventEmitter)}t=a(214).Buffer;k.inherits(h,v);var y;f.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(f.prototype,
"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(r){}})();h.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};h.prototype.write=function(a,b,c){var e=this._writableState,d=!1;"function"===typeof b&&(c=b,b=null);t.isBuffer(a)?b="buffer":b||(b=e.defaultEncoding);"function"!==typeof c&&(c=n);if(e.ended)e=c,a=Error("write after end"),this.emit("error",a),p(e,a);else{var g=
c,f=!0;t.isBuffer(a)||"string"===typeof a||null===a||void 0===a||e.objectMode||(f=new TypeError("Invalid non-string/buffer chunk"),this.emit("error",f),p(g,f),f=!1);f&&(e.pendingcb++,d=b,e.objectMode||!1===e.decodeStrings||"string"!==typeof a||(a=new t(a,d)),t.isBuffer(a)&&(d="buffer"),g=e.objectMode?1:a.length,e.length+=g,b=e.length<e.highWaterMark,b||(e.needDrain=!0),e.writing||e.corked?(g=e.lastBufferedRequest,e.lastBufferedRequest=new m(a,d,c),g?g.next=e.lastBufferedRequest:e.bufferedRequest=
e.lastBufferedRequest):l(this,e,!1,g,a,d,c),d=b)}return d};h.prototype.cork=function(){this._writableState.corked++};h.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||b(this,a))};h.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+"").toLowerCase())))throw new TypeError("Unknown encoding: "+
a);this._writableState.defaultEncoding=a};h.prototype._write=function(a,b,c){c(Error("not implemented"))};h.prototype._writev=null;h.prototype.end=function(a,b,c){var d=this._writableState;"function"===typeof a?(c=a,b=a=null):"function"===typeof b&&(c=b,b=null);null!==a&&void 0!==a&&this.write(a,b);d.corked&&(d.corked=1,this.uncork());if(!d.ending&&!d.finished){a=c;d.ending=!0;e(this,d);if(a)if(d.finished)p(a);else this.once("finish",a);d.ended=!0}}},function(k,d){(function(a){function d(d){try{if(!a.localStorage)return!1}catch(f){return!1}d=
a.localStorage[d];return null==d?!1:"true"===String(d).toLowerCase()}k.exports=function(a,f){if(d("noDeprecation"))return a;var h=!1;return function(){if(!h){if(d("throwDeprecation"))throw Error(f);d("traceDeprecation")?console.trace(f):console.warn(f);h=!0}return a.apply(this,arguments)}}}).call(d,function(){return this}())},function(k,d,a){function n(a){return a.toString(this.encoding)}function m(a){this.charLength=(this.charReceived=a.length%2)?2:0}function f(a){this.charLength=(this.charReceived=
a.length%3)?3:0}var h=a(214).Buffer,l=h.isEncoding||function(a){switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}};k=d.StringDecoder=function(a){this.encoding=(a||"utf8").toLowerCase().replace(/[-_]/,"");if(a&&!l(a))throw Error("Unknown encoding: "+a);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=
2;this.detectIncompleteChar=m;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=f;break;default:this.write=n;return}this.charBuffer=new h(6);this.charLength=this.charReceived=0};k.prototype.write=function(a){for(var b="";this.charLength;){b=a.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:a.length;a.copy(this.charBuffer,this.charReceived,0,b);this.charReceived+=b;if(this.charReceived<this.charLength)return"";a=a.slice(b,a.length);var b=this.charBuffer.slice(0,
this.charLength).toString(this.encoding),c=b.charCodeAt(b.length-1);if(55296<=c&&56319>=c)this.charLength+=this.surrogateSize,b="";else{this.charReceived=this.charLength=0;if(0===a.length)return b;break}}this.detectIncompleteChar(a);var e=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-this.charReceived,e),e-=this.charReceived);b+=a.toString(this.encoding,0,e);e=b.length-1;c=b.charCodeAt(e);return 55296<=c&&56319>=c?(c=this.surrogateSize,this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,
c,0,c),a.copy(this.charBuffer,0,0,c),b.substring(0,e)):b};k.prototype.detectIncompleteChar=function(a){for(var b=3<=a.length?3:a.length;0<b;b--){var c=a[a.length-b];if(1==b&&6==c>>5){this.charLength=2;break}if(2>=b&&14==c>>4){this.charLength=3;break}if(3>=b&&30==c>>3){this.charLength=4;break}}this.charReceived=b};k.prototype.end=function(a){var b="";a&&a.length&&(b=this.write(a));this.charReceived&&(a=this.encoding,b+=this.charBuffer.slice(0,this.charReceived).toString(a));return b}},function(k,d,
a){function n(a){this.afterTransform=function(d,b){var c=a._transformState;c.transforming=!1;var e=c.writecb;e?(c.writechunk=null,c.writecb=null,null!==b&&void 0!==b&&a.push(b),e&&e(d),d=a._readableState,d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&a._read(d.highWaterMark),d=void 0):d=a.emit("error",Error("no writecb in Transform class"));return d};this.transforming=this.needTransform=!1;this.writechunk=this.writecb=null}function m(a){if(!(this instanceof m))return new m(a);h.call(this,
a);this._transformState=new n(this);var d=this;this._readableState.needReadable=!0;this._readableState.sync=!1;a&&("function"===typeof a.transform&&(this._transform=a.transform),"function"===typeof a.flush&&(this._flush=a.flush));this.once("prefinish",function(){"function"===typeof this._flush?this._flush(function(a){f(d,a)}):f(d)})}function f(a,d){if(d)return a.emit("error",d);d=a._transformState;if(a._writableState.length)throw Error("calling transform done when ws.length != 0");if(d.transforming)throw Error("calling transform done when still transforming");
return a.push(null)}k.exports=m;var h=a(220);k=a(218);k.inherits=a(200);k.inherits(m,h);m.prototype.push=function(a,d){this._transformState.needTransform=!1;return h.prototype.push.call(this,a,d)};m.prototype._transform=function(a,d,b){throw Error("not implemented");};m.prototype._write=function(a,d,b){var c=this._transformState;c.writecb=b;c.writechunk=a;c.writeencoding=d;c.transforming||(a=this._readableState,(c.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};
m.prototype._read=function(a){a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}},function(k,d,a){function n(a){if(!(this instanceof n))return new n(a);m.call(this,a)}k.exports=n;var m=a(224);k=a(218);k.inherits=a(200);k.inherits(n,m);n.prototype._transform=function(a,d,l){l(null,a)}},function(k,d,a){k.exports=a(221)},function(k,d,a){k.exports=a(220)},function(k,d,a){k.exports=
a(224)},function(k,d,a){k.exports=a(225)},function(k,d){},function(k,d,a){function n(a){this._cbs=a||{}}k.exports=n;var m=a(192).EVENTS;Object.keys(m).forEach(function(a){if(0===m[a])a="on"+a,n.prototype[a]=function(){if(this._cbs[a])this._cbs[a]()};else if(1===m[a])a="on"+a,n.prototype[a]=function(d){if(this._cbs[a])this._cbs[a](d)};else if(2===m[a])a="on"+a,n.prototype[a]=function(d,f){if(this._cbs[a])this._cbs[a](d,f)};else throw Error("wrong number of arguments");})},function(k,d,a){var n=k.exports;
[a(233),a(239),a(240),a(241),a(242),a(243)].forEach(function(a){Object.keys(a).forEach(function(d){n[d]=a[d].bind(n)})})},function(k,d,a){function n(a){return Array.isArray(a)?a.map(n).join(""):h(a)||a.type===m.CDATA?n(a.children):a.type===m.Text?a.data:""}var m=a(203),f=a(234),h=m.isTag;k.exports={getInnerHTML:function(a,d){return a.children?a.children.map(function(a){return f(a,d)}).join(""):""},getOuterHTML:f,getText:n}},function(k,d,a){var n=a(235),m=a(236),f={__proto__:null,allowfullscreen:!0,
async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,hidden:!0,ismap:!0,loop:!0,multiple:!0,muted:!0,open:!0,readonly:!0,required:!0,reversed:!0,scoped:!0,seamless:!0,selected:!0,typemustmatch:!0},h={__proto__:null,style:!0,script:!0,xmp:!0,iframe:!0,noembed:!0,noframes:!0,plaintext:!0,noscript:!0},l={__proto__:null,area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,
track:!0,wbr:!0},g=k.exports=function(a,c){Array.isArray(a)||a.cheerio||(a=[a]);c=c||{};for(var b="",d=0;d<a.length;d++){var k=a[d];if("root"===k.type)b+=g(k.children,c);else if(n.isTag(k)){var u=c;"svg"===k.name&&(u={decodeEntities:u.decodeEntities,xmlMode:!0});var v="<"+k.name,y;y=k.attribs;var r=u;if(y){var x="",A,z=void 0;for(z in y)A=y[z],x&&(x+=" "),x=!A&&f[z]?x+z:x+(z+'="'+(r.decodeEntities?m.encodeXML(A):A)+'"');y=x}else y=void 0;y&&(v+=" "+y);if(!u.xmlMode||k.children&&0!==k.children.length){if(v+=
">",k.children&&(v+=g(k.children,u)),!l[k.name]||u.xmlMode)v+="</"+k.name+">"}else v+="/>";b+=v}else k.type===n.Directive?b+="<"+k.data+">":k.type===n.Comment?b+="\x3c!--"+k.data+"--\x3e":k.type===n.CDATA?b+="<![CDATA["+k.children[0].data+"]]\x3e":(u=k.data||"",!c.decodeEntities||k.parent&&k.parent.name in h||(u=m.encodeXML(u)),b+=u)}return b}},function(k,d){k.exports={Text:"text",Directive:"directive",Comment:"comment",Script:"script",Style:"style",Tag:"tag",CDATA:"cdata",isTag:function(a){return"tag"===
a.type||"script"===a.type||"style"===a.type}}},function(k,d,a){var n=a(237),m=a(238);d.decode=function(a,d){return(!d||0>=d?m.XML:m.HTML)(a)};d.decodeStrict=function(a,d){return(!d||0>=d?m.XML:m.HTMLStrict)(a)};d.encode=function(a,d){return(!d||0>=d?n.XML:n.HTML)(a)};d.encodeXML=n.XML;d.encodeHTML4=d.encodeHTML5=d.encodeHTML=n.HTML;d.decodeXML=d.decodeXMLStrict=m.XML;d.decodeHTML4=d.decodeHTML5=d.decodeHTML=m.HTML;d.decodeHTML4Strict=d.decodeHTML5Strict=d.decodeHTMLStrict=m.HTMLStrict;d.escape=n.escape},
function(k,d,a){function n(a){return Object.keys(a).sort().reduce(function(b,c){b[a[c]]="&"+c+";";return b},{})}function m(a){var b=[],c=[];Object.keys(a).forEach(function(a){1===a.length?b.push("\\"+a):c.push(a)});c.unshift("["+b.join("")+"]");return new RegExp(c.join("|"),"g")}function f(a){return"&#x"+a.charCodeAt(0).toString(16).toUpperCase()+";"}function h(a){var b=a.charCodeAt(0);a=a.charCodeAt(1);return"&#x"+(1024*(b-55296)+a-56320+65536).toString(16).toUpperCase()+";"}function l(a,e){function d(b){return a[b]}
return function(a){return a.replace(e,d).replace(c,h).replace(b,f)}}k=n(a(199));var g=m(k);d.XML=l(k,g);a=n(a(197));g=m(a);d.HTML=l(a,g);var b=/[^\0-\x7F]/g,c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,e=m(k);d.escape=function(a){return a.replace(e,f).replace(c,h).replace(b,f)}},function(k,d,a){function n(a){var b=Object.keys(a).join("|"),c=f(a),d=new RegExp("&(?:"+(b+"|#[xX][\\da-fA-F]+|#\\d+")+");","g");return function(a){return String(a).replace(d,c)}}function m(a,b){return a<b?1:-1}function f(a){return function(b){return"#"===
b.charAt(1)?"X"===b.charAt(2)||"x"===b.charAt(2)?g(parseInt(b.substr(3),16)):g(parseInt(b.substr(2),10)):a[b.slice(1,-1)]}}var h=a(197),l=a(198);d=a(199);var g=a(195);a=n(d);d=n(h);var b=function(){function a(a){";"!==a.substr(-1)&&(a+=";");return y(a)}for(var b=Object.keys(l).sort(m),d=Object.keys(h).sort(m),g=0,k=0;g<d.length;g++)b[k]===d[g]?(d[g]+=";?",k++):d[g]+=";";var n=new RegExp("&(?:"+d.join("|")+"|#[xX][\\da-fA-F]+;?|#\\d+;?)","g"),y=f(h);return function(b){return String(b).replace(n,a)}}();
k.exports={XML:a,HTML:b,HTMLStrict:d}},function(k,d){var a=d.getChildren=function(a){return a.children},n=d.getParent=function(a){return a.parent};d.getSiblings=function(d){var f=n(d);return f?a(f):[d]};d.getAttributeValue=function(a,d){return a.attribs&&a.attribs[d]};d.hasAttrib=function(a,d){return!!a.attribs&&hasOwnProperty.call(a.attribs,d)};d.getName=function(a){return a.name}},function(k,d){d.removeElement=function(a){a.prev&&(a.prev.next=a.next);a.next&&(a.next.prev=a.prev);if(a.parent){var d=
a.parent.children;d.splice(d.lastIndexOf(a),1)}};d.replaceElement=function(a,d){var m=d.prev=a.prev;m&&(m.next=d);if(m=d.next=a.next)m.prev=d;if(m=d.parent=a.parent)m=m.children,m[m.lastIndexOf(a)]=d};d.appendChild=function(a,d){d.parent=a;1!==a.children.push(d)&&(a=a.children[a.children.length-2],a.next=d,d.prev=a,d.next=null)};d.append=function(a,d){var m=a.parent,f=a.next;d.next=f;d.prev=a;a.next=d;d.parent=m;f?(f.prev=d,m&&(a=m.children,a.splice(a.lastIndexOf(f),0,d))):m&&m.children.push(d)};
d.prepend=function(a,d){var m=a.parent;if(m){var f=m.children;f.splice(f.lastIndexOf(a),0,d)}a.prev&&(a.prev.next=d);d.parent=m;d.prev=a.prev;d.next=a;a.prev=d}},function(k,d,a){function n(a,b,c,e){for(var d=[],g,f=0,h=b.length;f<h&&!(a(b[f])&&(d.push(b[f]),0>=--e))&&!(g=b[f].children,c&&g&&0<g.length&&(g=n(a,g,c,e),d=d.concat(g),e-=g.length,0>=e));f++);return d}function m(a,b){for(var c=null,e=0,d=b.length;e<d&&!c;e++)l(b[e])&&(a(b[e])?c=b[e]:0<b[e].children.length&&(c=m(a,b[e].children)));return c}
function f(a,b){for(var c=0,e=b.length;c<e;c++)if(l(b[c])&&(a(b[c])||0<b[c].children.length&&f(a,b[c].children)))return!0;return!1}function h(a,b){for(var c=[],e=0,d=b.length;e<d;e++)l(b[e])&&(a(b[e])&&c.push(b[e]),0<b[e].children.length&&(c=c.concat(h(a,b[e].children))));return c}var l=a(203).isTag;k.exports={filter:function(a,b,c,e){Array.isArray(b)||(b=[b]);"number"===typeof e&&isFinite(e)||(e=Infinity);return n(a,b,!1!==c,e)},find:n,findOneChild:function(a,b){for(var c=0,e=b.length;c<e;c++)if(a(b[c]))return b[c];
return null},findOne:m,existsOne:f,findAll:h}},function(k,d,a){function n(a,d){return"function"===typeof d?function(b){return b.attribs&&d(b.attribs[a])}:function(b){return b.attribs&&b.attribs[a]===d}}function m(a,d){return function(b){return a(b)||d(b)}}k=a(203);var f=d.isTag=k.isTag;d.testElement=function(a,d){for(var b in a)if(a.hasOwnProperty(b))if("tag_name"===b){if(!f(d)||!a.tag_name(d.name))return!1}else if("tag_type"===b){if(!a.tag_type(d.type))return!1}else if("tag_contains"===b){if(f(d)||
!a.tag_contains(d.data))return!1}else if(!d.attribs||!a[b](d.attribs[b]))return!1;return!0};var h={tag_name:function(a){return"function"===typeof a?function(d){return f(d)&&a(d.name)}:"*"===a?f:function(d){return f(d)&&d.name===a}},tag_type:function(a){return"function"===typeof a?function(d){return a(d.type)}:function(d){return d.type===a}},tag_contains:function(a){return"function"===typeof a?function(d){return!f(d)&&a(d.data)}:function(d){return!f(d)&&d.data===a}}};d.getElements=function(a,d,b,c){var e=
Object.keys(a).map(function(b){var c=a[b];return b in h?h[b](c):n(b,c)});return 0===e.length?[]:this.filter(e.reduce(m),d,b,c)};d.getElementById=function(a,d,b){Array.isArray(d)||(d=[d]);return this.findOne(n("id",a),d,!1!==b)};d.getElementsByTagName=function(a,d,b,c){return this.filter(h.tag_name(a),d,b,c)};d.getElementsByTagType=function(a,d,b,c){return this.filter(h.tag_type(a),d,b,c)}},function(k,d){d.removeSubsets=function(a){for(var d=a.length,f,h,l;-1<--d;){f=h=a[d];a[d]=null;for(l=!0;h;){if(-1<
a.indexOf(h)){l=!1;a.splice(d,1);break}h=h.parent}l&&(a[d]=f)}return a};var a=d.compareDocumentPosition=function(a,d){var f=[],h=[],l,g,b;if(a===d)return 0;for(l=a;l;)f.unshift(l),l=l.parent;for(l=d;l;)h.unshift(l),l=l.parent;for(b=0;f[b]===h[b];)b++;if(0===b)return 1;l=f[b-1];g=l.children;f=f[b];h=h[b];return g.indexOf(f)>g.indexOf(h)?l===d?20:4:l===a?10:2};d.uniqueSort=function(d){var m=d.length,f;for(d=d.slice();-1<--m;)f=d[m],f=d.indexOf(f),-1<f&&f<m&&d.splice(m,1);d.sort(function(d,f){d=a(d,
f);return d&2?-1:d&4?1:0});return d}},function(k,d,a){function n(a){this._cbs=a||{};this.events=[]}k.exports=n;var m=a(192).EVENTS;Object.keys(m).forEach(function(a){if(0===m[a])a="on"+a,n.prototype[a]=function(){this.events.push([a]);if(this._cbs[a])this._cbs[a]()};else if(1===m[a])a="on"+a,n.prototype[a]=function(d){this.events.push([a,d]);if(this._cbs[a])this._cbs[a](d)};else if(2===m[a])a="on"+a,n.prototype[a]=function(d,f){this.events.push([a,d,f]);if(this._cbs[a])this._cbs[a](d,f)};else throw Error("wrong number of arguments");
});n.prototype.onreset=function(){this.events=[];if(this._cbs.onreset)this._cbs.onreset()};n.prototype.restart=function(){if(this._cbs.onreset)this._cbs.onreset();for(var a=0,d=this.events.length;a<d;a++)if(this._cbs[this.events[a][0]]){var l=this.events[a].length;if(1===l)this._cbs[this.events[a][0]]();else if(2===l)this._cbs[this.events[a][0]](this.events[a][1]);else this._cbs[this.events[a][0]](this.events[a][1],this.events[a][2])}}},function(k,d){k.exports=function(){for(var d={},m=0;m<arguments.length;m++){var f=
arguments[m],h;for(h in f)a.call(f,h)&&(d[h]=f[h])}return d};var a=Object.prototype.hasOwnProperty},function(k,d){k.exports=function(a){return a.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}},function(k,d,a){var n=a(19),m=a(7),f=a(248),h=a(3),l=a(4),g=a(14),b=a(9);d.makeNodeComponentInstance=function(a){return n.createElement(structure_together.NodeComponent,a)};d.makeInliningComponentInstance=function(a,e,d){d=d?"object"===typeof d?d.nodetype:d:e.nodetype;a=h.STApp.the.get_wstdoc(a).stlang.forView.getInliningComponent(d,
e);if(!a)return m.dwarn(d+" has no inlining component class"),f.rspan({},"error...");var c;try{c=n.createElement(a,e)}catch(u){console.error("Error while rendering inlining of "+d+" node."),c=f.rspan({},"error...")}g.stwidgets.showMutidForms.getValue()&&e[b.SystPropNames.mutid]&&(a=f.rspan({className:"mutidbox",key:"mutidbox",style:{color:"red"}},e[b.SystPropNames.mutid]),c=f.rspan({key:e.nodeid+"inlining"},a,f.rspan({key:"separator",className:"st-mutid-contenteditable-sep"},""),c));return c};d.maybeAppendNOTEditableText=
function(a,b,d,g,h,m){l.strtriv(b)||(m&&h.push(f.rspan({key:"prefix"},m)),h.push(f.rspan({key:d+"."+a},b.value)))}},function(k,d,a){function n(a,d){return function(b,c){var e=a(b);c&&f.objextend(e,c);return d(e,b)}}function m(a,d){d&&a&&(a.className&&d.className&&(a.className+=" "+d.className,delete d.className),f.objextend(a,d))}k=a(19);var f=a(4),h=a(249);d.ra=k.DOM.a;d.rb=k.DOM.b;d.rdiv=k.DOM.div;d.rh1=k.DOM.h1;d.rh2=k.DOM.h2;d.rh3=k.DOM.h3;d.rh4=k.DOM.h4;d.rspan=k.DOM.span;d.ri=k.DOM.i;d.rimg=
k.DOM.img;d.rsup=k.DOM.sup;d.rsub=k.DOM.sub;d.rbr=k.DOM.br;d.rem=k.DOM.em;d.rhr=k.DOM.hr;d.rul=k.DOM.ul;d.rli=k.DOM.li;d.rtd=k.DOM.td;d.rtr=k.DOM.tr;d.rtable=k.DOM.table;d.rtbody=k.DOM.tbody;d.rtextarea=k.DOM.textarea;d.rinput=k.DOM.input;d.rlabel=k.DOM.label;d.roption=k.DOM.option;d.rselect=k.DOM.select;d.rbutton=k.DOM.button;d.rerror=n(function(a,d){return d?f.objextend(d,{style:{textColor:"red"},key:a}):{style:{textColor:"red"},key:a}},d.rspan);d.rhctext=n(function(a){return{className:h.CSS_CLASS_NAMES.hardcoded_text,
key:a}},d.rspan);d.asHtmlNoSanitize_InnerHTML=function(a,g,b,c,e){void 0===e&&(e=d.rspan);a=g?{key:b||a,contentEditable:!0,dangerouslySetInnerHTML:{__html:a}}:{key:b||a,dangerouslySetInnerHTML:{__html:a}};c&&m(a,c);return e(a)};d.reactAttrMerge=m},function(k,d){d.ROOT_ELEM_ID="structure-together-docview-id";d.MISSING_STRING_VAL="???";d.NODE_FOCUS_NOT_SELECT=!0;d.ReactRefreshTypesList=["full","foundChangedOnly","hangingSubtree"];d.DomElementIds={headerView:"structure-together-before-docview",docView:"structure-together-docview-id",
footerView:"structure-together-after-docview"};d.CSS_CLASS_NAMES={FlatPropEditView:"FlatPropEditView",PropLabel:"PropLabel",NodeStubOption:"NodeStubOption",NodeStubCancelOption:"NodeStubCancelOption",New_ToplevelNode_Button:"New_ToplevelNode_Button",hardcoded_text:"hardcoded_text",node_focused:"snode-focused",node_selected:"snode-selected",STNodeView_inner_container:"STNodeView-inner-container",discrete_note_ref:"discrete_note_ref",simple_inline_ref:"simple-inline-ref",force_shown:"force_shown"};
d.HTML_SANITIZE_OPTIONS={all:"all",none:"none",replace_br_with_linebreaks:"replace_br_with_linebreaks"};d.STPLUGIN_IDS={OnRefInTextHover:"OnRefInTextHover",DragulaDnD:"DragulaDnD",ContextMenu:"ContextMenu",QTips:"QTips",MarkNodeOnHover:"MarkNodeOnHover",MousetrapKeyBindings:"MousetrapKeyBindings"};d.DEFAULT_PLUGINS=new Set;d.DEFAULT_PLUGINS.add(d.STPLUGIN_IDS.OnRefInTextHover);d.DEFAULT_PLUGINS.add(d.STPLUGIN_IDS.DragulaDnD);d.DEFAULT_PLUGINS.add(d.STPLUGIN_IDS.ContextMenu);d.DEFAULT_PLUGINS.add(d.STPLUGIN_IDS.QTips);
d.DEFAULT_PLUGINS.add(d.STPLUGIN_IDS.MarkNodeOnHover);d.DEFAULT_PLUGINS.add(d.STPLUGIN_IDS.MousetrapKeyBindings)},function(k,d,a){var n=a(9),m=a(7);d.reset_render_stats=function(){window.structure_together.debug.scu_true_count=0;window.structure_together.debug.node_render_count=0;window.structure_together.debug.panel_render_count=0;window.structure_together.debug.nch_render_count=0;window.structure_together.debug.ch_render_count=0;window.structure_together.debug.inlining_render_count=0;window.structure_together.debug.uncached_node_inlining_vm_build_count=
0};d.inc_scu_true_cnt=function(){window.structure_together.debug.scu_true_count++};d.inc_node_render_cnt=function(){window.structure_together.debug.node_render_count++};d.inc_panel_render_cnt=function(){window.structure_together.debug.panel_render_count++};d.inc_nch_render_cnt=function(){window.structure_together.debug.nch_render_count++};d.inc_ch_render_cnt=function(){window.structure_together.debug.ch_render_count++};d.inc_inlining_render_cnt=function(){window.structure_together.debug.inlining_render_count++};
d.inc_uncached_node_inlining_vm_build=function(){window.structure_together.debug.uncached_node_inlining_vm_build_count++};d.show_perf_stats=function(){if(window.structure_together.logging.logTypeActive(n.LogTypes.vmbuild_and_react_perf_stats)){var a=window.structure_together.debug.scu_true_count,d=window.structure_together.debug.node_render_count,l=window.structure_together.debug.panel_render_count,g=window.structure_together.debug.ch_render_count,b=window.structure_together.debug.nch_render_count,
c=window.structure_together.debug.inlining_render_count,e=d+l+g+b+c;e>a&&m.dwarn("total_render_count > scu_count, which might mean many new react components were mounted, instead of existing components modified.");console.log("    SCU true count: "+a+"\nTotal render count: "+e+"    \n    Node render count: "+d+"\n    Panel render count: "+l+"\n    Ch render count: "+g+"\n    Nch render count: "+b+"\n    Inlining render count (wrong for first render): "+c+"\nUncached node inlining vm count: "+window.structure_together.debug.uncached_node_inlining_vm_build_count)}}},
function(k,d,a){function n(a){return"object"===typeof a&&g.objhas(a,"ifhas")}function m(a){a=a.split(c.RefableInTextMixin.TEMPLATE_PARAM_RE);for(var b=1;b<a.length-1;b+=2)a[b]=Number(a[b]);return a}function f(a){var b=[];a.forEach(function(a){"string"===typeof a?0<a.length&&b.push({self:a}):b.push(a)});return b}var h=a(7),l=a(248),g=a(4),b=a(247),c=a(6),e=a(9),p=a(3),t=a(11),u=a(188),v=new Map,y=!0,r=new Set;d.inliningFromTemplate=function(a,c,d,k,B){function x(a,b){var c;c=a.rdom[2]instanceof Array?
z(a.rdom[2]):C(a.rdom[2]);var e;!a.rdom[1].key&&b?(e.key=b,g.objextend(e,a.rdom[1])):e=a.rdom[1];switch(a.rdom[0]){case "span":return l.rspan(e,c);case "div":return l.rdiv(e,c);case "sup":return l.rsup(e,c);case "sub":return l.rsub(e,c);case "td":return l.rtd(e,c);case "tr":return l.rtr(e,c);case "table":return l.rtable(e,c);case "tbody":return l.rtbody(e,c);default:return l.rerror("unhandled case in inliningFromTemplate")}}function z(a){var b=[];a.forEach(function(a,c){(a=C(a,"elem"+c))&&b.push(a)});
return b}function A(a,b){K=K||H.ogetNodeByPermId(k);h.dremindonce("Probably should cache these calls to insertRefsIntoHTMLString");var c=u.insertRefsIntoHTMLString(a,J,H,k,!1);return c.has_ref?l.asHtmlNoSanitize_InnerHTML(c.html_with_resolved_refs,!1,b):b?l.rspan({key:b},a):l.rspan({key:a},a)}function C(a,e){if("string"===typeof a)return A(a,e);if("number"===typeof a){if(a<=c.length-1){var f=void 0;!c[a].key&&e?(f.key=e,g.objextend(f,c[a])):f=c[a];return b.makeInliningComponentInstance(B,f)}return null}if("object"===
typeof a&&g.objhas(a,"rdom"))return x(a,e);if(a instanceof Array)return a=z(a),l.rspan({key:"rendered_template"+(e?e:"")},a);if(n(a))return h.dassert(n(a)),e=a.ifhas<c.length?C(a.template,e):null,e;if("object"===typeof a&&g.objhas(a,"self"))return K=K||H.ogetNodeByPermId(k),h.dremindonce("Probably should cache these calls to insertRefsIntoHTMLString"),f=u.insertRefsIntoHTMLString(a.self,J,H,k,!1),e=f.has_ref?u.renderUnsanitizedHTMLStringAsRef(f.html_with_resolved_refs,d,e):u.renderSimpleInlineRefWithReact(d,
a.self,e),e;if("object"===typeof a&&g.objhas(a,"ref"))return(f=H.refManager.ogetRefableInTextNodeByMutid(k,a.ref))?(a=t.pickRawDisplay(f,1),e=u.renderUnsanitizedHTMLStringAsRef(a,f.oid,e)):e=A(a.ref,e),e;throw Error();}var H=p.STApp.the.main_display_rstdoc,J=H.refManager.mutid_regex,K,I=v.get(a);if(!I)try{I=JSON.parse(a),v.set(a,I)}catch(M){console.error("Error parsing json display template: ",a);if(y&&0<=a.indexOf("@@")&&!r.has(d))try{var L=m(a),N=JSON.stringify(f(L)),O=confirm(e.SystPropNames.html_template+
" of node "+d+" appears to be an old-style "+("display template string:\n"+a+"\nDo you want to convert it to the following?\n")+N);O?(p.STApp.the.main_display_wstdoc.ogetNodeByPermId(d).setExistingStrPropVal(e.SystPropNames.html_template,N),r.add(d)):(O=confirm("Click ok to not ask to convert again for this session"))&&(y=!1)}catch(Q){}return null}return C(I)}},function(k,d,a){var n=a(7),m=a(4);d.richStringLength=function(a){if(m.triv(a))return 0;if("string"===typeof a)return a.length;if(m.nottriv(a.value)){if("string"===
typeof a.value)return a.value.length;if("number"===typeof a.value)return n.dwarn("\nI didn't think this should be happening.\n"),a.value.toString().length}n.dlog(typeof a,a);n.weakassert(!1,"Unhandled: ",a);return 0};d.isHeightOne=function(a){if(!a.ch)return!1;for(var d=0;d<a.ch.length;d++)if(a.ch[d]&&a.ch[d].ch)return!1;return!0}},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}();k=a(18);var m=a(248),f=a(17),h=a(9);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){return m.rh1({key:this.props.nodeid+".inlining"},f.contentEditableInlineEditing(this.props._title,this.props.nodeid,h.SystPropNames.title,this._stdocid))};return d}(k.PureReactComponent);d.TopNodeInliningComponent=
a},function(k,d,a){var n=a(7),m=a(9),f=a(4),h=m.SystPropNames.local_html_name,l=m.SystPropNames.assigned_val;k=function(){function a(a,c,e){this.stdocfileid=a;this.root=c;this.appdata=e;n.assert_nt(a,this.appdata,this.root);this.unnamed_nodestubs=this.root.get("_unnamed_nodestubs");this.named_nodestubs=this.root.get("_named_nodestubs");this.assignedval=this.root.get(l);this.local_html_name=this.root.get(h);this.expanded=this.root.get("_expanded");this.unnamed_nodestubs||(this.unnamed_nodestubs=this.appdata.getModel().createMap(),
this.root.set("_unnamed_nodestubs",this.unnamed_nodestubs));this.named_nodestubs||(this.named_nodestubs=this.appdata.getModel().createMap(),this.root.set("_named_nodestubs",this.named_nodestubs));this.assignedval||(n.dlog("UnsharedDataKeys.assigned_val not present. Creating."),this.assignedval=this.appdata.getModel().createMap(),this.root.set(l,this.assignedval));this.local_html_name||(n.dlog("UnsharedDataKeys.local_html_name not present. Creating."),this.local_html_name=this.appdata.getModel().createMap(),
this.root.set(h,this.local_html_name));this.expanded||(n.dlog("UnsharedDataKeys.expanded_nodes not present. Creating."),this.expanded=this.appdata.getModel().createMap(),this.root.set("_expanded",this.expanded))}a.prototype.keys=function(a){var b=[];this.assignedval.has(a)?b.push(m.SystPropNames.assigned_val):this.local_html_name.has(a)&&b.push(m.SystPropNames.local_html_name);return b};a.prototype.getDispatch=function(a,c){switch(c){case m.SystPropNames.assigned_val:return this.getAssignedVal(a.oid);
case m.SystPropNames.local_html_name:return a.get_local_html_name();default:n.derr("Accessor "+c+" not handled in STDocPirvatePersistentStateViaAppData.getDispatch")}return null};a.prototype.setDispatch=function(a,c,e){switch(c){case m.SystPropNames.assigned_val:return n.dassert("number"===typeof e),this.setAssignedVal(a.oid,e);case m.SystPropNames.local_html_name:return a.set_local_html_name(e);default:n.derr("Accessor "+c+" not handled in STDocPirvatePersistentStateViaAppData.setDispatch")}};a.prototype.deleteDispatch=
function(a,c){switch(c){case m.SystPropNames.assigned_val:this.assignedval.delete(a.oid);break;case m.SystPropNames.local_html_name:this.local_html_name.delete(a.oid);break;default:n.derr("Accessor "+c+" not handled in STDocPirvatePersistentStateViaAppData.deleteDispatch")}};a.prototype.manualSave=function(){throw new f.NotYetImplemented;};a.prototype.getAssignedVal=function(a){return this.assignedval.get(a)};a.prototype.setAssignedVal=function(a,c){this.assignedval.set(a,c)};a.prototype.appendNewUnnamedNodestub=
function(a,c,e){n.assert_nt(c,a);var b=this.unnamed_nodestubs.get(c.oid),d=b?b.slice():[],g=0;if(b&&1<=b.length)for(g=b.length;0<g&&!(b[g-1][1]<=e);)--g;f.arrayInsert(d,[a,e],g);this.unnamed_nodestubs.set(c.oid,d)};a.prototype.setNewNamedNodestub=function(a,c,e){n.assert_nt(a,e,c);var b=this.named_nodestubs.get(e.oid),b=b?f.mapShallowCopy(b):new Map;b.set(a,c);this.named_nodestubs.set(e.oid,b)};a.prototype.numNodeStubs=function(a){var b=a.oid;a=this.named_nodestubs.get(b);b=this.unnamed_nodestubs.get(b);
return(null!=a?a.size:0)+(null!=b?b.length:0)};a.prototype.getUnnamedNodeStubs=function(a){return this.unnamed_nodestubs.get(a.oid)};a.prototype.getNamedNodeStubs=function(a){return this.named_nodestubs.get(a.oid)};a.prototype.removeNodeStub=function(a,c){if("number"===typeof c){var b=this.unnamed_nodestubs.get(a);b?this.unnamed_nodestubs.set(a,f.arrayCopyWithDeleteOrErr(b,c)):n.derr("INVESTIGATE")}else(b=this.named_nodestubs.get(a))?(b=_.clone(b),b.delete(c),this.named_nodestubs.set(a,b)):n.derr("INVESTIGATE")};
return a}();d.STDocUnsharedPersistentStateViaAppData=k},function(k,d,a){var n=a(5),m=a(7),f=a(4),h=a(256),l=a(9),g=a(6);d.OLD_REF_REGEXP=/\{([^{}]+)\}|(param)(\d+)/g;k=function(){function a(a){this.doc=a;this.abs_p2t=new Map;this.abs_t2pset=new Map;this.m2tset=new Map;this.pm2t=h.PairMapConstructor();this.t2m=new Map;this.m2pset=new Map;this.rel_t2pset=new Map;this.t2pset=new Map;this.strict_t2pset__notyetused=new Map;window.refmanager=this;this.wdoc=a}a.prototype.buildall=function(){this.doc.stlang.refManagerDisabled||
(m.timerStart("RefManager.buildall"),this.compute_abs(),this.compute_t2m_m2tset(),this.compute_regex(),this.compute_m2pset(),this.compute_rel_t2pset(),this.compute_t2pset(),m.timerEnd("RefManager.buildall"))};a.prototype.pointer_ids=function(){return null};Object.defineProperty(a.prototype,"mutidDelimsRequired",{get:function(){return!this.doc.top.booleans.hasVal(l.SystPropNames.require_mutid_delimiters_by_default)||!0===this.doc.top.booleans.getVal(l.SystPropNames.require_mutid_delimiters_by_default)},
enumerable:!0,configurable:!0});a.prototype.compute_m2pset_helper=function(a,b){var c=this;(a=a.match(this.mutid_regex))&&a.forEach(function(a){a=c.mutidDelimsRequired?a.substring(1,a.length-1):a;f.mapOfSetsAdd(c.m2pset,a,b.oid)})};a.prototype.compute_m2pset=function(){var a=this;this.m2pset.clear();this.doc.traversal.forEachNode(function(b){b.propkeys.ofEditableStrProps().forEach(function(c){c=b.editableStrings.getVal(c);a.compute_m2pset_helper(c,b)});b.propkeys.ofImmutableStrProps().forEach(function(c){c=
b.immutableStrings.getVal(c);a.compute_m2pset_helper(c,b)})})};a.prototype.compute_regex=function(){if(this.mutidDelimsRequired)this.mutid_regex=d.OLD_REF_REGEXP;else{var a=void 0;this.m2pset.has("")?(console.error("There is an empty mutid. This would cause problem with no mutid delimiter. EXCLUDING from regex."),a=f.mapToKeysArray.withFilterAndMap(this.m2tset,function(a){return""!==a},_.escapeRegExp)):a=f.mapToKeysArray.withMap(this.m2tset,_.escapeRegExp);this.mutid_regex=new RegExp("("+a.join("|")+
")","g")}};a.prototype.compute_t2m_m2tset=function(){var a=this;this.t2m.clear();this.m2tset.clear();this.doc.traversal.forEachRefableInTextNode(function(b){var c=b.get_mutid();c&&(a.t2m.set(b.oid,c),f.mapOfSetsAdd(a.m2tset,c,b.oid))});this.compute_regex()};a.prototype.compute_rel_t2pset=function(){var a=this;this.rel_t2pset.clear();this.t2m.forEach(function(b,c){(b=a.m2pset.get(b))&&a.rel_t2pset.set(c,b)})};a.prototype.compute_t2pset=function(){var a=this;this.t2pset.clear();this.abs_t2pset.forEach(function(b,
c){a.t2pset.set(c,_.clone(b))});this.rel_t2pset.forEach(function(b,c){a.t2pset.has(c)?(f.setUnionUpdate(a.t2pset.get(c),b),2):a.t2pset.set(c,_.clone(b))})};a.prototype.compute_abs=function(){var a=this;this.abs_p2t.clear();this.abs_t2pset.clear();this.doc.traversal.forEachRefNode(function(b){var c=b.ogetReferredToNode();c&&(a.abs_p2t.set(b.oid,c.oid),f.mapOfSetsAdd(a.abs_t2pset,c.oid,b.oid))})};a.prototype.compute_pm2t=function(){};a.prototype.okToReplaceMutidsIn=function(a,b){if(a.nclass.no_refs&&
f.arrayHas(a.nclass.no_refs,b))return!1;a=a.nclass.allowed_flatprops[b];return 7===a||4===a};a.prototype.findReplaceMutid=function(a,b,d){var c=this;this.doc.ogetNodeByPermId(a);if(!this.m2tset.has(b))m.derr("mutid "+b+" not in RefManager.m2tset. will do the find/replace anyway, but won't do check for multiple targets. also, this is an error since "+a+" should be in RefManager.m2tset("+b+")");else if(1<this.m2tset.get(b).size){var e=confirm(this.m2tset.get(b).size+" nodes have mutid '"+b+"'. \nClick Ok to change only the occurrences of '"+
b+"' that get resolved to point to node with id '"+a+"'.\nClick Cancel to change no occurrences.");if(!e)return}var g=new Set,f;f=this.mutidDelimsRequired?new RegExp("\\{"+_.escapeRegExp(b)+"\\}","g"):new RegExp(_.escapeRegExp(b));this.doc.traversal.forEachNode(function(e){var h=void 0;e.propkeys.ofEditableStrProps().forEach(function(d){if(c.okToReplaceMutidsIn(e,d)){var l=e.editableStrings.getVal(d);if(-1!==l.search(f)){if(!h){var k=c.ogetRefableInTextNodeByMutid(e,b);if(!k)return m.dlog("Found mutid "+
b+" in "+l+", but it doesn't resolve to a node."),!1;h=a===k.oid;if(!h)return m.dlog("Found mutid "+b+" in "+l+", but resolves to "+k.oid+" rather than sought "+a+", so not changing."),!1}m.dlog("found old mutid in editable string: ",l);g.add([e,d])}}return null});if(!1===h)return null;e.propkeys.ofImmutableStrProps().forEach(function(l){if(c.okToReplaceMutidsIn(e,l)){var k=e.immutableStrings.getVal(l);if(-1!==k.search(f)){if(!h){var n=c.ogetRefableInTextNodeByMutid(e,b);if(!n){m.dwarn("Trying to replace old mutid "+
b+" with new mutid "+d+" but no RefableInText node found with the old mutid.");return}n=n.oid;h=a===n;if(!h){m.dlog("Found mutid "+b+" in "+k+", but resolves to "+n+" rather than sought "+a+", so not changing.");return}}m.dlog("found old mutid in immutable string: ",k);g.add([e,l])}}return null});return null});0<g.size&&(e=confirm("Replace "+g.size+" occurrences of "+b+" with "+d+"?"))&&(this.mutidDelimsRequired?g.forEach(function(a){var b=a[0];a=a[1];var c=b.getStrPropVal(a);b.setExistingStrPropVal(a,
c.replace(f,"{"+d+"}"))}):g.forEach(function(a){var b=a[0];a=a[1];var c=b.getStrPropVal(a);b.setExistingStrPropVal(a,c.replace(f,d))}))};a.prototype.customTraversalForMutids=function(a,b){return(a=this.doc.traversal.forEachAtSiblingAndAncestorLevels(a,b))?a:this.doc.traversal.forNodeAndEachDescendantPreorderEarlyStop(b,this.doc.top)};a.prototype.ogetRefableInTextNodeByMutid=function(a,b){m.assert_nt(a,b);var c=this.m2tset.get(b);if(c){if(1===c.size){var e;c.forEach(function(a){e=a});return this.doc.ogetNodeByPermId(e)}if(0===
c.size)return f.warnonce("Todo: no possible target for mutid "+b),null;f.warnonce("todo: multiple possible targets for mutid "+b)}else return null;f.warnonce("note haven't used arg pnode_or_pid yet, since only unambiguous case handled in this new code so far.");c=n.ReadableSTDoc.idFromIdOrNode(a);if(this.pm2t.has2(c,b))return c=this.pm2t.get2(c,b),f.triv(c)?null:this.doc.ogetNodeByPermId(c);var d=this.doc.nodeFromIdOrNode(a);if((d=this.customTraversalForMutids(d,function(c){if(!c)m.dwarn("triv node node detected during ogetRefableInTextNodeByMutid("+
a+", "+b+")");else if(c.hasProp(l.SystPropNames.mutid)&&c.immutableStrings.getVal(l.SystPropNames.mutid)===b)return{val:c,contin:!1};return null}))&&d.val)return d=d.val,m.dassert(g.RefableInTextMixin.isRefableInText(d)),this.pm2t.set2(c,b,d.oid),d;this.pm2t.delete2(c,b);return null};a.prototype.mutidTransition=function(a){void 0===a&&(a=!1);var b=f.mapToKeysArray.withFilterAndMap(this.m2tset,function(a){return""!==a},_.escapeRegExp);a||b.forEach(function(a){console.log(a)});var c=new RegExp("{("+
b.join("|")+")}","g");this.wdoc.processEachString(function(a){return a.replace(c,"$1")},a)};return a}();d.RefManager=k},function(k,d,a){function n(a,b){for(var c=[],e=2;e<arguments.length;e++)c[e-2]=arguments[e];a||(c&&console.error(c),b?console.error("Failed assertion %test%\n"+b+"\n"):console.error("Failed assertion %test%\n"))}function m(){var a=new Map;a.hasPair=function(b,c){return(b=a.get(b))?b.has(c):!1};a.addPair=function(b,c,e){void 0===e&&(e=!0);var d=a.get(b);!d&&e&&(d=new Set,a.set(b,
d));d.add(c)};a.ensureHasFst=function(b){a.has(b)||a.set(b,new Set)};a.forEachPair=function(b){a.forEach(function(a,e){a.forEach(function(a){b(e,a)})})};a.toString=function(){var b="";a.forEachPair(function(a,e){b+=a.toString()+", "+e.toString()+"\n"});return b};return a}function f(a){var b=new Map,c=b.get.bind(b);b.get=function(e){var d=c(e);if(null===d||void 0===d)d=a(),b.set(e,d);return d};return b}var h=a(4),l=a(7);k=function(){function a(){this.array=[]}a.prototype.addinit=function(a){var b=
a.depth();null==this.array[b]&&(this.array[b]=new Set);this.array[b].add(a)};a.prototype.get=function(a){null==this.array[a]&&(this.array[a]=new Set);return this.array[a]};a.prototype.size=function(){return this.array.length};a.prototype.clear=function(a){this.array[a].clear()};return a}();d.DepthQueue=k;d.HashPairSetConstructor=m;k=function(){function a(){this.by_fst=m();this.by_snd=m()}a.prototype.addAncestorsOf=function(a){var b=this;l.dassert(this.by_fst.has(a));var e=[],d=this.by_fst.get(a);
for(function(a){b.by_fst.get(a).forEach(function(a){e.push(a)})}(a);0<e.length;){var g=e.pop();this.parents(g).forEach(function(c){d.has(c)||(b.addPair(a,c),e.push(c))})}};a.prototype.transitivelyClose=function(){var a=this;this.by_fst.forEach(function(b,e){a.addAncestorsOf(e)})};a.prototype.parents=function(a){return this.by_fst.get(a)};a.prototype.children=function(a){return this.by_snd.get(a)};a.prototype.oparents=function(a){return this.by_fst.get(a)};a.prototype.ochildren=function(a){return this.by_snd.get(a)};
a.prototype.has=function(a){return this.by_fst.has(a)};a.prototype.ensureHasElements=function(a){var b=this;a.forEach(function(a){b.by_fst.ensureHasFst(a);b.by_snd.ensureHasFst(a);b.addPair(a,a)})};a.prototype.addPair=function(a,c){n(a===c||this.hasPair(a,a)&&this.hasPair(c,c),"expected "+a+","+a+" or "+c+","+c+" to be in partial order.");this.by_fst.addPair(a,c,!1);this.by_snd.addPair(c,a,!1)};a.prototype.hasPair=function(a,c){return this.by_fst.hasPair(a,c)};a.prototype.forEachPair=function(a){this.by_fst.forEachPair(a)};
a.prototype.toString=function(a){void 0===a&&(a=!1);var b="";this.forEachPair(function(c,d){a&&c===d||(b+=c+" -> "+d+"\n")});return b};return a}();d.PartialOrder=k;k=function(){function a(){this.maps=new Map}a.prototype.get=function(a){if("string"===typeof a)return this.maps.get(a);for(var b=this.maps,e=0;e<a.length;e++){if(!b)return;b=b.get(a[e])}return b};a.prototype.set=function(a,c){if("string"===typeof a)this.maps.set(a,c);else{var b=this.maps;a.forEach(function(e,d){d<a.length-1?(b.has(e)||
b.set(e,new Map),b=b.get(e)):b.set(e,c)})}};return a}();d.StrTrie=k;d.PairMapConstructor=function(){var a=new Map;a.set_new=function(b){var c=new Map;a.set(b,c);return c};a.get2=function(b,c){return(b=a.get(b))?b.get(c):null};a.has2=function(b,c){return(b=a.get(b))?b.has(c):!1};a.set2=function(b,c,e){var d=a.get(b);d||(d=new Map,a.set(b,d));d.set(c,e)};a.delete2=function(b,c){(b=a.get(b))&&b.delete(c)};a.forEach2=function(b){a.forEach(function(a,e){a.forEach(function(a,c){b(a,e,c)})})};return a};
d.MapWithDefaultConstructor=f;d.PairMapWithDefaultConstructor=function(a){var b=function(){return f(function(){return a()})},c=f(b);c.get2=function(a,d){(a=c.get(a))||(a=b());return a.get(d)};return c};d.MapToListsWithBookKeepingConstructor=function(){var a=f(function(){return[]});a.deleteItem=function(b,c){b=a.get(b);if(!b)return!1;c=b.indexOf(c);if(-1===c)return!1;h.arrayDeleteOrErr(b,c);return!0};a.addItem=function(b,c){return h.mapOfArraysAdd(a,b,c)};return a}},function(k,d,a){function n(a,b,
d){void 0===d&&(d=!1);l.assert_nt(a);var c;if(!d){if(a.hasChildren()&&!a.children_collapsed)return l.dwarn("this isn't quite right. doesn't consider visibility."),c=a.getFirstChild(),l.assert_nt(c),b&&!c.isVisibleIfParentIsAndParentsChildrenExpanded()?(d=c.ogetNextSibling())?d:n(a,b,!0):c;if(!c)return n(a,b,!0)}if(a instanceof g.Top)return l.dlog("can this happen?"),null;d=a;do d=d.ogetNextSibling();while(b&&d&&!d.isVisibleIfParentIsAndParentsChildrenExpanded());return d?d:n(a.parentNode,b,!0)}function m(a){l.assert_nt(a);
return a.hasChildren()&&!a.children_collapsed?(a=a.getLastChild(),m(a)):a}function f(a,d,g){l.assert_nt(a);b.dassert(a.depth()===d);if(d===g)return a;if(a.hasChildren()&&!a.children_collapsed){var c=void 0;for(a=a.getLastChild();a&&!(c=f(a,d+1,g));)a=a.ogetPrevSibling();return c}return null}function h(a,d,g){l.assert_nt(a);b.dassert(a.depth()===d);if(d===g)return a;if(a.hasChildren()&&!a.children_collapsed){var c=void 0;for(a=a.getFirstChild();a&&!(c=h(a,d+1,g));)a=a.ogetNextSibling();return c}return null}
var l=a(7),g=a(6),b=a(4);d.verticallyNextNode=n;d.lowestDescendantNodeOrIdentity=m;d.verticallyPreviousNode=function(a,b){l.assert_nt(a);if(a instanceof g.Top)return null;var c=a;do c=c.ogetPrevSibling();while(b&&c&&!c.isVisibleIfParentIsAndParentsChildrenExpanded());return c?(a=c,c.hasChildren()?m(a):a):a.parentNode};d.nextVisibleSibling=function(a){var b=a;do b=b.ogetNextSibling();while(b&&!b.isVisibleIfParentIsAndParentsChildrenExpanded()&&b!==a);b||(a=a.parentNode)&&(b=a.getFirstChild());return b};
d.prevVisibleSibling=function(a){var b=a;do b=b.ogetPrevSibling();while(b&&!b.isVisibleIfParentIsAndParentsChildrenExpanded()&&b!==a);b||(a=a.parentNode)&&(b=a.getLastChild());return b};d.lowestInSubtreeAtDepth=f;d.verticallyPrevNodeAtParentsDepth=function(a,b){for(var c=a.depth(),d,e,g=c;a&&!d;){a=a.parentNode;g--;if(!a)break;e=a;do if((e=e.ogetPrevSibling())&&(!b||e.isVisibleIfParentIsAndParentsChildrenExpanded())&&(d=f(e,g,c-1)))break;while(e)}return d};d.highestInSubtreeAtDepth=h;d.verticallyNextNodeAtParentsDepth=
function(a,b){for(var c=a.depth(),d,e,g=c;a&&!e;){a=a.parentNode;g--;if(!a)break;d=a;do if((d=d.ogetNextSibling())&&(!b||d.isVisibleIfParentIsAndParentsChildrenExpanded())&&(e=h(d,g,c-1)))break;while(d)}return e}},function(k,d,a){var n=a(249),m=a(4),f=a(6),h=a(7),l=a(8),g=a(13),b=a(259),c=a(9),e=a(190),p=a(3),t=a(271),u=a(256),v=a(257),y=a(189),r=a(15);k=function(){return function(){}}();d.SingletonAtDocControllerLevel=k;k=function(){function a(a,b,c,d){this.stdoc=a;this.root_element_id=b;this.app_plugin_instances=
c;this.plugin_options=d;this.want_to_be_destroyed=!1;this.unnamedChildrenOrderChanged=new Set;this.controller_plugin_instances=new Map;this.controllerLevelSingletons=new Map;this.after_first_render=[];this.after_next_render=[];this.utfstate={last_focused_childident:new u.StrTrie,last_scroll_pos_before_filtering:0};d||(this.plugin_options=n.DEFAULT_PLUGINS)}Object.defineProperty(a.prototype,"docid",{get:function(){return this.stdoc.stdocid},enumerable:!0,configurable:!0});a.prototype.addAfterFirstRenderCallback=
function(a){this.after_first_render.push(a)};a.prototype.runAfterFirstRenderCallbacks=function(){this.after_first_render.forEach(function(a){return a()});this.after_first_render=[]};a.prototype.addAfterNextRenderCallback=function(a){this.after_next_render.push(a)};a.prototype.runAfterNexttRenderCallbacks=function(){this.after_next_render.forEach(function(a){return a()});this.after_next_render=[]};Object.defineProperty(a.prototype,"userMode",{get:function(){return p.STApp.the.userMode},enumerable:!0,
configurable:!0});a.prototype.maybeInitializePlugin=function(a){if(a!==n.STPLUGIN_IDS.ContextMenu||r.inEditMode()){var d=b.CONTROLLER_LEVEL_PLUGIN_CLASSES.get(a);if(d){var e=b.plugin_switches.get(a+"Checkbox");h.assert_nt(e);e.enabled()&&(h.assert_nt(d),this.controller_plugin_instances.has(a)||(h.dlogcat(c.LogTypes.plugin_notice,"Creating controller-level Plugin object for "+a+" from DocController."),this.controller_plugin_instances.set(a,new d(e,this))))}}};a.prototype.initializePlugins=function(){var a=
this;h.dlogcat(c.LogTypes.plugin_notice,"DocController needs to create Plugin objects for these:",this.plugin_options);this.plugin_options&&this.plugin_options.forEach(function(b){a.maybeInitializePlugin(b)})};a.prototype.destroyControllerLevelPlugin=function(a,c){(c=c||this.controller_plugin_instances.get(a))&&c.destroy();this.controller_plugin_instances.delete(a);a=b.CONTROLLER_LEVEL_PLUGIN_CLASSES.get(a);this.controllerLevelSingletons.delete(a)};a.prototype.destroy=function(){var a=this;this.want_to_be_destroyed=
!0;this.controller_plugin_instances.forEach(function(b,c){a.destroyControllerLevelPlugin(c,b)});m.iterForEach(this.controllerLevelSingletons.keys(),function(b){a.controllerLevelSingletons.delete(b)})};a.prototype.setControllerLevelSingleton=function(a,b){h.weakassert(!this.controllerLevelSingletons.has(a),"duplicate of some SingletonAtDocControllerLevel");this.controllerLevelSingletons.set(a,b)};a.prototype.docEventListener=function(a){var b=a.target;h.assert_nt(b);if(b)if(this.stdoc.isDetached(b)||
this.stdoc.registerDetachedSyncingObject(b),l.isEditableString(b))h.dlogcat(c.LogTypes.modelevent,"Heard "+(a.isLocal?"LOCAL ":"NON-LOCAL ")+"EditableString event: ",b,a),this.unstable_object_change_listeners.editableStrings(b,a);else if(l.isMap(b))h.dlogcat(c.LogTypes.modelevent,"batchDocEventListener sees map change:",a),this.unstable_object_change_listeners.maps(b,a);else if(l.isList(b))h.dlogcat(c.LogTypes.modelevent,"batchDocEventListener sees list change",a),this.unstable_object_change_listeners.lists(b,
a);else throw console.error(b,a),Error("shouldn't happen!");};a.prototype.batchDocEventListener=function(a){var b=this;h.dlogcat(c.LogTypes.entering,"Entering batchDocEventListener for controller with DocView "+this.view.temp_DocView_id);h.dlogcat(c.LogTypes.rootmap_event,"Rootmap event:",a);this.want_to_be_destroyed?console.warn("The unstable_object_change_listeners registered by this SimpleReactDocController should be destroyed, but they're not.\nWill return and do nothing."):1===a.events.length?
this.docEventListener(a.events[0]):(h.dlog("heard compound event:",a),a.events.forEach(function(a){b.docEventListener(a)}))};a.prototype.expandAllNodes=function(a){if(a){var b=this.stdoc.ogetNodeByPermId(a);b?this.stdoc.traversal.forNodeAndEachDescendantPreorder(function(a){a.children_collapsed=!1},b):h.derr("expandAllNodes can't find node with id "+a)}else this.stdoc.traversal.forEachNode(function(a){a.children_collapsed=!1});h.dremind("SHOULD NOT BE DOING A FULL BUILD HERE.");this.buildVMAndRender(!0,
1)};a.prototype.expandMostNodes=function(a){if(a){var b=this.stdoc.ogetNodeByPermId(a);b?this.stdoc.traversal.forNodeAndEachDescendantPreorder(function(a){!0!==a.nclass.ignore_on_expand_most&&(a.children_collapsed=!1)},b):h.derr("expandMostNodes can't find node with id "+a)}else this.stdoc.traversal.forEachNode(function(a){!0!==a.nclass.ignore_on_expand_most&&(a.children_collapsed=!1)});h.dremind("SHOULD NOT BE DOING A FULL BUILD HERE.");this.buildVMAndRender(!0,1)};a.prototype.collapseAllNodes=function(a){if(a){var b=
this.stdoc.ogetNodeByPermId(a);b?this.stdoc.traversal.forNodeAndEachDescendantPreorder(function(a){return a.children_collapsed=!0},b):h.derr("collapseMostNodes can't find node with id "+a)}else this.stdoc.traversal.forEachNode(function(a){a instanceof f.Top||(a.children_collapsed=!0)});this.buildVMAndRender(!0,1)};a.prototype.closeAllPanels=function(){$(".HideablePropertyPanel").hide();this.stdoc.traversal.forEachNode(function(a){a.utfstate.panel_hidden=!0})};a.prototype.scrollToNode=function(a){h.assert_nt(a);
this.stdoc.utfstate.filtering_nodes&&(this.stdoc.filtering.clearSearch(),this.quickClearFilteringInGUI());a.isVisible_recursive_up()?(h.ddeb("scrollToNode, node already visible"),e.animateScrollToElementWithId(y.nodeIdToDomId(a.oid))):(h.ddeb("scrollToNode, node not visible"),this.addAfterNextRenderCallback(function(){h.ddeb("scrollToNode's addAfterNextRenderCallback");a.isVisible_recursive_up()?e.animateScrollToElementWithId(y.nodeIdToDomId(a.oid)):h.ddeb("scrollToNode's addAfterNextRenderCallback, NOT moving because STILL not visible")}),
a.hasType(g.Nodetypes.Top)||(a.parentNode.expandChildrenUpToRoot(),h.ddeb("returned from expandChildrenUpToRoot"),this.updateHangingSubtree(a.oid,0,0,!0,!0)))};a.prototype.applyAction=function(a){var b=this;switch(a.name){case "ChangeSeqDisplayMode":h.dlog("ChangeSeqDisplayMode with .showing_all === "+a.showing_all);var c=this.stdoc.ogetNodeByPermId(a.nodeid);c&&(c.showing_all_in_seq=a.showing_all,this.updateSubtree(c));break;case "MoveNodeFocus":var c=p.STApp.the.nodeFocus.node,d=void 0,e;if(m.triv(c))h.dwarn("No currently focused node. Focusing hidden Top node."),
d=this.stdoc.top;else switch(a.direction_key){case "down":e=v.verticallyNextNode(c,!0);m.whileLimit(function(){return e&&!e.isVisible_recursive_up()},function(){e=v.verticallyNextNode(e,!0)},100);d=e;break;case "up":e=v.verticallyPreviousNode(c,!0);m.whileLimit(function(){return e&&!e.isVisible_recursive_up()},function(){e=v.verticallyPreviousNode(e,!0)},100);d=e;break;case "down-siblings":d=v.nextVisibleSibling(c);break;case "up-siblings":d=v.prevVisibleSibling(c);break;case "left":e=c.parentNode;
m.whileLimit(function(){return e&&!e.isVisibleIfParentIsAndParentsChildrenExpanded()},function(){return e=e.parentNode},100);if(e)d=e;else{p.STApp.the.nodeFocus.node=null;t.changeFocusInDOM(c.oid,null);return}break;case "right":c.isParentalLike()&&c.hasChildren()&&(d=(a=this.utfstate.last_focused_childident.get(c.oid))?this.stdoc.ogetNodeByPermId(a):c.getFirstChild())&&(a=p.STApp.the.controller_of_main_display_wstdoc,c.children_collapsed&&(c.children_collapsed=!1,a.updateSubtree(c,1,1)),d.isVisibleIfParentIsAndParentsChildrenExpanded()||
a.addAfterNextRenderCallback(function(){b.applyAction({name:"MoveNodeFocus",direction_key:"down"})}))}a=c?c.oid:null;d&&(p.STApp.the.nodeFocus.node=d,d.parentNode&&this.utfstate.last_focused_childident.set(d.parentNode.oid,d.oid),t.changeFocusInDOM(a,d.oid,!0));break;case "SetFocusedNode":h.derrif(a.old_nodeid!=p.STApp.the.nodeFocus.id,"a.old_nodeid !== STApp.the.focused_nodeid; this could potentially fail i suppose, but would like to know",a.old_nodeid,p.STApp.the.nodeFocus.id);if(p.STApp.the.nodeFocus.id=
a.new_nodeid)(c=p.STApp.the.nodeFocus.node.parentNode)?this.utfstate.last_focused_childident.set(c.oid,a.new_nodeid):h.derrif(a.new_nodeid!==this.stdoc.top.oid,"Newly focused node has no parent, so it SHOULD be the Top node, but it isn't.");t.changeFocusInDOM(a.old_nodeid,a.new_nodeid);break;case "TogglePanelHidden":a=this.stdoc.ogetNodeByPermId(a.nodeid);a.utfstate.panel_hidden=!a.utfstate.panel_hidden;a.utfstate.panel_hidden?p.STApp.the.controller_of_main_display_wstdoc.updateNodeShallow(a):p.STApp.the.controller_of_main_display_wstdoc.updateSubtree(a,
0,0);break;case "ToggleChildrenShown":a=this.stdoc.ogetNodeByPermId(a.nodeid);a.children_collapsed=!a.children_collapsed;p.STApp.the.controller_of_main_display_wstdoc.updateSubtree(a,1,1);break;case "ToggleNodeSelected":(a=this.stdoc.ogetNodeByPermId(a.nodeid))?a.utfstate.selected=!a.utfstate.selected:console.error("Couldn't find node that I was supposed to (de)select.")}};a.prototype.quickFilterNodesInGUI=function(){h.timerStart("quickFilterNodesInGUI");this.utfstate.last_scroll_pos_before_filtering=
$(document).scrollTop();var a=p.STApp.the.main_display_wstdoc;a.traversal.forEachNode(function(a){switch(a.utfstate.filter_status){case 3:$(y.nodeDomSelector(a.oid)+">.STNodeView-inner-container>.nodeview-without-children-and-panel").addClass("ancestor_of_filtered_in");break;case 2:$(y.nodeDomSelector(a.oid)).addClass("filtered-out");break;case 1:$(y.nodeDomSelector(a.oid)+">.STNodeView-inner-container>.nodeview-without-children-and-panel").removeClass("ancestor_of_filtered_in"),$(y.nodeDomSelector(a.oid)).removeClass("filtered-out")}});
null!=a.utfstate.zoomed_nodeid&&e.scrollToElementWithId(y.nodeIdToDomId(a.utfstate.zoomed_nodeid));h.timerEnd("quickFilterNodesInGUI")};a.prototype.quickClearFilteringInGUI=function(){h.dlog("calling quickClearFilteringInGUI");$(".filtered-out").removeClass("filtered-out");$(".ancestor_of_filtered_in").removeClass("ancestor_of_filtered_in");$(document).scrollTop(this.utfstate.last_scroll_pos_before_filtering)};return a}();d.AbstractDocController=k;d.ensureNodeInViewport=function(a){e.ensureElementInViewport($(y.nodeDomSelector(a.oid)))}},
function(k,d,a){k=a(260);var n=a(263),m=a(266),f=a(267),h=a(268),l=a(270),g=a(261);a=a(249);d.TAB_LEVEL_PLUGIN_CLASSES=new Map;d.CONTROLLER_LEVEL_PLUGIN_CLASSES=new Map;d.CONTROLLER_LEVEL_PLUGIN_CLASSES.set(a.STPLUGIN_IDS.OnRefInTextHover,m.OnRefInTextHoverFeature);d.CONTROLLER_LEVEL_PLUGIN_CLASSES.set(a.STPLUGIN_IDS.DragulaDnD,k.DragulaDnDFeature);d.CONTROLLER_LEVEL_PLUGIN_CLASSES.set(a.STPLUGIN_IDS.ContextMenu,n.ContextMenuFeature);d.CONTROLLER_LEVEL_PLUGIN_CLASSES.set(a.STPLUGIN_IDS.QTips,h.QTipFeature);
d.TAB_LEVEL_PLUGIN_CLASSES.set(a.STPLUGIN_IDS.MarkNodeOnHover,f.MarkNodeOnHoverFeature);d.TAB_LEVEL_PLUGIN_CLASSES.set(a.STPLUGIN_IDS.MousetrapKeyBindings,l.MousetrapKeyBindingsFeature);d.plugin_switches=new Map;d.TAB_LEVEL_PLUGIN_CLASSES.forEach(function(a,c){d.plugin_switches.set(c+"Checkbox",new g.STPluginSwitch(c+"Checkbox"))});d.CONTROLLER_LEVEL_PLUGIN_CLASSES.forEach(function(a,c){d.plugin_switches.set(c+"Checkbox",new g.STPluginSwitch(c+"Checkbox"))})},function(k,d,a){var n=this&&this.__extends||
function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}(),m=a(4),f=a(6),h=a(7),l=a(8);k=a(261);var g=a(9);a=function(a){function b(c,d){var e=a.call(this,c)||this;e.handle_within_container_move_easy=function(a,b,c,d){h.dassert(c===b);e.handle_move_easy(a,b,c,d)};
e.handle_move_easy=function(a,b,c,d){var k=e.view();if(k)if(h.assert_nt(a,b,c),a&&b&&c){var n=$(c),p=$(b),t=k.elementToNode(n);d=k.elementToNode(p);h.dassert(t instanceof f.ParentalNode&&d instanceof f.ParentalNode,"ERROR",n,p,t,d);var n=t.lists.getVal(g.SystPropNames.ch),r=d.lists.getVal(g.SystPropNames.ch),p=p.children();a=k.elementToNode(a);h.assert_nt(a);a=a.oid;h.dlog("permid of the element we're moving: ",a);for(var y=-1,u=-1,v,F=0;F<n.length;F++)v=l.get_object_id(n.get(F)),v===a&&(y=F);h.dassert(!m.triv(y),
"Didn't find node-to-move with permid "+a+" among the children of the source parent node "+t.oid);for(F=0;F<p.length;F++)v=k.elementToNode(p[F]),h.assert_nt(v),v=v.oid,v===a&&(u=F);h.dassert(!m.triv(u),"Didn't find shadow element for node-to-move with permid "+a+" among the children of the target parent node "+d.oid);c===b&&y<u&&(u+=1);e.control.unnamedChildrenOrderChanged.add(t.oid);e.control.unnamedChildrenOrderChanged.add(d.oid);e.drake.cancel(!0);u>=r.length+1?(console.warn("Can't do move because target index "+
u+" is more than the length of the target list "+r.length+". Harmless if caused by trying to drop beneath a 'drop...' faux-node."),e.drake.cancel(!0)):(h.dassert(y<n.length),h.dlogif(c===b,"Doing move: "+y+" --\x3e "+u),h.dlogif(c!==b,"Doing move: src["+y+"] --\x3e trg["+u+"]"),n.moveToList(y,r,u),c!==b&&(b=e.control.stdoc.ogetNodeByPermId(a),h.assert_nt(b),e.control.stdoc.setParentNode(b,d)))}else h.derr("undefined args to handle_move_easy");else h.derr("handle_move_easy called when plugin has no doc view")};
e.NOT_CURRENTLY_USED_handle_possibly_multiple_within_container_moves=function(a){var c=e.view(),d=$(a);a=c.elementToNode(d);h.dassert(a instanceof f.ParentalNode);var l=d.children(),d=a.lists.getVal(g.SystPropNames.ch);h.dassert(l.length===d.length,"lengths "+d.length+" "+l.length);for(var k=Array(d.length),n=Array(l.length),p=0;p<k.length;p++)k[p]=d.get(p).id;for(p=0;p<n.length;p++){var t=l[p],u=c.elementToNode(t);if(u)n[p]=u.oid;else throw console.error(t),Error("No node found for element: "+t.toString());
}_.isEqual(k,n)||(c=m.calcBestMoveSequence(k,n),h.dlogif(!c,"moves is null"),e.control.unnamedChildrenOrderChanged.add(a.oid),c&&b.rearrangeNodesByMoveOps(d,c))};e.control=d;d.setControllerLevelSingleton(b,e);return e}n(b,a);b.prototype.setupCall=function(){var a=this;this.drake=reactDragula({revertOnSpill:!0,isContainer:function(a){return a.classList.contains("dragula-container")},moves:function(a,b,c){return c?0<=c.className.indexOf("st-draghandle"):!1},accepts:function(b,c,d,e){return a.accepts(b,
c,d,e)}});this.drake.on("drop",function(b,c,d,e){if(c){h.assert_nt(b,d);var g=$(c);g.is("li")&&(h.dwarn("Trying to change target container..."),g=g.find(".dragula-container"),b&&(g.prepend(b),c=g[0]));a.handle_move_easy(b,c,d,e)}})};b.prototype.destroy=function(){this.control.view.$container.off("sortupdate",".ReorderableChildList");this.drake.destroy()};b.rearrangeNodesByMoveOps=function(a,b){h.dlogif(1<b.length,"Doing "+b.length+" moves: ",b);h.dlogif(1===b.length,"Doing move: "+b[0][0]+" --\x3e "+
b[0][1]);h.dassert(b.length<=a.length);b.forEach(function(b){a.move(b[0],b[1])})};b.prototype.view=function(){return this.control.view};b.prototype.accepts=function(a,b,c,d){h.assert_nt(a,b,c);var e=this.view().elementToNode(a);if(!e)return console.error("Couldn't find the node you're trying to move."),!1;var g=this.view().elementToNode(b);if(g){if(g instanceof f.ParentalNode){var l=g===e;g.forEachInPathToRootEarlyStop(function(a){return a===e?(l=!0,h.dlog("moved node "+e.oid+" appears to be in ancestor path of target node "+
g.oid),!1):!0});if(l)return!1;if(g instanceof f.Top)return!0;(a=g.canAddAnotherUnnamedChildOfGivenClass(e.getClass()))||h.dlog("target node "+g.oid+" cannot have (another) unnamed child node of type "+e.getClass()+". returning false.");return a}console.log("Target is not a parental node.");return!1}console.error("Couldn't find the new parent node.");return!1};return b}(k.STPlugin);d.DragulaDnDFeature=a},function(k,d,a){function n(a){m.dassert(h.strEndsWith(a,"Checkbox"));return a.substr(0,a.length-
8)}var m=a(7),f=a(9),h=a(4),l=a(249),g=a(262);k=function(){function a(b){this.ELEM_ID=b;this.checkboxObj=new g.WithCheckboxInputElemAndLocalStorage(b,l.DEFAULT_PLUGINS.has(this.pluginid));a.plugin_switches.set(b,this)}Object.defineProperty(a.prototype,"pluginid",{get:function(){return n(this.ELEM_ID)},enumerable:!0,configurable:!0});a.prototype.enabled=function(){return this.checkboxObj.getValue()};return a}();k.plugin_switches=new Map;d.STPluginSwitch=k;k=function(){function a(a,b){void 0===b&&(b=
!0);var c=this;this.pluginswitch=a;var d=this;this.pluginswitch.checkboxObj.onmodelchange=function(a){a?d.setupCall():(m.dlogcat(f.LogTypes.plugin_notice,"Destroying plugin "+c.ID),d.destroy())};this.pluginswitch.enabled&&b&&(m.dlogcat(f.LogTypes.plugin_notice,this.ID+".enabled returned true"),this.pluginswitch.checkboxObj.onmodelchange(!0))}Object.defineProperty(a.prototype,"ID",{get:function(){return n(this.pluginswitch.ELEM_ID)},enumerable:!0,configurable:!0});a.prototype.enabled=function(){return this.pluginswitch.enabled()};
return a}();d.STPlugin=k},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),m=a(4),f=a(7),h=a(7);k=function(){function a(a,b,c){void 0===c&&(c={});var d=this;this.id=a;this.opt=c;this.elem=document.getElementById(a);
f.assert_nt(this.elem);null==store.get(this.id)&&(f.dwarn("Nothing stored for "+a),this.setValue(b));this.syncInput();this.opt.onmodelchange&&(this.onmodelchange=this.opt.onmodelchange);this.elem.onchange=function(a){d.onchange(a);if(d.onmodelchange)d.onmodelchange(d.getValue())}}a.prototype.syncInput=function(){var a=store.get(this.id);this.elem.value=a;if(this.opt&&this.opt.onsync)this.opt.onsync(a)};a.prototype.getValue=function(){return store.get(this.id)};a.prototype.setValue=function(a){f.dwarn("Setting "+
this.id+" to "+a);store.set(this.id,a);this.syncInput()};a.prototype.hide=function(){$(this.elem).hide();$("label[for="+this.elem.id+"]").hide()};a.prototype.show=function(){$(this.elem).show();$("label[for="+this.elem.id+"]").show()};a.prototype.disable=function(){this.elem.disabled=!0};return a}();d.WithInputElemAndLocalStorage=k;a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.onchange=function(a){this.setValue(a.target.value)};return d}(k);d.WithStringInputElemAndLocalStorage=
a;a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.onchange=function(a){this.setValue(Number(a.target.value))};d.prototype.syncInput=function(){var a=store.get(this.id);this.elem.value=a;if(this.opt&&this.opt.onsync)this.opt.onsync(a)};return d}(k);d.WithNumberInputElemAndLocalStorage=a;a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.onchange=function(a){f.dwarn("onchange...",a);this.setValue(a.target.checked)};
d.prototype.toggle=function(){this.setValue(!this.getValue())};d.prototype.syncInput=function(){var a=store.get(this.id);h.dassert(!0===a||!1===a,a);if(this.elem){if(this.elem.checked=a,this.opt&&this.opt.onsync)this.opt.onsync(a)}else console.error("...")};return d}(k);d.WithCheckboxInputElemAndLocalStorage=a;k=function(a){function d(b,c,d,g){var e=a.call(this,b,c,g)||this;e.elem.onclick=function(a){var b=d.indexOf(e.getValue()),b=b+1;b>=d.length&&(b=0);e.setValue(d[b]);if(e.opt&&e.opt.onclick)e.opt.onclick(a)};
return e}n(d,a);d.prototype.onchange=function(a){throw Error("Button onchange event. Thought this couldn't happen.");};return d}(k);d.WithToggleButtonInputElemAndLocalStorage=k;k=function(){function a(a,b,c){var d=this;this.select_elem_id=a;this.opt=c;this.elem=document.getElementById(a);null==store.get(this.select_elem_id)&&(this.value=b);this.opt.fixed_options?this.opt.fixed_options.forEach(function(a){var b=document.createElement("option");b.value=a;b.text=a;d.elem.appendChild(b)}):this.syncOptions();
this.syncInput();this.elem.onchange=function(a){d.value=a.target.value};this.elem.onchange=void 0!=c.onmodelchange?function(a){console.log("called onchange (on dom change, and then onmodelchange)");d.value=a.target.value;c.onmodelchange(d.value)}:function(a){console.log("called onchange (on dom change)");d.value=a.target.value}}a.prototype.syncInput=function(){this.elem.value=store.get(this.select_elem_id)};a.prototype.syncOptions=function(){var a=this;if(this.opt.fixed_options)throw Error("Doesn't make sense when using fixed_options");
var b=_.map(this.elem.children,function(a){return a.text}),c=this.possible_values;m.arrEqualShallow(b,c)||(b.forEach(function(b,c){a.elem.remove(c)}),c.forEach(function(b){var c=document.createElement("option");c.value=b;c.text=b;a.elem.appendChild(c)}))};Object.defineProperty(a.prototype,"value",{get:function(){return store.get(this.select_elem_id)},set:function(a){f.weakassert(m.arrayHas(this.possible_values,a),"Value "+a+" not in this.possible_values "+this.possible_values);store.set(this.select_elem_id,
a);this.syncInput();if(this.opt.onmodelchange&&this.value!==a)this.opt.onmodelchange(a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"possible_values",{get:function(){if(this.opt.fixed_options)return this.opt.fixed_options;f.assert_nt(this.opt.local_storage_options_id);return store.get(this.opt.local_storage_options_id)},set:function(a){if(this.opt.fixed_options)throw Error("Doesn't make sense when using fixed_options");f.assert_nt(this.opt.local_storage_options_id);store.set(this.opt.local_storage_options_id,
a);this.syncInput()},enumerable:!0,configurable:!0});a.prototype.hide=function(){$(this.elem).hide()};a.prototype.show=function(){$(this.elem).show()};return a}();d.WithSelectAndLocalStorage=k},function(k,d,a){function n(a,c,d){c.name?a[c.name]=c:(b.assert_nt(d),a[d]=c)}var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=
b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),f=a(264),h=a(249),l=a(6),g=a(265),b=a(7),c=a(9);k=a(261);var e=a(4),p=a(189);a=function(a){function d(e,g){e=a.call(this,e)||this;e.controller=g;e.active=!1;b.dlogcat(c.LogTypes.entering,"Entering ContextMenuFeature constructor with controller with DocView "+g.view.temp_DocView_id);e.stdoc=g.stdoc;e.view=g.view;g.setControllerLevelSingleton(d,e);return e}m(d,a);d.prototype.destroy=function(){this.active=!1;$.contextMenu&&
$.hasOwnProperty("contextMenu")&&$.contextMenu("destroy");this.view.$container.contextMenu&&delete this.view.$container.contextMenu};d.prototype.loadExternalJSLibaries_then_setupCall=function(a){var e=this;b.dlogcat(c.LogTypes.plugin_notice,"In ContextMenuFeature.loadExternalJSLibaries_then_setupCall with jqueryui_already_loaded == "+a);d.loadExternalJSLibaries(a,function(){b.dlogcat(c.LogTypes.plugin_notice,"should be calling `ContextMenuFeature.setupCall()'");return e.setupCall()})};d.prototype.appendDevOptions=
function(a,b,c){var e=this,g={};d.CONTEXTMENU_DEV_OPTIONS_FOLDED?(g={},n(a,{name:"debug...",items:g})):g=a;n(g,{name:"Recompute VM under this node, then update state",callback:function(){e.controller.updateSubtree(b)}});n(g,{name:"Show node VM",callback:function(){e.controller.computeAndShowVM(b)}});n(g,{name:"Show cached node VM",callback:function(){e.controller.showCachedVM(b)}});n(g,{name:"Show <li> element in console",callback:function(){console.log(c[0])}});n(g,{name:"Show node in console",callback:function(){console.log(b);
console.log(b.toString())}});n(g,{name:"Show node's short-json (pretty-printed)",callback:function(){b.printShortJson()}});n(g,{name:"Show node's google-json (pretty-printed)",callback:function(){b.printGoogleJson()}});g===a&&n(g,"-","devopts-sep")};d.prototype.add_item_maybe_nested=function(a,c){var d=this.stdoc.stlang.inverted_nodetype_choice_hierachy,g=c.nodetype;d&&g?d[g]?(d=d[g],a[d]?(a[d].items||(a[d]={name:d,items:e.mko(g,a[d])}),n(a[d].items,c)):n(a,{name:d,items:e.mko(c.name,c)})):(c.name=
g,n(a,c)):(b.ddeb("about to call addItemSimple",a,c),n(a,c))};d.prototype.maybe_reduce_height=function(a){Object.getOwnPropertyNames(a).forEach(function(a){})};d.prototype.maybe_inserted_nesting_menu=function(a,b,c){var d=this,e,g;if(0<c.length&&(n(a,"-",b+"sep"),1<c.length?(g={name:b,items:{}},n(a,g),e=g.items):e=a,c.forEach(function(a){d.add_item_maybe_nested(e,a)}),1<c.length)){_.sortBy(c,function(a){return a.name});var f={};a=Object.getOwnPropertyNames(e);a.sort();a.forEach(function(a){f[a]=e[a]});
g.items=f}};d.prototype.contextmenu_item=function(a,c,d){var g=this,f={name:c,callback:function(){b.ddeb('callback for name "'+c+'" with action:',a," and options: ",d);g.stdoc.applyEditAction(a)}};if(!d)return f;e.objextend(f,d);return f};d.prototype.setupCall=function(){d.external_js_libaries_executed?this.setupCallHelper():this.loadExternalJSLibaries_then_setupCall(!1)};d.prototype.setupCallHelper=function(){var a=this;this.active=!0;b.dlogcat(c.LogTypes.plugin_notice,"In ContextMenuFeature.setupCall");
(this.view?this.view.$container:$("#"+f.AbstractDocView.ROOT_ELEM_ID)).contextMenu({zIndex:2E4,selector:".STNodeView",build:function(c,d){function g(a,b){n(h,a,b)}function f(){g("-","sep"+k.toString());k+=1}b.dlog("contextmenu build callback called");b.timerStart("build_contextmenu");if(!a.pluginswitch.enabled())return b.derr("Shouldn't be able to get here..."),!1;var h={},k=0,m=a.view.elementToNode(c);b.assert_nt(m);a.appendDevOptions(h,m,c);var p=a.stdoc.stlang.nodeClassDispatch(m.nodetype);c=m.allowedEditActions();
var t=[],r=[],u=[],y=[],v=new Map,K=[];g(a.contextmenu_item({name:"CopyNode",nodeid:m.oid,linking:!1},"Copy node"));var I=a.controller.stdoc.utfstate.node_clipboard;g(a.contextmenu_item({name:"DeleteNode",parent:m.parentNode,label_or_index:m.getIndexOrLabel()},"Delete node"));c.forEach(function(b){switch(b.name){case "NewFlatProp":var c=b.label,d=a.menuText(c);if(d){t.push(a.contextmenu_item(b,d));break}switch(p.allowed_flatprops[c]){case 6:case 7:t.push(a.contextmenu_item(b,"Add editable string "+
c));break;case 5:case 4:case 3:t.push(a.contextmenu_item(b,"Add immutable string "+c));break;case 1:t.push(a.contextmenu_item(b,"Add boolean "+c));break;case 2:t.push(a.contextmenu_item(b,"Add number "+c));break;default:console.error("Unsupported FlatPropType")}break;case "NewNamedNode":e.mapOfArraysAdd(v,b.label,a.contextmenu_item(b,"Add "+b.nodetype+" child "+b.label,{nodetype:b.nodetype}));break;case "NewUnnamedNode":b.parent instanceof l.ParentalNode&&b.parent===m?u.push(a.contextmenu_item(b,
"Add "+b.nodetype+" child",{nodetype:b.nodetype})):r.push(a.contextmenu_item(b,"Insert "+b.nodetype+" sibling",{nodetype:b.nodetype}));break;case "NewParentNode":y.push(a.contextmenu_item(b,"New "+b.nodetype+" parent",{nodetype:b.nodetype}));break;case "ConvertNodetype":K.push(a.contextmenu_item(b,"Convert to "+b.new_nodetype));break;default:console.error("Unsupported LocalUser_SharedPersistent_ActionRequest:",b)}});I&&(m instanceof l.ParentalNode&&(c=null,m.canAddAnotherUnnamedChildOfGivenClass(I.nclass)||
(c={className:"contextmenu-item-warn"}),g(a.contextmenu_item({name:"PasteNode",parent_nodeid:m.oid},"Paste copied "+I.nodetype+" node as child",c))),m.parentNode&&(c=null,m.parentNode.canAddAnotherUnnamedChildOfGivenClass(I.nclass)||(c={className:"contextmenu-item-warn"}),g(a.contextmenu_item({name:"PasteNodeAsNextUnnamedSiblingOf",sibling_nodeid:m.oid},"Paste copied "+I.nodetype+" node as sibling",c))));0<t.length&&(t=_.sortBy(t,function(a){return a.name}),f(),t.forEach(function(a){g(a)}));0<v.size&&
(f(),v.forEach(function(b,c){var d={name:'Add "'+c+'" child',items:{}};g(d);var e=d.items,f=!1;b.forEach(function(b){a.add_item_maybe_nested(e,b);I&&I.stlang.isNodeSubtype(I.nodetype,b.nodetype)&&(f=!0)});f&&g(a.contextmenu_item({name:"PasteNodeAsNamedChild",parent_nodeid:m.oid,label:c},"Paste copied "+I.nodetype+' as "'+c+'"'))}));b.ddeb("append child items:",u);u=_.sortBy(u,function(a){return a.name});r=_.sortBy(r,function(a){return a.name});y=_.sortBy(y,function(a){return a.name});a.maybe_inserted_nesting_menu(h,
"Append child...",u);a.maybe_inserted_nesting_menu(h,"Insert sibling...",r);a.maybe_inserted_nesting_menu(h,"New parent...",y);a.maybe_inserted_nesting_menu(h,"Convert...",K);window.last_contextmenu_items=h;b.dlog(h);b.dlog(h.toString());b.timerEnd("build_contextmenu");return{items:h,autoHide:!1}}})};d.prototype.menuText=function(a){return this.stdoc.stlang.propnames_for_display[a]};d.onClickForFirstChild=function(a){a=a.oid;var c=$(p.nodeDomSelector(a));b.dlog(c);a=c.find(p.nodeDomSelector(a)+"_ch_container>.ReorderableChildList");
b.dlog("$ul:",a);if(0===a.children().length){a.show();a.parent().show();b.dlog("Adding li child to empty ul.");b.dlog("The ul:",a[0]);var d=$("<li class='temp-drag-spacer'>drop above...</li>"),c=$("<button class="+h.CSS_CLASS_NAMES.NodeStubCancelOption+">Cancel</button>");c.click(function(){d.remove()});a.append(d);d.append(c)}else b.dlog("ul already has children:",a.children())};d.loadExternalJSLibaries=function(a,e){var f="";a||(f="../../lib-independent-of-src/not-owned/js_lib/jQuery-contextMenu-2.0.0/dist/jquery.ui.position.min.js");
b.dlogcat(c.LogTypes.plugin_notice,"In ContextMenuFeatureEnabledComponent.loadExternalJSLibaries with jqueryui_already_loaded == "+a);g.jqGetScript(f,function(a,d,e){b.dlogcat(c.LogTypes.lib_load,"jquery.ui.position.js loaded (but maybe not executed)",d)}).done(function(a,f){g.jqGetScript("../../lib-independent-of-src/not-owned-modified/jquery.contextMenu-2.0.0.js",function(a,d,e){b.dlogcat(c.LogTypes.lib_load,"jquery.ContextMenu-2.0.0.js loaded (but maybe not executed)",d)}).done(function(a,g){b.dlogcat(c.LogTypes.lib_load,
["jquery.ContextMenu.js executed.",g],0);e&&e();d.external_js_libaries_executed=!0})})};return d}(k.STPlugin);a.CONTEXTMENU_DEV_OPTIONS_FOLDED=!0;a.external_js_libaries_executed=!1;d.ContextMenuFeature=a},function(k,d,a){var n=a(189);k=function(){function a(d,h){void 0===h&&(h=a.ROOT_ELEM_ID);this.temp_DocView_id=a.next_temp_DocView_id++;this.stdoc=d;this.root_element_id=h;this.$container=$("#"+this.root_element_id).addClass("DocView")}a.prototype.elementToNode=function(a){return(a=n.elementToNodeId(a))?
this.stdoc.ogetNodeByPermId(a):null};return a}();k.ROOT_ELEM_ID="structure-together-docview-id";k.next_temp_DocView_id=0;d.AbstractDocView=k},function(k,d){d.jqGetScript=function(a,d,k){void 0===k&&(k=!0);return $.ajax({url:a,dataType:"script",success:d,async:!0,cache:k})};d.loadCSS=function(a){a=$("<link rel='stylesheet' type='text/css' href='"+a+"'>");$("head").append(a)};d.$must=function(a,d){"string"!==typeof a||jQuery(a,d).length||console.error("No element found by jquery selector!",a);return jQuery.apply(this,
arguments)};d.loadJsonFromLocalFile=function(a,d){$.getJSON(a,null,d)}},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var g in d)d.hasOwnProperty(g)&&(a[g]=d[g])};return function(d,f){function g(){this.constructor=d}a(d,f);d.prototype=null===f?Object.create(f):(g.prototype=f.prototype,new g)}}();k=a(261);var m=a(189);a=function(a){function d(f,g){f=a.call(this,f)||this;f.control=g;
g.setControllerLevelSingleton(d,f);return f}n(d,a);d.prototype.view=function(){return this.control.view};d.get_element_to_highlight=function(a){return $(m.nodeDomSelector(a)+"_NodeAlwaysShownPart")};d.prototype.destroy=function(){$("body").off("mouseenter.forOnRefInTextHover").off("mouseleave.forOnRefInTextHover")};d.prototype.setupCall=function(){$("body").on("mouseenter.forOnRefInTextHover",".simple-inline-ref",function(a){(a=a.target.getAttribute("data-permid_ref"))&&d.get_element_to_highlight(a).addClass("highlighted-due-to-ref-in-text")}).on("mouseleave.forOnRefInTextHover",
".simple-inline-ref",function(a){(a=a.target.getAttribute("data-permid_ref"))&&d.get_element_to_highlight(a).removeClass("highlighted-due-to-ref-in-text")})};return d}(k.STPlugin);d.OnRefInTextHoverFeature=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)}}(),m=a(7),f=a(9);k=a(261);var h=a(4),l=a(189);a=function(a){function b(c){c=a.call(this,c)||this;h.setTheOnly(b,c);return c}n(b,a);b.hoverTargetToNodeId=function(a){return a.parentElement.getAttribute("id")};b.prototype.setupCall=function(){var a=[],d=null,g=null;$("body").on("mouseenter.forMarkNodeOnHover",".STNodeView",function(c){if((c=c.currentTarget)&&-1===c.className.lastIndexOf("STopNodeView")){var e=c.getAttribute("id");e&&(e=l.domIdToNodeId(e))&&(c=$(c),b.priorityPush(a,
e,Number(c.attr("data-depth"))),g=a[a.length-1][0],g!==d&&(d&&$(l.nodeDomSelector(d)).removeClass("marked-hovered-node"),$(l.nodeDomSelector(g)).addClass("marked-hovered-node"),d=g))}}).on("mouseleave.forMarkNodeOnHover",".STNodeView",function(c){var e=c.currentTarget.getAttribute("id");e&&(c.target.getAttribute("id"),$("#"+e).removeClass("marked-hovered-node"),d===e?(m.dwarncat(f.LogTypes.marknodeovhover,"Popping element from hover stack after mouseleave"),a.pop()):(c=b.indexInPriorityStack(a,e))&&
0<=c&&(m.dwarncat(f.LogTypes.marknodeovhover,"Removing element from hover stack after mouseleave (not necessarily from top)"),h.arrayDeleteOrErr(a,c)),d=null,0<a.length&&(d=a[a.length-1][0],$("#"+d).addClass("marked-hovered-node")))})};b.prototype.destroy=function(){$("body").off("mouseenter.forMarkNodeOnHover").off("mouseleave.forMarkNodeOnHover")};b.priorityPush=function(a,b,d){if(0===a.length)a.push([b,d]);else{for(var c=a.length-1;0<=c;c--)if(d>a[c][1]){h.arrayInsert(a,[b,d],c+1);return}h.arrayInsert(a,
[b,d],0)}};b.indexInPriorityStack=function(a,b){for(var c=0;c<a.length;c++)if(a[c][0]===b)return c;return null};return b}(k.STPlugin);d.MarkNodeOnHoverFeature=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),
m=a(7),f=a(9);k=a(261);var h=a(46),l=a(247),g=a(4),b=a(269),c=a(189);a=function(a){function d(b,c){var e=a.call(this,b,!1)||this;e.control=c;c.setControllerLevelSingleton(d,e);c.addAfterFirstRenderCallback(function(){if(b.enabled)b.checkboxObj.onmodelchange(!0)});return e}n(d,a);d.prototype.view=function(){return this.control.view};d.prototype.destroy=function(){$(document).off("mouseenter.qtip");$(".simple-inline-ref").qtip("api")?$(".simple-inline-ref").qtip("api").destroy():m.dlog("Went to destroy qtips, but none found");
this.control=null};d.prototype.setupCall=function(){var a=this;m.dwarncat(f.LogTypes.plugin_notice,"QTipTooltips setupCall");var d=$(window);$(document).on("mouseenter.qtip",".simple-inline-ref",function(e){$(e.currentTarget).qtip({style:{classes:"qtip-default qtip qtip-dark qtip-rounded"},content:{text:function(d,e){var f=$(d.currentTarget).attr("data-permid_ref");return g.triv(f)?(m.dwarn("the problem event: ",d),function(){return $("<span>error - qtip event currentTarget missing 'data-permid_ref'</span>")}):
function(){var d=a.control.stdoc,e=d.ogetNodeByPermId(f);if(e){var k=a.control.vmbuilder.newInliningVM(e);k.stdocid=d.stdocid;var n=$("<a target='_self' href='"+c.nodeDomSelector(f)+'\' style="margin-right:.5em;" class="st-go-link">go</a>');n.click(function(){e.isVisible_recursive_up()?(m.ddeb("node "+e.oid+" to go to is VISIBLE"),a.control.scrollToNode(e),a.control.applyAction(b.simpleSetFocusedNode(e.oid))):(m.ddeb("node "+e.oid+" to go to is hidden"),e.parentNode.expandChildrenUpToRoot(),g.warnonce("Disabled code to find right place in Seq when hit go link"),
a.control.applyAction(b.simpleSetFocusedNode(e.oid)),a.control.addAfterNextRenderCallback(function(){a.control.scrollToNode(e)}),a.control.updateHangingSubtree(e,0,0,!1))});var p=$("<span></span>"),n=$("<span></span>").append(n,p),d=l.makeInliningComponentInstance(d.stdocid,k);h.render(d,p[0]);return n}return $("<span>error - couldn't find node "+f+"</span>")}}},position:{viewport:d},show:{ready:!0,delay:500},hide:{event:"unfocus",fixed:!0}},e)})};return d}(k.STPlugin);d.QTipFeature=a},function(k,
d,a){var n=a(3);d.simpleSetFocusedNode=function(a){return{name:"SetFocusedNode",old_nodeid:n.STApp.the.nodeFocus.id,new_nodeid:a}};k=function(){return function(){}}();d.NodeStubChoice=k},function(k,d,a){function n(){b.dremindonce("KILL THIS FUNCTION. Should be in STDoc");var a=e.STApp.the.main_display_wstdoc;return a.utfstate.filtering_nodes?(a.revert_temp_ch_expanded(),a.filtering.unzoom_then_rebuild(),e.STApp.the.controller_of_main_display_wstdoc.quickClearFilteringInGUI(),!1):!0}function m(a){return function(){var b=
l.nottriv(e.STApp.the.nodeFocus.id);if(u.contextMenuOpen()||!b&&"right"!==a)return!0;e.STApp.the.controller_of_main_display_wstdoc.applyAction({name:"MoveNodeFocus",direction_key:a});return!1}}function f(a){return function(){var b=e.STApp.the.nodeFocus.node;return l.triv(b)&&b.isUnnamedChild()?!0:(e.STApp.the.main_display_wstdoc.applyEditAction({name:"MoveFocusedNode",direction_key:a}),!1)}}var h=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,
b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),l=a(4);k=a(261);var g=a(249),b=a(7),c=a(269),e=a(3),p=a(13),t=a(9),u=a(189),v=a(14),y=a(15),r="up down left right space shift".split(" ");a=function(a){function d(b){var c=a.call(this,b)||this;c.pluginswitch=b;l.setTheOnly(d,c);return c}h(d,a);d.prototype.addBinding=function(a,c,d){var e=
function(){l.arrayHas(r,a)||b.dlog("Mousetrap "+a+" heard.");return d.editModeOnly?y.inEditMode()?c():!0:c()};this.bindings.set(a,e);d.global?Mousetrap.bindGlobal(a,e,d.eventName):Mousetrap.bind(a,e,d.eventName)};d.prototype.destroy=function(){Mousetrap.reset();this.bindings.clear()};d.prototype.setupCall=function(){function a(){var a=e.STApp.the.nodeFocus.id;if(l.nottriv(a))if($(document.activeElement).is("body")){if(y.contentEditableEnabled()&&(a=u.nodeIdToDomId(a),a=$("#"+a).find("[contenteditable]").first(),
0<a.length))return a[0].focus(),!1}else window.setTimeout(function(){var a=$(document.activeElement);if(a=e.STApp.the.controller_of_main_display_wstdoc.view.elementToNode(a))e.STApp.the.controller_of_main_display_wstdoc.applyAction(c.simpleSetFocusedNode(a.oid)),b.ddeb("editing_node: "+a.oid)},10);return!0}var d=this;this.bindings=new Map;this.addBinding("backspace",function(){g.NODE_FOCUS_NOT_SELECT?e.STApp.the.main_display_wstdoc.removeFocused():e.STApp.the.main_display_wstdoc.removeSelected();
return!1},{doconly:!0,global:!1,editModeOnly:!0});l.argsForEach4(function(a){d.addBinding(a,m(a),{doconly:!0})},"left","right","up","down");l.argsForEach2(function(a){d.addBinding(a,"shift+up"===a?m("up-siblings"):m("down-siblings"),{doconly:!0})},"shift+up","shift+down");l.argsForEach4(function(a){d.addBinding("mod+shift+"+a,f(a),{doconly:!0,global:!1,editModeOnly:!0})},"up","down","left","right");this.addBinding("mod+esc",function(){return l.nottriv(e.STApp.the.nodeFocus.id)?(e.STApp.the.controller_of_main_display_wstdoc.applyAction(c.simpleSetFocusedNode(null)),
!0):!1},{doconly:!0,global:!0});this.addBinding("esc",function(){"none"!==$("#structure-together-keyboard-shortcuts").css("display")&&$("#structure-together-keyboard-shortcuts").css("display","none");var a=$(document.activeElement);if(a.is("document")){var d=e.STApp.the.nodeFocus.id;if(l.triv(d))return b.dnote("DOES THIS EVER HAPPEN?"),n();b.ddeb("Here?");e.STApp.the.controller_of_main_display_wstdoc.applyAction(c.simpleSetFocusedNode(null));return!0}a.blur();if(!e.STApp.the.controller_of_main_display_wstdoc||
!e.STApp.the.controller_of_main_display_wstdoc.view)return!1;d=e.STApp.the.nodeFocus.id;a=e.STApp.the.controller_of_main_display_wstdoc.view.elementToNode(a);if(l.nottriv(a)){if(l.nottriv(d)){if(d===a.oid)return n();e.STApp.the.controller_of_main_display_wstdoc.applyAction(c.simpleSetFocusedNode(a.oid));return!0}e.STApp.the.controller_of_main_display_wstdoc.applyAction(c.simpleSetFocusedNode(a.oid));return!0}b.ddeb("calling unzoomThenRebuildOrNothing");return n()},{doconly:!0,global:!0});this.addBinding("p",
function(){var a=e.STApp.the.nodeFocus.id;return a?(e.STApp.the.controller_of_main_display_wstdoc.applyAction({name:"TogglePanelHidden",nodeid:a}),!1):!0},{doconly:!0,editModeOnly:!0});this.addBinding("shift+p",function(){$("#close-all-panels-button").click();return!0},{doconly:!0,editModeOnly:!1});this.addBinding("mod+left",function(){return _.endsWith(window.location.href,"index.html")?(b.dwarn("Preventing back shortcut from exiting app."),!1):!0},{doconly:!0});this.addBinding("mod+c",function(){var a=
e.STApp.the.nodeFocus.id;return a?(e.STApp.the.main_display_wstdoc.applyEditAction({name:"CopyNode",nodeid:a,linking:!1}),!1):!0},{doconly:!0,editModeOnly:!0});this.addBinding("mod+alt+c",function(){var a=e.STApp.the.nodeFocus.id;return a?(e.STApp.the.main_display_wstdoc.applyEditAction({name:"CopyNode",nodeid:a,linking:!0}),!1):!0},{doconly:!0,editModeOnly:!0});this.addBinding("shift+mod+v",function(){var a=e.STApp.the.nodeFocus.id,b=e.STApp.the.main_display_wstdoc.utfstate.node_clipboard;return a&&
b?(e.STApp.the.main_display_wstdoc.applyEditAction({name:"PasteNode",parent_nodeid:a}),!1):!0},{doconly:!0,editModeOnly:!0});this.addBinding("mod+v",function(){var a=e.STApp.the.nodeFocus.id,b=e.STApp.the.main_display_wstdoc.utfstate.node_clipboard;return a&&b?(b.stdoc.ogetNodeByPermId(a),e.STApp.the.main_display_wstdoc.applyEditAction({name:"PasteNodeAsNextUnnamedSiblingOf",sibling_nodeid:a}),!1):!0},{doconly:!0,editModeOnly:!0});this.addBinding("r",function(){var a=e.STApp.the.nodeFocus.id;a?(b.dlog("updateSubtree from Mousetrap r"),
e.STApp.the.controller_of_main_display_wstdoc.updateSubtree(a)):(b.dlog("buildVMAndRender from Mousetrap r"),e.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!0,1));return!1},{doconly:!0,global:!1});this.addBinding("ctrl+r",function(){e.STApp.the.controller_of_main_display_wstdoc.reload();return!1},{doconly:!0,global:!0});this.addBinding("space",function(){if(u.nodestubButtonFocused())return!0;var a=e.STApp.the.nodeFocus.id;if(a){var c=e.STApp.the.nodeFocus.node;if(c.hasChildren())return $("#"+
u.childrenToggleTriggerId(a)).click(),!1;if(c.hasType(p.Nodetypes.Ref))return b.derr("TODO: look for existing <select> first"),a=$("#"+a+"_NodeAlwaysShownPart").find(".simple-inline-ref"),c=a.prev(),c.is("select")||(a.click(),c=a.prev()),c.focus(),!1}return!0},{doconly:!0,global:!1});this.addBinding("shift+return",function(){var a=e.STApp.the.nodeFocus.node;return a?(e.STApp.the.main_display_wstdoc.applyEditAction({name:"NewUnnamedNode",nodetype:a.stlang.nodetype_to_insert_on_enter,parent:a,insert_after:null,
first_child:!0}),!1):!0},{doconly:!0,global:!0,editModeOnly:!0});var h=function(){if(u.nodestubButtonFocused()||u.contextMenuOpen())return!0;var a=e.STApp.the.nodeFocus.id;return a&&(a=e.STApp.the.main_display_wstdoc.ogetNodeByPermId(a),b.assert_nt(a),a)?(e.STApp.the.main_display_wstdoc.applyEditAction({name:"NewUnnamedNode",nodetype:a.stlang.nodetype_to_insert_on_enter,parent:a.parentNode||e.STApp.the.main_display_wstdoc.top,insert_after:a,first_child:!0}),!1):!0};this.addBinding("return",h,{doconly:!0,
global:!1,editModeOnly:!0});var k=function(){if(u.contextMenuOpen())return!0;var a=e.STApp.the.nodeFocus.id;if(a){var c=e.STApp.the.main_display_wstdoc,a=e.STApp.the.main_display_wstdoc.ogetNodeByPermId(a);b.assert_nt(a);if(a&&a.parentNode){var d={type:"Map",value:l.mkobj([t.SystPropNames.nodetype,{json:p.Nodetypes.FreeForm}],[t.SystPropNames.display_as_defn,{json:!0}],[t.SystPropNames.html_name,{json:"name"}],[t.SystPropNames.mutid,{json:""}],[t.SystPropNames.text,{type:"EditableString",value:"definition"}])},
d=structure_together.googleJsonToSTData(e.STApp.the.main_display_rstdoc.sharedmodel,d),c=c.buildSTNodeWrappersRecursivelyFromSTNodeData(d,a.parentNode);a.parentNode.insertDetachedUnnamedChildAfterGivenChild(c,a);return!1}}return!0};this.addBinding("meta+return",function(){switch(e.STApp.the.main_display_rstdoc.stlang.behavior_of_meta_enter){case "defn freeform":return k();case "global add sibling":return h()}return!0},{doconly:!0,global:!0,editModeOnly:!0});this.addBinding("l",function(){$("#load-file-button").click();
return!1},{doconly:!1,global:!1});this.addBinding("u",function(){$("#structure-together-user-mode").click();return!1},{doconly:!1,global:!1});this.addBinding("mod+z",function(){e.STApp.the.main_display_wstdoc.undo();return!1},{doconly:!0,editModeOnly:!0});this.addBinding("mod+shift+z",function(){e.STApp.the.main_display_wstdoc.redo();return!1},{doconly:!0,editModeOnly:!0});this.addBinding("?",function(){$("#structure-together-keyboard-shortcuts-button").click();return!1},{doconly:!0,editModeOnly:!1});
this.addBinding("z",function(){var a=e.STApp.the.main_display_rstdoc;if(a){var b=e.STApp.the.nodeFocus.id;if(l.triv(b)&&l.nottriv(a.utfstate.zoomed_nodeid))return a.revert_temp_ch_expanded(),a.filtering.unzoom_then_rebuild(),e.STApp.the.controller_of_main_display_wstdoc.quickClearFilteringInGUI(),!1;if(null!=b)return a.utfstate.zoomed_nodeid===b?(a.filtering.unzoom_then_rebuild(),a.revert_temp_ch_expanded(),e.STApp.the.controller_of_main_display_wstdoc.quickClearFilteringInGUI()):(a.filtering.zoom(b),
e.STApp.the.controller_of_main_display_wstdoc.quickFilterNodesInGUI()),!1}return!0},{doconly:!0,global:!1});this.addBinding("s",function(){var a=e.STApp.the.main_display_rstdoc;if(a){var b=e.STApp.the.nodeFocus.id;if(l.nottriv(b)&&a.filtering.searchForRefs(b))return e.STApp.the.controller_of_main_display_wstdoc.quickFilterNodesInGUI(),!1}return!0},{doconly:!0,global:!1});this.addBinding("shift",function(){window.structure_together.shift_held=!0;var a=$("#add-node-buttons-bar"),b=$("#add-sibling-node-buttons-bar");
a.show();b.is(g.CSS_CLASS_NAMES.force_shown)||b.hide();return!0},{doconly:!0,global:!1,eventName:"keydown"});this.addBinding("shift",function(){window.structure_together.shift_held=!1;var a=$("#add-node-buttons-bar");$("#add-sibling-node-buttons-bar").show();a.is(g.CSS_CLASS_NAMES.force_shown)||a.hide();return!0},{doconly:!0,global:!1,eventName:"keyup"});this.addBinding("shift+left",function(){b.timerStart("seqfind");var a=e.STApp.the.main_display_rstdoc.traversal.getFilteredNodes(function(a){return a.hasType(p.Nodetypes.Seq)});
b.timerEnd("seqfind");if(1===a.length)return a=a[0],e.STApp.the.main_display_wstdoc.applyEditAction({name:"SeqIndexChange",nodeid:a.oid,value:a.index-1}),!1;console.warn("0 or more than 1 Seq node, so not allowing shortcut.");return!0},{doconly:!0,global:!1});this.addBinding("shift+right",function(){b.timerStart("seqfind");var a=e.STApp.the.main_display_rstdoc.traversal.getFilteredNodes(function(a){return a.hasType(p.Nodetypes.Seq)});b.timerEnd("seqfind");if(1===a.length)return a=a[0],e.STApp.the.main_display_wstdoc.applyEditAction({name:"SeqIndexChange",
nodeid:a.oid,value:a.index+1}),!1;console.warn("0 or more than 1 Seq node, so not allowing shortcut.");return!0},{doconly:!0,global:!1});this.addBinding("tab",a,{doconly:!0,global:!0});this.addBinding("shift+tab",a,{doconly:!0,global:!0});this.addBinding("i",function(){v.stwidgets.inlineEditing.toggle();return!1},{doconly:!0,global:!1,editModeOnly:!0});this.addBinding("m",function(){$(v.stwidgets.showMutidForms.elem).click();return!1},{doconly:!0,editModeOnly:!0});this.addBinding("shift+mod+c",function(){var a=
e.STApp.the.nodeFocus.id;return a?(a=u.nodeIdToDomId(a),$("#"+a).contextMenu(),!1):!0},{doconly:!0,global:!0})};return d}(k.STPlugin);d.MousetrapKeyBindingsFeature=a},function(k,d,a){var n=a(249),m=a(4),f=a(190),h=a(3),l=a(189);d.changeFocusInDOM=function(a,b,c){void 0===c&&(c=!1);var d=null;m.nottriv(a)&&$(l.nodeDomSelector(a)+">."+n.CSS_CLASS_NAMES.STNodeView_inner_container).removeClass(n.CSS_CLASS_NAMES.node_focused);m.nottriv(b)&&(d=$(l.nodeDomSelector(b)),d.children("."+n.CSS_CLASS_NAMES.STNodeView_inner_container).addClass(n.CSS_CLASS_NAMES.node_focused));
h.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!0,0);c&&f.ensureElementInViewport(d);d&&!f.isElementInViewport(d[0])&&c&&m.throttled("focus-autoscroll",function(){return f.animateScrollToElement(d)},100)}},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=
null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(258);var m=a(273),f=a(256),h=a(5),l=a(286),g=a(4),b=a(264),c=a(13),e=a(289),p=a(8),t=a(14),u=a(7),v=a(9),y=a(46),r=a(287),x=a(250),A=a(3),z=a(10);a=function(a){function d(b,k,n,x){var r=a.call(this,b,k,n,x)||this;r.pendingSetState=!1;r.nextRenderIsShallow=!1;r.render_update_params={ancestors:new Set,descendants:new Set,targetNodeId:null};r.component_refs=new Map;r.textinput_elements_for_immutable_string_props=f.PairMapWithDefaultConstructor(function(){return new Set});
r.textarea_elements_for_editable_string_props=f.MapWithDefaultConstructor(function(){return new Set});r.unstable_object_change_listeners={editableStrings:function(a,b){u.dlogcat(v.LogTypes.modelevent,"SyncingEditableString model change, event: ",b);if(!b.isLocal){u.dwarn("unstable_object_change_listeners.editableString and evt.isLocal is "+b.isLocal);var c=a.getText();r.updateNoncontrolledTextareaForms(a,c)}u.dlog(b);u.ddeb(b.oldValue,a.getText());if(b.oldValue===a.getText())u.dnote("Skipping flatprop_change_listeners in editableStrings because newval not different from old val");
else{var d=r.stdoc.ogetContainingNode(a);if(d){var e=d.getClass();if(e.flatprop_change_listeners){var f=d.editableStrings.getPropertyName(a);g.nottriv(f)&&(d.hasProp(f)||g.objhas(e.allowed_flatprops,f))&&e.flatprop_change_listeners[f]&&g.throttled(d.oid+f,function(){e.flatprop_change_listeners[f](d)},1E3,!0)}b.isLocal||r.updateSubtree(d,0,0)}else u.dlog("Could not find node containing editable string. This might be due to having just pasted a node. The string: ",a)}},lists:function(a,b){u.dlogcat(v.LogTypes.modelevent,
"SyncingList model change, event: ",b);b.isLocal||b.type!==z.EventType.VALUES_ADDED||(u.dwarn("NONLOCAL list edit event. This code is highly untested."),b.values.forEach(function(b){"object"===typeof b&&b.type===z.SyncingObjectTypes.Map&&(b=r.stdoc.ogetContainingNode(a),r.stdoc.buildSTNodeWrappersRecursivelyFromSTNodeData(b.getPseudoReadOnlyData()))}));u.dlog("Maybe soon calling updateHangingSubtree from unstable_object_change_listeners.lists");var d=r.stdoc.ogetContainingNode(a);if(!d)return u.dassert(r.stdoc.isDetached(a),
"Didn't find containing node for this SyncingList, AND it's not in the set stdoc.cache.detachedSyncingObjects: ",a),null;d.hasType(c.Nodetypes.Seq)&&(u.derr(" what? when does this happen? "),r.addAfterFirstRenderCallback(function(){d.showAndHideChildrenUFState()}));r.updateHangingSubtree(d.oid,0,1,!0)},maps:function(a,b){var c=e.BatchDocEvent.getPropertyNameFromMapChangeEvent(b);if(c===v.SystPropNames.nodetype)return u.dlogcat(v.LogTypes.modelevent,"NOTE: cautiously (probably unnecessarily) ignoring change event for system string property "+
v.SystPropNames.nodetype+"."),u.dlogcat(v.LogTypes.modelevent,b),null;u.dlogcat(v.LogTypes.modelevent,"SyncingMap change event for property "+c+" of umap "+a.id+".",0);var d;if(a.has(v.SystPropNames.nodetype)){a=p.get_object_id(a);d=r.stdoc.ogetNodeByPermId(a);if(g.triv(d))return u.dlogcat(v.LogTypes.modelevent,"umap with permid "+a+" is not registered with the STDoc yet, so stop processing this event. The event that adds this umap to the tree is still-to-come."),u.dlogcat(v.LogTypes.modelevent,'previously but no longer: "SIKE: going to try to create the STNode now."'),
null;u.dassert(!g.triv(d),"umap with permid "+a+" is not registered with the doc. This happened while processing umap edit for property name "+c+".");u.dlogcat(v.LogTypes.modelevent,"node-map model change, event: ",b);if(c===v.SystPropNames.ch||c===v.SystPropNames.nch)u.dlogcat(v.LogTypes.modelevent,"probably .ch or .nch was added or removed (not a change _within_ .nch): ",b,"Don't need to do anything extra.");else if(a=d.getClass(),d.hasProp(c)||g.objhas(a.allowed_flatprops,c)){if(a.flatprop_change_listeners&&
a.flatprop_change_listeners[c])a.flatprop_change_listeners[c](d,b);d.immutableStrings.hasVal(c)?g.objhas(a.allowed_flatprops,c)?g.argsFirstAmongRest(a.allowed_flatprops[c],3,4,5)?b.isLocal||(a=d.immutableStrings.getVal(c),r.updateNoncontrolledTextInputForms(d,c,a)):u.derr("node "+d.oid+" of nodetype "+d.nodetype+" has immutable string prop "+c+" but "+d.nodetype+".allowed_flatprops["+c+"] === "+a.allowed_flatprops[c]+" is not a legal value"):console.error("expected "+c+" to be a key of "+a.nodetype_name+
".allowed_flatprops"):d.editableStrings.hasObj(c)?(u.dlogcat(v.LogTypes.modelevent,"EditableString "+c+" added",0),u.dlog("Todo: are nonlocal persistent editable string changes handled yet?")):d.booleans.hasVal(c)?(u.dlogcat(v.LogTypes.modelevent,"boolean "+c+" added",0),u.dlog("Todo: are nonlocal persistent boolean changes handled yet?")):d.numbers.hasVal(c)?(u.dlogcat(v.LogTypes.modelevent,"number "+c+" added",0),u.dlog("Todo: are nonlocal persistent number changes handled yet?")):u.dwarn("probably a flatprop "+
c+" was just deleted.")}else b.isLocal?console.warn("doing nothing on hearing this LOCAL map change event: ",b):console.warn("This event may be from deleting a property in a nodetype conversion, because "+c+" is not a property of this node",d,b)}else(d=r.stdoc.ogetContainingNode(a))?d.maps.getVal(v.SystPropNames.nch)===a?u.dlogcat(v.LogTypes.modelevent,"nch-map model change, event: ",b):console.error("What is this SharedMap? Doesn't seem to be a node or a named children map",a):a.has(h.ReadableSTDoc.TOP_NODE_KEY)?
u.dlogcat(v.LogTypes.modelevent,"root node umap model change, event: ",b):"root"===a.id&&u.dlog('"root" umap change event'),u.dassert(r.stdoc.isDetached(a));b.isLocal||(u.dwarn("NONLOCAL event: ",b),r.buildVMAndRender(!1,2))}};u.dlogcat(v.LogTypes.entering,"Entering SimpleReactDocController constructor with plugin_options "+x);u.assert_nt(arguments);r.vmbuilder=new l.BasicRecVMBuilderWithPostBuildChangeAnnotator(b);r.view=new m.WritableSTDocView(b,r,k);A.STApp.the.filesmanager.setDocRootSharedMapListener(b.stdocid,
function(a){return r.batchDocEventListener(a)});r.initializePlugins();structure_together.renderFromTop=function(){r.buildVMAndRender(!0,1)};r.addAfterFirstRenderCallback(function(){u.dlogcat(v.LogTypes.deal_with_eventually,"Handling initial Seq nodes");r.stdoc.traversal.forEachNode(function(a){a.hasType(c.Nodetypes.Seq)&&a.showAndHideChildrenUFState()})});g.setTheOnly(d,r);return r}n(d,a);d.prototype.partial_render_update_scheduled=function(){return null!==this.render_update_params.targetNodeId};
d.prototype.partial_render_update_clear=function(){var a=this.render_update_params;0<a.ancestors.size&&a.ancestors.clear();0<a.descendants.size&&a.descendants.clear();a.targetNodeId=null};d.prototype.destroy=function(){a.prototype.destroy.call(this);y.unmountComponentAtNode($("#"+b.AbstractDocView.ROOT_ELEM_ID)[0]);d.the=null;u.dlog("Just did SimpleReactDocController.the = null")};d.prototype.reload=function(){u.dlogcat(v.LogTypes.entering,"Entering SimpleReactDocController.reload()");this.destroy();
this.stdoc.cache.refsToNode.clear();this.stdoc.refreshNodeCaches();this.stdoc.refManager.buildall();new d(this.stdoc,this.root_element_id,this.app_plugin_instances,this.plugin_options);d.the.buildVMAndRender(!0,1)};d.prototype.queueBuildVMAndRender=function(a,b){var c=this;void 0===a&&(a=!1);u.dlogcat(v.LogTypes.entering,"Entering STController.queueBuildVMAndRender(immediate="+a+", vut="+b+") with DocView "+this.view.temp_DocView_id);x.reset_render_stats();u.weakassert(null!=this.stdoc.top,"Doc should have its Top node before render is called");
null!=this.stdoc.top&&(a?(a=this.vmbuilder.updateDocVM(this.vmbuilder.lastDocVM,b),this.vmbuilder.lastDocVM=a,this.setStateWithAfterRenderCallbacks(a),this.pendingSetState=!1):this.pendingSetState||(this.pendingSetState=!0,window.setTimeout(function(){if(c.pendingSetState){var a=c.vmbuilder.updateDocVM(c.vmbuilder.lastDocVM,b);c.vmbuilder.lastDocVM=a;c.setStateWithAfterRenderCallbacks(a);c.pendingSetState=!1}},v.DELAY_FOR_QUEUE_SETSTATE)))};d.prototype.startPeriodicRebuild=function(a){var b=this;
window.setInterval(function(){b.queueBuildVMAndRender(!0,2)},a)};d.prototype.buildVMAndRender=function(a,b){void 0===a&&(a=!1);u.dlogcat(v.LogTypes.entering,"Entering SimpleReactDocController.buildVMAndRender(immediate="+a+", vut="+b+")");this.queueBuildVMAndRender(a,b)};d.prototype.computeAndShowVM=function(a){console.log(this.vmbuilder.newNodeVM_public(a,null,1,Infinity,!1))};d.prototype.showCachedVM=function(a){this.vmbuilder.nodevm_cache&&console.log(this.vmbuilder.nodevm_cache.get(a.oid))};d.prototype.setStateWithAfterRenderCallbacks=
function(a){var b=this;this.view.setState(a,function(){b.runAfterNexttRenderCallbacks()})};d.prototype.updateNodeShallow=function(a){this.updateSubtree(a,0,0)};d.prototype.updateHangingSubtree=function(a,b,d,e,g){void 0===e&&(e=!0);void 0===g&&(g=!1);u.assert_nt(a);var f=this.stdoc.nodeFromIdOrNode(a);if(!g&&t.stwidgets.fasterReactive.getValue())return u.dlog("doing updateSubtree("+f.oid+", "+b+", "+d+") instead of updateHangingSubtree"),this.updateSubtree(f,b,d);u.dlogcat(v.LogTypes.entering,"Entering updateHangingSubtree("+
a+", "+b+", "+d+")");u.timerStart("updateHangingSubtree("+f.oid+","+b+","+d+")");this.partial_render_update_clear();var h=this.render_update_params;h.targetNodeId=f.oid;f.forEachAncestor(function(a){h.ancestors.add(a.oid)});0<b&&f.hasType(c.Nodetypes.Parental)&&f.forEachDescendant(function(a){h.descendants.add(a.oid)},b);u.dlog("updateHangingSubtree: "+h.ancestors.size+" ancestors, "+h.descendants.size+" descendants.");x.reset_render_stats();this.buildVMAndRender(e,3);u.timerEnd("updateHangingSubtree("+
f.oid+","+b+","+d+")")};d.prototype.updateSubtree=function(a,b,d){void 0===b&&(b=Infinity);void 0===d&&(d=Infinity);u.assert_nt(a);a=this.stdoc.nodeFromIdOrNode(a);u.timerStart("updateSubtree("+a.oid+","+b+","+d+")");if(this.vmbuilder.nodevm_cache){var e=this.vmbuilder.nodevm_cache.get(a.oid);if(e){this.partial_render_update_clear();var g=this.render_update_params;g.targetNodeId=a.oid;0<b&&a.hasType(c.Nodetypes.Parental)&&a.forEachDescendant(function(a){g.descendants.add(a.oid)},b);a.forEachAncestor(function(a){g.ancestors.add(a.oid)});
var f=null;a.parentNode&&(f=a.parentNode.keyOfNamedChild(a));r.USE_NODE_INLINING_VM_CACHE&&this.vmbuilder.shortterm_node_inlining_vm_cache.clear();f=this.vmbuilder.newNodeVM_public(a,f,3,d,!0);u.dassert(f===e);u.timerEnd("updateSubtree("+a.oid+","+b+","+d+")");x.reset_render_stats();this.vmbuilder.lastDocVM.refreshtype=2;this.setStateWithAfterRenderCallbacks(this.vmbuilder.lastDocVM)}else u.derr("Can't do partial rebuild at node "+a.oid+" because it has no VM in the cache. Doing full doc rebuild instead."),
this.buildVMAndRender(!0,2)}else u.derr("Can't do partial rebuild at node "+a.oid+" because NodeVM cache is disabled. Doing full doc rebuild instead."),this.buildVMAndRender(!0,2)};d.prototype.updateNoncontrolledTextInputForms=function(a,b,c){var d=this.textinput_elements_for_immutable_string_props.get2(a.oid,b);0===d.size?b!==v.SystPropNames.abstract_nodetype&&u.dwarn("Didn't find <input> element for "+a.oid+"."+b+".\nThis probably just means the current event is the initial adding of this string prop.\nOR that React just hasn't rendered that input form yet."):
(u.dlogcat(v.LogTypes.modelevent,"Found "+d.size+" <input> elements for "+a.oid+"."+b+"."),d.forEach(function(a){a=$(a);a.val()!==c&&a.val(c)}))};d.prototype.updateNoncontrolledTextareaForms=function(a,b){u.dlog("updateNoncontrolledTextareaForms");var c=this.textarea_elements_for_editable_string_props.get(a.id);u.dlogcat(v.LogTypes.inline_editing,"Found "+c.size+" <textarea> element for EditableString "+a.id+":");c.forEach(function(a){u.dlogcat(v.LogTypes.inline_editing,"\t",a);a=$(a);a.val()!==b&&
a.val(b)})};return d}(k.AbstractDocController);d.STController=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m=a(7);k=a(18);var f=a(248),h=a(264),l=a(272),g=a(249),b=a(9),c=a(269),e=a(19),p=a(46),t=a(250),
u=a(3),v=a(274),y=a(15);a=function(a){function c(b,c,d){void 0===d&&(d=h.AbstractDocView.ROOT_ELEM_ID);b=a.call(this,b,d)||this;b.setStateCallCounts=0;c=e.createElement(r,{});b.root_component=p.render(c,b.$container[0]);return b}n(c,a);c.prototype.setState=function(a,c){m.dassert(null!=a,"Null VM given to RGuiPSTDocView.setState");this.setStateCallCounts++;m.dlogcat(b.LogTypes.important_event,"DocView.setState called, refreshtype === "+g.ReactRefreshTypesList[a.refreshtype]+" ("+this.setStateCallCounts+
" times, DocView id "+this.temp_DocView_id+")");c?this.root_component.setState(a,c):this.root_component.setState(a)};return c}(h.AbstractDocView);d.WritableSTDocView=a;var r=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);Object.defineProperty(d.prototype,"controller",{get:function(){return l.STController.the},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"wstdoc",{get:function(){return this.state?u.STApp.the.get_wstdoc(this.state.stdocid):null},
enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"rstdoc",{get:function(){return this.wstdoc},enumerable:!0,configurable:!0});d.prototype.getChildContext=function(){return{changedset:this.state?this.state.changedset:void 0,refreshtype:this.state?this.state.refreshtype:0,stdocid:this.state?this.state.stdocid:void 0}};d.prototype.onClickUndo=function(){this.wstdoc.undo();l.STController.the.buildVMAndRender(!1,2)};d.prototype.onClickRedo=function(){this.wstdoc.redo();l.STController.the.buildVMAndRender(!1,
2)};d.prototype.make_nodetype_add_buttons=function(a,b,c,d,e){var h=this;c.forEach(function(c){e.push(f.rbutton({key:c,className:g.CSS_CLASS_NAMES.New_ToplevelNode_Button,onClick:function(d){h.wstdoc.applyEditAction({name:"NewUnnamedNodeAtIndex",nodetype:c,parent:a,index:b});d.stopPropagation()}},c))});d.forEach(function(c){e.push(f.rbutton({key:c,className:g.CSS_CLASS_NAMES.New_ToplevelNode_Button,onClick:function(d){h.wstdoc.applyEditAction({name:"NewUnnamedNodeStub",abstract_nodetype:c,parent:a.oid,
index:b});d.stopPropagation()}},c))})};d.prototype.render=function(){var a=this;window.structure_together.debug.scu_true_count=0;m.timerStart("DocView render");try{if(this.state){var d=void 0,h=e.createElement(v.NodeComponent,this.state.topnodevm);if(y.inEditMode()){var l=[],k=[],n=void 0,n=this.state._focused_nodeid?u.STApp.the.nodeFocus.node:this.rstdoc.top;if(this.rstdoc.top.booleans.getVal(b.SystPropNames.bottom_newnode_buttons_enabled,{if_none:!0})&&(n.isParental()&&this.make_nodetype_add_buttons(n,
0,this.state.concrete_nodetypes_for_add_buttons,this.state.abstract_nodetypes_for_add_buttons,l),n.parentNode)){var p=n.getIndexOrLabel();"string"===typeof p&&(p=0);this.make_nodetype_add_buttons(n.parentNode,p,this.state.concrete_nodetypes_for_add_sibling_buttons,this.state.abstract_nodetypes_for_add_sibling_buttons,k)}var x=f.rspan({key:"undo-redo-buttons",id:"undo-redo-buttons"},f.rbutton({key:"undoButton",onClick:function(){return a.onClickUndo()},disabled:!this.state._canundo},"Undo"),f.rbutton({key:"redoButton",
onClick:function(){return a.onClickRedo()},disabled:!this.state._canredo},"Redo")),r=window.structure_together.shift_held?"inline":"none",t=window.structure_together.shift_held?"none":"inline",p="";n===this.rstdoc.top&&(r="inline",p=g.CSS_CLASS_NAMES.force_shown);d=f.rdiv({id:"bottom_fixed_pos_buttons_bar"},x,f.rspan({id:"add-node-buttons-bar",style:{display:r},className:p},l),f.rspan({id:"add-sibling-node-buttons-bar",style:{display:t},className:p},k))}l=void 0;this.state.filtering_nodes&&(l=f.rbutton({key:"cancel-filtering",
id:"cancel-filtering",onClick:function(b){b.stopPropagation();a.wstdoc.filtering.clearSearch_then_rebuild()},style:{display:"block"}},"clear search"));return f.rdiv({onClick:function(b){m.dwarn("click heard on document div");null!=u.STApp.the.nodeFocus.id&&(a.controller.applyAction(c.simpleSetFocusedNode(null)),b.stopPropagation(),b.preventDefault())}},d,l,h)}m.dlog("DocStatefulRootComponent is null");return null}catch(I){return m.derr("Exception during DocStatefulRootComponent.render",I),null}};
d.prototype.componentDidMount=function(){var a=this;window.setTimeout(function(){m.dlogcat(b.LogTypes.important_event,b.DELAY_FOR_AFTER_FIRST_RENDER_CALLBACKS+" ms after first setState call. Running callbacks.");a.controller.runAfterFirstRenderCallbacks()},b.DELAY_FOR_AFTER_FIRST_RENDER_CALLBACKS)};d.prototype.componentDidUpdate=function(a,c){t.show_perf_stats();m.timerEnd("DocView render");window.structure_together.logging.logTypeActive(b.LogTypes.vmbuild_and_react_perf_stats)&&console.log("\n")};
return d}(e.Component);r.childContextTypes=k.stContextValidationMap;d.DocStatefulRootComponent=r},function(k,d,a){function n(a,b){var c=null;switch(p.stwidgets.showNodeIdsSelect.value){case "short":c=l.rspan({key:"id-container",style:{marginLeft:"5px"}},b);break;case "long":c=l.rspan({key:"id-container",style:{marginLeft:"5px"}},a);break;case "short on hover":c=l.rspan({key:"id-container",className:"STNodeView-id-container"},b);break;case "long on hover":c=l.rspan({key:"id-container",className:"STNodeView-id-container"},
a)}return c}var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),f=a(7),h=a(4),l=a(248);k=a(18);var g=a(275),b=a(284),c=a(285),e=a(249),p=a(14),t=a(9),u=a(269),v=a(19),y=a(247),r=a(250),x=a(13),A=a(3),z=a(189),C=a(15);a=function(a){function d(){var b=
null!==a&&a.apply(this,arguments)||this;b.onClickForNodeSelectAndNodeFocus=function(a){var c=b.props.nodeid;e.NODE_FOCUS_NOT_SELECT?b.nodeFocused?b.controller.applyAction(u.simpleSetFocusedNode(null)):b.controller.applyAction(u.simpleSetFocusedNode(c)):(f.dassert(!1,"Shouldn't be using this... NodeSelected is out of date"),b.controller.applyAction({name:"ToggleNodeSelected",nodeid:c}));a.stopPropagation()};return b}m(d,a);Object.defineProperty(d.prototype,"childrenCollapsed",{get:function(){try{return!!this.rstdoc.ogetNodeByPermId(this.props.nodeid).children_collapsed}catch(G){return console.error("Check NodeView.childrenCollapsed"),
!1}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"panelHidden",{get:function(){try{return this.rstdoc.ogetNodeByPermId(this.props.nodeid).utfstate.panel_hidden}catch(G){return console.error("Check NodeView.panelHidden"),!1}},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"nodeSelected",{get:function(){try{return this.rstdoc.ogetNodeByPermId(this.props.nodeid).utfstate.selected}catch(G){return console.error("Check NodeView.nodeSelected"),!1}},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"nodeFocused",{get:function(){return A.STApp.the.nodeFocus.id===this.props.nodeid&&A.STApp.the.main_display_wstdoc.stdocid===this.rstdoc.stdocid},enumerable:!0,configurable:!0});d.prototype.renderUnchecked=function(){var a=this;if(this.props.nodetype===x.Nodetypes.SectionBreak)return this.sectionBreakRenderUnchecked();h.triv(this.context.stdocid)&&f.dwarn("this.context.stdocid is trivial");f.dassert(6===this.props.coarse_vmtype);f.dlogcat(t.LogTypes.react,
"render for node  "+this.props.nodeid+" with props and state: ",this.props,this.state);r.inc_node_render_cnt();var d=this.props.nodeid,k=this.props.nodetype,m=this.props.stdocid!==this.context.stdocid,u="STNodeView";if(!p.stwidgets.showHiddenCheckbox.getValue())try{this.props.hidden?u+=" hidden-node":this.props.panel&&this.props.panel.flatprops&&this.props.panel.flatprops.some(function(a){return!h.triv(a)&&a.label===t.SystPropNames.hidden&&a.form.value})&&(u+=" hidden-node")}catch(T){f.dwarn("Exception while looking for "+
t.SystPropNames.hidden+" BoolPropVM: ",T)}2===this.props.filter_status&&(u+=" filtered-out");var A=null;this.props.inlining?A=y.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.inlining,k):f.dwarn("Node "+d+" has no props.inlining");var B=this.props.panel,D=null;if(B&&!this.panelHidden&&!m)try{D=l.rdiv({hidden:this.panelHidden},v.createElement(g.RHideablePropertyPanelComponent,B))}catch(T){console.error("Error while rendering panel of "+k+" node."),D=l.rspan({key:"panel"},"error...")}var N=
this.props.nch,B=null;if(N&&N.nodevms)try{B=l.rdiv({hidden:this.childrenCollapsed,id:this.props.nodeid+"_nch_container"},v.createElement(b.FixedOrderNamedChildListComponent,N))}catch(T){console.error("Error while rendering named children of "+k+" node."),B=l.rspan({key:".nch"},"error...")}var O=this.props.ch,N=null;if(O&&O.nodevms)try{N=l.rdiv({hidden:this.childrenCollapsed,id:z.nodeIdToDomId(this.props.nodeid)+"_ch_container"},v.createElement(c.ReorderableChildListComponent,O))}catch(T){console.error("Error while rendering unnamed children of "+
k+" node."),N=l.rspan({key:".ch"},"error...")}var k=z.nodeIdToDomId(d),M;if(this.props.has_unhidden_children){M=void 0;M=this.childrenCollapsed?"children-show-hide-trigger fa-li fa fa-caret-right":"children-show-hide-trigger fa-li fa fa-caret-down";var Q=z.childrenToggleTriggerId(d);M=l.rspan({id:Q,key:"expand-collapse-icon",className:M,onClick:function(b){b.target.id===Q&&(a.controller.applyAction({name:"ToggleChildrenShown",nodeid:d}),b.stopPropagation(),b.preventDefault())}})}this.childrenCollapsed&&
(u+=" children-collapsed");var u=this.props.continued?u+" no-li-marker paragraph-continuation":this.props.has_unhidden_children?u+" with-children":p.stwidgets.showBullets.getValue()?u+" no-children":u+" no-li-marker",P;this.props.refable&&this.props.has_refs&&(P=l.ri({key:"locbutton",className:"fa fa-search st-locbutton",style:{display:"inline",marginLeft:"5px"},tabIndex:-1,onClick:function(b){a.wstdoc.filtering.searchForRefs(d);a.controller.quickFilterNodesInGUI();b.stopPropagation();b.preventDefault()}},
null));var S;p.stwidgets.showZoomButtons.getValue()&&(S=l.ri({key:"zoombutton",className:"fa fa-search-plus st-zoombutton",style:{marginLeft:"5px"},tabIndex:-1,onClick:function(b){a.wstdoc.filtering.zoom(d);a.controller.quickFilterNodesInGUI();b.stopPropagation();b.preventDefault()}},null));A=l.rspan({id:d+"_NodeAlwaysShownPart",className:"NodeAlwaysShownPart",key:d+"_NodeNoncollapsible"},A);O=null;if(P||S)O=[],P&&O.push(P),S&&O.push(S),O=l.rspan({key:"readmode_buttons",className:"edit-icons"},O);
P=null;C.inEditMode()&&!m&&(m=[],p.stwidgets.showPanelToggleButtons.getValue()&&m.push(l.rspan({id:d+"panel-show-hide-trigger",key:this.panelHidden?"startedit":"finishedit",className:this.panelHidden?"fa fa-pencil st-panelbutton":"fa fa-check st-panelbutton",style:{marginLeft:"5px"},onClick:function(b){b.target.id===d+"panel-show-hide-trigger"&&(f.dlogcat(t.LogTypes.react,"Clicked "+a.props.nodenumid+"'s fa-pencil or fa-check icon. Value of this.panelHidden will be switched from: "+a.panelHidden+
"."),a.controller.applyAction({name:"TogglePanelHidden",nodeid:d}),b.stopPropagation(),b.preventDefault())}},null)),!0===this.props.isUnnamedChild&&p.stwidgets.showDragHandles.getValue()&&m.push(l.rspan({key:"move",className:"fa fa-bars st-draghandle"},null)),p.stwidgets.showRefreshButtons.getValue()&&m.push(l.rspan({key:"refresh",className:"fa fa-refresh st-refresh-button",onClick:function(b){a.controller.updateSubtree(d);b.preventDefault();b.stopPropagation()}},null)),this.rstdoc.subtreeHasLinkDefinitely(d)&&
m.push(l.rspan({key:"recursive-unlink",className:"fa fa-chain-broken",onClick:function(b){a.sendToDocMsgBox({name:"Unlink",nodeid:d,recursive:!0,propname:null});b.preventDefault();b.stopPropagation()}},null)),P=l.rspan({key:"edit-icons",className:"edit-icons"},m));m=n(this.props.nodeid,this.props.nodenumid);S="STNodeView-inner-container"+(this.nodeSelected?" "+e.CSS_CLASS_NAMES.node_selected:"")+(this.nodeFocused?" "+e.CSS_CLASS_NAMES.node_focused:"");var R="nodeview-without-children-and-panel";3===
this.props.filter_status&&(R+=" ancestor_of_filtered_in");this.props.emphasize&&(S+=" STEmphasizedSubtree");this.props.demphasize&&(R+=" STDemphasizedSubtree");this.props.emphasize_shallow&&(R+=" STEmphasizedNode");var U=l.rli;this.props.isRoot&&(U=l.rdiv,u+="stdoc-title",3===this.props.filter_status&&(u+=" ancestor_of_filtered_in"));return U({id:k,key:d,"data-depth":this.props.depth,className:u,onClick:this.onClickForNodeSelectAndNodeFocus},l.rdiv({className:S,key:"STNodeView-inner-container",id:"li-inner-cont-"+
d},l.ra({key:"anchor",name:d},null),l.rdiv({key:"nodeview-without-children-and-panel",className:R},M,A,O,P,m),D,B,N))};d.prototype.shouldComponentUpdate=function(b,c,d){return a.prototype.shouldComponentUpdate.call(this,b,c,d)};d.prototype.sectionBreakRenderUnchecked=function(){var a=[];p.stwidgets.showDragHandles.getValue()&&a.push(l.rspan({key:"draghandle",className:"fa fa-bars st-draghandle"},null));var b="STNodeView-inner-container"+(this.nodeSelected?" "+e.CSS_CLASS_NAMES.node_selected:"")+(this.nodeFocused?
" "+e.CSS_CLASS_NAMES.node_focused:""),c="st-separator";2===this.props.filter_status&&(c+=" filtered-out");return l.rli({key:this.props.nodeid,"data-depth":this.props.depth,onClick:this.onClickForNodeSelectAndNodeFocus,id:z.nodeIdToDomId(this.props.nodeid),className:c},l.rspan({className:b,style:{display:"flex"}},l.rhr({key:"hr",style:{width:"100%",display:"inline"}}),l.rspan({key:"edit-icons",className:"edit-icons"},a)))};return d}(k.PureReactComponent);d.NodeComponent=a;structure_together.NodeComponent=
a;d.nodeIdDebugView=n},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(18);var m=a(276),f=a(19),h=a(248),l=a(250);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=
function(){l.inc_panel_render_cnt();var a=[];this.props.flatprops&&this.props.flatprops.forEach(function(b){b&&a.push(f.createElement(m.FlatPropEditContainerComponent,b))});return h.rdiv({key:this.props.nodeid+"-panel",className:"HideablePropertyPanel",hidden:!this.props.visible},a)};return b}(k.PureReactComponent);d.RHideablePropertyPanelComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,
c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m=a(248);k=a(18);var f=a(249),h=a(277),l=a(15);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this,b=[];l.inEditMode()&&b.push(m.rspan({key:"delete-button",className:"fa fa-times",style:{marginRight:"5px"},onClick:function(b){b.currentTarget===
b.target&&(a.sendToDocMsgBox({name:"DeleteFlatProp",nodeid:a.props.nodeid,label:a.props.label}),b.stopPropagation(),b.preventDefault())}},null));b.push(m.rspan({className:f.CSS_CLASS_NAMES.PropLabel,key:"label"},this.props.display_name||this.props.label));b.push(h.dispatchToFlatPropFormViewComponentByFormtype(this.props.form));return m.rdiv({className:f.CSS_CLASS_NAMES.FlatPropEditView,key:this.props.label+".editview"},b)};return b}(k.PureReactComponent);d.FlatPropEditContainerComponent=a},function(k,
d,a){function n(a){switch(a.formtype){case 4:return t.createElement(m.EditableStringPropFormComponent,a);case 2:return t.createElement(g.ImmutableStringPropSelectFormComponent,a);case 3:return t.createElement(l.ImmutableStringPropInputFormComponent,a);default:throw Error("unsupported value of StringPropFormVM.formtype: "+a.formtype);}}var m=a(278),f=a(279),h=a(274),l=a(280),g=a(281),b=a(7),c=a(4),e=a(282),p=a(283),t=a(19);d.componentDispatchNodeOrNodestub=function(a){b.assert_nt(a);switch(a.coarse_vmtype){case 7:return f.NodeStubComponent;
case 6:return h.NodeComponent}throw new c.NotYetImplemented;};d.dispatchToFlatPropFormViewComponentByFormtype=function(a){switch(a.formtype){case 0:return t.createElement(e.BoolPropFormComponent,a);case 1:return t.createElement(p.NumPropFormComponent,a);default:return n(a)}};d.dispatchToStringPropFormViewComponentByFormtype=n},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}();k=a(18);var m=a(248),f=a(7),h=a(46);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){var a=this,c=this.props.value,d=this.props.nodeid,g=this.props.label,l=m.rtextarea({key:this.props.label+"-input",className:"EditableStringPropView",defaultValue:c,style:{width:this.props.initial_width?
this.props.initial_width:null},onBlur:function(b){b=b.target.value;b!==c&&(c=b,a.sendToDocMsgBox({name:"EditableStringPropChange",nodeid:d,label:g,value:b}))},onFocus:function(){f.dlog("textaarea onFocus");autosize(h.findDOMNode(a))}});return this.props.fromFlatPropLinkOfNode?m.rspan({key:this.props.label+"-withbreakbutton"},l,m.rspan({key:"breaklink",className:"fa fa-chain-broken",onClick:function(b){var c=a.rstdoc.ogetNodeByPermId(a.props.fromFlatPropLinkOfNode);a.sendToDocMsgBox({name:"Unlink",
nodeid:c.oid,recursive:!1,propname:g});b.stopPropagation();b.preventDefault()}})):l};d.prototype.componentDidMount=function(){var a=h.findDOMNode(this);this.controller.textarea_elements_for_editable_string_props.get(this.props.uobjid).add(a);(this.props.forInlineEditing||this.props.isLastSelected)&&$(a).focus()};d.prototype.componentWillUnmount=function(){var a=this.controller.textarea_elements_for_editable_string_props;a.has(this.props.uobjid)?a.delete(this.props.uobjid):console.warn("Expected textarea element associated with EditableString object "+
this.props.uobjid+" not found.")};return d}(k.PureReactComponent);d.EditableStringPropFormComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),m=a(7),f=a(248);k=a(18);var h=a(249);a=function(a){function d(){return null!==
a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){var a=this;m.dassert(7===this.props.coarse_vmtype);var c=this.props.node_class_names.map(function(b){return f.rbutton({className:h.CSS_CLASS_NAMES.NodeStubOption,key:b,onClick:function(c){a.sendToDocMsgBox({name:"NodeStubChoice",chosen_nodetype:b,parentid:a.props.parentid,label_or_ind:a.props.stubs_label_or_ind,nodes_ind:a.props.nodes_ind});c.stopPropagation()}},b)});c.push(f.rbutton({className:h.CSS_CLASS_NAMES.NodeStubOption+
" "+h.CSS_CLASS_NAMES.NodeStubCancelOption,key:"cancel node stub",onClick:function(b){a.sendToDocMsgBox({name:"NodeStubChoice",chosen_nodetype:null,parentid:a.props.parentid,label_or_ind:a.props.stubs_label_or_ind,nodes_ind:a.props.nodes_ind});b.stopPropagation()}},"Cancel"));return f.rdiv(null,c)};return d}(k.PureReactComponent);d.NodeStubComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||
function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])};return function(d,g){function b(){this.constructor=d}a(d,g);d.prototype=null===g?Object.create(g):(b.prototype=g.prototype,new b)}}(),m=a(248);k=a(18);var f=a(46);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){var a=this,b=this.props.label,c=this.props.nodeid,d=this.controller,f=this.props.value,h=m.rinput({key:this.props.label+"-input",type:"text",className:"ImmutableStringPropView",
"data-autosize-input":{space:1},defaultValue:this.props.value,style:{transition:"width 0.3s"},onBlur:function(d){f!==d.target.value&&(f=d.target.value,a.sendToDocMsgBox({name:"ImmutableStringPropChange",nodeid:c,label:b,value:f}))}});return this.props.fromFlatPropLinkOfNode?m.rspan({key:"both"+this.props.label},h,m.rspan({key:"breaklink",className:"fa fa-chain-broken",onClick:function(c){var e=d.stdoc.ogetNodeByPermId(a.props.fromFlatPropLinkOfNode);a.sendToDocMsgBox({name:"Unlink",nodeid:e.oid,recursive:!1,
propname:b});c.stopPropagation();c.preventDefault()}})):h};d.prototype.componentDidUpdate=function(){var a=f.findDOMNode(this);autosizeInput(a)};d.prototype.componentDidMount=function(){var a=f.findDOMNode(this);autosizeInput(a);this.controller.textinput_elements_for_immutable_string_props.get2(this.props.nodeid,this.props.label).add(a);(this.props.forInlineEditing||this.props.isLastSelected)&&$(a).focus()};d.prototype.componentWillUnmount=function(){var a=f.findDOMNode(this),b=this.controller.textinput_elements_for_immutable_string_props.get2(this.props.nodeid,
this.props.label);b.has(a)?b.delete(a):console.error("In ImmutableStringPropInputFormComponent.componentWillUnmount, expected input element for one of node "+this.props.nodeid+"'s props not found.")};return d}(k.PureReactComponent);d.ImmutableStringPropInputFormComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(d,
b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}();k=a(18);var m=a(248),f=a(46),h=a(7);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.autosizeSelect=function(a){a=$(a);var b=a.find("option:selected").text();d.$width_tmp_option.html(b);a.width(d.$width_tmp_select.width()+d.EXTRA_SPACE_FOR_SELECT)};d.prototype.renderUnchecked=function(){var a=this,c=this.props.value,e=this.props.label,g=this.props.nodeid,
f=this.controller,l=_.map(this.props.options,function(a){return m.roption({value:a.value,key:a.value},a.display)}),c=m.rselect({key:this.props.label+"-input",value:c,onChange:function(b){h.dwarn("ImmutableStringPropSelectFormComponent.handleChange on <input>");b=b.target;a.sendToDocMsgBox({name:"ImmutableStringPropChange",nodeid:g,label:e,value:b.value});d.autosizeSelect(b)}},l);return this.props.fromFlatPropLinkOfNode?m.rspan({key:this.props.label+"both"},c,m.rspan({key:"breaklink",className:"fa fa-chain-broken",
onClick:function(b){var c=f.stdoc.ogetNodeByPermId(a.props.fromFlatPropLinkOfNode);a.sendToDocMsgBox({name:"Unlink",nodeid:c.oid,recursive:!1,propname:e});b.stopPropagation();b.preventDefault()}})):c};d.prototype.componentDidUpdate=function(){var a=f.findDOMNode(this);d.autosizeSelect(a);this.props.forInlineEditing&&$(a).focus()};d.prototype.componentDidMount=function(){var a=f.findDOMNode(this);(this.props.forInlineEditing||this.props.isLastSelected)&&$(a).focus()};return d}(k.PureReactComponent);
a.$width_tmp_span=$("#width_tmp");a.$width_tmp_select=$("#width_tmp_select");a.$width_tmp_option=$("#width_tmp_option");a.EXTRA_SPACE_FOR_SELECT=0;d.ImmutableStringPropSelectFormComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=
b.prototype,new c)}}();k=a(18);var m=a(7),f=a(8),h=a(248);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){var a=this,c=this.props.value,d=this.props.label,g=this.props.nodeid;return h.rinput({key:d+"-input",type:"checkbox",className:"BoolPropView",value:c,checked:c,style:{transition:"width 0.3s"},onChange:function(b){var c=b.target.checked;m.weakassert(f.isBoolean(c));a.sendToDocMsgBox({name:"BoolPropChange",nodeid:g,label:d,
value:!!c});var e=b.target;window.setTimeout(function(){e.checked=c},0);b.preventDefault();b.stopPropagation()}})};return d}(k.PureReactComponent);d.BoolPropFormComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,
new d)}}();k=a(18);var m=a(7),f=a(8),h=a(4),l=a(248);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this,b=this.props.label,d=this.props.nodeid;return l.rinput({key:this.props.label+"-input",type:"number",className:"NumPropView",defaultValue:this.props.value,style:{transition:"width 0.3s"},onBlur:function(c){c=Number(c.target.value);m.dlog("this.props.value and newval:",a.props.value,c);if(h.triv(c)||isNaN(c))c=0;m.weakassert(f.isNumber(c),
c.toString());a.sendToDocMsgBox({name:"NumPropChange",nodeid:d,label:b,value:Number(c)})}})};return b}(k.PureReactComponent);d.NumPropFormComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();k=a(18);
var m=a(277),f=a(19),h=a(248),l=a(250),g=a(4);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){l.inc_nch_render_cnt();var a=g.objMapValsToArray(this.props.nodevms,function(a){return f.createElement(m.componentDispatchNodeOrNodestub(a),a)});return h.rul({className:b.CSS_CLASSNAME+" fa-ul",hidden:!this.props.visible,key:".nch"},a)};return b}(k.PureReactComponent);a.CSS_CLASSNAME="FixedOrderNamedChildList";d.FixedOrderNamedChildListComponent=
a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();k=a(18);var m=a(277),f=a(7),h=a(19),l=a(248),g=a(250);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=
function(){var a=this;g.inc_ch_render_cnt();var c;this.props.nodevms&&0<this.props.nodevms.length&&(c=Array(this.props.nodevms.length),this.props.nodevms.forEach(function(b,d){b.key||f.derr("No key prop for "+d+"-th child VM "+b.toString()+" of node "+a.props.nodeid);b=h.createElement(m.componentDispatchNodeOrNodestub(b),b);c[d]=b}));return l.rul({key:"ch",className:b.CSS_CLASSNAME+(this.props.fixed_order?"":" dragula-container")+" fa-ul",hidden:!this.props.visible},c)};return b}(k.PureReactComponent);
a.CSS_CLASSNAME="ReorderableChildList";d.ReorderableChildListComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}();k=a(287);var m=a(4),f=a(7),h=a(9);a=function(a){function d(b){return a.call(this,b)||
this}n(d,a);d.prototype.updateDocVM=function(b,c){void 0===b&&(b=this.lastDocVM);b=a.prototype.updateDocVM.call(this,b,c);if(1===c)return b;this.trivial_values=this.non_vms_changed=this.vms_marked_changed=this.vms=this.non_vms=this.empty_objects=this.non_empty_objects=0;if(!this.lastDocVM)return f.dassert(m.triv(b.changedset)),this.lastDocVM=b;0===c?(f.assert_nt(b.topnodevm),f.dlogcat(h.LogTypes.post_build_change_annotator,"skipped annotateObjects")):(b.changedset=new Set,f.timerStart("annotateObjects"),
this.annotateObjects(b,this.lastDocVM,!0,b.changedset),f.timerEnd("annotateObjects"),window.structure_together.logging.logTypeActive(h.LogTypes.post_build_change_annotator_summary)&&console.log(this.vms_marked_changed+" non-empty changed VMs of "+this.vms+" total\n"+("size of docVM.changedset is "+b.changedset.size+"\n")+("Returned changed for "+this.non_vms_changed+" non-VMs of "+this.non_vms+" non-VMs\n")+(this.empty_objects+" empty objects and "+this.non_empty_objects+" non-empty objects\n")+(this.trivial_values+
" trivial values")));return this.lastDocVM=b};d.prototype.annotateObjects=function(a,c,d,g){f.assert_nt(a);this.non_empty_objects++;d?(this.vms++,a&&c&&a.key!==c.key&&f.dwarn("newvm and oldvm keys are different: "+a.key+", "+c.key)):this.non_vms++;for(var b=!1,e=m.objkeys(a),l=c?m.objkeys(c):null,k=0;k<e.length;k++){var n=e[k],p=a[n],n=c?c[n]:null;p instanceof Object?b=this.annotateObjectsDispatch(p,n,g)||b:null==p?(this.trivial_values++,null!=n&&(f.dwarncat(h.LogTypes.post_build_change_annotator,
"newval trivial and oldval not: ",n),b=!0)):(this.non_vms++,null==n?(b=!0,f.dwarncat(h.LogTypes.post_build_change_annotator,"oldval trivial and newval not: ",p)):b||p===n||(f.dwarncat(h.LogTypes.post_build_change_annotator,"Unequal non-null non-objects:\n",p,n),b=!0))}if(l)for(k=0;k<l.length;k++)n=l[k],m.objhas(a,n)||(f.dwarncat(h.LogTypes.post_build_change_annotator_verbose,a," != ",c),f.dwarncat(h.LogTypes.post_build_change_annotator,"oldvm object has key "+n+" but newvm object does not (node "+
c.nodeid+")"),b=!0);d?b&&(this.vms_marked_changed++,g.add(a)):b&&(f.dwarncat(h.LogTypes.post_build_change_annotator,a," != ",c),this.non_vms_changed++);return b};d.prototype.arrays_opt_helper=function(a,c,d){f.dnote("USING arrays_opt_helper");var b=c.length,e=a.length,g=Array(e-d),h=new Map,l=new Map,k;for(k=d;k<b;k++)h.set(c[k].key,k);for(k=d;k<e;k++)l.set(a[k].key,k);l.forEach(function(a,b){h.has(b)&&(g[a]=c[h.get(b)],l.delete(b),h.delete(b))});var n=m.mapToValsArrayLinearTime(h),A=h.size-1;k=0;
l.forEach(function(a,b){k>A?g[a]=null:(g[a]=c[n[k]],k++)});return g};d.prototype.annotateWithinArrays=function(a,c,d){f.dassert(a instanceof Array&&c instanceof Array);this.non_vms++;var b=!1;a.length!==c.length&&(f.dlogcat(h.LogTypes.post_build_change_annotator,"vm array length changed\n",[a,c]),b=!0,m.warnonce("OPT: two arrays in VM are of different sizes. doing a naive comparison (not optimized for additions and removals) of the two that will add all the VM in some SUFFIX of the new array to changedset"));
for(var e=-1,g,l,k=0;k<a.length;k++){var n=a[k];l=0<=e?g[k]:k<c.length?c[k]:null;n instanceof Object?(-1===e&&l instanceof Object&&n.key!==l.key&&(e=k,g=this.arrays_opt_helper(a,c,e),l=g[k]),b=this.annotateObjectsDispatch(n,l,d)||b):null==n?(this.trivial_values++,null!=l&&(f.dwarncat(h.LogTypes.post_build_change_annotator,"newval trivial and oldval not: ",l),b=!0)):(this.non_vms++,null==l?(b=!0,f.dwarncat(h.LogTypes.post_build_change_annotator,"oldval trivial and newval not: ",n)):b||n===l||(f.dwarncat(h.LogTypes.post_build_change_annotator,
"Unequal non-null non-objects:\n",n,l),b=!0))}b&&this.non_vms_changed++;return b};d.prototype.annotateObjectsDispatch=function(a,c,d){f.assert_nt(a);if(a instanceof Array)return c instanceof Array?this.annotateWithinArrays(a,c,d):(c&&f.derr("check on this...",a,c),this.non_vms++,this.non_vms_changed++,!0);if(a instanceof Object)return a.coarse_vmtype?this.annotateObjects(a,c,!0,d):0===m.objkeys(a).length?(this.empty_objects++,(a=!(c instanceof Object)||0!==m.objkeys(c).length)&&f.dwarncat(h.LogTypes.post_build_change_annotator,
"newval is empty object but old is non-object or non-empty object:\n",c),a):this.annotateObjects(a,c,!1,d);this.non_vms++;return a!==c?(this.non_vms_changed++,f.dwarncat(h.LogTypes.post_build_change_annotator,"Non-VM non-objects are distinct:\n",a,c),!0):!1};return d}(k.BasicRecVMBuilder);d.BasicRecVMBuilderWithPostBuildChangeAnnotator=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(288);var m=a(6),f=a(7),h=a(13),l=a(9),g=a(4),b=a(7),c=a(4),e=a(8),p=a(250),t=a(3),u=a(189),v=a(15);d.USE_NODEVM_CACHE=!0;d.USE_NODE_INLINING_VM_CACHE=!0;a=function(a){function k(){var b=null!==a&&a.apply(this,arguments)||this;b.nodevm_cache=d.USE_NODEVM_CACHE?new Map:null;b.shortterm_node_inlining_vm_cache=new Map;return b}n(k,a);k.prototype.nodeVMBuilderDispatch=
function(a,b,c,e,f){if(a instanceof m.SectionBreak)c=this.newSectionBreakVM(a);else if(a instanceof m.ImportNode)c=this.newImportVM(a,b,c,e,f);else if(a instanceof m.Seq)c=this.newSeqVM(a,b,c,e,f);else if(a instanceof m.Top)c=this.newTopNodeVM(a,c,e,f);else{if(g.triv(a))return null;c=this._basicNewOrUpdateNodeVM(a,b,c,e,f)}d.USE_NODEVM_CACHE&&this.nodevm_cache.set(a.oid,c);c.isUnnamedChild=null==b&&!c.isRoot;a.nclass.flatten_for_only_child&&t.STApp.the.userMode===l.STUserModes.reader&&c.ch&&c.ch.nodevms&&
1===c.ch.nodevms.length&&6===c.ch.nodevms[0].coarse_vmtype&&g.warnonce("flatten_for_only_child disabled because not taken into account in isVisibleIgnoreParent");return c};k.prototype.updateDocVM=function(a,c){void 0===a&&(a=this.lastDocVM);f.timerStart("BasicRecVMBuilder.updateDocVM");var e=[],h=[],l=[],k=[];a=t.STApp.the.nodeFocus.node;var n=g.triv(a)?this.stdoc.top:a;n?(n instanceof m.ParentalNode&&n.nodeclassesThatCanBeAddedAsUnnamedChildren().forEach(function(a){a.abstract?(b.dwarn("Can this happen?? Ok if it can. abstract nodetype:",
a.nodetype_name),h.push(a.nodetype_name)):e.push(a.nodetype_name)}),(n=n.parentNode)&&n.nodeclassesThatCanBeAddedAsUnnamedChildren().forEach(function(a){a.abstract?(b.dwarn("Can this happen?? Ok if it can. abstract nodetype:",a.nodetype_name),k.push(a.nodetype_name)):l.push(a.nodetype_name)})):f.derr("foc_nodeid is "+a.oid+" but this.stdoc.ogetNodeByPermid("+a.oid+") returned null");var p;null!=this.stdoc.top&&(this.lastDocVM&&0===c?p=this.lastDocVM.topnodevm:(d.USE_NODE_INLINING_VM_CACHE&&this.shortterm_node_inlining_vm_cache.clear(),
p=this.nodeVMBuilderDispatch(this.stdoc.top,null,c,Infinity,!1)));e.sort();h.sort();l.sort();k.sort();var x;switch(c){case 3:x=2;break;case 2:case 0:x=1;break;case 1:x=0}c={coarse_vmtype:12,stdocid:this.stdoc.stdocid,_language_id:this.stdoc.stlang.name,topnodevm:p,concrete_nodetypes_for_add_buttons:e,abstract_nodetypes_for_add_buttons:h,concrete_nodetypes_for_add_sibling_buttons:l,abstract_nodetypes_for_add_sibling_buttons:k,refreshtype:x,_canundo:this.stdoc.canUndo(),_canredo:this.stdoc.canRedo(),
_focused_nodeid:a?a.oid:null,filtering_nodes:this.stdoc.utfstate.filtering_nodes};f.timerEnd("BasicRecVMBuilder.updateDocVM");return c};k.prototype.newSeqVM=function(a,b,d,e,f){var h=a.index,k=a.maxIndex;"number"===typeof h&&(h=g.putInRange(h,0,k));b=this._basicNewOrUpdateNodeVM(a,b,d,e,f);!a.showing_all_in_seq&&c.argsFirstAmongRest(t.STApp.the.userMode,l.STUserModes.reader,l.STUserModes.localauthor)?b.ch.nodevms.forEach(function(a,b){a.hidden=b===h?!1:!0}):b.ch.nodevms.forEach(function(a){a.hidden=
!1});b._index=h;b._max_index=k;b._showing_all=a.showing_all_in_seq;return b};k.prototype.newNodeVM_public=function(a,b,c,d,e){return this.nodeVMBuilderDispatch(a,b,c,d,e)};k.prototype.newImportVM=function(a,b,c,d,e){var f=a.getFirstChild();if(g.triv(f))return this._basicNewOrUpdateNodeVM(a,b,c,d,e);f=this.nodeVMBuilderDispatch(f,b,c,d,e);if(t.STApp.the.userMode===l.STUserModes.reader)return f;f={nodeid:a.oid,stdocid:a.stdoc.stdocid,key:a.oid+".ch",nodevms:[f],visible:!0,coarse_vmtype:11};a=this._basicNewOrUpdateNodeVM(a,
b,c,d,e);a.isRoot=!1;a.parental=!0;a.has_unhidden_children=!0;a.ch=f;return a};k.prototype._basicNewOrUpdateNodeVM=function(a,c,e,h,k){var n;if(this.nodevm_cache)if(n=this.nodevm_cache.get(a.oid)){if(0>h||this.controller.partial_render_update_scheduled()&&!this.controller.render_update_params.ancestors.has(a.oid)&&this.controller.render_update_params.targetNodeId!==a.oid&&!this.controller.render_update_params.descendants.has(a.oid))return n}else g.warnonce('Disabled "No VM for ____ in cache" message.'),
h=Infinity;else b.dwarn("No node VM cache"),f.dlogif(this.controller.partial_render_update_scheduled(),"No node VM cache"),h=Infinity;f.dassert(!a.hasProp(l.SystPropNames.abstract_nodetype));k?e=n||{}:(e={},n&&(e.ch=n.ch,e.nch=n.nch));e.stdocid=a.stdoc.stdocid;e.nodeid=a.oid;e.nodenumid=a.temp_node_numid;e.parental=a.isParental();e.key=a.oid;e.depth=a.depth();e.nodetype=a.nodetype;e.coarse_vmtype=6;e.refable=m.RefableInTextMixin.isRefableInText(a);e.has_refs=e.refable&&this.stdoc.refManager.t2pset.has(a.oid);
null!=a.utfstate.filter_status?e.filter_status=a.utfstate.filter_status:delete e.filter_status;null==a.parentNode?e.isRoot=!0:delete e.isRoot;a.children_collapsed?e.childrenCollapsed=!0:delete e.childrenCollapsed;a.utfstate.panel_hidden?e.panelHidden=!0:delete e.panelHidden;c?e.label=c:delete e.label;a.isVisibleIfParentIsAndParentsChildrenExpanded()?delete e.hidden:e.hidden=!0;a.hasProp(l.SystPropNames.continued)?e.continued=!!a.booleans.getVal(l.SystPropNames.continued):delete e.continued;a.nclass.emphasize_view||
a.booleans.hasVal(l.SystPropNames.emphasize)?e.emphasize=a.nclass.emphasize_view||a.booleans.getVal(l.SystPropNames.emphasize):delete e.emphasize;a.booleans.hasVal(l.SystPropNames.demphasize)?e.demphasize=a.booleans.getVal(l.SystPropNames.demphasize):delete e.demphasize;d.USE_NODEVM_CACHE&&e!==n&&this.nodevm_cache.set(a.oid,e);a.nclass.hide_in_user_modes&&g.arrayHas(a.nclass.hide_in_user_modes,t.STApp.the.userMode)&&(e.hidden=!0);e.inlining=this.newInliningVM(a,h);!a.utfstate.panel_hidden&&v.inEditMode()&&
(e.panel=this.newPanelVM(a));if(a.isParental()){if(v.inEditMode()||a.nclass.reader_mode_expandable)c=a.upstate.numNodeStubs(a)||0,f.dassert(0<=c),e.has_children=0<a.numNamedChildren()+a.numUnnamedChildren()+c,e.has_children&&(k=(n=a.forEachNamedChild(function(a){return a.isVisibleIfParentIsAndParentsChildrenExpanded()?{val:!0,contin:!1}:null}))&&n.val,n=a.forEachUnnamedChild(function(a){return a.isVisibleIfParentIsAndParentsChildrenExpanded()?{val:!0,contin:!1}:null}),e.has_unhidden_unnamed_children=
n&&n.val,e.has_unhidden_children=k||e.has_unhidden_unnamed_children||0<c),0<h&&(a.permitsUnnamed()&&(e.ch=this.newChVM(a,h-1)),a.permitsNamed()&&(e.nch=this.newNChVM(a,h-1)))}else delete e.has_children;return e};k.prototype.newTopNodeVM=function(a,b,c,d){void 0===c&&(c=Infinity);void 0===d&&(d=!1);b=this._basicNewOrUpdateNodeVM(a,null,b,c,d);f.dassert(null!=a.oid);b._title=a.get_title();return b};k.prototype.newChVM=function(a,b,c){var d=this;void 0===c&&(c=Infinity);f.dassert(0<=c);this.controller.unnamedChildrenOrderChanged.has(a.oid)&&
(g.warnonce("Disabled: This way of accomodating Dragula is a significant source of inefficiency when a node belonging to a long list of nodes is moved."),this.controller.unnamedChildrenOrderChanged.delete(a.oid));var e={nodeid:a.oid,stdocid:a.stdoc.stdocid,key:a.oid+".ch",visible:!a.children_collapsed,coarse_vmtype:11,nodevms:[]};if(e.visible){a.forEachUnnamedChild(function(h){h=d.nodeVMBuilderDispatch(h,null,b,c-1,!1);g.triv(h)?console.warn("Iteration over children of node "+a.oid+" produced a null child vm (possibly because given a null child). Will skip making VM for that child."):
(h.isUnnamedChild=!0,f.dassert(null!=h),e.nodevms.push(h))});var h=a.upstate.getUnnamedNodeStubs(a);if(h&&0<h.length)for(var l=void 0,k=void 0,l=h.length-1;0<=l;l--)k=Math.min(e.nodevms.length,h[l][1]),g.arrayInsert(e.nodevms,this.newNodeStubVM("nodestub"+l.toString(),h[l][0],a.oid,l,k),k)}return e};k.prototype.newNChVM=function(a,b,c){var d=this;void 0===c&&(c=Infinity);f.dassert(0<=c);var e={nodeid:a.oid,stdocid:a.stdoc.stdocid,key:a.oid+".nch",nodevms:null,visible:!a.children_collapsed,coarse_vmtype:10};
if(e.visible){e.nodevms={};a.forEachNamedChild(function(h,l){h=d.nodeVMBuilderDispatch(h,l,b,c-1,!1);g.triv(h)?console.warn("Iteration over children of node "+a.oid+" produced a null child vm (possibly because given a null child). Will skip making VM for that child."):(f.dassert(null!=h),h.isUnnamedChild=!1,e.nodevms[l]=h)});var h=a.upstate.getNamedNodeStubs(a);h&&0<h.size&&h.forEach(function(b,c){e.nodevms[c]=d.newNodeStubVM("nodestub"+c,b,a.oid,c)})}return e};k.prototype._flatPropDispatchForInliningVM=
function(a,b,c){var d=a.getClass().allowed_flatprops,h;h=a.getPropVal(b);f.dassert(!e.isFlatPropLink(h),"This assertion is temporary, just to let me know that the code path is used.");switch(d[b]){case 6:c[b]=h.getText();break;case 7:f.dassert(e.isEditableString(h));d=a.immutableStrings.getVal(l.SystPropNames.text_formatting_lang);h=g.nottriv(d)?u.sanitizeHtmlST(a.editableStrings.getVal(b),d):u.sanitizeHtmlST(a.editableStrings.getVal(b));a={value:h,key:a.oid+".inlining."+b,nodeid:a.oid,label:b,stdocid:a.stdoc.stdocid};
g.nottriv(d)&&(a._text_format=d);c[b]=a;break;case 5:c[b]=h;break;case 3:f.dremindonce("Changed VM for immutstring to same as stringselect. I'm surprised it wasn't like that before. Had been same as immutstring_with_refs.");c[b]=h;break;case 4:g.remindonce("shouldn't need stdocid prop anymore");h=u.sanitizeHtmlST(h,"wordlevel_html_etc");c[b]={coarse_vmtype:13,value:h,key:a.oid+".inlining."+b,nodeid:a.oid,label:b,stdocid:a.stdoc.stdocid};break;case 1:c[b]=a.booleans.getVal(b);break;case 2:c[b]=a.numbers.getVal(b);
break;default:f.derr("unhandled flat prop type "+d[b]+" for label "+b+". failing silently.",d),c[b]=l.ERROR_DISPLAY}return c};k.prototype.newInliningVM=function(a,b){var c=this;void 0===b&&(b=Infinity);if(d.USE_NODE_INLINING_VM_CACHE&&this.shortterm_node_inlining_vm_cache.has(a.oid))return this.shortterm_node_inlining_vm_cache.get(a.oid);p.inc_uncached_node_inlining_vm_build();var e={nodeid:a.oid,stdocid:a.stdoc.stdocid,nodetype:a.nodetype,key:a.oid+".inlining",coarse_vmtype:8};a.nclass.human_readable_name&&
(e.hrlabel=a.nclass.human_readable_name);d.USE_NODE_INLINING_VM_CACHE&&this.shortterm_node_inlining_vm_cache.set(a.oid,e);var k=a.getClass(),n=k.allowed_flatprops,r=a instanceof m.ParentalNode,t;if(this.lang.forView.use_propNamesToExcludeFromInliningVM){var y=g.objkeys(n),u=this.lang.forView.getExcludedPropsNames(k);u?(t=[],g.objkeys(n).forEach(function(a){g.arrayHas(u,a)||t.push(a)}),r&&(g.arrayHas(u,l.SystPropNames.ch)||t.push(l.SystPropNames.ch),g.arrayHas(u,l.SystPropNames.nch)||t.push(l.SystPropNames.nch))):
t=r?y.concat(l.SystPropNames.nch,l.SystPropNames.ch):y}else t=this.lang.forView.getExtraAllowedInliningVMProps(k);f.dassert(a.nodetype!==h.Nodetypes.FreeForm||!g.arrayHas(t,l.SystPropNames.ch));t&&0<t.length&&t.forEach(function(d){if(a.links.hasObj(d)){var h=a.links.getObj(d);if(h){var n=a.stdoc.ogetNodeByPermId(h.linked_nodeid);n?c._flatPropDispatchForInliningVM(n,d,e):f.derr(a.oid+"'s link to node id "+h.linked_nodeid+" for property "+d+" did not resolve.")}else console.error("Shouldn't happen...")}else if(d===
l.SystPropNames.ch){if(f.dassert(a instanceof m.ParentalNode),d=a.numUnnamedChildren(),0<d)for(e.ch=Array(d),h=0;h<d;h++)n=a.getChild(h),f.weakassert(null!=n,"There appears to be a null node at index "+h+" in the children of node "+a.oid+": ",n),n&&(e.ch[h]=c.newInliningVM(n,b-1),f.weakassert(null!=e.ch[h]))}else d===l.SystPropNames.nch?(f.dassert(a instanceof m.ParentalNode,"Node "+a.oid+" has .nch in extra_props for VM, but it is not a parental node.",a),e.nch={},a.forEachNamedChild(function(d,
g){d=a.getChild(g);f.weakassert(null!=d,"There appears to be a null node at label "+g+" in the named children of node "+a.oid+": ",d);d&&(e.nch[g]=c.newInliningVM(d,b-1))})):g.objhas(k.allowed_flatprops,d)&&a.hasProp(d)&&c._flatPropDispatchForInliningVM(a,d,e)});try{a.hasType(h.Nodetypes.Ref)&&this.updateRefNodeInliningVMByDereference(a,e);t&&g.arrayHas(t,l.SystPropNames.html_name)&&(e._resolved_html_name={stdocid:a.stdoc.stdocid,value:a.get_resolved_html_name(1),key:a.oid+".inlining.resolved"+l.SystPropNames.html_name,
nodeid:a.oid,label:l.SystPropNames.html_name});if(a.hasType(h.Nodetypes.Seq)){var x=a.maxIndex,v=a.index;"number"===typeof v&&(e._index=g.putInRange(v,0,x));e._showing_all=a.showing_all_in_seq}var A=this.lang.forView.getCustomInliningVMUpdater(a.nodetype);if(A)return A(a,e)}catch(L){f.derr("Exception during extra adhox InliningVM building steps",L)}return e};return k}(k.VMBuilderNonRecursive);d.BasicRecVMBuilder=a},function(k,d,a){var n=a(7),m=a(13),f=a(9),h=a(11),l=a(4),g=a(272);k=function(){function a(a){this.stdoc=
a;this.lang=a.stlang}Object.defineProperty(a.prototype,"controller",{get:function(){return g.STController.the},enumerable:!0,configurable:!0});a.prototype.newPropVM=function(a,b){var c={nodeid:a.oid,stdocid:a.stdoc.stdocid,label:b,key:b+".string_prop",form:null,coarse_vmtype:null};if(a=a.stdoc.stlang.propnames_for_display[b])c.display_name=a;return c};a.prototype.newStringPropVM=function(a,b){var c=this.newPropVM(a,b);c.form=this.newStringPropFormVM(a,b);c.coarse_vmtype=0;return c};a.prototype.newBoolPropVM=
function(a,b){var c=this.newPropVM(a,b);c.form=this.newBoolPropFormVM(a,b);c.coarse_vmtype=1;return c};a.prototype.newNumPropVM=function(a,b){var c=this.newPropVM(a,b);c.form=this.newNumPropFormVM(a,b);c.coarse_vmtype=2;return c};a.prototype.newBoolPropFormVM=function(a,b){var c=a.getClass(),d={nodeid:a.oid,stdocid:a.stdoc.stdocid,label:b,value:null,coarse_vmtype:4,key:a.oid+"."+b,formtype:0};1!==c.allowed_flatprops[b]&&console.error("node has bool prop "+b+" but "+m.nodeclassName(c)+".allowed_flatprops["+
b+"] is either null or not equal to 1.");d.value=a.booleans.getVal(b);return d};a.prototype.newNumPropFormVM=function(a,b){var c=a.getClass(),d={nodeid:a.oid,stdocid:a.stdoc.stdocid,label:b,value:null,coarse_vmtype:5,key:a.oid+"."+b,formtype:1};2!==c.allowed_flatprops[b]&&console.error("node has num prop "+b+" but "+m.nodeclassName(c)+".allowed_flatprops["+b+"] is either null or not equal to 2.");d.value=a.numbers.getVal(b);return d};a.prototype.newStringPropFormVM=function(a,b){if(a.links.hasObj(b)){n.dwarncat(f.LogTypes.links,
"Found FlatPropLink");var c=a.links.getObj(b),c=a.stdoc.ogetNodeByPermId(c.linked_nodeid);b=this.newStringPropFormVM(c,b);b.fromFlatPropLinkOfNode=a.oid;return b}var c=a.getClass(),d={nodeid:a.oid,stdocid:a.stdoc.stdocid,label:b,value:"",coarse_vmtype:3,formtype:null,key:a.oid+"."+b};a.utfstate.lastAddedStringProp===b&&(d.isLastSelected=!0);var e=c.allowed_flatprops[b];null===e&&console.error("node has string prop "+b+" but "+m.nodeclassName(c)+".allowed_flatprops["+b+"] is null");switch(e){case 6:case 7:d.formtype=
4;d.value=a.editableStrings.getVal(b);d.uobjid=a.editableStrings.getObj(b).id;break;case 4:case 3:d.formtype=3;d.value=a.immutableStrings.getVal(b);break;case 5:d.formtype=2;d.value=a.immutableStrings.getVal(b);var g=!1,e=void 0;(e="function"===typeof c.possible_values[b]?c.possible_values[b](a):c.possible_values[b])?d.options=e.map(function(a){d.value===a[1]&&(g=!0);return{display:a[0],value:a[1],key:a[1]}}):(n.dwarn("Node .possible_values("+b+") on node class "+a.nodetype),d.options=[]);g||d.options.push({display:f.BROKEN_REF_DISPLAY,
value:d.value});break;default:console.error("Node:",a),console.error("label:",b),console.error("Invalid StringPropType "+e),d.formtype=3,d.value="error"}return d};a.prototype.newNodeStubVM=function(a,b,d,g,f){n.assert_nt(a,b);var c=this.stdoc.stlang,e=[];c.getSubtypes(b).forEach(function(a){c.isConcreteNodetype(a)&&e.push(a)});a={stdocid:this.stdoc.stdocid,parentid:d,key:a,coarse_vmtype:7,node_class_names:e,stubs_label_or_ind:g};l.nottriv(f)&&(a.nodes_ind=f);return a};a.prototype.newPanelVM=function(a){var b=
this,c={nodeid:a.oid,stdocid:a.stdoc.stdocid,key:a.oid+".panel",visible:!a.utfstate.panel_hidden,coarse_vmtype:9},d=a.propkeys.ofNumProps(),g=a.propkeys.ofBooleanProps(),h=a.propkeys.ofImmutableStrProps(),k=a.propkeys.ofEditableStrProps(),m=g.length+h.length+k.length+d.length-1;if(0===m)c.visible=!1;else{c.flatprops=Array(m);var x=0;g.forEach(function(d){l.objhas(a.nclass.allowed_flatprops,d)?(n.weakassert(1===a.nclass.allowed_flatprops[d]),d=b.newBoolPropVM(a,d),n.dassert(null!=d),c.flatprops[x]=
d):(console.warn("Node has flat prop "+d+" (should be boolean) that's not in allowed_flatprops. This is probably OK and due to converting nodetypes."),c.flatprops[x]=null);x++});d.forEach(function(d){l.objhas(a.nclass.allowed_flatprops,d)?(n.weakassert(2===a.nclass.allowed_flatprops[d]),d=b.newNumPropVM(a,d),n.dassert(null!=d),c.flatprops[x]=d):(console.warn("Node "+a.oid+" has flat prop "+d+" (should be number) that's not in allowed_flatprops. This is probably OK and due to converting nodetypes."),
c.flatprops[x]=null);x++});h.forEach(function(d){l.objhas(a.nclass.allowed_flatprops,d)?d!==f.SystPropNames.nodetype&&(d=b.newStringPropVM(a,d),n.dassert(null!=d),c.flatprops[x]=d,x++):(console.warn("Node "+a.oid+" has flat prop "+d+" (should be immutable string) that's not in allowed_flatprops. This is probably OK and due to converting nodetypes."),c.flatprops[x]=null,x++)});k.forEach(function(d){l.objhas(a.nclass.allowed_flatprops,d)?(d=b.newStringPropVM(a,d),n.dassert(null!=d),x<c.flatprops.length&&
(c.flatprops[x]=d,x++)):(console.warn("Node "+a.oid+" has string prop "+d+" (should be editable string) that's not in allowed_flatprops. This is probably OK and due to converting nodetypes."),c.flatprops[x]=null,x++)});n.dassert(x===m)}return c};a.prototype.newSectionBreakVM=function(a){var b={nodeid:a.oid,stdocid:a.stdoc.stdocid,key:a.oid,nodenumid:a.temp_node_numid,parental:!1,depth:a.depth(),coarse_vmtype:6,nodetype:m.Nodetypes.SectionBreak};null!=a.utfstate.filter_status?b.filter_status=a.utfstate.filter_status:
delete b.filter_status;return b};a.prototype.updateRefNodeInliningVMByDereference=function(a,b){var c=a.ogetReferredToNode();if(c){if(c.get_html_name?a=h.resolveDisplayOfRefableInTextNode(this.stdoc.refManager.mutid_regex,c,1):(console.error("get_html_name method seems to be missing on STNode ",c),a=f.BROKEN_REF_DISPLAY),b._id_ref=c.oid,c.hasProp(f.SystPropNames.special_inlining)&&(b._special_inlining=c.immutableStrings.getVal(f.SystPropNames.special_inlining)),c=c.get_html_template())b.html_template_of_ref=
c}else n.dwarn("Couldn't get RefNode "+a.oid+"'s referred-to node "+a.reffed_nodeid),a=f.BROKEN_REF_DISPLAY;b.display_symb_only_of_ref=a};return a}();d.VMBuilderNonRecursive=k},function(k,d){k=function(){function a(a,d,f,h,l){void 0===d&&(d=[]);void 0===f&&(f=!0);void 0===h&&(h=!1);void 0===l&&(l=!1);this.target=a;this.events=d;this.isLocal=f;this.isRedo=h;this.isUndo=l}a.setPropertyNameOnMapChangeEvent=function(a,d){a.property=d};a.getPropertyNameFromMapChangeEvent=function(a){return a.property};
return a}();d.BatchDocEvent=k},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(291);var m=a(292),f=a(7),h=a(8),l=a(297),g=a(9),b=a(4);a=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||
this;b.save_to_disk=!0;b.manualSave=function(a,c){void 0===c&&(c=!0);f.assert_nt(a);b.save_to_disk&&(c?l.setLocalStorageFromSTDocDataNOW(a,b.get_open_syncing_model(a).getRoot()):l.setLocalStorageFromSTDocData(a,b.get_open_syncing_model(a).getRoot()))};return b}n(c,a);c.prototype.loadDataFromLocalPersistentStorageIntoExistingOpenDoc=function(a,b){f.assert_nt(b);var c=l.fileidToLocalStorageId(a),d=localStorage.getItem(c);if(d)return c=JSON.parse(d),this.loadDataFromJsonIntoExistingOpenDoc(c,a,b);console.error("Data for file id "+
a+" not found at localStorage key "+c+".");return!1};c.prototype.loadDataFromJsonIntoExistingOpenDoc=function(a,b,c){try{var d=this.get_open_syncing_model(b);f.assert_nt(d);f.assert_nt(c);"shortjson"===c?h.shortJsonForFirstGenesisToSTDocData(d,a):h.googleDocJsonToSTData(d,a,!0);return!0}catch(y){return f.derr("Exception in loadDataFromJsonIntoExistingOpenDoc: ",y),!1}};c.prototype.loadPersistentSyncingDocument=function(a,b,c){c=c||"googlejson";var d=new m.LocalSyncingDocument(!0,!1,!0);this.record_syncing_doc_is_open(a,
d);this.loadDataFromLocalPersistentStorageIntoExistingOpenDoc(a,c)&&(b(d,a),f.dlogcat(g.LogTypes.input_event,"Initial json loaded in existing open doc. Now enabling undo/redo"),d.getModel().undoEnabled=!0)};c.prototype.loadPersistentSyncingDocumentFromJson=function(a,b,c,d){f.assert_nt(c);var e=new m.LocalSyncingDocument(!0,!1,!0);this.record_syncing_doc_is_open(a,e);this.loadDataFromJsonIntoExistingOpenDoc(b,a,c)&&(d(e,a),f.dlog("Initial json loaded in existing open doc. Now enabling undo/redo"),
e.getModel().undoEnabled=!0)};c.prototype.newPersistentSyncingDocument=function(a,c,d,e){a=new m.LocalSyncingDocument(!0,!1,!0);b.nottriv(d)&&h.googleDocJsonToSTData(a.getModel(),d,!0);c(a,e());f.dlog("Initial stdoc created. Now enabling undo/redo");a.getModel().undoEnabled=!0};c.prototype.setDocRootSharedMapListener=function(a,b){var c=this;this.get_open_syncing_model(a).root_listener=function(d){f.dassert(d.isLocal);b(d);c.manualSave(a,!0)}};return c}(k.FilesManager);d.LocalFilesManager=a},function(k,
d,a){var n=a(7),m=a(4);k=function(){function a(a){this.appdata=a;this._open_syncing_docs=new Map;this.manualSave=void 0}a.prototype.get_open_syncing_doc_ids=function(){return m.mapToKeysArrayLinearTime(this._open_syncing_docs)};a.prototype.get_open_syncing_doc_id_title_pairs=function(){for(var a=this.get_open_syncing_doc_ids(),d=Array(this._open_syncing_docs.size),g=0;g<d.length;g++)d[g]=[a[g],this.appdata.getFileName(a[g])||"doc name not found"];return d};a.prototype.get_open_syncing_doc_title_id_pairs=
function(){for(var a=this.get_open_syncing_doc_ids(),d=Array(this._open_syncing_docs.size),g=0;g<d.length;g++)d[g]=[this.appdata.getFileName(a[g])||"doc name not found",a[g]];return d};a.prototype.get_open_syncing_doc=function(a){n.assert_nt(a);return this._open_syncing_docs.get(a)};a.prototype.get_open_syncing_model=function(a){n.assert_nt(a);if(a=this.get_open_syncing_doc(a))return a.getModel()};a.prototype.record_syncing_doc_is_open=function(a,d){n.assert_nt(a,d);this._open_syncing_docs.set(a,
d)};a.prototype.close_syncing_doc=function(a){n.assert_nt(a);this._open_syncing_docs.delete(a)};return a}();d.FilesManager=k},function(k,d,a){var n=a(293),m=a(7);k=function(){function a(a,d,g){this.model=new n.LocalSyncingModel(a,d,g)}a.prototype.getModel=function(){return this.model};a.prototype.removeAllEventListeners=function(){m.dlog("<LocalSyncingDocument>.removeAllListeners called, but nothing to do since there cannot be collaborators.")};return a}();d.LocalSyncingDocument=k},function(k,d,a){function n(a){console.log(f.prettyArray(a.map(function(a){return a?
g.editOpRecordToString(a):"??"})))}var m=a(294),f=a(4),h=a(7),l=a(295),g=a(296),b=a(9),c=a(4);k=function(){function a(a,b,c){this.maxNumericId=0;this.undoSupported=this.undoEnabled=!1;this.numNestedCompoundOps=0;this.undoStack=[];this.redoStack=[];this.undoEnabled=b;this.undoSupported=c;this.allObjects=new Map;a&&(this.rootmap=this.createMap())}a.prototype.addObject=function(a){var b=Number(a.id);!isNaN(b)&&b>this.maxNumericId&&(this.maxNumericId=b);c.mapSetAndWarnIfExists(this.allObjects,a.id,a)};
a.prototype.getObject=function(a){return this.allObjects.get(a)};a.prototype.hasObjectWithId=function(a){return this.allObjects.has(a)};a.prototype.freshId=function(){return(this.maxNumericId+1).toString()};a.prototype.getRoot=function(){return this.rootmap};a.prototype.createList=function(a,b){h.dassert(c.triv(a));a=this.undoSupported?new l.LocalUListWithUndo(this,b):new m.LocalUList(this,b);this.addObject(a);return a};a.prototype.createMap=function(a,b){h.dassert(c.triv(a));a=this.undoSupported?
new l.LocalUMapWithUndo(this,b):new m.LocalUMap(this,b);this.addObject(a);return a};a.prototype.createString=function(a,b){a=this.undoSupported?new l.LocalUEditableStringWithUndo(this,b,a):new m.LocalUEditableString(this,b,a);this.addObject(a);return a};a.prototype.beginCompoundOperation=function(a,b){this.numNestedCompoundOps++;a?this.processForUndoStack([10,this.getRoot(),a]):this.processForUndoStack([10,this.getRoot()])};a.prototype.endCompoundOperation=function(){this.numNestedCompoundOps--;this.processForUndoStack([11,
this.getRoot()])};a.prototype.redo=function(a){void 0===a&&(a=0);var c=this.popRedoStack();10===c[0]?(h.dlogcat(b.LogTypes.undo,"Beginning to REDO a compound operation"),this.redo(a+1)):11===c[0]?1<a?this.redo(a-1):h.dlogcat(b.LogTypes.undo,"Finished REDOing a compound operation"):(g.applyEditOpRecord(this,c),0<a&&this.redo(a))};a.prototype.undo=function(a){void 0===a&&(a=0);var c=this.popUndoStack();10===c[0]?(h.dlogcat(b.LogTypes.undo,"Beginning to UNDO a compound operation"),this.undo(a+1)):11===
c[0]?1<a?this.undo(a-1):h.dlogcat(b.LogTypes.undo,"Finished UNDOing a compound operation"):(g.applyEditOpRecord(this,c),0<a&&this.undo(a))};a.prototype.removeAllEventListeners=function(){this.root_listener=null};a.prototype.toJson=function(a,b){throw new c.NotYetImplemented;};a.prototype.processForUndoStack=function(a){this.undoEnabled&&(h.dlogcat(b.LogTypes.undo,"Undoable edit action performed: ",g.editOpRecordToString(a)),this.pushToUndoStack(g.editOpRecordInverse(a)))};a.prototype.pushToUndoStack=
function(a){this.undoEnabled&&(h.dlogcat(b.LogTypes.undo,"Pushing to undo stack: ",g.editOpRecordToString(a)),this.undoStack.push(a),this.canUndo=!0,h.dlogcat(b.LogTypes.undo,"undoStack size "+this.undoStack.length))};a.prototype.pushToRedoStack=function(a){this.undoEnabled&&(this.redoStack.push(a),this.canRedo=!0,h.dlogcat(b.LogTypes.undo,"redoStack size "+this.redoStack.length))};a.prototype.popUndoStack=function(){h.weakassert(this.undoEnabled,"LocalSyncingModel.popUndoStack called when undoEnabled is false. Not harmful but probably shouldn't happen.");
if(this.undoEnabled){var a=this.undoStack.pop();0===this.undoStack.length&&(this.canUndo=!1);this.pushToRedoStack(g.editOpRecordInverse(a));h.dlogcat(b.LogTypes.undo,"undoStack size "+this.undoStack.length);return a}return null};a.prototype.popRedoStack=function(){h.weakassert(this.undoEnabled,"LocalSyncingModel.popRedoStack called when undoEnabled is false. Not harmful but probably shouldn't happen.");if(this.undoEnabled){var a=this.redoStack.pop();0===this.redoStack.length&&(this.canRedo=!1);this.pushToUndoStack(g.editOpRecordInverse(a));
h.dlogcat(b.LogTypes.undo,"redoStack size "+this.redoStack.length);return a}return null};a.prototype.printUndoRedoStacks=function(){n(this.undoStack);console.log("\n");n(this.redoStack)};a.prototype.stackSizes=function(){return[this.undoStack.length,this.redoStack.length]};return a}();d.LocalSyncingModel=k},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}(),m=a(4),f=a(7),h=a(289),l=a(8),g=a(9);k=function(){function a(a,b){this.model=a;if(b)if(a.hasObjectWithId(b))f.derrcat(g.LogTypes.could_be_worrisome,"Proposed id "+b+" is already assigned to the following LocalSyncingObject. Will assign a fresh id instead. Older then newer object: ",a.getObject(b),this);else{this.id=b;return}this.id=a.freshId()}a.prototype.maybeSendBasicEvent=
function(){if(this.model.root_listener){f.dlogcat(g.LogTypes.localModel_events,"Should be sending event...");var a=new h.BatchDocEvent(this);a.events.push({target:this,isLocal:!0});this.model.root_listener(a)}};a.prototype.toString=function(){return l.prettySTDataShortJson(this)};return a}();d.LocalSyncingObject=k;a=function(a){function b(b,c,d){b=a.call(this,b,c)||this;b.type="EditableString";b.str=d||"";return b}n(b,a);b.prototype.getText=function(){return this.str};b.prototype.setText=function(a){this.str=
a;this.maybeSendBasicEvent()};return b}(k);d.LocalUEditableString=a;a=function(a){function b(b,c){b=a.call(this,b,c)||this;b.type="List";b.lst=[];return b}n(b,a);Object.defineProperty(b.prototype,"length",{get:function(){return this.lst.length},enumerable:!0,configurable:!0});b.prototype.asArray=function(){return this.lst};b.prototype.get=function(a){return this.lst[a]};b.prototype.insert=function(a,b){m.arrayInsert(this.lst,b,a);this.maybeSendBasicEvent()};b.prototype.insertAll=function(a,b){throw new m.NotYetImplemented;
};b.prototype.lastIndexOf=function(a,b){throw new m.NotYetImplemented;};b.prototype.set=function(a,b){this.lst[a]=b;this.maybeSendBasicEvent()};b.prototype.push=function(a){this.lst.push(a);this.maybeSendBasicEvent()};b.prototype.remove=function(a){m.arrayDeleteOrErr(this.lst,a);this.maybeSendBasicEvent()};b.prototype.move=function(a,b){m.arrayMove(this.lst,a,b);this.maybeSendBasicEvent()};b.prototype.moveToList=function(a,b,c){if(this===b)this.move(a,c);else{var d=this.get(a);m.arrayDeleteOrErr(this.lst,
a);m.arrayInsert(b.asArray(),d,c);this.maybeSendBasicEvent();b.maybeSendBasicEvent()}};return b}(k);d.LocalUList=a;k=function(a){function b(b,c){b=a.call(this,b,c)||this;b.type="Map";b.dct=new Map;b._keys=[];return b}n(b,a);b.prototype.maybeSendMapEvent=function(a,b){if(this.model.root_listener){f.dlogcat(g.LogTypes.localModel_events,"Should be sending event...");var c=new h.BatchDocEvent(this),d={target:this,isLocal:!0};b&&m.mergeSimpleObjectsSecondIntoFirst(d,b);h.BatchDocEvent.setPropertyNameOnMapChangeEvent(d,
a);c.events.push(d);this.model.root_listener(c)}};b.prototype.get=function(a){return this.dct.get(a)};b.prototype.has=function(a){return this.dct.has(a)};b.prototype.set=function(a,b){if(this.dct.has(a)){var c=this.dct.get(a);this.dct.set(a,b);this.maybeSendMapEvent(a,{oldValue:c})}else this._keys.push(a),this.dct.set(a,b),this.maybeSendMapEvent(a)};b.prototype.delete=function(a){f.timerStart("deleteKey");var b=this.get(a);this.dct.delete(a)&&(m.arrayRemove(this._keys,a),this.maybeSendMapEvent(a));
f.timerEnd("deleteKey");return b};b.prototype.keys=function(){return this._keys};Object.defineProperty(b.prototype,"size",{get:function(){return this.dct.size},enumerable:!0,configurable:!0});return b}(k);d.LocalUMap=k},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var g in d)d.hasOwnProperty(g)&&(a[g]=d[g])};return function(d,f){function g(){this.constructor=d}a(d,f);d.prototype=
null===f?Object.create(f):(g.prototype=f.prototype,new g)}}();k=a(294);var m=a(4);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);return d}(k.LocalSyncingObject);d.LocalSyncingObjectWithUndo=a;a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.setText=function(d,g){void 0===g&&(g=!0);g&&this.model.processForUndoStack([0,this,this.str]);a.prototype.setText.call(this,d)};return d}(k.LocalUEditableString);d.LocalUEditableStringWithUndo=
a;a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.insert=function(d,g,b){void 0===b&&(b=!0);b&&this.model.processForUndoStack([1,this,d,g]);a.prototype.insert.call(this,d,g)};d.prototype.insertAll=function(a,d,b){throw new m.NotYetImplemented;};d.prototype.set=function(d,g,b){void 0===b&&(b=!0);b&&this.model.processForUndoStack([3,this,d,g]);a.prototype.set.call(this,d,g)};d.prototype.push=function(d,g){void 0===g&&(g=!0);g&&this.model.processForUndoStack([4,
this,d]);a.prototype.push.call(this,d)};d.prototype.remove=function(d,g){void 0===g&&(g=!0);g&&this.model.processForUndoStack([5,this,d]);a.prototype.remove.call(this,d)};d.prototype.move=function(d,g,b){void 0===b&&(b=!0);b&&this.model.processForUndoStack([6,this,d,g]);a.prototype.move.call(this,d,g)};d.prototype.moveToList=function(d,g,b,c){void 0===c&&(c=!0);this===g?this.move(d,b,c):(c&&this.model.processForUndoStack([7,this,d,g,b]),a.prototype.moveToList.call(this,d,g,b))};return d}(k.LocalUList);
d.LocalUListWithUndo=a;k=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.set=function(d,g,b){void 0===b&&(b=!0);b&&this.model.processForUndoStack([8,this,d,g]);a.prototype.set.call(this,d,g)};d.prototype.delete=function(d,g){void 0===g&&(g=!0);g&&this.model.processForUndoStack([9,this,d]);return a.prototype.delete.call(this,d)};return d}(k.LocalUMap);d.LocalUMapWithUndo=k},function(k,d,a){var n=a(4),m=a(7),f=a(9);d.ShDataOpList="str_setText list_insert list_insertAll list_set list_push list_remove list_move list_moveToList map_set map_delete begin_compound end_compound".split(" ");
d.editOpRecordToString=function(a){for(var f=d.ShDataOpList[a[0]]+", ",f=f+a[1].id,g=2;g<a.length;g++)f="object"===typeof a[g]&&a[g].id?f+(", "+a[g].id):f+(", "+a[g].toString());return f};d.applyEditOpRecord=function(a,f){a=f.slice(2);m.dlog(d.ShDataOpList[f[0]],f[1].type,f);switch(f[1].type){case "EditableString":f=f[1];f.setText.apply(f,a.concat([!1]));return;case "List":var g=f[1];switch(f[0]){case 1:g.insert.apply(g,a.concat([!1]));return;case 2:throw new n.NotYetImplemented;case 3:g.set.apply(g,
a.concat([!1]));return;case 4:g.push.apply(g,a.concat([!1]));return;case 5:g.remove.apply(g,a.concat([!1]));return;case 6:g.move.apply(g,a.concat([!1]));return;case 7:g.moveToList.apply(g,a.concat([!1]));return}throw new n.ShouldntGetHere(f,"unhandled list edit: "+f.toString());case "Map":g=f[1];switch(f[0]){case 8:g.set.apply(g,a.concat([!1]));return;case 9:g.delete.apply(g,a.concat([!1]));return}throw new n.ShouldntGetHere(f,"unhandled map edit: "+f.toString());}throw new n.ShouldntGetHere(f,"unhandled edit: "+
f.toString());};d.editOpRecordInverse=function(a){var d=a.slice(2);switch(a[1].type){case "EditableString":var g=a[1];return[0,g,g.getText()];case "List":g=a[1];switch(a[0]){case 1:return[5,g,d[0]];case 2:throw new n.NotYetImplemented;case 3:return m.dlogcat(f.LogTypes.undo,"using list_set, whose inverse is probably wrong"),a=d[0],d=g.get(a),[3,g,a,d];case 4:return m.dlogcat(f.LogTypes.undo,"using list_push, whose inverse might be wrong"),[5,g,g.length];case 5:return a=d[0],d=g.get(a),[1,g,a,d];case 6:return[6,
g,d[1],d[0]];case 7:return[7,d[1],d[2],d[0]]}break;case "Map":switch(g=a[1],a[0]){case 8:return g.has(d[0])?[8,g,d[0],g.get(d[0])]:[9,g,d[0]];case 9:return[8,g,d[0],g.get(d[0])];case 10:return[11,a[1]];case 11:return[10,a[1]]}}throw new n.ShouldntGetHere("couldn't invert edit op: "+a.toString());}},function(k,d,a){function n(a,c){f.assert_nt(a,c);window.setTimeout(function(){f.dlogcat(h.LogTypes.save_event,"setLocalStorageFromSTDocDataNOW in Timeout, with fileid ",a);f.dlogcat(h.LogTypes.ioevent,
"Writing to LocalStorage!");var b=m(a),d=l.sDataToGoogleJson(c);try{store.set(b,d)}catch(t){if(t instanceof DOMException)alert("The file has gotten too large to automatically save in the browser's storage.\n\nTalk to Dustin. In the meantime, use the save button on the top right of the screen, which will always work."),console.warn("Exception trying to write to localStorage:\njson length "+JSON.stringify(d).length+"\n"+t.name+": "+t.message);else throw t;}},0)}function m(a){return h.LOCAL_STORAGE_PREFIX+
d.LOCAL_DOCFILE_PREFIX+a}var f=a(7),h=a(9),l=a(8),g=a(4);d.LOCAL_DOCFILE_PREFIX="local.file.";d.setLocalStorageFromSTDocData=function(a,c){g.throttled("setLocalStorageFromSTDocData",function(){return n(a,c)},h.MIN_TIME_BETWEEN_LOCAL_STORAGE_WRITES)};d.setLocalStorageFromSTDocDataNOW=n;d.fileidToLocalStorageId=m;d.localStorageIdToFileId=function(a){return a.substring((h.LOCAL_STORAGE_PREFIX+d.LOCAL_DOCFILE_PREFIX).length)}},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||
{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();k=a(291);var m=a(7),f=a(9),h=a(299),l=a(301),g=a(8);a=function(a){function b(c){c=a.call(this,c)||this;b.rtloader=b.rtloader||new h.RTLoaderWrapped2015;m.dwarn("added this while trying to get drive api working again");c.rtloader=b.rtloader;return c}
n(b,a);b.prototype.get_open_syncing_doc=function(a){return this._open_syncing_docs.get(a)};b.prototype.get_open_syncing_model=function(a){if(a=this.get_open_syncing_doc(a))return a.getModel()};b.prototype.newPersistentSyncingDocument=function(a,c,d){var e=this;b.rtloader.newFileGeneric(a||b.DEFAULT_REALTIME_FILENAME,function(a){return b.rtloader.docid=a},null,function(a){m.dlog("Realtime's initializeModel callback");d&&(g.googleDocJsonToSTData(a,d,!0),m.dlog("Imported json to this stdata:",a.getRoot()))},
function(a){m.dlogcat(f.LogTypes.entering,"Entering onFileLoaded in <RealtimeFilesManager>.newPersistentSyncingDocument");b.rtloader.collab_doc=a;var d=b.rtloader.docid;e._open_syncing_docs.set(d,a);c(a,d)},l.RT_IN_MEM_MODE())};b.prototype.loadPersistentSyncingDocument=function(a,c){var d=this;m.assert_nt(a);l.RT_IN_MEM_MODE()&&(m.dwarn("Switching to Realtime-online mode."),syncing_data.widgets.rtInMemCheckbox().disable());b.rtloader.loadExistingGeneric(a,null,function(b){m.dlogcat("load-file-progress",
"Entering onFileLoaded in <RealtimeFilesManager>.loadPersistentSyncingDocument");try{d._open_syncing_docs.set(a,b),c(b,a)}catch(v){throw console.error(v),v;}})};b.prototype.setDocRootSharedMapListener=function(a,b){this.get_open_syncing_model(a).getRoot().addEventListener(gapi.drive.realtime.EventType.OBJECT_CHANGED,b)};return b}(k.FilesManager);a.DEFAULT_REALTIME_FILENAME="default realtime filename";d.RealtimeFilesManager=a},function(k,d,a){var n=a(7),m=a(9),f=a(300);d.RT_IN_MEM_MODE=function(){return syncing_data.widgets.rtInMemCheckbox().getValue()};
var h={clientId:structure_together.GOOGLE_API_CREDENTIALS.clientId};k=function(){function a(){this.loader_options=h;this.authorized_someone=!1;this.rtutils=new f.RealtimeUtils(this.loader_options)}a.prototype.authorizeAndThen=function(a){var b=this;n.dlogcat("load-file-progress","authorize called");this.rtutils.authorize(function(){b.authorized_someone=!0;a&&a()},!1)};a.prototype.loadLibsAndAuthorizeIfNeededAndThen=function(d){var b=this;n.dwarn("<RealtimeFilesManager>.rtloader.loadLibsAndAuthorizeIfNeededAndThen called");
a.libraries_loaded?d&&d():gapi.load("auth:client,drive-realtime,drive-share",function(){n.dlog("auth:client, drive-realtime, drive-share libraries downloaded.");a.libraries_loaded=!0;b.authorizeAndThen(d)})};a.prototype.newFileGeneric=function(a,b,c,d,f,h){var e=this;console.log("<RTLoaderWrapped2015>.newFileGeneric called");h?gapi.load("drive-realtime",function(){gapi.drive.realtime.newInMemoryDocument(f,d)}):this.authorizeAndThen(function(){c&&c();e.rtutils.createRealtimeFile(a,function(a){n.dlogcat(m.LogTypes.important_event,
"In RTLoaderWrapped2015.newFileGeneric.._afterAuth..createNew. New file's id: "+a.id);n.assert_nt(a.id);b(a.id);syncing_data.widgets.loadFileIdTextInput().setValue(a.id);e.rtutils.load(a.id,f,d)});n.dlogcat(m.LogTypes.important_event,"In RTLoaderWrapped2015.newFileGeneric.._afterAuth. Hopefully authorized now.")}.bind(this))};a.prototype.loadExistingGeneric=function(a,b,c){var d=this;this.authorizeAndThen(function(){d.rtutils.load(a,c);b&&b();n.dlogcat("load-file-progress",'afterAuth called by Realtime API ("In RTLoaderWrapped2015.loadExistingGeneric")')}.bind(this))};
a.loadAppDataDoc=function(a,b,c){console.warn("RTLoaderWrapped2015.loadAppDataDoc called");var d=function(b){n.dlogcat(m.LogTypes.important_event,"Calling onLoaded parameter passed to RTLoaderWrapped2015.loadAppDataDoc (which calls gapi.drive.realtime.loadAppDataDocument)");a(b)};gapi.client.load("drive","v3").then(function(){gapi.drive.realtime.loadAppDataDocument(d,b,c)})};return a}();k.authButtonElementId="realtime-authorize-button";k.libraries_loaded=!1;d.RTLoaderWrapped2015=k},function(k,d){k=
function(){function d(a){this.mimeType="application/vnd.google-apps.drive-sdk";this.refreshInterval=18E5;this.scopes=["https://www.googleapis.com/auth/drive.install","https://www.googleapis.com/auth/drive.file"];this.init(a)}d.prototype.init=function(d){this.mergeOptions(d);this.authorizer=new a(this);this.createRealtimeFile=this.createRealtimeFile.bind(this)};d.prototype.authorize=function(a,d){this.authorizer.start(a,d)};d.prototype.mergeOptions=function(a){for(var d in a)this[d]=a[d]};d.prototype.getParam=
function(a){var d=window.location.search.match(new RegExp(a+"=(.*?)($|&)","g"));d&&d.length?(d=d[0],d=d.replace(a+"=","").replace("&","")):d=null;return d};d.prototype.createRealtimeFile=function(a,d){var f=this;window.gapi.client.load("drive","v2",function(){window.gapi.client.drive.files.insert({resource:{mimeType:f.mimeType,title:a}}).execute(d)})};d.prototype.load=function(a,d,h){window.gapi.drive.realtime.load(a,function(a){d(a)},h,this.onError)};d.prototype.onError=function(a){a.type==window.gapi.drive.realtime.ErrorType.TOKEN_REFRESH_REQUIRED?
this.authorize(function(){console.log("Error, auth refreshed")},!1):a.type==window.gapi.drive.realtime.ErrorType.CLIENT_ERROR?console.error("An Error happened: "+a.message):a.type==window.gapi.drive.realtime.ErrorType.NOT_FOUND?console.error("The file was not found. It does not exist or you do not have read access to the file."):a.type==window.gapi.drive.realtime.ErrorType.FORBIDDEN&&console.error("You do not have access to this file. Try having the owner shareit with you from Google Drive.")};return d}();
d.RealtimeUtils=k;var a=function(){function a(a){this.util=a}a.prototype.start=function(a,d){var f=this;window.gapi.load("auth:client,drive-realtime,drive-share",{callback:function(){f.authorize(a,d)}});this.authTimer&&window.clearTimeout(this.authTimer);this.refreshAuth()};a.prototype.authorize=function(a,d){this.onAuthComplete=a;window.gapi.auth.authorize({client_id:this.util.clientId,scope:this.util.scopes,immediate:!d},this.handleAuthResult.bind(this))};a.prototype.handleAuthResult=function(a){a&&
!a.error&&(this.token=a.access_token);this.onAuthComplete||console.error("wrong 'this'?",this);this.onAuthComplete(a)};a.prototype.refreshAuth=function(){var a=this;this.authTimer=setInterval(function(){a.authorize(function(){console.log("Refreshed Auth Token")},!1)},this.util.refreshInterval)};return a}();d.RealtimeAuthorizer=a},function(k,d){d.RT_IN_MEM_MODE=function(){return syncing_data.widgets.rtInMemCheckbox().getValue()};d.registerLocalStringChangeListener=function(a,d){a.addEventListener(gapi.drive.realtime.EventType.TEXT_INSERTED,
d);a.addEventListener(gapi.drive.realtime.EventType.TEXT_DELETED,d)};d.displayObjectChangedEvent=function(a){console.log(a);var d=a.events;a=a.events.length;for(var k=0;k<a;k++)console.log(d[k]),console.log("Event type: "+d[k].type),console.log("Local event: "+d[k].isLocal),console.log("User ID: "+d[k].userId),console.log("Session ID: "+d[k].sessionId)}},function(k,d,a){function n(){$("document").ready(function(){var a=$("#structures-tabs");a.tabs&&a.tabs({collapsible:!0,active:!1})})}function m(){b.dlogcat(t.LogTypes.entering,
"entering setupClickHandlers()");$("#create-new-doc").click(function(){A.STApp.the.persistenceModuleLoadOrChange(!0);A.STApp.the.newPersistentSTDoc({hookup_controler:!0})});$(".proofsocial-test-button").wrap("<span class='proofsocial-test-button-container'></span>");n();$("#load-app-data-button").click(function(){return A.STApp.the.persistenceModuleLoadOrChange(!0)});$("#load-file-button").click(function(){return A.STApp.the.loadPersistentSTDoc(void 0,!0)});$("#load-file-only-button").click(function(){return A.STApp.the.loadPersistentSTDoc(void 0,
!1)});$("#realtime-authorize-button").click(function(){A.STApp.the.persistenceModuleLoadOrChange(!1,t.PersistTypes.RT);z.RealtimeFilesManager.rtloader.loadLibsAndAuthorizeIfNeededAndThen()});$("#collapse-all-button").click(function(){A.STApp.the.controller_of_main_display_wstdoc.collapseAllNodes(A.STApp.the.nodeFocus.id)});$("#expand-all-button").click(function(){var a=A.STApp.the.nodeFocus.id,b=A.STApp.the.main_display_rstdoc,c=0,d=a?b.ogetNodeByPermId(a):b.top;b.traversal.forEachDescendant(function(){c++},
d);b=!0;1E3<c&&(b=confirm("This will cause "+c+" nodes to be rendered, which will be slow. Is that what you want?"));b&&A.STApp.the.controller_of_main_display_wstdoc.expandAllNodes(a)});$("#expand-most-button").click(function(){A.STApp.the.controller_of_main_display_wstdoc.expandMostNodes(A.STApp.the.nodeFocus.id)});$("#close-all-panels-button").click(function(){return A.STApp.the.controller_of_main_display_wstdoc.closeAllPanels()});$("#react-unmount-all-button").click(function(){return v.unmountComponentAtNode($("#"+
c.AbstractDocView.ROOT_ELEM_ID)[0])});$("#stjson-to-console-button").click(function(){console.log(JSON.stringify(u.sDataToGoogleJson(A.STApp.the.main_display_wstdoc.rootmap)))});$("#clear-gui-and-listeners-button").click(function(){return A.STApp.the.controller_of_main_display_wstdoc.destroy()});$("#reload-gui-and-listeners-button").click(function(){return A.STApp.the.controller_of_main_display_wstdoc.reload()});$("#store_fileid").click(function(){A.STApp.the.storeDocIdDocTitlePair();A.STApp.the.appdata.loadAppData()});
new y("#copy-json-to-clipboard-button",{text:function(a){try{var c=A.STApp.the.nodeFocus.id;a="nothing";if(c){var d=A.STApp.the.main_display_wstdoc.ogetNodeByPermId(c);d&&(a=u.prettySTDataGoogleJson(d.getPseudoReadOnlyData()));p.nottriv(a)&&console.log("Copy node "+c+" subtree JSON to clipboard appears successful.")}else a=u.prettySTDataGoogleJson(A.STApp.the.main_display_wstdoc.rootmap),p.nottriv(a)&&console.log("Copy doc JSON to clipboard appears successful.");b.dlog("String length is "+a.length+
".");return a}catch(F){return console.warn("Couldn't copy json to clipboard. Probably you don't have a document loaded. Here's the exception: ",F),""}}});$("#paste-json-from-clipboard-button").click(function(){var a=$("#paste-json-from-clipboard-container"),c=$('<textarea placeholder="paste here"></textarea>').appendTo(a),d=$("<button>ok</button>").appendTo(a);d.click(function(){var a=JSON.parse(c.val());b.dlog("the json (why was I previously deleting the id?):",a);if(a.value&&a.value[t.SystDocPropNames.language_id])b.dnote("Importing full doc."),
A.STApp.the.newPersistentSTDoc({initialJson:a,hookup_controler:!0});else{var e=A.STApp.the.main_display_wstdoc,a=structure_together.googleJsonToSTData(e.sharedmodel,a);b.dlog("the resulting STNodeData:",a);a.get(t.SystPropNames.nodetype);a=e.buildSTNodeWrappersRecursivelyFromSTNodeData(a,void 0);b.weakassert(e.isDetached(a.getPseudoReadOnlyData())," Node should be recorded at 'detached'.");e.top.appendDetachedUnnamedChildren(a)}d.remove();c.remove()})});$("#add-missing-mutids").click(function(){b.dlog("Adding missing mutids for nodes that can take it and that have "+
t.SystPropNames.html_name);A.STApp.the.main_display_wstdoc.traversal.forEachNode(function(a){p.objhas(a.nclass.allowed_flatprops,t.SystPropNames.mutid)&&!a.immutableStrings.hasVal(t.SystPropNames.mutid)&&a.immutableStrings.hasVal(t.SystPropNames.html_name)&&a.immutableStrings.setVal(t.SystPropNames.mutid,a.immutableStrings.getVal(t.SystPropNames.html_name))})});b.dlogcat(t.LogTypes.entering,"end of setupClickHandlers()");$("#save-json-backup-button").click(function(){var a=A.STApp.the.main_display_wstdoc.getTitle();
C.saveJsonFileLink(a+".g.json",JSON.stringify(u.sDataToGoogleJson(A.STApp.the.main_display_wstdoc.rootmap),null,1))});$("#backup-all-local-docs-button").click(function(){C.saveJsonFileLink("alldocs.json",A.STApp.the.appdata.jsonBackupOfAllDocs())});$("#persist-file-delete").click(function(){var a=e.stwidgets.loadFileIdTextInput.getValue();A.STApp.the.appdata.killFile(a);A.STApp.the.appdata.loadAppData()})}function f(){try{A.STApp.the.controller_of_main_display_wstdoc.destroyControllerLevelPlugin(x.STPLUGIN_IDS.ContextMenu)}catch(D){}}
function h(){try{A.STApp.the.controller_of_main_display_wstdoc.maybeInitializePlugin(x.STPLUGIN_IDS.ContextMenu)}catch(D){}}function l(){var a=document.getElementById("top_fixed_pos_buttons_bar");a.appendChild($("#st-display-buttons")[0]);a.appendChild($("button[name=st-options-widget]")[0]);a.appendChild($(".st-hidable-container[name=st-options-widget]")[0]);a=document.getElementById("top-of-page-row");a.appendChild($("button[name=filesystem_io-widget]")[0]);a.appendChild($("button[name=appdata-filemanager-io-widget]")[0]);
a.appendChild($(".st-hidable-container[name=filesystem_io-widget]")[0]);a.appendChild($(".st-hidable-container[name=appdata-filemanager-io-widget]")[0])}function g(){$(".st-widget-toggler").click(function(a){a=$(a.target);var b=a.attr("name");a.text()===a.attr("data-show-text")?(a.text(a.attr("data-hide-text")),$(".st-hidable-container[name="+b+"]").show()):(a.text(a.attr("data-show-text")),$(".st-hidable-container[name="+b+"]").hide())})}var b=a(7),c=a(264),e=a(14),p=a(4),t=a(9),u=a(8),v=a(46),y=
a(303);k=a(192);var r=a(262),x=a(249),A=a(3),z=a(298),C=a(189),B=a(190);window.htmlparser=k;d.afterWidgetsLoaded=[];d.widgets_loaded=!1;d.setupClickHandlers=m;d.disableContextMenu=f;d.enableContextMenu=h;d.populateFileList=function(a){var c=$("#persist-file-select");c.children().remove();a.keys().forEach(function(d){var e=a.get(d);b.dlogcat(t.LogTypes.appdata,"Adding option with title ",e," and value ",d);d=$('<option value="'+d+'">'+e+"</option>");c.append(d)});c.change(function(a){a=$(a.target).val();
console.log("selected "+a);e.stwidgets.loadFileIdTextInput.setValue(a)});var d=e.stwidgets.loadFileIdTextInput.getValue();b.dlogcat(t.LogTypes.appdata,"fileid text input field says ",d);d&&(a.has(d)?c.val(d):e.stwidgets.loadFileIdTextInput.setValue(c.val()))};d.setDefaultWidgetPositioning=l;d.setupWidgetsAndClickHandlers=function(){l();e.stwidgets.languageSelect=new r.WithSelectAndLocalStorage("ps-language-select",t.LanguageModules.propifps,{fixed_options:p.objvals(t.LanguageModules)});e.stwidgets.newFileNameTextInput=
new r.WithStringInputElemAndLocalStorage("input-name-of-new-file","stfile");e.stwidgets.loadFileIdTextInput=new r.WithStringInputElemAndLocalStorage("id-of-file-to-load",t.DEFAULT_FILEID);var a=$("#input-name-of-new-file")[0];a&&autosizeInput(a);(a=$("#id-of-file-to-load")[0])&&autosizeInput(a);e.stwidgets.modelImplemSelect=new r.WithSelectAndLocalStorage("st-model-implem-select",t.PersistTypes.Local,{fixed_options:p.objvals(t.PersistTypes),onmodelchange:function(a){b.dlog("stwidgets.modelImplemSelect.onmodelchange");
A.STApp.the.persistenceModuleLoadOrChange(!1,a)}});e.stwidgets.rtInMemCheckbox=new r.WithCheckboxInputElemAndLocalStorage("InMemCheckbox",!1);e.stwidgets.showNodeIdsSelect=new r.WithSelectAndLocalStorage("show_node_ids_select","none",{fixed_options:["none","short","long","short on hover","long on hover"],onmodelchange:function(a){try{A.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!0,1)}catch(E){}}});e.stwidgets.debugLevel=new r.WithNumberInputElemAndLocalStorage("DebugLevelTextbox",
0);e.stwidgets.nodeStubsEnabled=new r.WithCheckboxInputElemAndLocalStorage("nodestubs-enabled",!0);e.stwidgets.showHiddenCheckbox=new r.WithCheckboxInputElemAndLocalStorage("show-hidden-checkbox",!1,{onmodelchange:function(a){A.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!0,2)}});e.stwidgets.fileManagerToggle=new r.WithToggleButtonInputElemAndLocalStorage("filemanager-toggle","fm",["fm","nofm"],{onsync:function(a){"fm"===a?($("#file-management-newfile-row").show(),$("#file-management-loadfile-row").show()):
($("#file-management-newfile-row").hide(),$("#file-management-loadfile-row").hide())}});e.stwidgets.fasterReactive=new r.WithCheckboxInputElemAndLocalStorage("fasterReactive",!1);e.stwidgets.reduceConstants=new r.WithCheckboxInputElemAndLocalStorage("reduceConstants",!0,{onmodelchange:function(a){A.STApp.the.controller_of_main_display_wstdoc.reload()}});e.stwidgets.showZoomButtons=new r.WithCheckboxInputElemAndLocalStorage("showZoomButtons",!0,{onmodelchange:function(a){a?$(".st-zoombutton").show():
$(".st-zoombutton").hide()}});e.stwidgets.showPanelToggleButtons=new r.WithCheckboxInputElemAndLocalStorage("showPanelToggleButtons",!0,{onmodelchange:function(a){a?$(".st-panelbutton").show():$(".st-panelbutton").hide()}});e.stwidgets.showDragHandles=new r.WithCheckboxInputElemAndLocalStorage("showDragHandles",!0,{onmodelchange:function(a){a?$(".st-draghandle").show():$(".st-draghandle").hide()}});e.stwidgets.showBullets=new r.WithCheckboxInputElemAndLocalStorage("showBullets",!0,{onmodelchange:function(a){}});
e.stwidgets.showMutidForms=new r.WithCheckboxInputElemAndLocalStorage("showMutidForms",!1,{onmodelchange:function(a){A.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!0,1)}});e.stwidgets.inlineEditing=new r.WithCheckboxInputElemAndLocalStorage("inline-editing",!0,{onmodelchange:function(a){}});e.stwidgets.showRefreshButtons=new r.WithCheckboxInputElemAndLocalStorage("showRefreshButtons",!1,{onmodelchange:function(a){a?$(".st-refresh-button").show():$(".st-refresh-button").hide()}});
e.stwidgets.userModeInput=new r.WithToggleButtonInputElemAndLocalStorage("structure-together-user-mode",t.STUserModes.localauthor,[t.STUserModes.reader,t.STUserModes.localauthor,t.STUserModes.dev],{onsync:function(a){if(a===t.STUserModes.dev||a===t.STUserModes.localauthor)h(),$("#top_fixed_pos_buttons_bar").show(),$("#top_fixed_pos_buttons_bar_row2").show(),$(".edit-icons").show();if(a===t.STUserModes.reader||a===t.STUserModes.localauthor)e.stwidgets.nodeStubsEnabled.hide(),e.stwidgets.fasterReactive.hide(),
$("#select-persistence").hide(),$("#structures-tabs").hide(),$("#test-examples-buttons").hide();switch(a){case t.STUserModes.dev:e.stwidgets.nodeStubsEnabled.show();e.stwidgets.fasterReactive.show();$("#file-management-newfile-row").show();$("#file-management-loadfile-row").show();$("#select-persistence").show();$("paste-json-from-clipboard-button").show();$("copy-json-to-clipboard-button").show();$("#structures-tabs").show();break;case t.STUserModes.localauthor:structure_together.demo_mode||structure_together.fg_mode?
($("copy-json-to-clipboard-button").hide(),$("paste-json-from-clipboard-button").hide(),$("#file-management-newfile-row").hide(),$("#file-management-loadfile-row").hide(),$("#select-persistence").hide()):($("#select-persistence").show(),$("#file-management-loadfile-row").show(),$("#file-management-newfile-row").show());break;case t.STUserModes.reader:f(),$("#file-management-newfile-row").hide(),structure_together.demo_mode?$("#file-management-loadfile-row").hide():$("#file-management-loadfile-row").show(),
$("#top_fixed_pos_buttons_bar_row2").hide(),$("#add-missing-mutids").hide(),$(".edit-icons").hide()}window.repositionMainPanel();A.STApp.the&&A.STApp.the.controller_of_main_display_wstdoc&&A.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!1,1)}});e.stwidgets.refStyle=new r.WithSelectAndLocalStorage("refStyle","vibrant",{fixed_options:["vibrant","subdued","cloaked"],onmodelchange:function(a){try{A.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!0,1)}catch(E){}}});e.stwidgets.subsequentRefStyle=
new r.WithSelectAndLocalStorage("subsequentRefStyle","subdued",{fixed_options:["vibrant","subdued","cloaked"],onmodelchange:function(a){try{A.STApp.the.controller_of_main_display_wstdoc.buildVMAndRender(!0,1)}catch(E){}}});m();g();d.widgets_loaded=!0;b.dlog("about to call fns in afterWidgetsLoaded");d.afterWidgetsLoaded.forEach(function(a){return a()});b.ddeb("TEMP");window.loadCSS=B.loadCSS;window.loadDarkCSS=function(){return B.loadCSS("../../style/structure-together-dark-color-theme.css")};window.loadLightCSS=
function(){return B.loadCSS("../../style/structure-together-light-color-theme.css")};e.stwidgets.colorSchemeToggle=new r.WithToggleButtonInputElemAndLocalStorage("structure-together-css-change-button","light",["light","dark"],{onsync:function(a){"dark"===a?window.loadLightCSS():window.loadDarkCSS()}})}},function(k,d,a){var n,m,f;(function(h,l){!(m=[k,a(304),a(306),a(307)],n=l,f="function"===typeof n?n.apply(d,m):n,void 0!==f&&(k.exports=f))})(this,function(a,d,g,b){function c(a){return a&&a.__esModule?
a:{default:a}}function e(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function f(a,b){a="data-clipboard-"+a;if(b.hasAttribute(a))return b.getAttribute(a)}var h=c(d);d=c(g);var k=c(b),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=
b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();b=function(a){function b(a,c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");var d;d=(b.__proto__||Object.getPrototypeOf(b)).call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:
d;d.resolveOptions(c);d.listenClick(a);return d}e(b,a);l(b,[{key:"resolveOptions",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"===typeof a.action?a.action:this.defaultAction;this.target="function"===typeof a.target?a.target:this.defaultTarget;this.text="function"===typeof a.text?a.text:this.defaultText}},{key:"listenClick",value:function(a){var b=this;this.listener=(0,k.default)(a,"click",function(a){return b.onClick(a)})}},{key:"onClick",
value:function(a){a=a.delegateTarget||a.currentTarget;this.clipboardAction&&(this.clipboardAction=null);this.clipboardAction=new h.default({action:this.action(a),target:this.target(a),text:this.text(a),trigger:a,emitter:this})}},{key:"defaultAction",value:function(a){return f("action",a)}},{key:"defaultTarget",value:function(a){if(a=f("target",a))return document.querySelector(a)}},{key:"defaultText",value:function(a){return f("text",a)}},{key:"destroy",value:function(){this.listener.destroy();this.clipboardAction&&
(this.clipboardAction.destroy(),this.clipboardAction=null)}}]);return b}(d.default);a.exports=b})},function(k,d,a){var n,m,f;(function(h,l){!(m=[k,a(305)],n=l,f="function"===typeof n?n.apply(d,m):n,void 0!==f&&(k.exports=f))})(this,function(a,d){var g=d&&d.__esModule?d:{default:d},b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c=function(){function a(a,
b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,d){c&&a(b.prototype,c);d&&a(b,d);return b}}();d=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.resolveOptions(b);this.initSelection()}c(a,[{key:"resolveOptions",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action=a.action;this.emitter=
a.emitter;this.target=a.target;this.text=a.text;this.trigger=a.trigger;this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var a=this,b="rtl"==document.documentElement.getAttribute("dir");this.removeFake();this.fakeHandlerCallback=function(){return a.removeFake()};this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0;this.fakeElem=document.createElement("textarea");
this.fakeElem.style.fontSize="12pt";this.fakeElem.style.border="0";this.fakeElem.style.padding="0";this.fakeElem.style.margin="0";this.fakeElem.style.position="absolute";this.fakeElem.style[b?"right":"left"]="-9999px";b=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,b));this.fakeElem.style.top=b+"px";this.fakeElem.setAttribute("readonly","");this.fakeElem.value=this.text;document.body.appendChild(this.fakeElem);this.selectedText=(0,
g.default)(this.fakeElem);this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandlerCallback=this.fakeHandler=null);this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,g.default)(this.target);this.copyText()}},{key:"copyText",value:function(){var a=void 0;try{a=document.execCommand(this.action)}catch(t){a=!1}this.handleResult(a)}},
{key:"handleResult",value:function(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur();window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){this._action=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"copy";if("copy"!==this._action&&"cut"!==this._action)throw Error('Invalid "action" value, use either "copy" or "cut"');
},get:function(){return this._action}},{key:"target",set:function(a){if(void 0!==a)if(a&&"object"===("undefined"===typeof a?"undefined":b(a))&&1===a.nodeType){if("copy"===this.action&&a.hasAttribute("disabled"))throw Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');
this._target=a}else throw Error('Invalid "target" value, use a valid Element');},get:function(){return this._target}}]);return a}();a.exports=d})},function(k,d){k.exports=function(a){if("SELECT"===a.nodeName)a.focus(),a=a.value;else if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName)a.focus(),a.setSelectionRange(0,a.value.length),a=a.value;else{a.hasAttribute("contenteditable")&&a.focus();var d=window.getSelection(),k=document.createRange();k.selectNodeContents(a);d.removeAllRanges();d.addRange(k);
a=d.toString()}return a}},function(k,d){function a(){}a.prototype={on:function(a,d,f){var h=this.e||(this.e={});(h[a]||(h[a]=[])).push({fn:d,ctx:f});return this},once:function(a,d,f){function h(){k.off(a,h);d.apply(f,arguments)}var k=this;h._=d;return this.on(a,h,f)},emit:function(a){var d=[].slice.call(arguments,1),f=((this.e||(this.e={}))[a]||[]).slice(),h=0,k=f.length;for(h;h<k;h++)f[h].fn.apply(f[h].ctx,d);return this},off:function(a,d){var f=this.e||(this.e={}),h=f[a],k=[];if(h&&d)for(var g=
0,b=h.length;g<b;g++)h[g].fn!==d&&h[g].fn._!==d&&k.push(h[g]);k.length?f[a]=k:delete f[a];return this}};k.exports=a},function(k,d,a){function n(a,d,b){a.addEventListener(d,b);return{destroy:function(){a.removeEventListener(d,b)}}}function m(a,d,b){Array.prototype.forEach.call(a,function(a){a.addEventListener(d,b)});return{destroy:function(){Array.prototype.forEach.call(a,function(a){a.removeEventListener(d,b)})}}}var f=a(308),h=a(309);k.exports=function(a,d,b){if(!a&&!d&&!b)throw Error("Missing required arguments");
if(!f.string(d))throw new TypeError("Second argument must be a String");if(!f.fn(b))throw new TypeError("Third argument must be a Function");if(f.node(a))return n(a,d,b);if(f.nodeList(a))return m(a,d,b);if(f.string(a))return h(document.body,a,d,b);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");}},function(k,d){d.node=function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType};d.nodeList=function(a){var k=Object.prototype.toString.call(a);
return void 0!==a&&("[object NodeList]"===k||"[object HTMLCollection]"===k)&&"length"in a&&(0===a.length||d.node(a[0]))};d.string=function(a){return"string"===typeof a||a instanceof String};d.fn=function(a){return"[object Function]"===Object.prototype.toString.call(a)}},function(k,d,a){function n(a,d,k,g){return function(b){b.delegateTarget=m(b.target,d);b.delegateTarget&&g.call(a,b)}}var m=a(310);k.exports=function(a,d,k,g,b){var c=n.apply(this,arguments);a.addEventListener(k,c,b);return{destroy:function(){a.removeEventListener(k,
c,b)}}}},function(k,d){Element&&!Element.prototype.matches&&(d=Element.prototype,d.matches=d.matchesSelector||d.mozMatchesSelector||d.msMatchesSelector||d.oMatchesSelector||d.webkitMatchesSelector);k.exports=function(a,d){for(;a&&9!==a.nodeType;){if(a.matches(d))return a;a=a.parentNode}}},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,
c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m=a(312),f=a(298),h=a(7),l=a(8),g=a(302),b=a(299);k=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.loadAppData=function(a){var c=this;h.dnote("RealtimeAppData.loadAppData() called");f.RealtimeFilesManager.rtloader.loadLibsAndAuthorizeIfNeededAndThen(function(){b.RTLoaderWrapped2015.loadAppDataDoc(function(b){c.appDataDoc=b;c.appDataRootmap.has(m.APPDATA_KEYS.fileid_to_name)?
(h.dlog("The file id map: ",l.prettySTDataShortJson(c.fileid_to_name_umap)),g.populateFileList(c.fileid_to_name_umap)):(h.dlog("Initializing app data map of fileids to doc titles"),c.appDataRootmap.set(m.APPDATA_KEYS.fileid_to_name,c.appDataSyncingModel.createMap()));a&&a()},function(a){console.warn("This is the opt_initializerFn param given to RTLoaderWrapped.loadAppDataDoc")},function(a){console.error("Error loading AppData doc for realtime:",a)})})};c.prototype.saveAppData=function(){h.dwarn("Realtime AppData should already be saved automatically.!")};
return c}(m.AppData);d.RealtimeAppData=k},function(k,d,a){function n(a){return"StructureTogether.upstate."+a}var m=a(8),f=a(4),h=a(7);d.APPDATA_KEYS={fileids:"_structure_together_files",fileid_to_name:"_structure_together_fileid_to_name"};d.ppstateKey=n;k=function(){function a(){}Object.defineProperty(a.prototype,"appDataSyncingModel",{get:function(){this.appDataDoc||console.error("You need to call loadAppData first.");return this.appDataDoc.getModel()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"appDataRootmap",{get:function(){return this.appDataSyncingModel.getRoot()},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fileid_to_name_umap",{get:function(){return this.appDataRootmap.get(d.APPDATA_KEYS.fileid_to_name)},enumerable:!0,configurable:!0});a.prototype.isLoaded=function(){return f.nottriv(this.appDataDoc)&&f.nottriv(this.appDataDoc.getModel())&&f.nottriv(this.appDataDoc.getModel().getRoot())};a.prototype.addFileId=function(a,b){this.fileid_to_name_umap.has(a)&&this.fileid_to_name_umap.get(a)===
b?h.dlog("FYI: already had mapping file id "+a+" --\x3e filename "+b):this.fileid_to_name_umap.set(a,b);h.dlog("The fileid to name map:",m.prettySTDataShortJson(this.fileid_to_name_umap))};a.prototype.getFileIds=function(){return this.fileid_to_name_umap.keys()};a.prototype.forgetFileIds=function(){for(var a=this,b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b.forEach(function(b){a.fileid_to_name_umap.has(b)?(a.fileid_to_name_umap.delete(b),a.saveAppData(),a.loadAppData()):console.warn("File id "+
b+" that you requested be forgotten is not in the Backend's store")})};a.prototype.forgetFileIdsWithFilename=function(a){var b=this,c=0;m.forEachInUMap(this.fileid_to_name_umap,function(d,g){g===a&&(b.forgetFileIds(d),c++)});console.log(c+" fileid,filename pairing forgotten")};a.prototype.getFileName=function(a){return this.fileid_to_name_umap.get(a)};a.prototype.saveAppData=function(){throw new f.NotImplemented;};a.prototype.nameHasUniqueId=function(a){var b=!1,c=!0;m.forEachInUMap(this.fileid_to_name_umap,
function(d,g){g===a&&(b?c=!1:b=!0)});return b&&c};a.prototype.firstIdWithThisFilenameOrNull=function(a){var b=null;m.forEachInUMap(this.fileid_to_name_umap,function(c,d){null===b&&d===a&&(b=c)});return b};a.prototype.getPersistentPrivateState=function(a){a=n(a);var b=this.appDataRootmap.get(a);f.triv(b)&&(h.dlog("No upstate found at key "+a+". Will create. Whole AppData looks like:"),h.dlog(this.appDataSyncingModel),h.dlog(this.appDataRootmap),b=this.appDataSyncingModel.createMap(),this.appDataRootmap.set(a,
b));return b};return a}();d.AppData=k},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m=a(312),f=a(8),h=a(9),l=a(7),g=a(292),b=a(297),c=a(4);k=function(a){function d(){return null!==a&&a.apply(this,arguments)||
this}n(d,a);d.prototype.loadAppData=function(a){var b=this;l.dlog("LocalAppData.loadAppData");l.timerStart("loadAppData");var c=store.get("_structure_together.appdata");c?(this.appDataDoc=new g.LocalSyncingDocument(!1,!1,!1),l.dlogcat(h.LogTypes.ioevent,"This is app_data_json",c),c=f.googleJsonToSTData(this.appDataSyncingModel,c,!1),this.appDataSyncingModel.rootmap=c,a&&a()):(this.appDataDoc=new g.LocalSyncingDocument(!0,!1,!1),this.appDataRootmap.set(m.APPDATA_KEYS.fileid_to_name,this.appDataSyncingModel.createMap()));
this.setDocRootSharedMapListener(function(a){b.saveAppData()});l.dlogcat(h.LogTypes.ioevent,"The file id map: ",f.prettySTDataShortJson(this.fileid_to_name_umap));syncing_data.populateFileList(this.fileid_to_name_umap);l.timerEnd("loadAppData")};d.prototype.setDocRootSharedMapListener=function(a){this.appDataSyncingModel.root_listener=function(b){l.dassert(b.isLocal);a(b)}};d.prototype.saveAppData=function(){var a=this;c.throttled("setLocalStorageFromSTDocData",function(){return a.saveAppDataNOW()},
h.MIN_TIME_BETWEEN_LOCAL_STORAGE_WRITES)};d.prototype.saveAppDataNOW=function(){l.dnote("Saving app data!");var a=f.sDataToGoogleJson(this.appDataRootmap);store.set("_structure_together.appdata",a)};d.prototype.jsonBackupOfAllDocs=function(){var a="[\n",c=this.fileid_to_name_umap.keys();l.dlog(c.length);c.forEach(function(d,e){l.dlog(e);d=b.fileidToLocalStorageId(d);if(d=localStorage.getItem(d))a+="\t"+d,e<c.length-1?a+=",":l.dlog("no comma"),a+="\n"});return a+="]"};d.prototype.killFile=function(a){this.loadAppData();
if(this.fileid_to_name_umap.has(a)){var d=this.getFileName(a);confirm("Delete "+d+" ("+a+")?")&&(d=b.fileidToLocalStorageId(a),c.nottriv(store.get(d))?(store.remove(d),l.dwarn("removed object at browser storage key "+d)):l.dwarn("browser storage key "+d+" not found"),this.fileid_to_name_umap.delete(a),this.saveAppData(),l.dwarn("removed "+a+" from fileid_to_name_umap"))}else l.dwarn(a+" not in fileid_to_name_umap. doing nothing.")};d.prototype.killOrphanedFiles=function(a){void 0===a&&(a=!0);this.loadAppData();
var c=this.getFileIds(),d=h.LOCAL_STORAGE_PREFIX+b.LOCAL_DOCFILE_PREFIX,e=d.length,g=0,f;for(f in store.getAll())if(_.startsWith(f,d)){var k=f.substring(e),l=this.getFileName(k);0<=c.indexOf(k)?(console.log("will NOT delete "+l+" ("+k+")"),g++):a?console.log("will delete "+l+" ("+k+") when not in dry run"):(console.log("will delete "+l+" ("+k+")"),localStorage.removeItem(f))}console.log(g+" files NOT deleted.")};return d}(m.AppData);d.LocalAppData=k},function(k,d,a){var n=a(12),m=a(256),f=a(7);k=
a(315);a(14);var h=a(316),l=a(16),g=a(317),b=a(318),c=a(315),e=a(13),p=a(6),t=a(9),u=a(4),v=a(320),y=a(321);a=a(319);var r=function(){function a(b,c,d,g,f){var h=this;this.custom_node_classes=c;this.toplevel_nodeclass=g;this.allowed_concr_ch_full=new Map;this.forView=new x(this);this.nodetype_to_insert_on_enter=e.Nodetypes.FreeForm;this.behavior_of_meta_enter="defn freeform";this.propnames_for_display=_.clone(t.SystPropNamesForDisplay);this.node_class_dispatch=new Map;this.nonabstract_node_class_dispatch=
new Map;this.manual_node_subtype_edges=new Map;this.subtype_reln=new m.PartialOrder;this.name=b;this.custom_node_class_names=c.map(function(a){return e.nodeclassName(a)});f&&u.arrayExtend(this.custom_node_class_names,f.map(function(a){return a.nodetype_name}));this.node_classes=[this.toplevel_nodeclass].concat(a.generic_node_classes_and_mixins).concat(this.custom_node_classes);this.node_class_names=[this.toplevel_nodeclass.nodetype_name].concat(a.generic_node_class_and_mixin_names).concat(this.custom_node_class_names).concat(d);
this.node_classes.forEach(function(a){h.node_class_dispatch.set(e.nodeclassName(a),a);a.abstract||h.nonabstract_node_class_dispatch.set(e.nodeclassName(a),a)})}a.initializeLanguageClass=function(){a.generic_node_classes_and_mixins=[n.STNode,p.ParentalRefableInText,p.LeafRefableInText,p.ParentalNode,p.ParentalNodeMinimal,p.RefableInTextMixin,p.RefNode,p.FreeForm,p.GroupNode,p.Top,p.CollapsibleInlineNote,p.SectionBreak,p.Concatenate,p.Seq,p.Numbering,p.ValueAssignableNodeMixin,p.ImportNode,p.ImportNodeUntyped,
p.MathParse];a.generic_node_class_and_mixin_names=a.generic_node_classes_and_mixins.map(function(a){return e.nodeclassName(a)});a.extra_generic_node_subtype_edges={LeafRefableInText:[p.RefableInTextMixin.nodetype_name],ParentalRefableInText:[p.RefableInTextMixin.nodetype_name]};Object.seal(a.generic_node_classes_and_mixins);Object.seal(a.generic_node_class_and_mixin_names);Object.seal(a.extra_generic_node_subtype_edges)};a.prototype.getSubtypes=function(a){f.assert_nt(a);return this.subtype_reln.children(a)};
a.prototype.checkForRequiredStaticFields=function(a){this.node_classes.forEach(function(b){a.forEach(function(a){u.production_assert(u.objhas(b,a),"Node class "+b.nodetype_name+" is missing static field ."+a+". Every class must define this; it cannot be inherited (because of the shared -ata complication with inheritance of static props).")})})};a.prototype.checkForRequiredDefaults=function(){var a=function(a,b){return"Node class "+a.nodetype_name+" must have a default value for its required boolean prop "+
b+"."};this.node_classes.forEach(function(b){u.objForEachOwnKey(b.required_flatprops,function(c){switch(b.required_flatprops[c]){case 1:u.production_assert(b.default_bool_prop_vals&&u.objhas(b.default_bool_prop_vals,c),a(b,c));break;case 2:u.production_assert(b.default_num_prop_vals&&u.objhas(b.default_num_prop_vals,c),a(b,c));break;default:u.argsFirstAmongRest(c,t.SystPropNames.nodetype,t.SystPropNames.abstract_nodetype)||u.production_assert(u.objhas(b.default_str_prop_vals_at_init,c)||u.objhas(b.default_str_prop_vals_when_empty,
c),"Node class "+b.nodetype_name+" must have a default value for its required string prop "+c+".")}})})};a.prototype.fillAtomicSubtypesEdges=function(){var a=this;this.node_classes.forEach(function(b){b.parents&&b.parents.forEach(function(c){a.add_manual_subtype_edge(b,c)})})};a.prototype.fillOmittedNodetypeDataThatIsIndependentOfSubtyping=function(){this.node_classes.forEach(function(a){f.dassert("allowed_ch"in a,"Node class "+a.nodetype_name+" is missing .allowed_ch. Every class must define this; it cannot be inherited.");
f.dassert(u.objhas(a,"abstract"));if("required_flatprops"in a)if("allowed_flatprops"in a){a.allowed_flatprops=_.cloneDeep(a.allowed_flatprops);try{u.mergeSimpleObjectsSecondIntoFirst(a.allowed_flatprops,a.required_flatprops)}catch(C){console.error("Exception in mergeSimpleObjectsSecondIntoFirst with nodetype "+a.nodetype_name)}}else a.allowed_flatprops=_.cloneDeep(a.required_flatprops);else a.required_flatprops={};"required_nch"in a?"allowed_nch"in a?(a.allowed_nch=_.cloneDeep(a.allowed_nch),u.mergeSimpleObjectsSecondIntoFirst(a.allowed_nch,
a.required_nch)):a.allowed_nch=_.cloneDeep(a.required_nch):a.required_nch={};"min_ch"in a||(a.min_ch={});"max_ch"in a||(a.max_ch={});a.allowed_ch||f.dwarn(a.nodetype_name);a.allowed_ch.forEach(function(b){b in a.max_ch||(a.max_ch[b]=Infinity);b in a.min_ch||(a.min_ch[b]=0)})})};a.prototype.compileConversions=function(){this.conversions=c.compile_conversions(a.generic_conversion_schemas,this.conversion_schemas)};a.prototype.getConversion=function(a,b){return this.conversions.get2(a,b)};a.prototype.getConversions=
function(a){return this.conversions.get(a)};a.prototype.isConcreteNodetype=function(a){return this.nonabstract_node_class_dispatch.has(a)};a.prototype.isNodeSubtype=function(a,b){f.dassert(u.arrayHas(this.node_class_names,a)&&u.arrayHas(this.node_class_names,b),a+", "+b);return this.subtype_reln.hasPair(a,b)};a.prototype.nodeClassDispatch=function(a){return this.node_class_dispatch.get(a)};a.prototype.add_manual_subtype_edge=function(a,b){a=e.nodeclassName(a);b="string"===typeof b?b:e.nodeclassName(b);
this.manual_node_subtype_edges.has(a)||this.manual_node_subtype_edges.set(a,[]);this.manual_node_subtype_edges.get(a).push(b)};a.prototype.add_manual_subtype_edges=function(a,b){var c=this;"string"!==typeof b&&e.nodeclassName(b);a.forEach(function(a){c.add_manual_subtype_edge(a,b)})};a.prototype.genericInitialize=function(){var a=this;f.timerStart("genericInitialize for "+this.toString());f.dassert(0<this.node_class_dispatch.size,"Call setClasses first");this.checkForRequiredStaticFields(["abstract",
"nodetype_name","allowed_ch"]);this.fillAtomicSubtypesEdges();this.fillOmittedNodetypeDataThatIsIndependentOfSubtyping();this.checkForRequiredStaticFields(["required_nch","required_flatprops","min_ch","max_ch"]);this.computeTransitiveClosureOfSubtypingRelation();structure_together.assertions_enabled&&this.node_class_names.forEach(function(b){u.production_assert(a.subtype_reln.has(b),b+" is missing from subtype_reln.")});var c=function(){return{}},d=function(a,b){return a};f.dassert(!u.objhas(n.STNode.required_flatprops,
t.SystPropNames.mutid));f.dassert(!u.objhas(p.RefNode.required_flatprops,t.SystPropNames.mutid));this.computeInheritedStaticData("required_flatprops",c);f.dassert(!u.objhas(n.STNode.required_flatprops,t.SystPropNames.mutid));f.dassert(!u.objhas(p.RefNode.required_flatprops,t.SystPropNames.mutid));this.computeInheritedStaticData("allowed_flatprops",c);this.computeInheritedStaticData("default_str_prop_vals_when_empty",c,d);this.computeInheritedStaticData("default_str_prop_vals_at_init",c,d);this.computeInheritedStaticData("default_num_prop_vals",
c,d);this.computeInheritedStaticData("default_bool_prop_vals",c,d);this.computeInheritedStaticData("allowed_nch",c);this.computeInheritedStaticData("max_ch",c,function(a,b){return Math.min(a,b)});this.computeInheritedStaticData("min_ch",c,function(a,b){return Math.max(a,b)});this.computeInheritedStaticData("upstate",Array,u.mergeSimpleObjectsSecondIntoFirst);this.computeInheritedStaticData("cache_updaters",Array,u.mergeSimpleObjectsSecondIntoFirst);this.computeInheritedStaticData("possible_values",
c,d);this.computeInheritedStaticData_no_merging("flatprop_change_listeners");this.computeInheritedStaticData_no_merging("emphasize_view");this.computeInheritedStaticData("inliningvm_props",Array,u.mergeSimpleObjectsSecondIntoFirst);structure_together.assertions_enabled&&this.node_class_dispatch.forEach(function(b,c){u.objkeys(b.min_ch).forEach(function(b){u.production_assert(u.arrayHas(a.node_class_names,b),b+" found in class of "+c+".min_ch isn't in <Language "+a.name+">.node_class_names. While checking min_ch of nodetype "+
c)})});this.node_classes.forEach(function(b){var c=new Set;b.allowed_ch.forEach(function(b){a.isConcreteNodetype(b)&&c.add(a.node_class_dispatch.get(b));a.getSubtypes(b).forEach(function(b){a.isConcreteNodetype(b)&&c.add(a.node_class_dispatch.get(b))})});a.allowed_concr_ch_full.set(b,c);b.inliningvm_props&&a.forView.addExtraAllowedInliningVMProps(e.nodeclassName(b),b.inliningvm_props)});this.compileConversions();this.forView.addCustomInliningComponentMappings(u.mkobj([e.Nodetypes.Ref,b.RefNodeInliningComponent],
[e.Nodetypes.RefableInTextMixin,h.RefableInTextNodeInliningComponent],[e.Nodetypes.FreeForm,l.FreeFormInliningComponent],[e.Nodetypes.NodeStub,v.TrivialInliningComponent],[e.Nodetypes.Concatenate,y.ConcatenateInliningComponent]));f.dnote("Following calls to addExtraAllowedInliningVMProps SHOULD now be redundant.");this.forView.addExtraAllowedInliningVMProps(e.Nodetypes.RefableInTextMixin,[t.SystPropNames.html_name,t.SystPropNames.html_template]);this.forView.addExtraAllowedInliningVMProps(e.Nodetypes.FreeForm,
[t.SystPropNames.text,t.SystPropNames.html_name,t.SystPropNames.display_as_defn]);this.forView.addExtraAllowedInliningVMProps(e.Nodetypes.Concatenate,[t.SystPropNames.ch]);this.forView.addExtraAllowedInliningVMProps(e.Nodetypes.Ref,[t.SystPropNames.id_ref]);this.forView.excludePropNamesFromInliningVM(e.Nodetypes.FreeForm,[t.SystPropNames.ch,t.SystPropNames.nch]);this.computeInheritedStringList(this.forView._extraAllowedInliningVMProps);this.checkForRequiredDefaults();f.dwarncat(t.LogTypes.nts,"Disabled 'check that for each nodeclass, its name in typescript matches val of static var .name'");
this.forView.computeInheritedCustomInliningUpdater();this.inverted_nodetype_choice_hierachy=u.objectSpecialStrMapInvert(this.nodetype_choice_hierachy);f.timerEnd("genericInitialize for "+this.name)};a.prototype.computeTransitiveClosureOfSubtypingRelation=function(){var b=this;f.dlogcat(t.LogTypes.entering,"Entering computeTransitiveClosureOfSubtypingRelation");this.subtype_reln.ensureHasElements(this.node_class_names);this.manual_node_subtype_edges.forEach(function(a,c){f.dassert(u.arrayHas(b.node_class_names,
c),c+" is missing from node_class_names");a.forEach(function(a){f.dassert(u.arrayHas(b.node_class_names,a),a+" is missing from node_class_names");b.subtype_reln.addPair(c,a)})});Object.getOwnPropertyNames(a.extra_generic_node_subtype_edges).forEach(function(c){a.extra_generic_node_subtype_edges[c].forEach(function(a){b.subtype_reln.addPair(c,a)})});this.node_class_names.forEach(function(a){f.dassert("Object"!=a);if(b.node_class_dispatch.has(a)){var c=b.node_class_dispatch.get(a);"function"===typeof c&&
(c=Object.getPrototypeOf(c.prototype).constructor,c.nodetype_name&&(c=e.nodeclassName(c),f.dassert(b.node_class_dispatch.has(c),c+" is missing from node_class_dispatch"),b.subtype_reln.addPair(a,c)))}});this.subtype_reln.transitivelyClose()};a.prototype.computeInheritedStaticData=function(a,b,c){var d=this;this.subtype_reln.forEachPair(function(e,g){try{var h=d.node_class_dispatch.get(e),k=d.node_class_dispatch.get(g);null!=h&&null!=k&&(h.hasOwnProperty(a)?k.hasOwnProperty(a)&&(h[a]=_.cloneDeep(h[a]),
u.mergeSimpleObjectsSecondIntoFirst(h[a],k[a],c)):(f.dlogcat(t.LogTypes.langinit,"Setting property "+a+" of nodetype "+e+" to default value of "+u.prettyJson(b())),h[a]=b()))}catch(J){throw f.derr("Error in computeInheritedStaticData while handling "+e+" and "+g),J;}})};a.prototype.computeInheritedStringList=function(a,b){this.subtype_reln.forEachPair(function(b,c){b!==c&&a.has(c)&&(a.has(b)||a.set(b,[]),u.mergeListsSecondIntoFirst(a.get(b),a.get(c)))})};a.prototype.computeInheritedData_no_merging=
function(a,b){this.subtype_reln.forEachPair(function(c,d){c!==d&&(d=a(d),!u.triv(d)&&u.triv(a(c))&&b(c,d))})};a.prototype.computeInheritedStaticData_no_merging=function(a){var b=this;this.computeInheritedData_no_merging(function(c){return(c=b.node_class_dispatch.get(c))?c[a]:null},function(c,d){(c=b.node_class_dispatch.get(c))&&(c[a]=d)})};return a}();r.generic_conversion_schemas=k.NODETYPE_CONVERSIONS;d.Language=r;var x=function(){function a(a){this.lang=a;this.inlining_component_dispatch={};this.vm_gen_dispatch=
{};this._extraAllowedInliningVMProps=new Map;this._propNamesToExcludeFromInliningVM=new Map}a.prototype.getSpecialInliningPropIfAny=function(b){if(b.nch){b=b.nch;var c=void 0;b.fnref?c=b.fnref:b.predref&&(c=b.predref);if(c&&c[t.SystPropNames.special_inlining]&&a.special_inlining_components[c[t.SystPropNames.special_inlining]])return c[t.SystPropNames.special_inlining]}return null};a.prototype.addCustomInliningComponentMappings=function(a){var b=this;Object.getOwnPropertyNames(a).forEach(function(c){b.inlining_component_dispatch[c]&&
b.inlining_component_dispatch[c]!==a[c]&&f.dwarn("Inlining component already registered for "+c,b.inlining_component_dispatch[c],"Replacing with ",a[c]);b.inlining_component_dispatch[c]=a[c]})};a.prototype.getInliningComponent=function(c,d){if(d&&(d=this.getSpecialInliningPropIfAny(d)))return a.special_inlining_components[d];d=this.inlining_component_dispatch[c];if(!d){d=this.lang.nodeClassDispatch(c);if(d.inlining_class)return d.inlining_class;if(this.lang.isNodeSubtype(c,e.Nodetypes.Ref))return b.RefNodeInliningComponent;
f.dwarncat(t.LogTypes.langinit,"inlining_component_dispatch["+c+"] is undefined and "+c+" is not a subtype of RefNode, so returning DefaultInliningComponent.");return g.DefaultInliningComponent}return d};a.prototype.addExtraAllowedInliningVMProps=function(a,b){"string"!==typeof a&&(a=e.nodeclassName(a));u.production_assert(u.arrayHas(this.lang.node_class_names,a),a+" not found in node class names");this._extraAllowedInliningVMProps.has(a)?(c=this._extraAllowedInliningVMProps.get(a)).push.apply(c,
b):this._extraAllowedInliningVMProps.set(a,b);var c};a.prototype.getExtraAllowedInliningVMProps=function(a){"string"!==typeof a&&(a=e.nodeclassName(a));return this._extraAllowedInliningVMProps.get(a)};a.prototype.excludePropNamesFromInliningVM=function(a,b){"string"!==typeof a&&(a=e.nodeclassName(a));u.production_assert(u.arrayHas(this.lang.node_class_names,a),a+" not found in node class names");f.dassert(!this._propNamesToExcludeFromInliningVM.has(a));this._propNamesToExcludeFromInliningVM.set(a,
b)};a.prototype.getExcludedPropsNames=function(a){"string"!==typeof a&&(a=e.nodeclassName(a));return this._propNamesToExcludeFromInliningVM.get(a)};a.prototype.addCustomInliningVMUpdaterMappings=function(a){var b=this;Object.getOwnPropertyNames(a).forEach(function(c){f.dassert(!b.vm_gen_dispatch[c]);b.vm_gen_dispatch[c]=a[c]})};a.prototype.getCustomInliningVMUpdater=function(a){return this.vm_gen_dispatch[a]};a.prototype.computeInheritedCustomInliningUpdater=function(){var a=this;this.lang.computeInheritedData_no_merging(function(b){return a.vm_gen_dispatch[b]},
function(b,c){a.vm_gen_dispatch[b]=c});var b=u.objkeys(this.vm_gen_dispatch).length;f.dlogif(0<b,b+" nodetypes have custom inlining vm updater registered")};a.prototype.classes_from_nodetype_specs=function(){};return a}();x.special_inlining_components={FractionInliningComponent:a.FractionInliningComponent,LessThanInliningComponent:a.LessThanInliningComponent,LessThanOrEqualToInliningComponent:a.LessThanOrEqualToInliningComponent,GreaterThanInliningComponent:a.GreaterThanInliningComponent,GreaterThanOrEqualToInliningComponent:a.GreaterThanOrEqualToInliningComponent,
MultInliningComponent:a.MultInliningComponent,AddInliningComponent:a.AddInliningComponent,SubtractInliningComponent:a.SubtractInliningComponent,ExpInliningComponent:a.ExpInliningComponent,ProductBinderInliningComponent:a.ProductBinderInliningComponent,IntegralBinderInliningComponent:a.IntegralBinderInliningComponent};d.LanguageForView=x},function(k,d,a){var n=a(256);d.NODETYPE_CONVERSIONS=[];d.getTransform=function(a,f){for(var h=0;h<d.NODETYPE_CONVERSIONS.length;h++){var k=d.NODETYPE_CONVERSIONS[h];
if(k.from===a&&k.to===f)return k}return null};d.from=function(a){return a.from};d.to=function(a){return a.to};d.propNameMapsTo=function(a,d){for(var f=0;f<a.propname_map.length;f++)if(a.propname_map[f][0]===d)return a.propname_map[f][1];return null};d.isBidirectional=function(a){return a.bidirectional};d.compile_conversions=function(a,d){d||(d=[]);a||(a=[]);a=a.concat(d);var f=n.PairMapConstructor();a.forEach(function(a){var d={};a.propname_map.forEach(function(a){d[a[0]]=a[1]});f.set2(a.from,a.to,
{from:a.from,to:a.to,propname_map:d});if(a.bidirectional){var b={};a.propname_map.forEach(function(a){b[a[1]]=a[0]});f.set2(a.to,a.from,{from:a.to,to:a.from,propname_map:b})}});return f}},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=
c.prototype,new d)}}();k=a(18);var m=a(17),f=a(7),h=a(9),l=a(248);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){f.derr(h.LogTypes.entering,"RefableInTextNodeInliningComponent.render");var a=[];a.push(m.contentEditableInlineEditing(this.props._html_name,this.props.nodeid,h.SystPropNames.html_name,this.props.stdocid));this.props._mutid&&a.push(" ["+this.props._mutid+"]");return l.rspan(this.addDefaultInliningProps({}),a)};return b}(k.PureReactComponent);
d.RefableInTextNodeInliningComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(18);var m=a(4),f=a(9),h=a(17),l=a(248);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,
a);b.prototype.renderUnchecked=function(){var a=[];m.objhas(this.props,f.SystPropNames.html_name)?a.push(h.contentEditableInlineEditing(this.props[f.SystPropNames.html_name],this.props.nodeid,f.SystPropNames.html_name,this.wstdoc.stdocid)):(this.rstdoc.ogetNodeByPermId(this.props.nodeid),this.props.hrlabel?a.push(l.rhctext(this.props.hrlabel)):a.push(this.props.nodetype));m.objhas(this.props,f.SystPropNames.text)&&a.push(" - ",h.contentEditableInlineEditing(this.props[f.SystPropNames.text],this.props.nodeid,
f.SystPropNames.text,this.wstdoc.stdocid,!0));m.objhas(this.props,f.SystPropNames.html)&&a.push(" - ",h.contentEditableInlineEditing(this.props[f.SystPropNames.html],this.props.nodeid,f.SystPropNames.html,this.wstdoc.stdocid,!1));return l.rspan({key:this.props.nodeid+".inlining"},a)};return b}(k.PureReactComponent);d.DefaultInliningComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,
b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(18);var m=a(4),f=a(9),h=a(46),l=a(7),g=a(248),b=a(319),c=a(14),e=a(189),p=a(15);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){if(m.strtriv(this.props.display_symb_only_of_ref))return console.warn("Trivial value for prop display_symb_only_of_ref:",
this.props.display_symb_only_of_ref),g.rspan(this.addDefaultInliningProps({}),"--triv display_symb_only_of_ref--");if(c.stwidgets.reduceConstants.getValue()&&m.nottriv(this.props.curval))return l.dremindonce("Don't do this if we're inside a ._defn node"),b.curValComponent_span(this.props);l.derrif(!this.props._id_ref,"prop _id_ref is missing or trivial on node "+this.props.nodeid);return g.rspan(this.addDefaultInliningProps({className:"simple-inline-ref "+c.stwidgets.refStyle.value,"data-permid_ref":this.props._id_ref,
dangerouslySetInnerHTML:{__html:e.sanitizeHtmlST(this.props.display_symb_only_of_ref)}}),null)};d.prototype.componentDidMount=function(){var a=this,b=$(h.findDOMNode(this));b.on("click",function(){if(!p.inEditMode()||a.props.stdocid!==a.rstdoc.stdocid)return!0;var c=b.position(),d=$("<select class='minimal-select'></select>").css("position","absolute").css({left:c.left,top:c.top}).insertBefore(b),c=a.getOptions();_.map(c,function(a){a=$('<option value="'+a.value+'">'+a.display+"</option>");d.append(a)});
d.val(a.props._id_ref);b.css("visibility","hidden");var e=!1,g=!1;d.on("change blur click",function(c){if("click"===c.type&&!p.inEditMode())return!0;if("click"===c.type&&!g)return l.dlog("first click"),g=!0,!1;if(e)return null;e=!0;d.hide();a.sendToDocMsgBox({name:"ImmutableStringPropChange",nodeid:a.props.nodeid,label:f.SystPropNames.id_ref,value:d.val()});b.css("visibility","initial");return!1});return!1})};d.prototype.getOptions=function(){l.ddeb("RefNodeInliningComponent.getOptions");var a=this.rstdoc.ogetNodeByPermId(this.props.nodeid),
b=a.getClass();b.possible_values||l.dwarn("node class "+b.nodetype_name+" has no .possible_values");a="function"===typeof b.possible_values[f.SystPropNames.id_ref]?b.possible_values[f.SystPropNames.id_ref](a):b.possible_values[f.SystPropNames.id_ref];this.props._id_ref||l.ddeb("_id_ref is null");0===a.length&&l.dremind("pos_vals.length === 0. SHOULD include all possible values");return a.map(function(a){return{display:a[0],value:a[1],key:a[1]}})};return d}(k.PureReactComponent);d.RefNodeInliningComponent=
a},function(k,d,a){function n(a){return _.round(a.curval,p.ROUND_PRECISION).toString()}function m(a,c){return e.nottriv(a.curval)?b.rspan({key:a.nodeid+"curval"},c,n(a)):c}function f(a,d,g){if(!d.ch)return b.rspan({key:d.nodeid+"inlining"},a);if(e.nottriv(d.curval)&&t.stwidgets.reduceConstants.getValue())return m(d);for(var f=Array(d.ch.length),k=0;k<f.length;k++){var l;l=0<k?d.nch&&d.nch.fnref&&d.nch.fnref._id_ref?u.renderUnsanitizedHTMLStringAsRef(a,d.nch.fnref._id_ref,a+k,b.rtd,{className:"dwmath-infix-multiline-op dwmath-td"}):
d.nch&&d.nch.predref&&d.nch.predref._id_ref?u.renderUnsanitizedHTMLStringAsRef(a,d.nch.predref._id_ref,a+k,b.rtd,{className:"dwmath-infix-multiline-op dwmath-td"}):b.rtd({key:a+k,className:"dwmath-infix-multiline-op dwmath-td"},0===k?"":a):b.rtd({key:a+k,className:"dwmath-infix-multiline-op dwmath-td"},"");f[k]=b.rtr({key:"row"+k,className:"dwmath-infix-multiline-row"},l,b.rtd({key:"formula",className:"dwmath-infix-multiline-formula dwmath-td"},c.makeInliningComponentInstance(g,d.ch[k])))}a=b.rtable({className:"infix-multiline"},
b.rtbody(null,f));return d.parenthesize?h(a,d.font_height||1.5*d.ch.length):a}function h(a,c,d){void 0===d&&(d="");return b.rtable({className:"infix-multiline "+d},b.rtbody(null,b.rtr(null,b.rtd({style:{transform:"scale(1,"+c+")"},className:"dwmath-td"},"("),b.rtd({key:"inner",className:"dwmath-td"},a),b.rtd({style:{transform:"scale(1,"+c+")"},className:"dwmath-td"},")"))))}function l(a,d,g){var f=[];if(e.nottriv(d.curval)&&t.stwidgets.reduceConstants.getValue())return m(d);d.ch&&0<d.ch.length?d.ch.forEach(function(e,
h){f.push(b.rtd({key:e.key},c.makeInliningComponentInstance(g,e)));h<d.ch.length-1&&(d.nch&&d.nch.fnref&&d.nch.fnref._id_ref?f.push(u.renderUnsanitizedHTMLStringAsRef(a,d.nch.fnref._id_ref,a+h,b.rtd,{className:"dwmath op"})):d.nch&&d.nch.predref&&d.nch.predref._id_ref?f.push(u.renderUnsanitizedHTMLStringAsRef(a,d.nch.predref._id_ref,a+h,b.rtd,{className:"dwmath op"})):f.push(b.rtd({className:"dwmath op",key:a+h},a)))}):f.push(b.rtd({key:"symbol"},a));var k;d.parenthesize?(k=b.rtable({className:"dwmath-infix-op-singleline"},
b.rtbody(null,b.rtr(null,f))),k=h(k,d.font_height||1,"node_inlining "+d.nodeid+"-inlining")):k=b.rtable({className:"dwmath-infix-op-singleline node_inlining "+d.nodeid+"-inlining"},b.rtbody(null,b.rtr(null,f)));return k}var g=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):
(d.prototype=c.prototype,new d)}}(),b=a(248);k=a(18);var c=a(247),e=a(4),p=a(9),t=a(14),u=a(188);d.curValString=n;d.curValComponent_span=m;a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g(d,a);d.prototype.renderUnchecked=function(){if(!this.props.ch||2>this.props.ch.length)return b.rerror("Node needs two children to render fraction.");if(e.nottriv(this.props.curval)&&t.stwidgets.reduceConstants.getValue())return m(this.props);if(this.props.singleline)return l("/",this.props,
this.wstdoc.stdocid);var a=c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[0]),d=c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[1]);return b.rtable(this.addDefaultInliningProps({className:"dwmath-frac"}),b.rtbody(null,b.rtr({key:"numer"},b.rtd({className:"dwmath-numerator dwmath-td"},a)),b.rtr({key:"div"},b.rtd(null,b.rhr({className:"dwmath-divides-bar dwmath-td"}))),b.rtr({key:"den"},b.rtd({className:"dwmath-denominator dwmath-td"},d))))};return d}(k.PureReactComponent);
d.FractionInliningComponent=a;a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g(d,a);d.prototype.renderUnchecked=function(){if(!this.props.ch||2>this.props.ch.length)return b.rerror("Node needs at least two children to render cases.");var a=b.rtd({key:"lhs",className:"dwmath-cases-lhs"},c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[0])),d=[],e=0===this.props.ch.length%2,f;f=e?Math.floor((this.props.ch.length-1)/2):(this.props.ch.length-1)/2;for(var g=
0;g<f;g+=1)d.push(b.rtr({key:"rhs"+g,className:"dwmath-cases-row"},b.rtd({key:"val",className:"dwmath-cases-val"},c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[2*g+1])),b.rtd({key:"cond",className:"dwmath-cases-cond"},b.rspan({key:"if",className:"dwmath-cases-if"},"if"),c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[2*g+2]))));e&&d.push(b.rtr({key:"rhs"+f,className:"dwmath-cases-row"},b.rtd({key:"val",className:"dwmath-cases-val"},c.makeInliningComponentInstance(this.wstdoc.stdocid,
this.props.ch[this.props.ch.length-1])),b.rtd({key:"cond",className:"dwmath-cases-cond"},b.rspan({key:"if",className:"dwmath-cases-if"},"otherwise"))));return b.rtable({className:"dwmath-cases"},b.rtbody(null,b.rtr({},a,b.rtd({key:"equals",className:"dwmath-cases-equals dwmath-td"},"="),b.rtd({key:"curly",className:"dwmath-cases-curly dwmath-td",style:{transform:this.props.font_height?"scale(1,"+this.props.font_height.toString()+")":"scale(1,"+d.length.toString()+")"}},"{"),b.rtd({key:"rhs",className:"dwmath-td"},
b.rtable(null,b.rtbody(null,d))))))};return d}(k.PureReactComponent);d.CasesInliningComponent=a;d.multiline_view_from_props=f;d.parenthesize_view_from_component=function(a,c,d){d||(d=a.props.font_height||1);return b.rtable(a.addDefaultInliningProps({className:"infix-multiline"}),b.rtbody(null,b.rtr(null,b.rtd({style:{transform:"scale(1,"+d+")"},className:"dwmath-td"},"("),b.rtd({key:"inner",className:"dwmath-td"},c),b.rtd({style:{transform:"scale(1,"+d+")"},className:"dwmath-td"},")"))))};d.parenthesize_view=
h;d.singleline_view_from_props=l;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}g(b,a);b.prototype.renderUnchecked=function(){return this.props.multiline?f(this.symbol,this.props,this.wstdoc.stdocid):l(this.symbol,this.props,this.wstdoc.stdocid)};return b}(k.PureReactComponent);d.InfixVertAlignedMathInliningComponent=a;var v=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.symbol="<";return b}g(b,a);return b}(a);d.LessThanInliningComponent=v;v=function(a){function b(){var b=
null!==a&&a.apply(this,arguments)||this;b.symbol="\u2264";return b}g(b,a);return b}(a);d.LessThanOrEqualToInliningComponent=v;v=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.symbol=">";return b}g(b,a);return b}(a);d.GreaterThanInliningComponent=v;v=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.symbol="\u2265";return b}g(b,a);return b}(a);d.GreaterThanOrEqualToInliningComponent=v;v=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||
this;b.symbol="\u00b7";return b}g(b,a);return b}(a);d.MultInliningComponent=v;v=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.symbol="+";return b}g(b,a);return b}(a);d.AddInliningComponent=v;v=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.symbol="-";return b}g(b,a);return b}(a);d.SubtractInliningComponent=v;a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.symbol="=";return b}g(b,a);return b}(a);d.EqualsInliningComponent=
a;a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}g(d,a);d.prototype.renderUnchecked=function(){return!this.props.ch||2>this.props.ch.length?b.rerror("Need at least two children"):b.rspan(this.addDefaultInliningProps({className:"dwmath-exp"}),c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[0]),b.rsup({key:"sup"},c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[1])))};return d}(k.PureReactComponent);d.ExpInliningComponent=a;k=function(a){function d(){return null!==
a&&a.apply(this,arguments)||this}g(d,a);d.prototype.renderUnchecked=function(){if(!this.props.ch||4>this.props.ch.length)return b.rerror("Needs at least 4 children to render");var a=c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[0]),d=c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[3]),a=b.rspan({className:"dwmath-lower-var-binder",key:"lb"},a,5===this.props.ch.length?" = ":" \u2208 ",d),d=5<=this.props.ch.length?b.rspan({className:"dwmath-upperbound",key:"ub"},
c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[4])):null,e=b.rspan({className:"dwmath-binder-body",key:"dwmath-binder-body"},c.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[2]));return b.rspan(this.addDefaultInliningProps({className:"dwmath-binder-with-bounds-app"}),b.rspan({className:"dwmath-product-sign-and-bounds",key:"sign-and-bounds"},d,b.rspan({className:"dwmath-big-pi",key:"bigpi"},this.symbol),a),e)};return d}(k.PureReactComponent);d.BinderWithBoundsInliningComponent=
k;a=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.symbol="\u03a0";return b}g(b,a);return b}(k);d.ProductBinderInliningComponent=a;k=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.symbol="\u222b";return b}g(b,a);return b}(k);d.IntegralBinderInliningComponent=k},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var f in d)d.hasOwnProperty(f)&&
(a[f]=d[f])};return function(d,h){function f(){this.constructor=d}a(d,h);d.prototype=null===h?Object.create(h):(f.prototype=h.prototype,new f)}}();k=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){return null};return d}(a(18).PureReactComponent);d.TrivialInliningComponent=k},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,
b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}(),m=a(248);k=a(18);var f=a(247),h=a(7);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){var a=this,c=Array(2*this.props.ch.length-1);this.props.ch.forEach(function(b,d){b?(c[2*d]=f.makeInliningComponentInstance(a.wstdoc.stdocid,b),c[2*d+1]=m.rbr({key:"br"+
d})):h.dwarn("null inlining")});return m.rspan(this.addDefaultInliningProps({}),c)};return d}(k.PureReactComponent);d.ConcatenateInliningComponent=a},function(k,d,a){var n=a(5),m=a(14),f=a(3),h=a(4),l=a(323),g=a(7),b=a(324),c=function(){function a(){this.widgets=m.stwidgets;this.timer=new l.FelixTimer(3)}a.prototype.addLogType=function(a){window.structure_together.logging.addLogType(a)};a.prototype.removeLogType=function(a){window.structure_together.logging.removeLogType(a)};a.prototype.getnode=function(a){return"number"===
typeof a?this.doc.ogetNodeByNumId(a):this.doc.ogetNodeByPermId(a)};a.prototype.nodevm_show_cached=function(a){this.controller.showCachedVM(this.getnode(a))};a.prototype.debugRT=function(){gapi.drive.realtime.debug()};Object.defineProperty(a.prototype,"doc",{get:function(){return f.STApp.the.main_display_wstdoc},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"controller",{get:function(){return f.STApp.the.controller_of_main_display_wstdoc},enumerable:!0,configurable:!0});a.prototype.saveCurrentDocToLocal=
function(a){f.saveLastLoadedSTDocDataToLocal(a)};a.prototype.storeDocIdTitlePair=function(){return f.STApp.the.storeDocIdDocTitlePair()};a.prototype.cleanupLocalStorage=function(a){void 0===a&&(a=!0);f.STApp.the.appdata.killOrphanedFiles(a);a&&console.warn("This was a DRY RUN")};a.prototype.deepLinkCopyNode=function(a,b,c){return this.doc.deepLinkCopyNode(a,b,c)};a.prototype.undoRedoStackSizes=function(){console.log(f.STApp.the.main_display_wstdoc.sharedmodel.stackSizes())};a.prototype.undoRedoStacks=
function(){console.log(f.STApp.the.main_display_wstdoc.sharedmodel.printUndoRedoStacks())};a.prototype.addGoogleDriveSharingHelpersToWindow=function(){b.addGoogleDriveSharingHelpersToWindow()};a.prototype.testDocCopy=function(){var a=this.doc;g.timerStart("doccopy");n.deepCopySTData(a,a.top.getPseudoReadOnlyData());g.timerEnd("doccopy");console.log(a.cache.permid2node.size+" nodes")};a.prototype.findReplaceInLocalStorage=function(a,b){return h.localStorageFindReplace(a,b)};a.prototype.readFileAsText=
function(){var a=document.getElementById("st-file-input").files[0],b=new FileReader;b.onload=function(b){g.dnote("File load finished. String stored in last_read_file");b=b.target.result;window.last_read_file=b;console.log("name: "+a.name+"\ntype: "+a.type+"\nsize: "+a.size+" bytes");if(a.name.endsWith(".xml")){var c=new DOMParser;window.$xml=$(c.parseFromString(b,"text/xml"));g.dnote("XML files stored in $xml")}};b.readAsText(a)};return a}();d.introduce_debugging_globals=function(){window.std=new c;
window.st=window.structure_together}},function(k,d){k=function(){function a(a){void 0===a&&(a=0);this.min_to_display=a;this.last_start={};this.count={};this.sum={};this.avg={}}a.prototype.start=function(a){this.last_start[a]=window.performance.now()};a.prototype.end=function(a){if(this.last_start[a]){var d=window.performance.now()-this.last_start[a],f=this.count[a]?this.count[a]+1:1;this.count[a]=f;var h=this.sum[a]?this.sum[a]+d:d;this.sum[a]=h;this.avg[a]=h/f;delete this.last_start[a];return d}};
a.prototype.reset=function(){this.count={};this.sum={};this.avg={};this.last_start={}};return a}();d.FelixTimer=k},function(k,d,a){function n(a,b){a||(a=h.STApp.the.last_loaded_docid||syncing_data.widgets.loadFileIdTextInput().getValue());gapi.client.load("drive","v2").then(function(){(a?gapi.client.drive.permissions.list({fileId:a}):gapi.client.drive.permissions.list()).then(function(a){b&&(b.it=a);console.log(a);console.log(a.result.permissions)},function(a){console.error("Error: "+a.result.error.message)})})}
function m(a){return function(b){b||(b=h.STApp.the.last_loaded_docid||syncing_data.widgets.loadFileIdTextInput().getValue());l.assert_nt(b);l.dwarn("giving permissions for "+b+" to "+a);gapi.client.load("drive","v3").then(function(){gapi.client.drive.permissions.create({fileId:b,type:"user",role:"writer",emailAddress:a}).then(function(a){console.warn("Google request response:",a)},function(a){console.error("Error: "+a.result.error.message)})})}}function f(){window.structure_together.getPermissions=
n;window.structure_together.perms2ddawg=d.givePermDDawg;window.structure_together.perms2dust=d.givePermDust;window.structure_together.perms2laura=d.givePermLaura}var h=a(3),l=a(7);d.runRequest=function(a){a.then(function(a){console.log(a)},function(a){console.error("Error: "+a.result.error.message)})};d.permissions=n;d.givePermDDawg=m("d.dawg.fresh@gmail.com");d.givePermDust=m("dustin.wehr@gmail.com");d.givePermLaura=m("laura.eg.simon@gmail.com");d.addGoogleDriveSharingHelpersToWindow=f;f()},function(k,
d,a){function n(a,c){var b=f.mapGetOrErr(d.test_id_to_PSTestExample,h.stwidgets.exampleSelect.value);h.stwidgets.languageSelect.value=b.lang;l.STApp.the.persistenceModuleLoadOrChange(!1,a);0===c?l.STApp.the.newPersistentSTDoc({doc_ops_after_hookup_controller:b.builder,hookup_controler:!0}):1===c&&l.STApp.the.newPersistentSTDoc({doc_ops_before_hookup_controller:b.builder,hookup_controler:!0})}var m=a(9),f=a(4),h=a(14),l=a(3);k=a(326);var g=a(333);a=a(262);d.test_id_to_PSTestExample=new Map;d.test_id_to_PSTestExample.set("factoring",
k.factoringProofTest);d.test_id_to_PSTestExample.set("basic outline",g.outlinesTest);h.stwidgets.exampleSelect=new a.WithSelectAndLocalStorage("ps-example-select",m.TEST_DOC_GEN_IDS.factoring,{fixed_options:[m.TEST_DOC_GEN_IDS.factoring,m.TEST_DOC_GEN_IDS.basicoutline]});d.testingSetupAfterDOMLoaded=function(){$("<button id='localModel-stdoc-build-then-gui'>stdoc build then gui</button>").appendTo("#LocalModel-tests").addClass("proofsocial-test-button").click(function(){n(m.PersistTypes.Local,1)});
$("<button>gui then stdoc build</button>").appendTo("#LocalModel-tests").addClass("proofsocial-test-button").click(function(){n(m.PersistTypes.Local,0)});$("<button id='RT-stdoc-build-then-gui'>stdoc build then gui</button>").appendTo("#RT-tests").addClass("proofsocial-test-button").click(function(){n(m.PersistTypes.RT,1)});$("<button>gui then stdoc build</button>").appendTo("#RT-tests").addClass("proofsocial-test-button").click(function(){n(m.PersistTypes.RT,0)})};d.test_build_arg_and_gui=n;window.structure_together=
window.structure_together||{};window.structure_together.debug=window.structure_together||{};window.structure_together.debug.tests=!0},function(k,d,a){k=a(7);var n=a(9),m=a(327),f=a(6),h=a(328),l=a(332);k.dlogcat(n.LogTypes.entering,"Entering test_factoring_proof_builder...");d.factoringProofTest=new m.STestExample(n.LanguageModules.ifp,function(a){function b(b){a.appendDetachedNode(b,B);return b}a.top.set_title("toy ex: factoring proof");var c=h.mk_newReservedVar(a),d=h.mk_newFnSymbIntro(a),g=h.mk_newPredSymbIntro(a),
k=h.mk_newSortSymbIntro(a),m=h.mk_newTheorem(a),n=f.mk_newProse_builder(a),y=f.mk_newProse_builder(a),r=h.mk_newSortRef(a),x=h.mk_newVarRef(a),A=h.mk_newFnRef(a),z=h.mk_newPredRef(a),C=n("this is at the highest visible level",a.top);C.set_mutid("test...");y("This node has arbitrary <i><b>html</b></i>. \n\t\t<ol>\n\t\t\t<li>one</li>\n\t\t\t<li>two</li>\n\t\t</ol>\n\t\t\n\t\tLinebreak markup, or any other markup, is not inserted.\n\t\t\n\t\t{list_of_nat}");var B=new h.Proof(a,null);n("this is a text-only node, referencing 'nat': {nat}",
B);B.prooftitle="Proof that every natural number 2 or greater has a prime factorization";a.appendDetachedNode(B,a.top);y=b(k("\u2115<sup>\u22652</sup>"));y.set_mutid("nat");y.interp="The natural numbers";var D=b(k("List[{nat}]"));D.set_mutid("list_of_nat");D.interp="Non-empty finite lists containing elements of {nat}.";var G=b(c("n",y));b(c("k",y));var k=b(c("a",y)),n=b(c("b",y)),E=b(c("s",D)),F=b(d());F.set_html_name("\u03a0");F.interp="The product of the numbers in the given list.";F.ltype.appendDetachedUnnamedChild(r(D));
F.ltype.appendDetachedUnnamedChild(r(y));var H=b(g("AllPrimes"));H.interp="All numbers in the given list are primes";H.ltype.appendDetachedUnnamedChildren(r(D));c=b(d("singleton"));c.interp="The list consisting of just the given number.";c.ltype.appendDetachedUnnamedChildren(r(y),r(D));c=b(g("hasPrimeFact"));c.ltype.appendDetachedUnnamedChildren(r(y));c.interp="The number has a prime factorization";var J=b(g("isPrimeFactOf"));J.ltype.appendDetachedUnnamedChildren(r(D),r(y));(function(){var b=new h.Quantifier(a);
b.quantifier_type="\u2200";b.appendDetachedUnnamedChildren(x(E));var c=new h.Quantifier(a);c.quantifier_type="\u2200";c.appendDetachedUnnamedChildren(x(G));var d=new l.Iff(a),e=new l.And(a),f=new h.PredApp(a);f.predref=z(J);f.appendDetachedUnnamedChildren(x(E),x(G));var g=new h.PredApp(a);g.predref=z(H);g.appendDetachedUnnamedChild(x(E));var k=new h.EqualsApp(a),m=new h.FnApp(a);m.fnref=A(F);m.appendDetachedUnnamedChildren(x(E));k.appendDetachedUnnamedChildren(m,x(G));e.appendDetachedUnnamedChildren(g,
k);d.appendDetachedUnnamedChildren(f,e);J.defn=b;b.body=c;c.body=d})();J.interp="The given list is a prime factorization of the given number.";d=b(d("\u00d7"));d.interp="multiplication";d.set_mutid("mult");d.ltype.appendDetachedUnnamedChildren(r(y),r(y),r(y));d.set_html_template("@@0 \u00d7 @@1");m=b(m("Test of {mult} 'theorem'","a {mult} b equals b {mult} a"));r=new h.EqualsApp(a);g=new h.FnApp(a);g.fnref=A(d);g.appendDetachedUnnamedChildren(x(k),x(n));y=new h.FnApp(a);y.fnref=A(d);y.appendDetachedUnnamedChildren(x(n),
x(k));r.appendDetachedUnnamedChildren(g,y);m.defn=r;a.copyNode(C);a.pasteNode(a.top,0)})},function(k,d){k=function(){return function(a,d){this.lang=a;this.builder=d}}();d.STestExample=k},function(k,d,a){function n(a){var b=a.parentNode;if(b&&(b.hasType("FnApp")||b.hasType("PredApp"))){var d=b.indexOfUnnamedChild(a);return r.triv(d)?(c.derr("node "+a.oid+" not found in unnamed childred of "+b.oid),null):b.oexpected_arg_sort(d)}return null}function m(a){if(a.fnref){var b=a.fnref.ogetReferredToNode();
if(b&&(b=b.immutableStrings.getVal(y.SystPropNames.special_inlining))){var d=[];a.forEachUnnamedChild(function(a){a=a.cache.curval;r.nottriv(a)&&d.push(a)});if(!(d.length<a.numUnnamedChildren())){var e=null;if(0<d.length){switch(b){case "AddInliningComponent":e=_.sum(d);break;case "FractionInliningComponent":2<=d.length&&(e=d[0]/d[1]);break;case "MultInliningComponent":e=1;d.forEach(function(a){e*=a});break;case "SubtractInliningComponent":2<=d.length&&(e=d[0]-d[1],c.dwarnif(3<=d.length,"valueTakingNodeInliningUpdater doesn't implement subtract for >= 3 args"))}r.nottriv(e)&&
e!==a.cache.curval&&(a.cache.curval=e,a.parentNode.refreshCache())}}}}}function f(a,b){if(a.oid===b.oid||!a.hasChild("subtype_of"))return!1;var c;c=a;a=new Set;for(a.add(c.oid);c;){c=c.getChild("subtype_of");if(!c)break;c=c.ogetReferredToNode();if(a.has(c.oid))break;a.add(c.oid);if(!c)break;if(c&&c.oid===b.oid)return!0}return!1}function h(a){return function(b){var c=new B(a);c.reffed_nodeid=b.oid;a.fillDefaults(c);return c}}var l=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),g=a(12);k=a(6);var b=a(329),c=a(7),e=a(314),p=a(249),t=a(331),u=a(318),v=a(13),y=a(9),r=a(4),x=a(332),A=a(319);d.IFPNodetypes={IFPTop:"IFPTop",IFPNode:"IFPNode",Proof:"Proof",TheoremEtc:"TheoremEtc",TheoremEtcRef:"TheoremEtcRef",Axiom:"Axiom",Hypothesis:"Hypothesis",
IFPTerm:"IFPTerm",Formula:"Formula",SortSymbIntroRef:"SortSymbIntroRef",FnSymbIntroRef:"FnSymbIntroRef",PredSymbIntroRef:"PredSymbIntroRef",PropSymbIntroRef:"PropSymbIntroRef",ConstSymbIntroRef:"ConstSymbIntroRef",ReservedVarIntroRef:"ReservedVarIntroRef",FnApp:"FnApp",Sort:"Sort",SortRef:"SortRef",InterpSymbolIntro:"InterpSymbolIntro",LeafInterpSymbolIntro:"LeafInterpSymbolIntro",ParentalInterpSymbolIntro:"ParentalInterpSymbolIntro",Iota:"Iota",SortSymbIntro:"SortSymbIntro",PropSymbIntro:"PropSymbIntro",
ConstSymbIntro:"ConstSymbIntro",ConstSymbIntroGroup:"ConstSymbIntroGroup",SortOpIntro:"SortOpIntro",SortOpApp:"SortOpApp",SortRefStar:"SortRefStar",SortStar:"SortStar",UnarySortOp:"UnarySortOp",FnSymbIntro:"FnSymbIntro",FnOrPredSymbIntro:"FnOrPredSymbIntro",PredSymbIntro:"PredSymbIntro",ReservedVarIntro:"ReservedVarIntro",ReservedVarIntroGroup:"ReservedVarIntroGroup",EqualsApp:"EqualsApp",Cases:"Cases",FnApp2:"FnApp2",PredApp:"PredApp",Quantifier:"Quantifier",Forall:"Forall",Exists:"Exists",ConnectiveApp:"ConnectiveApp",
And:"And",Or:"Or",Not:"Not",Iff:"Iff",Implies:"Implies",AndImplies:"AndImplies",FnType:"FnType",PredType:"PredType",FiniteFnRef:"FiniteFnRef",FiniteFnIntro:"FiniteFnIntro",FiniteFnApp:"FiniteFnApp"};d.IFPPropNames={defn:"defn",interp:"interp",prooftitle:"prooftitle",bndvar:"bndvar",body:"body",fnref:"fnref",predref:"predref",ltype:"ltype",title:"title",quantifier_type:"quantifier_type",proofof:"proofof",proof:"proof",parenthesize:"parenthesize",multiline:"multiline",singleline:"singleline",font_height:"font_height",
subtype_of:"subtype_of","var":"var",parameter:"parameter",math:"math",finite_fn_def_str:"finite_fn_def_str",fnarg:"fnarg"};d.osortExpectedFromParent=n;d.id_ref_options=function(a,b){return function(c){var d=n(c);return c.wstdoc.traversal.getFilteredRefableInTextNodes(function(c){if(c.hasType(a)){var e=b(c);if(!d)return!0;if(!e)return console.error(c,d,e),!0;if(e.oid===d.oid)return!0}return!1}).map(function(a){var b=a.html_name;b||(b=a.get_html_name());return[b,a.oid]})}};a=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}l(b,a);b.prototype.osort=function(){throw new r.NotYetImplemented;};return b}(g.STNode);a.nodetype_name="IFPTerm";a.abstract=!0;d.IFPTerm=a;var z=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);return b}(k.Top);z.nodetype_name="IFPTop";z.abstract=!1;z.reader_mode_expandable=!0;z.init_collapsed=!1;z.allowed_ch=[v.Nodetypes.FreeForm,"TheoremEtc","Axiom","ReservedVarIntro","SortSymbIntro","FnSymbIntro","PredSymbIntro","ConstSymbIntro","PropSymbIntro",
"Proof",v.Nodetypes.SectionBreak];z.default_str_prop_vals_when_empty=r.mkobj([y.SystPropNames.title,"title of this IFP"]);d.IFPTop=z;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"prooftitle",{get:function(){return this.immutableStrings.getVal("prooftitle",{if_none:p.MISSING_STRING_VAL})},set:function(a){this.immutableStrings.setVal("prooftitle",a)},enumerable:!0,configurable:!0});return b}(k.ParentalRefableInText);a.nodetype_name=
"Proof";a.abstract=!1;a.init_collapsed=!1;a.reader_mode_expandable=!0;a.allowed_flatprops=r.mkobj(["prooftitle",4]);a.allowed_ch=[v.Nodetypes.FreeForm,"TheoremEtc","Axiom","ReservedVarIntro","SortSymbIntro","FnSymbIntro","PredSymbIntro","ConstSymbIntro","ConstSymbIntroGroup","PropSymbIntro","Proof"];a.required_nch=r.mkobj(["proofof","TheoremEtcRef"]);d.Proof=a;var C=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.scopetype=v.ScopeTypes.IntroChildrenSiblings;return b}l(b,a);
return b}(x.ParentalInterpSymbolIntro);C.nodetype_name="SortSymbIntro";C.abstract=!1;C.inlining_class=b.SortSymbolIntroInliningComponent;C.allowed_flatprops=r.mko("math",1);C.default_bool_prop_vals=r.mkobj(["math",!0]);C.allowed_nch=r.mkobj(["subtype_of","SortSymbIntroRef"]);d.SortSymbIntro=C;var B=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.referredToNodetype=function(){return"SortSymbIntro"};return b}(k.RefNode);B.nodetype_name="SortSymbIntroRef";B.abstract=
!1;B.parents=["InterpSymbIntroRef"];B.ignore_on_expand_most=!0;B.possible_values=r.mkobj([y.SystPropNames.id_ref,k.RefNode.optionsByNodetype("SortSymbIntro")]);d.SortSymbIntroRef=B;g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.referredToNodetype=function(){return"Sort"};return b}(k.RefNode);g.nodetype_name="SortRef";g.abstract=!1;g.possible_values=r.mkobj([y.SystPropNames.id_ref,k.RefNode.optionsByNodetype("Sort")]);d.SortRef=g;var D=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}l(b,a);b.prototype.referredToNodetype=function(){return"SortSymbIntro"};return b}(B);D.nodetype_name="SortStar";D.abstract=!1;D.inlining_class=b.SortStarInliningComponent;D.possible_values=r.mkobj([y.SystPropNames.id_ref,k.RefNode.optionsByNodetype("SortSymbIntro")]);d.SortStar=D;var G=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.referredToNodetype=function(){return"SortSymbIntro"};return b}(B);G.nodetype_name="UnarySortOp";
G.abstract=!1;G.inlining_class=b.UnarySortOpInliningComponent;G.required_flatprops=r.mko("sortop",5);G.possible_values=r.mkobj([y.SystPropNames.id_ref,k.RefNode.optionsByNodetype("SortSymbIntro")],["sortop",[["*","*"],["+","+"]]]);G.default_str_prop_vals_when_empty=r.mkobj(["sortop","*"]);d.UnarySortOp=G;var E=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.addChild=function(b){c.dassert("SortSymbIntroRef"===b.nodetype,b.nodetype+" is not SortSymbIntroRef");
a.prototype.appendDetachedUnnamedChild.call(this,b)};return b}(k.ParentalNode);E.nodetype_name="FnType";E.abstract=!1;E.ignore_on_expand_most=!0;E.allowed_ch=["SortSymbIntroRef"];E.allowed_nch={};E.min_ch=r.mko("SortSymbIntroRef",2);d.FnType=E;var F=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.addChild=function(b){c.dassert("SortSymbIntroRef"===b.nodetype,b.nodetype+" is not SortSymbIntroRef.");a.prototype.appendDetachedUnnamedChild.call(this,b)};return b}(k.ParentalNode);
F.nodetype_name="PredType";F.abstract=!1;F.ignore_on_expand_most=!0;F.allowed_ch=["SortSymbIntroRef"];F.allowed_nch={};F.min_ch=r.mko("SortSymbIntroRef",1);d.PredType=F;var H=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.scopetype=v.ScopeTypes.ClaimedChildrenOnly;return b}l(b,a);Object.defineProperty(b.prototype,"ltype",{get:function(){return this.getChild("ltype")},set:function(a){this.setNamedChild("ltype",a)},enumerable:!0,configurable:!0});return b}(k.ParentalRefableInText);
H.nodetype_name="ReservedVarIntro";H.abstract=!1;H.ignore_on_expand_most=!0;H.allowed_ch=[];H.required_flatprops=r.mkobj([y.SystPropNames.html_name,4]);H.required_nch=r.mkobj(["ltype","SortSymbIntroRef"]);d.ReservedVarIntro=H;var J=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);return b}(k.GroupNode);J.nodetype_name="ReservedVarIntroGroup";J.abstract=!1;J.ignore_on_expand_most=!0;J.inlining_class=b.ReservedVarIntroGroupInliningComponent;J.allowed_ch=["ReservedVarIntro",
v.Nodetypes.FreeForm];J.allowed_nch={};J.min_ch=r.mko("ReservedVarIntro",2);d.ReservedVarIntroGroup=J;var K=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);return b}(k.GroupNode);K.nodetype_name="ConstSymbIntroGroup";K.abstract=!1;K.ignore_on_expand_most=!0;K.reader_mode_expandable=!0;K.inlining_class=b.ConstSymbIntroGroupInliningComponent;K.allowed_ch=["ConstSymbIntro",v.Nodetypes.FreeForm];K.allowed_nch={};K.min_ch=r.mko("ConstSymbIntro",2);d.ConstSymbIntroGroup=K;
var I=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"ltype",{get:function(){return this.getChild("ltype")},set:function(a){this.setNamedChild("ltype",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"defn",{get:function(){return this.getChild("defn")},set:function(a){this.setNamedChild("defn",a)},enumerable:!0,configurable:!0});return b}(x.ParentalInterpSymbolIntro);I.nodetype_name="ConstSymbIntro";I.abstract=
!1;I.parents=[v.Nodetypes.ValueAssignableNodeMixin];I.ignore_on_expand_most=!0;I.allowed_ch=[v.Nodetypes.FreeForm];I.required_nch=r.mkobj(["ltype","SortSymbIntroRef"]);I.allowed_nch=r.mkobj(["defn","IFPTerm"]);I.allowed_flatprops=r.mkobj(["parameter",1],["math",1],[y.SystPropNames.init_val,2]);I.default_bool_prop_vals=r.mkobj(["parameter",!0],["math",!0]);I.default_num_prop_vals=r.mkobj([y.SystPropNames.init_val,0]);I.flatprop_change_listeners=r.mkobj([y.SystPropNames.init_val,function(a){var b=a.numbers.getVal(y.SystPropNames.init_val);
a.cache.curval=b;a.set_assignedval(b);c.dlog("flatprop_change_listeners listener running for "+y.SystPropNames.init_val+" to set thisnode.utfstate.curval to "+a.cache.curval+".")}]);I.cache_updaters=[function(a){var b=a.get_assignedval();r.nottriv(b)?a.cache.curval=b:a.defn&&(r.nottriv(a.defn.cache.curval)?a.cache.curval=a.defn.cache.curval:a.numbers.hasVal(y.SystPropNames.init_val)&&(a.cache.curval=a.numbers.getVal(y.SystPropNames.init_val)),a.defn.forEachInSubtree(function(a){a.cache.in_defn=!0}))}];
d.ConstSymbIntro=I;k.ValueAssignableNodeMixin.applyMixin(I);var L=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);return b}(x.ParentalInterpSymbolIntro);L.nodetype_name="FnOrPredSymbIntro";L.abstract=!0;L.ignore_on_expand_most=!0;L.allowed_ch=[];L.allowed_flatprops=r.mkobj([y.SystPropNames.special_inlining,5]);L.possible_values=r.mkobj([y.SystPropNames.special_inlining,r.objToArrayOfOwnKeyPairs(e.LanguageForView.special_inlining_components)]);d.FnOrPredSymbIntro=L;var N=
function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"ltype",{get:function(){return this.getChild("ltype")},set:function(a){this.setNamedChild("ltype",a)},enumerable:!0,configurable:!0});b.prototype.oresult_sort=function(){var a=this.ltype;if(!a)return null;a=a.getChild(a.numUnnamedChildren()-1);c.dassert(a instanceof B);return a.ogetReferredToNode()};Object.defineProperty(b.prototype,"defn",{get:function(){return this.getChild("defn")},
set:function(a){this.setNamedChild("defn",a)},enumerable:!0,configurable:!0});return b}(L);N.nodetype_name="FnSymbIntro";N.abstract=!1;N.required_nch=r.mko("ltype","FnType");N.allowed_nch=r.mkobj(["defn","Formula"]);d.FnSymbIntro=N;var O=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"ltype",{get:function(){return this.getChild("ltype")},set:function(a){this.setNamedChild("ltype",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"defn",{get:function(){return this.getChild("defn")},set:function(a){this.setNamedChild("defn",a)},enumerable:!0,configurable:!0});return b}(L);O.nodetype_name="PredSymbIntro";O.abstract=!1;O.required_nch=r.mko("ltype","PredType");O.allowed_nch=r.mkobj(["defn","Formula"]);d.PredSymbIntro=O;d.QuantifierTypes={forall:"forall",exists:"exists",exists_unique:"exists_unique"};var M=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.scopetype=v.ScopeTypes.ClaimedChildrenOnly;return b}
l(b,a);Object.defineProperty(b.prototype,"body",{set:function(a){this.setNamedChild("body",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"quantifier_type",{set:function(a){this.immutableStrings.setVal("quantifier_type",a)},enumerable:!0,configurable:!0});return b}(k.ParentalNode);M.nodetype_name="Quantifier";M.abstract=!1;M.parents=["Formula"];M.ignore_on_expand_most=!0;M.inlining_class=b.QuantifierInliningComponent;M.required_flatprops=r.mkobj(["quantifier_type",5]);M.possible_values=
r.mkobj(["quantifier_type",function(){return[["\u2200",d.QuantifierTypes.forall],["\u2203",d.QuantifierTypes.exists],["\u2203!",d.QuantifierTypes.exists_unique]]}]);M.allowed_ch=["ReservedVarIntroRef"];M.min_ch=r.mko("ReservedVarIntroRef",1);M.required_nch=r.mkobj(["body","Formula"]);M.default_str_prop_vals_when_empty=r.mkobj(["quantifier_type",d.QuantifierTypes.forall]);d.Quantifier=M;var Q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.referredToNodetype=
function(){return"ConstSymbIntro"};b.prototype.osort=function(){try{var a=this.ogetReferredToNode();return a?a.ltype.ogetReferredToNode():(c.dwarn("Const symbol ref undefined, so .osort() undefined"),null)}catch(aa){return console.error(aa),null}};b.id_ref_options=function(a){var b=n(a);return a.wstdoc.traversal.getFilteredRefableInTextNodes(function(a){return a.hasType("ConstSymbIntro")&&(!b||(a=a.ltype)&&(a=a.ogetReferredToNode())&&(a.oid===b.oid||f(a,b)))?!0:!1}).map(function(a){return[a.get_html_name(),
a.oid]})};return b}(k.RefNode);Q.nodetype_name="ConstSymbIntroRef";Q.abstract=!1;Q.parents=["IFPTerm","InterpSymbIntroRef"];Q.allowed_ch=[];Q.allowed_nch={};Q.possible_values=r.mkobj([y.SystPropNames.id_ref,Q.id_ref_options]);Q.cache_updaters=[function(a){var b=!1,c=a.ogetReferredToNode();if(c){c.refreshCache();var d=c.cache.curval;r.triv(d)&&(c.refreshCache(),d=c.cache.curval);r.nottriv(d)&&a.cache.curval!==d&&(b=!0,a.cache.curval=d)}b&&a.parentNode.refreshCache()}];d.ConstSymbIntroRef=Q;d.fnapp_cache_updater=
m;var P=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"fnref",{get:function(){return this.getChild("fnref")},set:function(a){this.setNamedChild("fnref",a)},enumerable:!0,configurable:!0});b.prototype.osort=function(){try{return this.fnref.ogetReferredToNode().oresult_sort()}catch(Z){return console.warn(Z),null}};b.prototype.oexpected_arg_sort=function(a){c.assert_nt(a);try{var b=this.fnref.ogetReferredToNode().ltype;if(!b)return null;
if(a>=b.numUnnamedChildren()-1)return c.dwarn("Arg "+a+" to FnApp.oexpected_arg_sort is too large or not a number. Node is "+this.oid),null;var d=b.getChild(a);return d?d.ogetReferredToNode?d.ogetReferredToNode():(c.derr("Not the SortSymbIntroRef I expected: ",d,"See node ",this.oid),null):(c.derr(a+"-th sort seems to be missing from FnType node "+b.oid+"."),null)}catch(ga){return console.warn(ga),null}};return b}(k.ParentalRefableInText);P.nodetype_name="FnApp";P.abstract=!1;P.parents=["IFPTerm"];
P.ignore_on_expand_most=!0;P.allowed_ch=["IFPTerm"];P.required_nch=r.mkobj(["fnref","FnSymbIntroRef"]);P.allowed_flatprops=r.mkobj(["parenthesize",1],["multiline",1],["singleline",1],["font_height",2]);P.default_num_prop_vals=r.mkobj(["font_height",1]);P.default_bool_prop_vals=r.mkobj(["parenthesize",!0],["multiline",!0],["singleline",!0]);P.cache_updaters=[m];d.FnApp=P;var S=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"predref",
{get:function(){return this.getChild("predref")},set:function(a){this.setNamedChild("predref",a)},enumerable:!0,configurable:!0});b.prototype.oexpected_arg_sort=function(a){try{var b=this.predref.ogetReferredToNode().ltype;c.dassert(b.getChild(a)instanceof B);return b.getChild(a).ogetReferredToNode()}catch(fa){return console.warn(fa),null}};return b}(k.ParentalRefableInText);S.nodetype_name="PredApp";S.abstract=!1;S.parents=["Formula"];S.ignore_on_expand_most=!0;S.allowed_ch=["IFPTerm"];S.required_nch=
r.mkobj(["predref","PredSymbIntroRef"]);d.PredApp=S;var R=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);return b}(k.ParentalRefableInText);R.nodetype_name="EqualsApp";R.abstract=!1;R.parents=["Formula"];R.inlining_class=A.EqualsInliningComponent;R.ignore_on_expand_most=!0;R.allowed_ch=["IFPTerm"];R.allowed_nch={};R.min_ch=r.mkobj(["IFPTerm",2]);R.allowed_flatprops=r.mkobj(["parenthesize",1],["multiline",1],["singleline",1],["font_height",2]);R.default_num_prop_vals=
r.mkobj(["font_height",1]);R.default_bool_prop_vals=r.mkobj(["parenthesize",!0],["multiline",!0],["singleline",!0]);d.EqualsApp=R;var U=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.id_ref_options=function(a){var b=a.parentNode,c=null;b&&(c=n(b));return a.wstdoc.traversal.getFilteredRefableInTextNodes(function(a){if(a.hasType(N)){if(!c)return!0;a=a.oresult_sort();if(!a||a.oid===c.oid||f(a,c))return!0}return!1}).map(function(a){var b=a.html_name;b||(b=a.get_html_name());
return[b,a.oid]})};b.prototype.referredToNodetype=function(){return"FnSymbIntro"};b.prototype.oresult_sort=function(){return this.ogetReferredToNode().oresult_sort()};return b}(k.RefNode);U.nodetype_name="FnSymbIntroRef";U.abstract=!1;U.parents=["InterpSymbIntroRef"];U.allowed_ch=[];U.allowed_nch={};U.possible_values=r.mkobj([y.SystPropNames.id_ref,U.id_ref_options]);d.FnSymbIntroRef=U;var T=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.referredToNodetype=
function(){return"PredSymbIntro"};return b}(k.RefNode);T.nodetype_name="PredSymbIntroRef";T.abstract=!1;T.parents=["InterpSymbIntroRef"];T.allowed_ch=[];T.allowed_nch={};T.possible_values=r.mkobj([y.SystPropNames.id_ref,k.RefNode.optionsByNodetype("PredSymbIntro")]);d.PredSymbIntroRef=T;var V=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.osort=function(){var a=this.ogetReferredToNode();return a?a.ltype.ogetReferredToNode():null};b.prototype.display_symb=
function(){var a=this.ogetReferredToNode();return a?a.get_html_name():y.BROKEN_REF_DISPLAY};b.prototype.referredToNodetype=function(){return"ReservedVarIntro"};b.id_ref_options=function(a){var b=n(a);return a.wstdoc.traversal.getFilteredRefableInTextNodes(function(a){return a.hasType("ReservedVarIntro")&&(!b||(a=a.ltype)&&(a=a.ogetReferredToNode())&&(a.oid===b.oid||f(a,b)))?!0:!1}).map(function(a){var b=a.html_name;b||(b=a.get_html_name());return[b,a.oid]})};return b}(k.RefNode);V.nodetype_name="ReservedVarIntroRef";
V.abstract=!1;V.parents=["IFPTerm"];V.allowed_ch=[];V.possible_values=r.mkobj([y.SystPropNames.id_ref,V.id_ref_options]);d.ReservedVarIntroRef=V;var W=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);return b}(k.ParentalRefableInText);W.nodetype_name="Cases";W.abstract=!1;W.parents=["Formula"];W.ignore_on_expand_most=!0;W.inlining_class=A.CasesInliningComponent;W.required_flatprops=r.mko("font_height",2);W.default_num_prop_vals=r.mkobj(["font_height",2]);W.allowed_ch=
["IFPTerm","Formula"];W.min_ch=r.mkobj(["IFPTerm",3],["Formula",2]);d.Cases=W;A=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"var",{get:function(){return this.getChild("var")},enumerable:!0,configurable:!0});b.prototype.osort=function(){try{return this.var.ogetReferredToNode().ltype.ogetReferredToNode()}catch(Z){return console.warn(Z),null}};return b}(k.ParentalRefableInText);A.nodetype_name="Iota";A.abstract=!1;A.parents=["IFPTerm"];
A.ignore_on_expand_most=!0;A.inlining_class=b.IotaInliningComponent;A.allowed_ch=["Formula"];A.required_nch=r.mko("var","ReservedVarIntroRef");A.min_ch=r.mkobj(["Formula",1]);A.max_ch=r.mkobj(["Formula",1]);A.allowed_flatprops=r.mkobj(["parenthesize",1]);A.default_bool_prop_vals=r.mkobj(["parenthesize",!0]);d.Iota=A;var X=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.cache={thefn:new Map};return b}l(b,a);Object.defineProperty(b.prototype,"ltype",{get:function(){return this.getChild("ltype")},
set:function(a){this.setNamedChild("ltype",a)},enumerable:!0,configurable:!0});b.prototype.oresult_sort=function(){var a=this.ltype;return a?a.ogetReferredToNode():null};return b}(k.ParentalRefableInText);X.nodetype_name="FiniteFnIntro";X.abstract=!1;X.required_nch=r.mkobj(["ltype","SortSymbIntroRef"]);X.required_flatprops=r.mkobj(["finite_fn_def_str",7]);X.default_str_prop_vals_when_empty=r.mkobj(["finite_fn_def_str","[]"]);X.flatprop_change_listeners=r.mkobj(["finite_fn_def_str",function(a){try{var b=
JSON.parse(a.editableStrings.getVal("finite_fn_def_str"));a.cache.thefn.clear();for(var d=0;d<b.length;d++)a.cache.thefn.set(b[d][0],b[d][1])}catch(aa){c.derr("flatprop_change_listeners exception",aa)}c.dlog("flatprop_change_listeners listener running for finite_fn_def_str to set cache.thefn")}]);X.cache_updaters=[X.flatprop_change_listeners.finite_fn_def_str];d.FiniteFnIntro=X;var Y=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);b.prototype.referredToNodetype=function(){return"FiniteFnIntro"};
return b}(k.RefNode);Y.nodetype_name="FiniteFnRef";Y.abstract=!1;Y.possible_values=r.mkobj([y.SystPropNames.id_ref,k.RefNode.optionsByNodetype("FiniteFnIntro")]);d.FiniteFnRef=Y;k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}l(b,a);Object.defineProperty(b.prototype,"fnref",{get:function(){return this.getChild("fnref")},set:function(a){this.setNamedChild("fnref",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fnarg",{get:function(){return this.getChild("fnarg")},
set:function(a){this.setNamedChild("fnarg",a)},enumerable:!0,configurable:!0});b.prototype.osort=function(){try{return this.fnref.ogetReferredToNode().oresult_sort()}catch(Z){return console.warn(Z),null}};return b}(k.ParentalRefableInText);k.nodetype_name="FiniteFnApp";k.abstract=!1;k.parents=["IFPTerm"];k.inlining_class=b.FiniteFnAppInliningComponent;k.ignore_on_expand_most=!0;k.allowed_ch=[];k.required_nch=r.mkobj(["fnref","FiniteFnRef"],["fnarg","ConstSymbIntroRef"]);k.cache_updaters=[function(a){var b=
a.fnref;if(b)if(b=b.ogetReferredToNode()){var d=a.fnarg;if(d)if(d=d.ogetReferredToNode()){var e=d.cache.curval;r.triv(e)?c.dwarn("arg (node "+d.oid+") to finite fn app node "+a.oid+" has no cache.curval"):(b=b.cache.thefn.get(e),a.cache.curval!==b&&(a.cache.curval=b,a.parentNode.refreshCache()))}else c.dwarn("problem at node "+a.oid);else c.dwarn("problem at node "+a.oid)}else c.dwarn("problem at node "+a.oid);else c.dwarn("problem at node "+a.oid)}];d.FiniteFnApp=k;var ba=[a,B,E,F,x.LeafInterpSymbolIntro,
x.ParentalInterpSymbolIntro,H,C,L,N,O,I,K,V,J,M,x.ConnectiveApp,x.Implies,x.And,x.Iff,x.Not,x.Or,x.AndImplies,P,S,W,A,U,T,Q,R,z,g,x.TheoremEtc,x.Axiom,x.TheoremEtcRef,x.PropSymbIntro,x.PropSymbIntroRef,D,G,X,Y,k],ea=["InterpSymbolIntro","Formula","IFPTerm","Sort"];d.ensureInitialized=function(){d.lang||(d.lang=new e.Language(y.LanguageModules.ifp,ba,ea,z),d.lang.forView.addCustomInliningComponentMappings(r.mkobj(["TheoremEtc",t.StatementInliningComponent],["Axiom",t.StatementInliningComponent],["Proof",
t.ProofInliningComponent],["ReservedVarIntro",b.ReservedVarIntroInliningComponent],["InterpSymbolIntro",b.InterpSymbolIntroInliningComponent],["SortSymbIntro",b.InterpSymbolIntroInliningComponent],["FnSymbIntro",b.InterpSymbolIntroInliningComponent],["PredSymbIntro",b.InterpSymbolIntroInliningComponent],["ConstSymbIntro",b.InterpSymbolIntroInliningComponent],["PropSymbIntro",b.InterpSymbolIntroInliningComponent],["SortSymbIntroRef",u.RefNodeInliningComponent],["ReservedVarIntroRef",u.RefNodeInliningComponent],
["FnSymbIntroRef",u.RefNodeInliningComponent],["PredSymbIntroRef",u.RefNodeInliningComponent],["ConstSymbIntroRef",u.RefNodeInliningComponent],["PropSymbIntroRef",u.RefNodeInliningComponent],["SortRef",u.RefNodeInliningComponent],["FnType",b.FnTypeInliningComponent],["PredType",b.PredTypeInliningComponent],["Formula",null],["Quantifier",b.QuantifierInliningComponent],["PredApp",b.FnOrPredAppInliningComponent],["Implies",t.InfixAppInliningComponent],["And",t.InfixAppInliningComponent],["AndImplies",
t.AndImpliesInliningComponent],["Iff",t.InfixAppInliningComponent],["Not",t.NotInliningComponent],["IFPTerm",null],["FnApp",b.FnOrPredAppInliningComponent])),d.lang.forView.use_propNamesToExcludeFromInliningVM=!0,d.lang.genericInitialize())};d.freeAndBoundReservedVars=function(a){throw new r.NotYetImplemented;};d.mk_newReservedVar=function(a){return function(b,c){var d=new H(a);b&&d.set_html_name(b);c&&(b=h(a)(c),d.ltype=b);a.fillDefaults(d);return d}};d.mk_newFnSymbIntro=function(a){return function(b){var c=
new N(a);b&&c.set_html_name(b);c.ltype=new E(a);a.fillDefaults(c);return c}};d.mk_newPredSymbIntro=function(a){return function(b){var c=new O(a);b&&c.set_html_name(b);c.ltype=new F(a);a.fillDefaults(c);return c}};d.mk_newSortSymbIntro=function(a){return function(b){var c=new C(a);b&&c.set_html_name(b);a.fillDefaults(c);return c}};d.mk_newSortRef=h;d.mk_newVarRef=function(a){return function(b){var c=new V(a);c.reffed_nodeid=b.oid;a.fillDefaults(c);return c}};d.mk_newFnRef=function(a){return function(b){var c=
new U(a);c.reffed_nodeid=b.oid;a.fillDefaults(c);return c}};d.mk_newPredRef=function(a){return function(b){var c=new T(a);c.reffed_nodeid=b.oid;a.fillDefaults(c);return c}};d.mk_newTheorem=function(a){return function(b,c){var d=new x.TheoremEtc(a);d.set_html_name(b);d.editableStrings.setVal("interp",c);a.fillDefaults(d);return d}};structure_together.languageModules[y.LanguageModules.ifp]=this},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(18);var m=a(248),f=a(17),h=a(7),l=a(249),g=a(318),b=a(9),c=a(328),e=a(4),p=a(19),t=a(247),u=a(319),v=a(330);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){return m.rspan(this.addDefaultInliningProps({key:"0"}),
this.props.prooftitle?f.contentEditableInlineEditing(this.props.prooftitle,this.props.nodeid,"prooftitle",this.props.stdocid):"")};return b}(k.PureReactComponent);d.IFPInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this,b=[];this.props.ch&&this.props.ch.forEach(function(c,d){d===a.props.ch.length-1&&2<=a.props.ch.length&&b.push(m.rspan({key:"arrow"}," \u2192 "));b.push(t.makeInliningComponentInstance(a._stdocid,
c));d<=a.props.ch.length-3&&b.push(m.rspan({key:"cross"+d}," \u00d7 "))});return m.rspan(this.addDefaultInliningProps({}),b)};return b}(k.PureReactComponent);d.FnTypeInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this,b=[];this.props.ch?(this.props.ch.forEach(function(c,d){b.push(p.createElement(g.RefNodeInliningComponent,c));d<=a.props.ch.length-2&&b.push(" \u00d7 ")}),b.push(" \u2192 \ud835\udd39")):
h.dwarn("In PredTypeInliningComponent.render and DID NOT find props.ch");return m.rspan(this.addDefaultInliningProps({}),b)};return b}(k.PureReactComponent);d.PredTypeInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this,b=[];switch(this.props.quantifier_type){case c.QuantifierTypes.forall:b.push("\u2200");break;case c.QuantifierTypes.exists:b.push("\u2203");break;case c.QuantifierTypes.exists_unique:b.push("\u2203!")}this.props.ch?
this.props.ch.forEach(function(c,d){b.push(p.createElement(g.RefNodeInliningComponent,c));d<a.props.ch.length-1&&b.push(",")}):b.push(l.MISSING_STRING_VAL);b.push(". ");this.props.nch.body?b.push(t.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.nch.body)):b.push(l.MISSING_STRING_VAL);return m.rspan(this.addDefaultInliningProps({}),b)};return b}(k.PureReactComponent);d.QuantifierInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=
function(){var a=[];a.push("the ");a.push(this.props.nch.var?t.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.nch.var):m.rspan({key:"var"},l.MISSING_STRING_VAL));a.push(" such that ");this.props.ch&&0<this.props.ch.length?a.push(t.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[0])):a.push(m.rspan({key:"body"},l.MISSING_STRING_VAL));a=m.rspan(this.addDefaultInliningProps({}),a);return this.props.parenthesize?u.parenthesize_view_from_component(this,a):a};return b}(k.PureReactComponent);
d.IotaInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this,b=e.objhas(this.props.nch,"fnref")?this.props.nch.fnref:this.props.nch.predref;if(!b)return m.rerror("??? fn_or_pred_symb_inlining_vm missing");if(b.html_template_of_ref)b=m.rspan(this.addDefaultInliningProps(),this.render_node_inlining_with_display_template(b,this.props.ch,b._id_ref));else{var c=[];c.push(p.createElement(g.RefNodeInliningComponent,
b),"(");this.props.ch?this.props.ch.forEach(function(b,d){b?(c.push(t.makeInliningComponentInstance(a.wstdoc.stdocid,b)),d<=a.props.ch.length-2&&c.push(", ")):h.dwarn("Node "+a.props.nodeid+"'s inlining's "+d+"-th child is null.")}):h.dwarn("props.ch is null in FnOrPredApplInliningComponent");c.push(")");b=m.rspan(this.addDefaultInliningProps(),c)}return e.nottriv(this.props.curval)?m.rspan(this.addDefaultInliningProps({}),b," ["+this.props.curval+"]"):b};b.prototype.componentDidUpdate=function(a,
b){};b.prototype.componentDidMount=function(){};return b}(k.PureReactComponent);d.FnOrPredAppInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this.props.nch.fnref,b=this.props.nch.fnarg;if(!a||!b)return h.derr("props.nch.fnref and props.nch.fnarg both missing"),m.rerror("???");a.html_template_of_ref?a=m.rspan(this.addDefaultInliningProps(),this.render_node_inlining_with_display_template(a,[b],a._id_ref)):
(a=[p.createElement(g.RefNodeInliningComponent,a),"(",p.createElement(g.RefNodeInliningComponent,b),")"],a=m.rspan(this.addDefaultInliningProps(),a));return a};return b}(k.PureReactComponent);d.FiniteFnAppInliningComponent=a;a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.renderUnchecked=function(){var a=[];a.push(m.rspan({className:"symbol-intro",key:"minifol-vardisplay"},f.contentEditableInlineEditing(this.props._html_name,this.props.nodeid,b.SystPropNames.html_name,
this.props.stdocid))," reserved for sort ");var c=this.props.nch.ltype;c?a.push(t.makeInliningComponentInstance(this.wstdoc.stdocid,c)):(h.derr("ltype missing"),a.push("???"));return m.rspan(this.addDefaultInliningProps({}),a)};return c}(k.PureReactComponent);d.ReservedVarIntroInliningComponent=a;a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.renderUnchecked=function(){var a=this,c=_.groupBy(this.props.ch,function(a){return a.nch.ltype.display_symb_only_of_ref}),
d=[];_.forOwn(c,function(c,e){var g=[];c.forEach(function(d,e){g.push(m.rspan({className:"symbol-intro",key:d._html_name.value},f.contentEditableInlineEditing(d._html_name,d.nodeid,b.SystPropNames.html_name,a.props.stdocid)));e<c.length-1&&g.push(", ")});g.push(" reserved for sort ");var k=c[0].nch.ltype;k?g.push(t.makeInliningComponentInstance(a.wstdoc.stdocid,k)):(h.derr("first child of ReservedVarIntroGroup VM has no .ltype"),g.push("???"));d.push(m.rdiv({key:e},g))});return m.rspan(this.addDefaultInliningProps({}),
d)};return c}(k.PureReactComponent);d.ReservedVarIntroGroupInliningComponent=a;a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.renderUnchecked=function(){var a=this,c=[];this.props.ch.forEach(function(d,e){c.push(m.rspan({className:"symbol-intro",key:d.nodeid},f.contentEditableInlineEditing(d._html_name,d.nodeid,b.SystPropNames.html_name,a.props.stdocid)));e<a.props.ch.length-1&&c.push(", ")});c.push(" \u2208 ");var d=this.props.ch[0].nch.ltype;d?c.push(t.makeInliningComponentInstance(this.wstdoc.stdocid,
d)):(h.derr("First child of ConstSymbIntroGroup has no .ltype. Node is "+this.props.nodeid),h.derr("This is this.props.ch[0].nch: ",this.props.ch[0].nch));this.props._text&&c.push(m.rspan({key:"grouptext"}," - ",f.contentEditableInlineEditing(this.props._text,this.props.nodeid,b.SystPropNames.text,this.props.stdocid)));return m.rspan(this.addDefaultInliningProps({}),c)};return c}(k.PureReactComponent);d.ConstSymbIntroGroupInliningComponent=a;a=function(a){function c(){return null!==a&&a.apply(this,
arguments)||this}n(c,a);c.prototype.renderUnchecked=function(){h.dlogcat(b.LogTypes.entering,"InterpSymbolIntroInliningComponent.render");var a=[];a.push(m.rspan({className:"symbol-intro",key:"minifol-symbdisplay"},f.contentEditableInlineEditing(this.props._html_name,this.props.nodeid,b.SystPropNames.html_name,this.props.stdocid)));if(this.props.nch&&this.props.nch.ltype){var c=this.props.nch.ltype;h.dassert(null!=c.key);if(this.rstdoc.top.booleans.getVal("use_natural_language_syntax")){var d=this.rstdoc.ogetNodeByPermId(this.props.nodeid);
d.hasType("ConstSymbIntro")?(this.props.math?d=" \u2208 ":(d="a ",this.props.nch.ltype.display_symb_only_of_ref&&e.argsFirstAmongRest(this.props.nch.ltype.display_symb_only_of_ref[0],"a","i","o","u","e")&&(d="an "),d=" is "+d),a.push(d,t.makeInliningComponentInstance(this.wstdoc.stdocid,c))):d.hasType("FnSymbIntro")?a.push(" is a function of type ",t.makeInliningComponentInstance(this.wstdoc.stdocid,c)):d.hasType("PredSymbIntro")&&a.push(" is a relation of type ",t.makeInliningComponentInstance(this.wstdoc.stdocid,
c))}else a.push(": ",t.makeInliningComponentInstance(this.wstdoc.stdocid,c))}else"PropSymbIntro"===this.props.nodetype&&a.push(" : proposition");e.nottriv(this.props.curval)&&(c=_.round(this.props.curval,b.ROUND_PRECISION),c=v.contentEditableInlineEditingForNum(c,this.props.nodeid,b.SystPropNames.assigned_val,this._stdocid),a.push(m.rspan({key:"curval"}," = ",c)));this.props.interp&&a.push(" - ",f.contentEditableInlineEditing(this.props.interp,this.props.nodeid,"interp",this.props.stdocid));this.props.nch&&
(c=this.props.nch.defn)&&a.push(m.rbr({key:"linebreak"}),m.rspan({key:"minifol-symbdefn"},m.rhctext("defined by: "),t.makeInliningComponentInstance(this.wstdoc.stdocid,c)));return m.rspan(this.addDefaultInliningProps({}),a)};return c}(k.PureReactComponent);d.InterpSymbolIntroInliningComponent=a;a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.renderUnchecked=function(){h.dlogcat(b.LogTypes.entering,"SortSymbolIntroInliningComponent.render");var a=[];a.push(m.rspan({className:"symbol-intro",
key:"minifol-symbdisplay"},f.contentEditableInlineEditing(this.props._html_name,this.props.nodeid,b.SystPropNames.html_name,this.props.stdocid)));if(this.props.nch){var c=this.props.nch.subtype_of;c&&a.push(" \u2286 ",t.makeInliningComponentInstance(this.wstdoc.stdocid,c))}this.props.interp&&a.push(" - ",f.contentEditableInlineEditing(this.props.interp,this.props.nodeid,"interp",this.props.stdocid));return m.rspan(this.addDefaultInliningProps({}),a)};return c}(k.PureReactComponent);d.SortSymbolIntroInliningComponent=
a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){return m.rspan({},t.makeInliningComponentInstance(this.wstdoc.stdocid,this.props,"SortSymbIntroRef"),m.rsup({},"*"))};return b}(k.PureReactComponent);d.SortStarInliningComponent=a;k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){return m.rspan({},t.makeInliningComponentInstance(this.wstdoc.stdocid,this.props,
"SortSymbIntroRef"),m.rsup({},this.props.sortop))};return b}(k.PureReactComponent);d.UnarySortOpInliningComponent=k},function(k,d,a){function n(a){return function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;c.element_type=a;return c}m(c,b);return c}(p)}var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=
b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(18);var f=a(248),h=a(7),l=a(4),g=a(9),b=a(19),c=a(189),e=a(15),p=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}m(d,a);d.prototype.saveAndReturnProcessedContents=function(a){var b=a.html();a.data("st-processed-inner-html",b);return b};d.prototype.restoreProcessedContents=function(a){var b=a.data("st-processed-inner-html");a.html(b)};d.prototype.getSavedProcessedContents=function(a){return a.data("st-processed-inner-html")};
d.prototype.onBlur=function(a){h.assert_nt(this.props.nodeid);var b=Number(c.sanitizeHtmlST(a.target.innerHTML));if(l.triv(b)||isNaN(b))b=0;b===this.props.value?this.restoreProcessedContents($(a.target)):(this.restoreProcessedContents($(a.target)),this.sendToDocMsgBox({name:"NumPropChange",nodeid:this.props.nodeid,label:this.props.label,value:b}));a.stopPropagation();a.preventDefault()};d.prototype.onFocus=function(a){a=$(a.target);e.contentEditableEnabled()?(this.saveAndReturnProcessedContents(a),
a.html(this.props.value.toString())):a.blur()};d.prototype.renderUnchecked=function(){h.dlogcat(g.LogTypes.react,"ContentEditableComponent.render() for node "+this.props.nodeid);var a;a=this.props.element_type&&b.DOM[this.props.element_type]?b.DOM[this.props.element_type]:this.element_type?b.DOM[this.element_type]:f.rdiv;var c=this.props.label,d={className:"st-content-editable",key:"inline-editing"+this.props.nodeid+c};if(e.inEditMode()||c===g.SystPropNames.assigned_val)d.contentEditable=!0,d.onBlur=
this.onBlur.bind(this),d.onFocus=this.onFocus.bind(this),d.onClick=function(a){e.contentEditableEnabled()&&(a.preventDefault(),a.stopPropagation())};d.dangerouslySetInnerHTML={__html:this.props.value};return a(d,null)};d.prototype.componentDidUpdate=function(a,b){};d.prototype.componentDidMount=function(){};return d}(k.PureReactComponent);d.ContentEditableNumberComponent=p;var t=new Map;"span div h1 h2 h3 h4".split(" ").forEach(function(a){t.set(a,n(a))});d.contentEditableInlineEditingForNum=function(a,
c,d,e,f){f&&b.DOM[f]||(f="span");a={value:a,label:d,nodeid:c};return b.createElement(t.get(f),a)}},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(18);var m=a(248),f=a(17),h=a(7),l=a(249),g=a(4),b=a(9),
c=a(319),e=a(247);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a;a=g.strtriv(this.props.prooftitle)?this.props.nch&&this.props.nch.proofof?m.rspan({key:"displaywithref"},[m.rspan({className:l.CSS_CLASS_NAMES.hardcoded_text,key:"Proof of "},"Proof of "),e.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.nch.proofof)]):m.rhctext("Proof"):f.contentEditableInlineEditing(this.props.prooftitle,this.props.nodeid,"prooftitle",
this.props.stdocid);return m.rspan(this.addDefaultInliningProps({key:"0"}),a)};return b}(k.PureReactComponent);d.ProofInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){if(this.props.ch&&1<=this.props.ch.length){var a=["not ",e.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[0])];return m.rspan(this.addDefaultInliningProps(),a)}return m.rerror("not ___",this.addDefaultInliningProps())};return b}(k.PureReactComponent);
d.NotInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this,b;switch(this.props.nodetype){case "And":b="and";break;case "Or":b="or";break;case "Implies":b="\u21d2";break;case "Iff":b=" if and only if ";break;case "EqualsApp":b="=";break;default:h.derr("can't set connective from "+this.props.nodetype),b="???"}h.assert_nt(b);if(this.props.multiline)return c.multiline_view_from_props(b,this.props,this.wstdoc.stdocid);
var d;if("Implies"===this.props.nodetype)d=this.props.ch&&2===this.props.ch.length?["If ",e.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[0])," then ",e.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[1])]:["If ____ then ____ "];else{var f=" "+b+" ";d=[];this.props.ch?this.props.ch.forEach(function(b,c){d.push(e.makeInliningComponentInstance(a.wstdoc.stdocid,b));c<=a.props.ch.length-2&&d.push(f)}):d.push(b)}return m.rspan(this.addDefaultInliningProps(),d)};return b}(k.PureReactComponent);
d.InfixAppInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=this,b=[];this.props.ch?this.props.ch.forEach(function(c,d){b.push(e.makeInliningComponentInstance(a.wstdoc.stdocid,c));d<=a.props.ch.length-2&&b.push(" "+a.props.connective+" ")}):b.push(" "+this.props.connective+" ");return m.rspan(this.addDefaultInliningProps(),b)};return b}(k.PureReactComponent);d.ConnectiveAppInliningComponent=a;a=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=[],b;if(this.props.ch&&2<=this.props.ch.length){var c;for(c=0;c<this.props.ch.length-2;c++){var d=this.props.ch[c];b="line"+c;var f=[];f.push(e.makeInliningComponentInstance(this.wstdoc.stdocid,d));f.push(m.rspan({key:"and"},", and"));a.push(m.rdiv({key:b},f))}a.push(m.rdiv({key:"line"+c},e.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.ch[c])));c+=1;b=m.rdiv({key:"line"+c},e.makeInliningComponentInstance(this.wstdoc.stdocid,
this.props.ch[c]));return m.rtable(this.addDefaultInliningProps(),m.rtbody({},m.rtr({},m.rtd({},"If "),m.rtd({},a)),m.rtr({},m.rtd({},"then "),m.rtd({},b))))}return m.rdiv(this.addDefaultInliningProps(),"? \u2227 ? \u27f9 ?")};return b}(k.PureReactComponent);d.AndImpliesInliningComponent=a;a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.renderUnchecked=function(){h.dlogcat(b.LogTypes.entering,"InterpSymbolIntroInliningComponent.render");var a=[];a.push(m.rspan({className:"symbol-intro",
key:"minifol-symbdisplay"},f.contentEditableInlineEditing(this.props._html_name,this.props.nodeid,b.SystPropNames.html_name,this.props.stdocid)));if(this.props.nch&&this.props.nch.ltype){var c=this.props.nch.ltype;h.dassert(null!=c.key);a.push(" \u2208 ",e.makeInliningComponentInstance(this.wstdoc.stdocid,c))}else"PropSymbIntro"===this.props.nodetype&&a.push(" \u2208 propositions");this.props.interp&&a.push(" - ",f.contentEditableInlineEditing(this.props.interp,this.props.nodeid,"interp",this.props.stdocid));
this.props.nch&&(c=this.props.nch.defn)&&a.push(m.rbr({key:"linebreak"}),m.rspan({key:"minifol-symbdefn"},m.rhctext("defined by: "),e.makeInliningComponentInstance(this.wstdoc.stdocid,c)));return m.rspan(this.addDefaultInliningProps({}),a)};return c}(k.PureReactComponent);d.InterpSymbolIntroInliningComponent=a;k=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.renderUnchecked=function(){var a=this;h.dlogcat(b.LogTypes.entering,"StatementInliningComponent.render");
var c=[],d;d=a.props._html_name?m.rspan({className:"symbol-intro",key:"minifol-symbdisplay"},f.contentEditableInlineEditing(a.props._html_name,a.props.nodeid,b.SystPropNames.html_name,a.props.stdocid)):null;var g=function(){switch(a.props.nodetype){case "Axiom":return m.rhctext("Axiom");case "TheoremEtc":return m.rhctext("Theorem")}return null}(),k=a.props.interp?"string"===typeof a.props.interp&&0<a.props.interp.trim().length||0<a.props.interp.value.trim().length?f.contentEditableInlineEditing(a.props.interp,
a.props.nodeid,"interp",a.props.stdocid):null:null,l=this.props.nch&&this.props.nch.defn?e.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.nch.defn):null;d?c.push(d,": "):c.push(g,": ");k?l?(c.push(k),c.push(m.rbr({key:"linebreak"}),m.rspan({key:"minifol-symbdefn"},m.rhctext("Formally: "),l))):c.push(k):c.push(l);return m.rspan(this.addDefaultInliningProps({}),c)};return c}(k.PureReactComponent);d.StatementInliningComponent=k},function(k,d,a){var n=this&&this.__extends||function(){var a=
Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m=a(12);k=a(6);var f=a(4),h=a(314),l=a(331),g=a(318),b=a(13),c=a(9);d.PropIFPNodetypes={PropIFPTop:"PropIFPTop",Proof:"Proof",TheoremEtc:"TheoremEtc",TheoremEtcRef:"TheoremEtcRef",Axiom:"Axiom",Hypothesis:"Hypothesis",Formula:"Formula",
InterpSymbIntroRef:"InterpSymbIntroRef",PropSymbIntroRef:"PropSymbIntroRef",InterpSymbolIntro:"InterpSymbolIntro",LeafInterpSymbolIntro:"LeafInterpSymbolIntro",ParentalInterpSymbolIntro:"ParentalInterpSymbolIntro",PropSymbIntro:"PropSymbIntro",ConnectiveApp:"ConnectiveApp",And:"And",Or:"Or",Not:"Not",Iff:"Iff",Implies:"Implies",AndImplies:"AndImplies",AxiomRef:"AxiomRef"};d.PropIFPPropNames={defn:"defn",interp:"interp",prooftitle:"prooftitle",title:"title",proofof:"proofof",proof:"proof",use_natural_language_syntax:"use_natural_language_syntax",
connective:"connective",parenthesize:"parenthesize",multiline:"multiline",singleline:"singleline",font_height:"font_height"};a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(m.STNode);a.nodetype_name="Formula";a.abstract=!0;d.Formula=a;var e=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(k.Top);e.nodetype_name="PropIFPTop";e.abstract=!1;e.inliningvm_props=[c.SystPropNames.title];e.init_collapsed=!1;e.allowed_ch=["PropSymbIntro",
"Proof",b.Nodetypes.FreeForm,"Axiom","TheoremEtc"];e.required_flatprops=f.mkobj(["use_natural_language_syntax",1]);e.default_bool_prop_vals=f.mkobj(["use_natural_language_syntax",!0]);d.PropIFPTop=e;var p=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(k.ParentalNode);p.nodetype_name="Proof";p.abstract=!1;p.inlining_class=l.ProofInliningComponent;p.inliningvm_props=["prooftitle","nch"];p.init_collapsed=!1;p.reader_mode_expandable=!0;p.allowed_flatprops=f.mkobj(["prooftitle",
4]);p.allowed_ch=["InterpSymbolIntro","TheoremEtc","Axiom",b.Nodetypes.FreeForm,"Proof"];p.required_nch=f.mkobj(["proofof","TheoremEtcRef"]);d.Proof=p;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.referredToNodetype=function(){return"Axiom"};return b}(k.RefNode);a.nodetype_name="AxiomRef";a.abstract=!1;a.parents=["Formula"];a.possible_values=f.mkobj([c.SystPropNames.id_ref,k.RefNode.optionsByNodetype("Axiom")]);d.AxiomRef=a;m=function(a){function b(){return null!==
a&&a.apply(this,arguments)||this}n(b,a);Object.defineProperty(b.prototype,"interp",{get:function(){return this.editableStrings.getVal("interp")},set:function(a){this.editableStrings.setVal("interp",a)},enumerable:!0,configurable:!0});return b}(k.LeafRefableInText);m.nodetype_name="LeafInterpSymbolIntro";m.abstract=!0;m.parents=[b.Nodetypes.RefableInTextMixin,"InterpSymbolIntro"];m.required_flatprops=f.mkobj(["interp",7],[c.SystPropNames.html_name,4]);m.default_str_prop_vals_at_init=f.mko("interp",
"Constraints on how this symbol should be interpreted");d.LeafInterpSymbolIntro=m;var t=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);Object.defineProperty(b.prototype,"interp",{get:function(){return this.editableStrings.getVal("interp")},set:function(a){this.editableStrings.setVal("interp",a)},enumerable:!0,configurable:!0});return b}(k.ParentalRefableInText);t.nodetype_name="ParentalInterpSymbolIntro";t.abstract=!0;t.parents=[b.Nodetypes.RefableInTextMixin,"InterpSymbolIntro"];
t.required_flatprops=f.mkobj(["interp",7]);t.default_str_prop_vals_at_init=f.mkobj(["interp","Constraints on how this symbol should be interpreted"]);d.ParentalInterpSymbolIntro=t;var u=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);Object.defineProperty(b.prototype,"interp",{get:function(){return this.editableStrings.getVal("interp")},set:function(a){this.editableStrings.setVal("interp",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"defn",{get:function(){return this.getChild("defn")},
set:function(a){this.setNamedChild("defn",a)},enumerable:!0,configurable:!0});return b}(k.ParentalRefableInText);u.nodetype_name="TheoremEtc";u.abstract=!1;u.ignore_on_expand_most=!0;u.required_flatprops=f.mkobj(["interp",7],[c.SystPropNames.html_name,4]);u.default_str_prop_vals_when_empty=f.mkobj([c.SystPropNames.html_name,"Theorem"]);u.default_str_prop_vals_at_init=f.mkobj(["interp","Your intended meaning of this syntactic theorem."]);u.allowed_ch=[b.Nodetypes.FreeForm];u.required_nch=f.mkobj(["defn",
"Formula"]);u.allowed_nch=f.mkobj(["proof","Proof"]);d.TheoremEtc=u;var v=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.referredToNodetype=function(){return"TheoremEtc"};return b}(k.RefNode);v.nodetype_name="TheoremEtcRef";v.abstract=!1;v.parents=["Formula"];v.possible_values=f.mkobj([c.SystPropNames.id_ref,k.RefNode.optionsByNodetype("TheoremEtc")]);d.TheoremEtcRef=v;var y=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);
return b}(k.ParentalRefableInText);y.nodetype_name="Axiom";y.abstract=!1;y.ignore_on_expand_most=!0;y.required_flatprops=f.mkobj(["interp",7]);y.allowed_ch=[b.Nodetypes.FreeForm];y.required_nch=f.mkobj(["defn","Formula"]);y.default_str_prop_vals_at_init=f.mkobj(["interp","Your intended meaning of this axiom."]);d.Axiom=y;b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(t);b.nodetype_name="PropSymbIntro";b.abstract=!1;b.allowed_ch=[];b.allowed_nch=f.mkobj(["defn",
"Formula"]);d.PropSymbIntro=b;var r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(k.ParentalRefableInText);r.nodetype_name="ConnectiveApp";r.abstract=!0;r.parents=["Formula"];r.ignore_on_expand_most=!0;r.allowed_ch=["Formula"];r.allowed_nch={};r.required_flatprops=f.mkobj(["connective",5]);r.possible_values=f.mkobj(["connective",function(){return[["\u2227","And"],["\u2228","Or"],["\u00ac","Not"],["\u21d4","Iff"],["\u21d2","Implies"]]}]);r.default_str_prop_vals_when_empty=
f.mko("connective","Implies");r.min_ch=f.mko("Formula",1);r.allowed_flatprops=f.mkobj(["parenthesize",1],["multiline",1],["singleline",1],["font_height",2]);r.default_bool_prop_vals=f.mkobj(["parenthesize",!0],["multiline",!0],["singleline",!0]);r.default_num_prop_vals=f.mkobj(["font_height",1]);d.ConnectiveApp=r;var x=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(r);x.nodetype_name="Implies";x.abstract=!1;x.allowed_ch=["Formula"];x.default_str_prop_vals_when_empty=
f.mko("connective","Implies");x.min_ch=f.mko("Formula",2);d.Implies=x;var A=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(r);A.nodetype_name="And";A.abstract=!1;A.allowed_ch=["Formula"];A.default_str_prop_vals_when_empty=f.mko("connective","And");A.min_ch=f.mko("Formula",2);d.And=A;var z=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(r);z.nodetype_name="AndImplies";z.abstract=!1;z.allowed_ch=["Formula"];z.min_ch=
f.mko("Formula",3);d.AndImplies=z;var C=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(r);C.nodetype_name="Or";C.abstract=!1;C.allowed_ch=["Formula"];C.default_str_prop_vals_when_empty=f.mko("connective","Or");C.min_ch=f.mko("Formula",2);d.Or=C;var B=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(r);B.nodetype_name="Iff";B.abstract=!1;B.allowed_ch=["Formula"];B.default_str_prop_vals_when_empty=f.mko("connective","Iff");
B.min_ch=f.mko("Formula",2);d.Iff=B;var D=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(r);D.nodetype_name="Not";D.abstract=!1;D.allowed_ch=["Formula"];D.default_str_prop_vals_when_empty=f.mko("connective","Not");D.max_ch={Formula:1};D.min_ch={Formula:1};d.Not=D;var G=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.referredToNodetype=function(){return"InterpSymbolIntro"};return b}(k.RefNode);G.nodetype_name="InterpSymbIntroRef";
G.abstract=!1;G.allowed_ch=[];G.allowed_nch={};G.possible_values=f.mkobj([c.SystPropNames.id_ref,k.RefNode.optionsByNodetype("InterpSymbolIntro")]);d.InterpSymbIntroRef=G;var E=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.referredToNodetype=function(){return"PropSymbIntro"};return b}(k.RefNode);E.nodetype_name="PropSymbIntroRef";E.abstract=!1;E.parents=["Formula","InterpSymbIntroRef"];E.allowed_ch=[];E.possible_values=f.mkobj([c.SystPropNames.id_ref,k.RefNode.optionsByNodetype("PropSymbIntro")]);
d.PropSymbIntroRef=E;var F=[p,m,t,r,x,A,B,D,C,z,e,u,y,b,E,v,a,G],H=["InterpSymbolIntro","Formula"];d.ensureInitialized=function(){d.lang||(d.lang=new h.Language(c.LanguageModules.propifps,F,H,e),d.lang.forView.use_propNamesToExcludeFromInliningVM=!1,d.lang.forView.addExtraAllowedInliningVMProps(u,["interp"]),d.lang.forView.addExtraAllowedInliningVMProps(p,["prooftitle"]),d.lang.forView.addExtraAllowedInliningVMProps("InterpSymbolIntro",["interp"]),d.lang.forView.addExtraAllowedInliningVMProps("ParentalInterpSymbolIntro",
[c.SystPropNames.nch]),d.lang.forView.addExtraAllowedInliningVMProps(r,[c.SystPropNames.ch]),d.lang.forView.addCustomInliningComponentMappings(f.mkobj(["Proof",l.ProofInliningComponent],["InterpSymbolIntro",l.InterpSymbolIntroInliningComponent],["PropSymbIntro",l.InterpSymbolIntroInliningComponent],["InterpSymbIntroRef",g.RefNodeInliningComponent],["PropSymbIntroRef",g.RefNodeInliningComponent],["TheoremEtcRef",g.RefNodeInliningComponent],["AxiomRef",g.RefNodeInliningComponent],["Formula",null],["Implies",
l.InfixAppInliningComponent],["And",l.InfixAppInliningComponent],["Or",l.InfixAppInliningComponent],["Iff",l.InfixAppInliningComponent],["ConnectiveApp",l.ConnectiveAppInliningComponent],["AndImplies",l.AndImpliesInliningComponent],["Not",l.NotInliningComponent],["TheoremEtc",l.StatementInliningComponent],["Axiom",l.StatementInliningComponent])),d.lang.genericInitialize())};structure_together.languageModules[c.LanguageModules.propifps]=this},function(k,d,a){function n(a){return function(d,b){var c=
new f.FreeForm(a);d&&c.set_html_name(d);c.booleans.setVal(h.SystPropNames.display_as_defn,!0);a.fillDefaults(c);a.appendDetachedNode(c,b);return c}}function m(a){return function(d,b){var c=new f.FreeForm(a);d&&c.set_html_name(d);a.fillDefaults(c);a.appendDetachedNode(c,b);return c}}k=a(327);var f=a(6),h=a(9);a=a(9);d.outlinesTest=new k.STestExample(a.LanguageModules.structuredText,function(a){var d=n(a),b=m(a),c=f.mk_newProse_builder(a);a=b("o1");c("blah {wooz} blah {nooz} blah{nooz}{woooz}");c=d("woozle",
a);c.prose="A wooly oozle";c.set_mutid("wooz");c=d("noozle",a);c.prose="A nighttime oozle";c.set_mutid("nooz");c=b();d("Defn-node-with-no-definition",c);b("child",a)})},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,
new c)}}();k=a(6);var m=a(314),f=a(4),h=a(13),l=a(9),g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(k.Top);g.nodetype_name="StructuredTextTop";g.abstract=!1;g.allowed_ch=[h.Nodetypes.FreeForm,h.Nodetypes.SectionBreak];g.required_flatprops=f.mkobj([l.SystPropNames.title,4]);g.init_collapsed=!1;d.StructuredTextTop=g;d.ensureInitialized=function(){d.lang||(d.lang=new m.Language(l.LanguageModules.structuredText,[],[],g),d.lang.forView.use_propNamesToExcludeFromInliningVM=
!0,d.lang.genericInitialize())};structure_together.languageModules[l.LanguageModules.structuredText]=this},function(k,d,a){function n(a,b){if(a.cache.in_defn)return delete b.curval,b;var c=a.cache.curval;f.triv(c)&&(a.refreshCache(),c=a.cache.curval);f.nottriv(c)&&(b.curval=c);return b}var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=
b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),f=a(4),h=a(314);k=a(328);var l=a(331),g=a(318),b=a(6),c=a(13),e=a(9),p=a(332),t=a(328),u=a(336),v=a(329),y=a(337);d.IFPDMockNodetypes={IFPDMockTop:"IFPDMockTop",IFPDialogue:"IFPDialogue",ProTurn:"ProTurn",CritTurn:"CritTurn",IntendedAudience:"IntendedAudience",SemanticsCrit:"SemanticsCrit",FormalizationCrit:"FormalizationCrit",SubjectivePosition:"SubjectivePosition",IFP:"IFP",Proof:"Proof",TheoremEtc:"TheoremEtc",Axiom:"Axiom",
Hypothesis:"Hypothesis",IFPTerm:"IFPTerm",Formula:"Formula",TheoremEtcRef:"TheoremEtcRef",AxiomRef:"AxiomRef",InterpSymbIntroRef:"InterpSymbIntroRef",SortSymbIntroRef:"SortSymbIntroRef",FnSymbIntroRef:"FnSymbIntroRef",PredSymbIntroRef:"PredSymbIntroRef",PropSymbIntroRef:"PropSymbIntroRef",ConstSymbIntroRef:"ConstSymbIntroRef",ReservedVarIntroRef:"ReservedVarIntroRef",Sort:"Sort",SortRef:"SortRef",SortStar:"SortStar",InterpSymbolIntro:"InterpSymbolIntro",LeafInterpSymbolIntro:"LeafInterpSymbolIntro",
ParentalInterpSymbolIntro:"ParentalInterpSymbolIntro",SortSymbIntro:"SortSymbIntro",PropSymbIntro:"PropSymbIntro",ConstSymbIntro:"ConstSymbIntro",ConstSymbIntroGroup:"ConstSymbIntroGroup",FnOrPredSymbIntro:"FnOrPredSymbIntro",FnSymbIntro:"FnSymbIntro",PredSymbIntro:"PredSymbIntro",ReservedVarIntro:"ReservedVarIntro",ReservedVarIntroGroup:"ReservedVarIntroGroup",EqualsApp:"EqualsApp",FnApp:"FnApp",Iota:"Iota",PredApp:"PredApp",Quantifier:"Quantifier",Forall:"Forall",Exists:"Exists",ConnectiveApp:"ConnectiveApp",
And:"And",Or:"Or",Not:"Not",Iff:"Iff",Implies:"Implies",AndImplies:"AndImplies",Cases:"Cases",FnType:"FnType",PredType:"PredType",FiniteFnRef:"FiniteFnRef",FiniteFnIntro:"FiniteFnIntro",FiniteFnApp:"FiniteFnApp"};d.IFPDMockPropNames={defn:"defn",interp:"interp",prooftitle:"prooftitle",bndvar:"bndvar",body:"body",fnref:"fnref",predref:"predref",ltype:"ltype",title:"title",sort:"sort",quantifier_type:"quantifier_type",axiomref:"axiomref",symbref:"symbref",proofof:"proofof",proof:"proof",audience:"audience",
parenthesize:"parenthesize",subtype_of:"subtype_of",subjective_position:"subjective_position",user_role:"user_role"};var r=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.Top);r.nodetype_name="IFPDMockTop";r.abstract=!1;r.init_collapsed=!1;r.allowed_ch=["IFP","IFPDialogue",c.Nodetypes.FreeForm,c.Nodetypes.SectionBreak,c.Nodetypes.ImportUntyped,c.Nodetypes.MathParse];r.default_str_prop_vals_when_empty=f.mkobj([e.SystPropNames.title,"title of this IFPD mockup"]);
r.required_flatprops=f.mkobj(["use_natural_language_syntax",1]);r.default_bool_prop_vals=f.mkobj(["use_natural_language_syntax",!0]);d.IFPDMockTop=r;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.ParentalRefableInText);a.nodetype_name="IFP";a.inlining_class=u.IFPInliningComponent;a.abstract=!1;a.init_collapsed=!1;a.flatten_for_only_child=!0;a.reader_mode_expandable=!0;a.allowed_ch=[c.Nodetypes.FreeForm,"TheoremEtc","Axiom","ConstSymbIntroGroup","ReservedVarIntroGroup",
"ReservedVarIntro","SortSymbIntro","FnSymbIntro","PredSymbIntro","ConstSymbIntro","PropSymbIntro","Proof",c.Nodetypes.SectionBreak,"FiniteFnIntro",c.Nodetypes.MathParse];a.required_nch=f.mkobj(["audience","IntendedAudience"],["proofof","TheoremEtcRef"]);d.IFP=a;var x=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.Seq);x.nodetype_name="IFPDialogue";x.abstract=!1;x.human_readable_name="Mock Interpreted Formal Proof Dialogue";x.init_collapsed=!1;x.reader_mode_expandable=
!0;x.allowed_ch=["ProTurn","CritTurn","IFP",c.Nodetypes.FreeForm,c.Nodetypes.SectionBreak,"SubjectivePosition","SemanticsCrit",c.Nodetypes.Concatenate];d.IFPDialogue=x;var A=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.ParentalRefableInText);A.nodetype_name="SubjectivePosition";A.abstract=!1;A.init_collapsed=!0;A.inlining_class=u.SubjectivePositionInliningComponent;A.reader_mode_expandable=!0;A.emphasize_view=!0;A.allowed_ch=[c.Nodetypes.FreeForm,c.Nodetypes.Concatenate,
"Formula","IFPTerm","Axiom","InterpSymbolIntro"];A.required_nch=f.mko("axiomref","AxiomRef");A.allowed_flatprops=f.mkobj([e.SystPropNames.text,7]);A.required_flatprops=f.mkobj(["subjective_position",5],["user_role",5]);A.default_str_prop_vals_when_empty=f.mkobj([e.SystPropNames.text,"Why..."]);A.default_str_prop_vals_at_init=f.mkobj(["subjective_position","Accept"],["user_role","Critic"]);A.possible_values=f.mkobj(["subjective_position",[["Accepts","Accept"],["Implicitly accepts","ImplicitAccept"],
["Partially rejects","PartiallyReject"],["Rejects","Reject"]]],["user_role",[["Proponent","Proponent"],["Critic","Critic"]]]);d.SubjectivePosition=A;var z=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.ParentalRefableInText);z.nodetype_name="IntendedAudience";z.abstract=!1;z.human_readable_name="Intended Audience";z.init_collapsed=!0;z.allowed_ch=[c.Nodetypes.FreeForm,c.Nodetypes.Concatenate,"Formula","IFPTerm"];z.allowed_nch={};z.required_flatprops=f.mkobj([e.SystPropNames.text,
7]);z.default_str_prop_vals_when_empty=f.mkobj([e.SystPropNames.text,"Define the intended audience of this Interpreted Formal Proof."]);var C=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.ParentalRefableInText);C.nodetype_name="SemanticsCrit";C.abstract=!1;C.init_collapsed=!1;C.reader_mode_expandable=!0;C.emphasize_view=!0;C.inlining_class=u.SemanticsCritInliningComponent;C.allowed_ch=[c.Nodetypes.FreeForm,c.Nodetypes.Concatenate,"Axiom","InterpSymbolIntro"];
C.required_nch=f.mkobj(["symbref","InterpSymbIntroRef"],["axiomref","AxiomRef"]);C.allowed_flatprops=f.mkobj([e.SystPropNames.text,7]);C.default_str_prop_vals_when_empty=f.mkobj([e.SystPropNames.text,"Why..."]);d.SemanticsCrit=C;var B=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.ParentalRefableInText);B.nodetype_name="FormalizationCrit";B.abstract=!1;B.init_collapsed=!1;B.reader_mode_expandable=!0;B.emphasize_view=!0;B.inlining_class=u.FormalizationCritInliningComponent;
B.allowed_ch=[c.Nodetypes.FreeForm,c.Nodetypes.Concatenate,"Axiom","InterpSymbolIntro"];B.required_nch=f.mkobj(["axiomref","AxiomRef"]);B.allowed_flatprops=f.mkobj([e.SystPropNames.text,7]);B.default_str_prop_vals_when_empty=f.mkobj([e.SystPropNames.text,"Why..."]);d.FormalizationCrit=B;B=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.ParentalRefableInText);B.nodetype_name="CritTurn";B.human_readable_name="Critic's Turn";B.abstract=!1;B.init_collapsed=!1;
B.flatten_for_only_child=!0;B.reader_mode_expandable=!0;B.allowed_nch={};B.allowed_ch=["SemanticsCrit","SubjectivePosition","Axiom","InterpSymbolIntro","TheoremEtc",c.Nodetypes.FreeForm,c.Nodetypes.Concatenate];d.CritTurn=B;var D=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b}(b.ParentalRefableInText);D.nodetype_name="ProTurn";D.human_readable_name="Proponent's Turn";D.abstract=!1;D.init_collapsed=!1;D.flatten_for_only_child=!0;D.reader_mode_expandable=!0;
D.allowed_nch={};D.allowed_ch=["IFP",c.Nodetypes.FreeForm,c.Nodetypes.Concatenate,"Axiom","InterpSymbolIntro","TheoremEtc","SubjectivePosition","SemanticsCrit"];d.ProTurn=D;var G=[t.Proof,t.SortSymbIntroRef,t.FnType,t.PredType,p.LeafInterpSymbolIntro,p.ParentalInterpSymbolIntro,p.AxiomRef,t.ReservedVarIntro,k.ReservedVarIntroGroup,t.SortSymbIntro,k.FnOrPredSymbIntro,t.FnSymbIntro,t.PredSymbIntro,k.ConstSymbIntro,k.ConstSymbIntroGroup,t.ReservedVarIntroRef,t.Quantifier,p.ConnectiveApp,p.Implies,p.And,
p.AndImplies,p.Iff,p.Not,p.Or,t.FnApp,t.PredApp,t.FnSymbIntroRef,t.PredSymbIntroRef,t.ConstSymbIntroRef,t.EqualsApp,k.Cases,k.Iota,t.SortRef,p.TheoremEtc,p.Axiom,p.TheoremEtcRef,p.PropSymbIntro,p.PropSymbIntroRef,p.InterpSymbIntroRef,k.SortStar,k.UnarySortOp,a,x,r,A,C,z,B,D,k.FiniteFnIntro,k.FiniteFnRef,k.FiniteFnApp],E=["InterpSymbolIntro","Formula","IFPTerm","Sort","FnOrPredSymbIntro"],F=[{from:"EqualsApp",to:"PredApp",propname_map:[],bidirectional:!0}];d.ensureInitialized=function(){d.lang||(d.lang=
new h.Language(e.LanguageModules.ifpdmock,G,E,r),d.lang.add_manual_subtype_edge(b.MathParse,"Formula"),d.lang.add_manual_subtype_edge(b.MathParse,"IFPTerm"),d.lang.conversion_schemas=F,d.lang.nodetype_choice_hierachy=f.mkobj(["InterpSymbolIntro","FnSymbIntro PredSymbIntro ConstSymbIntro ConstSymbIntroGroup PropSymbIntro SortSymbIntro FiniteFnIntro ConstSymbIntroGroup".split(" ")],["ConnectiveApp","And Implies Or AndImplies Not Iff".split(" ")],["Formulas...","Quantifier EqualsApp PredApp Cases PredSymbIntroRef PropSymbIntroRef".split(" ")],
["Terms...","FiniteFnApp FnApp ConstSymbIntroRef Iota FnSymbIntroRef FiniteFnRef".split(" ")],["Types...","SortRef UnarySortOp SortStar FnType PredType SortSymbIntroRef".split(" ")],["Text, structure, etc...",[c.Nodetypes.FreeForm,c.Nodetypes.CollapsibleInlineNote,c.Nodetypes.SectionBreak,c.Nodetypes.Group,c.Nodetypes.Concatenate,c.Nodetypes.External,c.Nodetypes.Seq,c.Nodetypes.ImportUntyped,c.Nodetypes.Import]],["Dialogues...","CritTurn ProTurn SemanticsCrit SubjectivePosition IFPDialogue IFPDMockTop IFP".split(" ")],
["Proofs...","TheoremEtc Axiom IntendedAudience Proof AxiomRef TheoremEtcRef".split(" ")],["Vars...",["ReservedVarIntro","ReservedVarIntroGroup","ReservedVarIntroRef"]]),d.lang.forView.addCustomInliningComponentMappings(f.mkobj(["IFPDialogue",y.SeqInliningComponent],["SubjectivePosition",u.SubjectivePositionInliningComponent],["SemanticsCrit",u.SemanticsCritInliningComponent],["TheoremEtc",l.StatementInliningComponent],["Axiom",l.StatementInliningComponent],["Proof",l.ProofInliningComponent],["ReservedVarIntro",
v.ReservedVarIntroInliningComponent],["InterpSymbolIntro",v.InterpSymbolIntroInliningComponent],["FnSymbIntro",v.InterpSymbolIntroInliningComponent],["PredSymbIntro",v.InterpSymbolIntroInliningComponent],["ConstSymbIntro",v.InterpSymbolIntroInliningComponent],["PropSymbIntro",v.InterpSymbolIntroInliningComponent],["SortSymbIntroRef",g.RefNodeInliningComponent],["ReservedVarIntroRef",g.RefNodeInliningComponent],["FnSymbIntroRef",g.RefNodeInliningComponent],["PredSymbIntroRef",g.RefNodeInliningComponent],
["ConstSymbIntroRef",g.RefNodeInliningComponent],["PropSymbIntroRef",g.RefNodeInliningComponent],["InterpSymbIntroRef",g.RefNodeInliningComponent],["SortRef",g.RefNodeInliningComponent],["FnType",v.FnTypeInliningComponent],["PredType",v.PredTypeInliningComponent],["Quantifier",v.QuantifierInliningComponent],["PredApp",v.FnOrPredAppInliningComponent],["Implies",l.InfixAppInliningComponent],["And",l.InfixAppInliningComponent],["Iff",l.InfixAppInliningComponent],["Or",l.InfixAppInliningComponent],["AndImplies",
l.AndImpliesInliningComponent],["Not",l.NotInliningComponent],["FnApp",v.FnOrPredAppInliningComponent])),d.lang.forView.use_propNamesToExcludeFromInliningVM=!0,d.lang.forView.excludePropNamesFromInliningVM("Proof",[e.SystPropNames.ch]),d.lang.forView.excludePropNamesFromInliningVM("CritTurn",[e.SystPropNames.ch,e.SystPropNames.nch]),d.lang.forView.excludePropNamesFromInliningVM("ProTurn",[e.SystPropNames.ch,e.SystPropNames.nch]),d.lang.forView.excludePropNamesFromInliningVM("IFP",[e.SystPropNames.ch]),
d.lang.forView.excludePropNamesFromInliningVM("IFPDialogue",[e.SystPropNames.ch,e.SystPropNames.nch]),d.lang.forView.excludePropNamesFromInliningVM("IFPDMockTop",[e.SystPropNames.ch,e.SystPropNames.nch]),d.lang.forView.addCustomInliningVMUpdaterMappings(f.mkobj(["IFPTerm",n],["ConstSymbIntro",n])),d.lang.genericInitialize())};structure_together.languageModules[e.LanguageModules.ifpdmock]=this},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,d){function c(){this.constructor=b}a(b,d);b.prototype=null===d?Object.create(d):(c.prototype=d.prototype,new c)}}();k=a(18);var m=a(248),f=a(17),h=a(9),l=a(247),g=a(7);a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a;switch(this.props.user_role){case "Proponent":a=m.rhctext("Proponent ");break;case "Critic":a=
m.rhctext("Critic ");break;default:a=m.rerror("!role missing! ")}var b;switch(this.props.subjective_position){case "Accept":b=m.rhctext("accepts ",{style:{color:"green"}});break;case "ImplicitAccept":b=m.rhctext("implicitly accepts ",{style:{color:"green"}});break;case "Reject":b=m.rhctext("rejects ",{style:{color:"red"}});break;case "PartiallyReject":b=m.rhctext("partially rejects ",{style:{color:"yellow"}});break;default:b=m.rerror("!position missing! ")}a=[a,b];this.props.nch&&this.props.nch.axiomref&&
a.push(m.rspan({key:"displaywithref"},l.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.nch.axiomref)));f.maybeAppendEditableText(h.SystPropNames.text,this.props._text,this.props.nodeid,this.rstdoc.stdocid,a,". ");return m.rspan({key:"subcrit"},a)};return b}(k.PureReactComponent);d.SubjectivePositionInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=[m.rhctext("Semantics criticism: ")];this.props.nch&&
this.props.nch.symbref?a.push(m.rspan({key:"symb_displaywithref"},l.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.nch.symbref))):(g.derr("props.nch.symbref missing"),a.push(m.rerror("???")));a.push(m.rhctext(" is too vague to evaluate "));this.props.nch&&this.props.nch.axiomref?a.push(m.rspan({key:"axiom_displaywithref"},l.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.nch.axiomref))):(g.derr("props.nch.axiomref missing"),a.push(m.rerror("???")));f.maybeAppendEditableText(h.SystPropNames.text,
this.props._text,this.props.nodeid,this.rstdoc.stdocid,a,". ");return m.rspan({key:"semcrit"},a)};return b}(k.PureReactComponent);d.SemanticsCritInliningComponent=a;a=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=[m.rhctext("Translation criticism: ")];this.props.nch&&this.props.nch.axiomref?a.push(m.rspan({key:"axiom_displaywithref"},l.makeInliningComponentInstance(this.wstdoc.stdocid,this.props.nch.axiomref))):(g.derr("props.nch.axiomref missing"),
a.push(m.rerror("???")));f.maybeAppendEditableText(h.SystPropNames.text,this.props._text,this.props.nodeid,this.rstdoc.stdocid,a,". ");return m.rspan({key:"semcrit"},a)};return b}(k.PureReactComponent);d.FormalizationCritInliningComponent=a;k=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);b.prototype.renderUnchecked=function(){var a=[m.rhctext("Interpreted formal proof of ")];this.props.nch&&this.props.nch.proofof&&a.push(m.rspan({key:"displaywithref"},l.makeInliningComponentInstance(this.wstdoc.stdocid,
this.props.nch.proofof)));f.maybeAppendEditableText(h.SystPropNames.text,this.props._text,this.props.nodeid,this.rstdoc.stdocid,a,". ");return m.rspan({key:"ifpinlining"},a)};return b}(k.PureReactComponent);d.IFPInliningComponent=k},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,d){a.__proto__=d}||function(a,d){for(var b in d)d.hasOwnProperty(b)&&(a[b]=d[b])};return function(d,f){function b(){this.constructor=d}a(d,f);
d.prototype=null===f?Object.create(f):(b.prototype=f.prototype,new b)}}();k=a(18);var m=a(7),f=a(248);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}n(d,a);d.prototype.renderUnchecked=function(){var a=this,b=[],c=this.props._index;b.push(f.rspan({key:"move-left",className:"fa fa-chevron-left",onClick:function(b){m.dlog("pressed left...");"number"===typeof c&&(a.sendToDocMsgBox({name:"SeqIndexChange",nodeid:a.props.nodeid,value:c-1}),b.stopPropagation(),b.preventDefault())}},
null));b.push(c);b.push(f.rspan({key:"move-right",className:"fa fa-chevron-right",onClick:function(b){m.dlog("pressed right...");"number"===typeof c&&(a.sendToDocMsgBox({name:"SeqIndexChange",nodeid:a.props.nodeid,value:c+1}),b.stopPropagation(),b.preventDefault())}},null));this.props.hrlabel&&b.push(f.rhctext(this.props.hrlabel));this.props._showing_all?b.push(f.rbutton({key:"show-one-button",className:"show-all-or-one-button",onClick:function(b){a.controller.applyAction({name:"ChangeSeqDisplayMode",
showing_all:!1,nodeid:a.props.nodeid});b.stopPropagation();b.preventDefault()}},"one")):b.push(f.rbutton({key:"show-all-button",className:"show-all-or-one-button",onClick:function(b){a.controller.applyAction({name:"ChangeSeqDisplayMode",showing_all:!0,nodeid:a.props.nodeid});b.stopPropagation();b.preventDefault()}},"all"));return f.rspan({},b)};return d}(k.PureReactComponent);d.SeqInliningComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof
Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(6);var m=a(314),f=a(4),h=a(13),l=a(9);a=a(339);var g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(k.Top);g.nodetype_name="FGTop";g.abstract=!1;g.inliningvm_props=[l.SystPropNames.title];g.allowed_ch=["FGNode",h.Nodetypes.FreeForm,
h.Nodetypes.SectionBreak];g.required_flatprops=f.mkobj([l.SystPropNames.title,4]);g.init_collapsed=!1;d.FGTop=g;var b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(k.ParentalNode);b.nodetype_name="FGNode";b.abstract=!1;b.inlining_class=a.FGNodeInliningComponent;b.inliningvm_props="Description source SystemNo Name TechIdentNo Instrument".split(" ");b.reader_mode_expandable=!0;b.allowed_ch=["FGNode",h.Nodetypes.FreeForm,h.Nodetypes.SectionBreak];b.required_flatprops=
f.mkobj();b.allowed_flatprops=f.mkobj(["source",5],["Description",3],["Location",3],["ID",3],["PnID_SAP",3],["FunctLocation",3],["Inferred FunctLocation",3],["SupFunctLoc",3],["Inferred SupFunctLoc",3],["ObjectType",3],["FunctLocCat",3],["Planner group",3],["TechIdentNo",3],["WBS element",3],["Equipment",3],["EqNo",3],["Name",3],["Parent",3],["System",3],["Instrument",3],["PnID",3],["Details",3],["SystemNo",3],["SubsystemNo",3]);b.possible_values=f.mkobj(["source",[["4ULF","4ULF"],["4ULF_equip","4ULF_equip"],
["PnID","PnID"]]]);b.init_collapsed=!0;d.FGNode=b;d.ensureInitialized=function(){d.lang||(d.lang=new m.Language(l.LanguageModules.firstgenesis,[g,b],[],g),d.lang.refManagerDisabled=!0,d.lang.forView.use_propNamesToExcludeFromInliningVM=!1,d.lang.forView.addExtraAllowedInliningVMProps("FGTop",[l.SystPropNames.title]),d.lang.forView.addExtraAllowedInliningVMProps("FGNode","Description source SystemNo Name TechIdentNo Instrument".split(" ")),d.lang.genericInitialize())};structure_together.languageModules[l.LanguageModules.firstgenesis]=
this},function(k,d,a){function n(a){switch(a){case "4ULF":return"fg-4ULF-label";case "PnID":return"fg-PnID-label";case "4ULF_equip":return"fg-4ULF_equip-label"}return null}var m=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(d,b){function c(){this.constructor=d}a(d,b);d.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)}}();k=
a(18);var f=a(17),h=a(248);a=function(a){function d(){return null!==a&&a.apply(this,arguments)||this}m(d,a);d.prototype.renderUnchecked=function(){var a=[],c=this.props;c.SystemNo&&a.push(h.rspan({key:"systemnum"},c.SystemNo.value+" "));"PnID"===c.source?(f.maybeAppendEditableText("TechIdentNo",c.TechIdentNo,this.props.nodeid,this._stdocid,a),f.maybeAppendEditableText("Instrument",c.Instrument,this.props.nodeid,this._stdocid,a,", ")):f.maybeAppendEditableText("Description",c.Description,this.props.nodeid,
this._stdocid,a);return h.rspan({key:this.props.nodeid+".inlining",className:n(c.source)},a)};return d}(k.PureReactComponent);d.FGNodeInliningComponent=a},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();k=a(6);
var m=a(314),f=a(13),h=a(9),l=a(341);a=a(4);var g=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);Object.defineProperty(b.prototype,"fp_fnapp_style",{get:function(){return this.booleans.getVal("fp_fnapp_style")},enumerable:!0,configurable:!0});return b}(k.Top);g.nodetype_name="RacketTop";g.abstract=!1;g.allowed_ch=["RacketFreeForm",f.Nodetypes.FreeForm,f.Nodetypes.SectionBreak];g.required_flatprops=a.mkobj(["fp_fnapp_style",1]);g.default_bool_prop_vals=a.mkobj(["fp_fnapp_style",
!0]);g.init_collapsed=!1;d.RacketTop=g;var b=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}n(b,a);return b}(k.ParentalNode);b.nodetype_name="RacketFreeForm";b.abstract=!1;b.inlining_class=l.RacketFreeFormInliningComponent;b.required_flatprops=a.mkobj([h.SystPropNames.text,7]);b.default_str_prop_vals_at_init=a.mkobj([h.SystPropNames.text,""]);b.allowed_ch=[f.Nodetypes.FreeForm,"RacketFreeForm"];b.init_collapsed=!1;d.RacketFreeForm=b;d.ensureInitialized=function(){d.lang||
(d.lang=new m.Language(h.LanguageModules.racket,[b],[],g),d.lang.nodetype_to_insert_on_enter="RacketFreeForm",d.lang.behavior_of_meta_enter="global add sibling",d.lang.forView.use_propNamesToExcludeFromInliningVM=!0,d.lang.genericInitialize())};structure_together.languageModules[h.LanguageModules.racket]=this},function(k,d,a){var n=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&
(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c);b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),m=a(19);k=a(18);var f=a(248),h=a(4),l=a(319),g=a(16),b=a(247);a=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}n(c,a);c.prototype.renderUnchecked=function(){var a=this,c=this.props._text.value;if(h.triv(c))return f.rspan(this.addDefaultInliningProps(),"\u2026");switch(c){case "/":return m.createElement(l.FractionInliningComponent,
this.props);case "+":return m.createElement(l.AddInliningComponent,this.props);case "-":return m.createElement(l.SubtractInliningComponent,this.props);case "*":return m.createElement(l.MultInliningComponent,this.props)}if(0==c.length&&this.props.ch&&0<this.props.ch.length){c=!0;":="===this.props.ch[2]._text.value&&(c=!1);if(this.rstdoc.top.fp_fnapp_style){var d=[];c&&d.push("(");this.props.ch&&this.props.ch.forEach(function(c,e){c&&(e<=a.props.ch.length-1&&d.push(" "),d.push(b.makeInliningComponentInstance(a.wstdoc.stdocid,
c)))});c&&d.push(" )");return f.rspan(this.addDefaultInliningProps(),d)}var e=[];e.push("(");this.props.ch&&this.props.ch.forEach(function(c,d){c&&(e.push(b.makeInliningComponentInstance(a.wstdoc.stdocid,c)),d<=a.props.ch.length-2&&e.push(", "))});e.push(")");return f.rspan(this.addDefaultInliningProps(),e)}return m.createElement(g.FreeFormInliningComponent,this.props)};return c}(k.PureReactComponent);d.RacketFreeFormInliningComponent=a},function(k,d,a){function n(a){y=a.top;a.traversal.forEachRefableInTextNode(function(a){if(a instanceof
l.PredSymbIntro||a instanceof l.FnSymbIntro||a instanceof l.ConstSymbIntro){var b=a.get_html_name();h.dlog(b);if(b)switch(b){case "plus":t["+"]=a.oid;break;case "max":t.max=a.oid;break;case "divided by":t["/"]=a.oid;break;case "minus":t["-"]=a.oid;break;case "exp":t["^"]=a.oid;break;case "times":t["*"]=a.oid;break;case "0":v["0"]=a.oid;break;case "1":v["1"]=a.oid;break;case "&lt;":u["&lt;"]=a.oid;break;case "&gt;":u["&gt;"]=a.oid;break;case "\u2264":u["<="]=a.oid;break;case "\u2265":u[">="]=a.oid}else h.dwarn("No _html_name field for this node: ",
a)}});p=!0;window.tryToMatchToRefableInTextNode=m;console.warn(t);console.warn(u);console.warn(v)}function m(a,b){if(!a)return null;var c=b.refManager.ogetRefableInTextNodeByMutid(y,a);c||(c=b.traversal.forEachNodeEarlyStop(function(b){return b.getPropVal(g.SystPropNames.html_name)===a?{val:b,contin:!1}:null}));return c}function f(a,b){function d(a){var f,k=!1;if(a.isOperatorNode||"object"===typeof a.fn){var n=a.isOperatorNode?a.op:a.fn.name,k=!0;switch(n){case "==":f=new l.EqualsApp(b);break;case "and":f=
new e.And(b);break;case "or":f=new e.Or(b);break;case "not":f=new e.Not(b);break;default:var p=void 0,r=void 0;t[n]?p=t[n]:u[n]?p=u[n]:(r=m(n,b))&&(r instanceof l.FnSymbIntro||r instanceof l.PredSymbIntro)&&(p=r.oid);h.ddeb("name: "+n);h.ddeb("fn_or_pred_symbid: "+p);p&&(r||(r=b.ogetNodeByPermId(p)),r instanceof l.FnSymbIntro?(f=new l.FnApp(b),f.fnref=new l.FnSymbIntroRef(b),f.fnref.reffed_nodeid=p):(c.dassert(r instanceof l.PredSymbIntro),f=new l.PredApp(b),f.predref=new l.PredSymbIntroRef(b),f.predref.reffed_nodeid=
p))}}else if(a.isSymbolNode){n=a.name;r=m(n,b);r||(1===n.length&&(r=m("x",b)),r||(r=m("1",b)));if(r instanceof l.ConstSymbIntro)f=new l.ConstSymbIntroRef(b);else if(r instanceof l.ReservedVarIntro)f=new l.ReservedVarIntroRef(b);else return h.derr("Check this out"),null;f.setPropVal(g.SystPropNames.id_ref,r.oid)}else if(a.isConstantNode)f=new l.ConstSymbIntroRef(b),f.setPropVal(g.SystPropNames.id_ref,v[a.value]);else{if(a.isParenthesisNode)return d(a.content);h.derr("MathJS MathNode class not yet handled:",
a)}k&&f&&a.args.forEach(function(a){f.appendDetachedUnnamedChildren(d(a))});return f}h.assert_nt(a,b);p||n(b);return d(a)}var h=a(7),l=a(328),g=a(9),b=a(3),c=a(4),e=a(332),p=!1,t={"+":null,"*":null,"^":null,"/":null,"-":null},u={"<=":null,">=":null,"&gt;":null,"&lt;":null},v={0:null,1:null},y;d.mathnodeToSTNodeSubtree=f;window.testmathjs=function(a){return f(math.parse(a),b.STApp.the.main_display_wstdoc)};structure_together.mathtextToSTNodeSubtree=function(a,b){a=math.parse(a);window.mathjs_last_parsed_=
a;return f(a,b)}}]);
